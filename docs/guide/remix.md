---
sidebar_position: 2.3
title: –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ Remix
description: –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ Remix
keywords: [javascript, js, react.js, reactjs, react, remix, progressive enhancement single page apps, pespa, guide, —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ, –º–µ—Ç–∞-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫]
tags: [javascript, js, react.js, reactjs, react, remix, progressive enhancement single page apps, pespa, guide, —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ, –º–µ—Ç–∞-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫]
---

# Remix

> [Remix](https://remix.run/) - —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∏–µ–Ω—Ç-—Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –Ω–∞ JavaScript ([React](https://ru.reactjs.org/)) —Å–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π [TypeScript](https://www.typescriptlang.org/).

Remix –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ç–∞–∫ –Ω–∞–∑—ã–≤–∞–µ–º—ã–µ PESPA (Progressive Enhancement Single Page Apps - –æ–¥–Ω–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–≥–æ —É–ª—É—á—à–µ–Ω–∏—è). –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç —Å–ª–µ–¥—É—é—â–µ–µ:

- –ø–æ—á—Ç–∏ –≤–µ—Å—å –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è "–∂–∏–≤–µ—Ç" –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ;
- –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Å—Ç–∞–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º –¥–∞–∂–µ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ JS;
- JS –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–≥–æ —É–ª—É—á—à–µ–Ω–∏—è UX (User Experience - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç).

–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ PESPA –∏ –¥—Ä—É–≥–∏—Ö –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞—Ö –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –º–æ–∂–Ω–æ –ø–æ—á–∏—Ç–∞—Ç—å [–∑–¥–µ—Å—å](https://habr.com/ru/company/timeweb/blog/695798/).

## –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è / Routing

–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è (—Ä–æ—É—Ç–∏–Ω–≥) - —ç—Ç–æ, –ø–æ–∂–∞–ª—É–π, —Å–∞–º–∞—è –≤–∞–∂–Ω–∞—è –∫–æ–Ω—Ü–µ–ø—Ü–∏—è –≤ Remix. –í—Å–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –º–∞—Ä—à—Ä—É—Ç–æ–≤ (—Ä–æ—É—Ç–æ–≤): –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä, –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å –¥–æ–∫—É–º–µ–Ω—Ç–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ—á—Ç–∏ –≤—Å–µ—Ö –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

–ù–∞—á–Ω–µ–º —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ–Ω—è—Ç–∏–π:

- –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —Ä–æ—É—Ç—ã (nested routes) - —Å–≤—è–∑—å (map) —Ä–æ—É—Ç–æ–≤ —Å —Å–µ–≥–º–µ–Ω—Ç–∞–º–∏ URL –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ URL –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º –∏ –¥–∞–Ω–Ω—ã–º, –∏–∑–≤–µ—Å—Ç–Ω—ã–º –ø–µ—Ä–µ–¥ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º —Å—Ç—Ä–∞–Ω–∏—Ü—ã;
- URL - –ø–æ–ª–Ω—ã–π –ø—É—Ç—å –≤ –ø–æ–∏—Å–∫–æ–≤–æ–π —Å—Ç—Ä–æ–∫–µ –±—Ä–∞—É–∑–µ—Ä–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –û–¥–∏–Ω URL –º–æ–∂–µ—Ç —Å–æ–≤–ø–∞–¥–∞—Ç—å (—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å - match) —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Ä–æ—É—Ç–∞–º–∏. _–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ_: —Ä–æ—É—Ç –∏ URL - —Ä–∞–∑–Ω—ã–µ –≤–µ—â–∏ –≤ Remix;
- —Ä–æ—É—Ç (route) –∏–ª–∏ –º–æ–¥—É–ª—å —Ä–æ—É—Ç–∞ (route module) - –º–æ–¥—É–ª—å JS —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞–º–∏ (`loader`, `action`, `default function` (–∫–æ–º–ø–æ–Ω–µ–Ω—Ç) –∏ –¥—Ä.), –∫–æ—Ç–æ—Ä—ã–π —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–¥–Ω–æ–º—É –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º —Å–µ–≥–º–µ–Ω—Ç–∞–º URL. –ü–æ—Å–∫–æ–ª—å–∫—É —Ä–æ—É—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å–µ–≥–º–µ–Ω—Ç—É URL, –ø–æ –æ–¥–Ω–æ–º—É –ø—É—Ç–∏ –º–æ–≥—É—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–æ–¥—É–ª–µ–π. –ò–µ—Ä–∞—Ä—Ö–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å–µ–≥–º–µ–Ω—Ç–∞–º URL (–≤ –æ—Å–Ω–æ–≤–Ω–æ–º);
- –ø—É—Ç—å (path) –∏–ª–∏ –ø—É—Ç—å —Ä–æ—É—Ç–∞ (route path) - —Å–µ–≥–º–µ–Ω—Ç URL, –∫–æ—Ç–æ—Ä–æ–º—É —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å. –ü—É—Ç—å —Ä–æ—É—Ç–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –Ω–∞–∑–≤–∞–Ω–∏–µ–º —Ñ–∞–π–ª–∞ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `app/routes`;
- —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –º–∞–∫–µ—Ç (parent layout route) –∏–ª–∏ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π —Ä–æ—É—Ç (parent route) - –º–æ–¥—É–ª—å, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ–Ω–¥–µ—Ä–∏—Ç –º–∞–∫–µ—Ç –¥–ª—è –¥–æ—á–µ—Ä–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `Outlet`;
- –º–∞–∫–µ—Ç –±–µ–∑ –ø—É—Ç–∏ (pathless layout route) –∏–ª–∏ —Ä–æ—É—Ç –±–µ–∑ –ø—É—Ç–∏ (pathless route) - –º–æ–¥—É–ª—å, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –¥–æ–±–∞–≤–ª—è–µ—Ç —Å–µ–≥–º–µ–Ω—Ç—ã –∫ URL, –Ω–æ –¥–æ–±–∞–≤–ª—è–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤ –∏–µ—Ä–∞—Ä—Ö–∏—é UI (User Interface - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å) –ø—Ä–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–∏ –µ–≥–æ –¥–æ—á–µ—Ä–Ω–∏—Ö —Ä–æ—É—Ç–æ–≤;
- –¥–æ—á–µ—Ä–Ω–∏–π —Ä–æ—É—Ç (child route) - –º–æ–¥—É–ª—å, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ `Outlet` –ø—Ä–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–∏ –µ–≥–æ –ø—É—Ç–∏ —Å URL;
- –∏–Ω–¥–µ–∫—Å–Ω—ã–π —Ä–æ—É—Ç (index route) - –º–æ–¥—É–ª—å, –∫–æ—Ç–æ—Ä—ã–π –∏–º–µ–µ—Ç —Ç–∞–∫–æ–π –∂–µ –ø—É—Ç—å, –∫–∞–∫ –µ–≥–æ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π —Ä–æ—É—Ç, –Ω–æ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –≤ –∫–∞—á–µ—Å—Ç–≤–µ –¥–µ—Ñ–æ–ª—Ç–Ω–æ–≥–æ –¥–æ—á–µ—Ä–Ω–µ–≥–æ —Ä–æ—É—Ç–∞ –≤–Ω—É—Ç—Ä–∏ `Outlet`;
- –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Å–µ–≥–º–µ–Ω—Ç (dynamic segment) - —Å–µ–≥–º–µ–Ω—Ç –ø—É—Ç–∏ —Ä–æ—É—Ç–∞, –∏–∑–≤–ª–µ–∫–∞–µ–º—ã–π –∏–∑ URL –∏ –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–π –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, —Ç–∞–∫–æ–π –∫–∞–∫ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä (ID) –∑–∞–ø–∏—Å–∏ –∏–ª–∏ —Å–ª–∞–≥ (slug) –ø–æ—Å—Ç–∞;
- —Å–ø–ª–∞—Ç (splat) - –∑–∞–º—ã–∫–∞—é—â–∞—è –∑–≤–µ–∑–¥–æ—á–∫–∞ (trailing wildcard) –≤ –ø—É—Ç–∏ —Ä–æ—É—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –±–ª–∞–≥–æ–¥–∞—Ä—è —ç—Ç–æ–º—É —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å–æ –≤—Å–µ–º–∏ —Å–µ–≥–º–µ–Ω—Ç–∞–º–∏ URL (–≤–∫–ª—é—á–∞—è –ø–æ—Å–ª–µ–¥—É—é—â–∏–π `/`);
- –∞—É—Ç–ª–µ—Ç (outlet) - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –º–æ–¥—É–ª—è, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –¥–æ—á–µ—Ä–Ω–∏—Ö –º–æ–¥—É–ª–µ–π. –î—Ä—É–≥–∏–º–∏ —Å–ª–æ–≤–∞–º–∏, –∞—É—Ç–ª–µ—Ç –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ª–æ–∫–∞—Ü–∏—é –¥–æ—á–µ—Ä–Ω–∏—Ö —Ä–æ—É—Ç–æ–≤.

### –í–ª–æ–∂–µ–Ω–Ω—ã–π —Ä–æ—É—Ç–∏–Ω–≥

–í–ª–æ–∂–µ–Ω–Ω—ã–π —Ä–æ—É—Ç–∏–Ω–≥ - —ç—Ç–æ —Å–≤—è–∑—å –º–µ–∂–¥—É —Å–µ–≥–º–µ–Ω—Ç–∞–º–∏ URL –∏ –∏–µ—Ä–∞—Ä—Ö–∏–µ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –≤ UI. –°–µ–≥–º–µ–Ω—Ç—ã URL –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç:

- –º–∞–∫–µ—Ç—ã, —Ñ–æ—Ä–º–∏—Ä—É—é—â–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É;
- –∑–∞–≥—Ä—É–∑–∫—É JS-–∫–æ–¥–∞, –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ;
- –∑–∞–≥—Ä—É–∑–∫—É –¥–∞–Ω–Ω—ã—Ö, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ.

__–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–æ—É—Ç–æ–≤__

–†–æ—É—Ç—ã –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `app/routes`. –í–æ—Ç –∫–∞–∫ –º–æ–∂–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –∏–µ—Ä–∞—Ä—Ö–∏—è —Ä–æ—É—Ç–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

```
app
‚îú‚îÄ‚îÄ root.jsx
‚îî‚îÄ‚îÄ routes
    ‚îú‚îÄ‚îÄ accounts.jsx
    ‚îú‚îÄ‚îÄ dashboard.jsx
    ‚îú‚îÄ‚îÄ expenses.jsx
    ‚îú‚îÄ‚îÄ index.jsx
    ‚îú‚îÄ‚îÄ reports.jsx
    ‚îú‚îÄ‚îÄ sales
    ‚îÇ   ‚îú‚îÄ‚îÄ customers.jsx
    ‚îÇ   ‚îú‚îÄ‚îÄ deposits.jsx
    ‚îÇ   ‚îú‚îÄ‚îÄ index.jsx
    ‚îÇ   ‚îú‚îÄ‚îÄ invoices
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ $invoiceId.jsx
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.jsx
    ‚îÇ   ‚îú‚îÄ‚îÄ invoices.jsx
    ‚îÇ   ‚îî‚îÄ‚îÄ subscriptions.jsx
    ‚îî‚îÄ‚îÄ sales.jsx
```

- `root.jsx` - —ç—Ç–æ –∫–æ—Ä–Ω–µ–≤–æ–π —Ä–æ—É—Ç, —Å–ª—É–∂–∞—â–∏–π –º–∞–∫–µ—Ç–æ–º –¥–ª—è –≤—Å–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –î—Ä—É–≥–∏–µ —Ä–æ—É—Ç—ã —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –µ–≥–æ `Outlet`;
- _–æ–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ_ –Ω–∞ —Ñ–∞–π–ª—ã, –Ω–∞–∑–≤–∞–Ω–∏—è –∫–æ—Ç–æ—Ä—ã—Ö —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π, –≤ –∫–æ—Ç–æ—Ä—ã—Ö —ç—Ç–∏ —Ñ–∞–π–ª—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è. –≠—Ç–∏ —Ñ–∞–π–ª—ã –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω—ã –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –∏–µ—Ä–∞—Ä—Ö–∏–∏ –º–∞–∫–µ—Ç–æ–≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤. –ù–∞–ø—Ä–∏–º–µ—Ä, `sales.jsx` - —ç—Ç–æ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π —Ä–æ—É—Ç –¥–ª—è –≤—Å–µ—Ö –¥–æ—á–µ—Ä–Ω–∏—Ö —Ä–æ—É—Ç–æ–≤ –≤–Ω—É—Ç—Ä–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `app/routes/sales`. –ü—Ä–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–∏ —Å URL –ª—é–±–æ–≥–æ —Ä–æ—É—Ç–∞ –∏–∑ —ç—Ç–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, –æ–Ω –±—É–¥–µ—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ `Outlet` –º–æ–¥—É–ª—è `sales.jsx`;
- —Ä–æ—É—Ç `index.jsx` –±—É–¥–µ—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ `Outlet` –ø—Ä–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–∏ URL —Å –ø—É—Ç–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—É—Ç–∏ `example.com/sales` —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–æ—É—Ç `app/routes/sales/index.jsx`).

__–†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∏–µ—Ä–∞—Ä—Ö–∏–∏ –º–∞–∫–µ—Ç–∞ —Ä–æ—É—Ç–∞__

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ URL –∏–º–µ–µ—Ç –≤–∏–¥ `/sales/invoices/123`. –° —ç—Ç–∏–º URL –±—É–¥—É—Ç —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ —Ä–æ—É—Ç—ã:

- `root.jsx`;
- `routes/sales.jsx`;
- `routes/sales/invoices.jsx`;
- `routes/sales/invoices/$invoiceId.jsx`.

–ü—Ä–∏ –ø–æ—Å–µ—â–µ–Ω–∏–∏ —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º Remix –æ—Ç—Ä–µ–Ω–¥–µ—Ä–∏—Ç —Ç–∞–∫—É—é –∏–µ—Ä–∞—Ä—Ö–∏—é –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

```javascript
<Root>
  <Sales>
    <Invoices>
      <InvoiceId />
    </Invoices>
  </Sales>
</Root>
```

–ò–µ—Ä–∞—Ä—Ö–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∏–µ—Ä–∞—Ä—Ö–∏–∏ —Ñ–∞–π–ª–æ–≤ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `app/routes`:

```
app
‚îú‚îÄ‚îÄ root.jsx
‚îî‚îÄ‚îÄ routes
    ‚îú‚îÄ‚îÄ sales
    ‚îÇ   ‚îú‚îÄ‚îÄ invoices
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ $invoiceId.jsx
    ‚îÇ   ‚îî‚îÄ‚îÄ invoices.jsx
    ‚îú‚îÄ‚îÄ sales.jsx
    ‚îî‚îÄ‚îÄ accounts.jsx
```

–ò–µ—Ä–∞—Ä—Ö–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –¥–ª—è URL `/accounts` –±—É–¥–µ—Ç —Ç–∞–∫–æ–π:

```javascript
<Root>
  <Accounts />
</Root>
```

–î–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –¥–æ—á–µ—Ä–Ω–∏—Ö —Ä–æ—É—Ç–æ–≤ –≤–Ω—É—Ç—Ä–∏ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `Outlet`. `root.jsx` —Ä–µ–Ω–¥–µ—Ä–∏—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –º–∞–∫–µ—Ç, –±–æ–∫–æ–≤—É—é –ø–∞–Ω–µ–ª—å –∏ –∞—É—Ç–ª–µ—Ç –¥–ª—è –¥–æ—á–µ—Ä–Ω–∏—Ö —Ä–æ—É—Ç–æ–≤:

```javascript
import { Outlet } from "@remix-run/react";

export default function Root() {
  return (
    <Document>
      <Sidebar />
      {/* ! */}
      <Outlet />
    </Document>
  );
}
```

–í —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å, `sales.jsx` —Ä–µ–Ω–¥–µ—Ä–∏—Ç –∞—É—Ç–ª–µ—Ç –¥–ª—è –≤—Å–µ—Ö –µ–≥–æ –¥–æ—á–µ—Ä–Ω–∏—Ö —Ä–æ—É—Ç–æ–≤ (`app/routes/sales/*`):

```javascript
import { Outlet } from "@remix-run/react";

export default function Sales() {
  return (
    <div>
      <h1>Sales</h1>
      <SalesNav />
      {/* ! */}
      <Outlet />
    </div>
  );
}
```

__–ò–Ω–¥–µ–∫—Å–Ω—ã–µ —Ä–æ—É—Ç—ã__

–ò–Ω–¥–µ–∫—Å–Ω—ã–π —Ä–æ—É—Ç - —ç—Ç–æ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π –¥–æ—á–µ—Ä–Ω–∏–π —Ä–æ—É—Ç. –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –¥—Ä—É–≥–∏—Ö –¥–æ—á–µ—Ä–Ω–∏—Ö —Ä–æ—É—Ç–æ–≤ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –∏–Ω–¥–µ–∫—Å–Ω—ã–π –º–æ–¥—É–ª—å. –ù–∞–ø—Ä–∏–º–µ—Ä, URL `exmaple.com/sales` —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∏–Ω–¥–µ–∫—Å–Ω—ã–π —Ä–æ—É—Ç `app/routes/sales/index.jsx`.

–ò–Ω–¥–µ–∫—Å–Ω—ã–µ —Ä–æ—É—Ç—ã –Ω–µ –¥–æ–ª–∂–Ω—ã —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å –¥–æ—á–µ—Ä–Ω–∏–µ –º–æ–¥—É–ª–∏, –æ–Ω–∏ —è–≤–ª—è—é—Ç—Å—è —Ç—É–ø–∏–∫–æ–º –¥–ª—è URL. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤–º–µ—Å—Ç–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –≥–ª–æ–±–∞–ª—å–Ω–æ–π –ø–∞–Ω–µ–ª–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –≤ `app/routes/index.jsx`, –µ–µ —Å–ª–µ–¥—É–µ—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å –≤ `app/root.jsx`.

__–ü–∞—Ä–∞–º–µ—Ç—Ä —Å—Ç—Ä–æ–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ `?index`__

–î–∞–Ω–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–ª–∏—á–∞—Ç—å –∏–Ω–¥–µ–∫—Å–Ω—ã–µ —Ä–æ—É—Ç—ã –æ—Ç –∏—Ö —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –º–æ–¥—É–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–Ω–¥–µ—Ä—è—Ç –º–∞–∫–µ—Ç—ã. –ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ —É –Ω–∞—Å –∏–º–µ–µ—Ç—Å—è —Ç–∞–∫–∞—è –∏–µ—Ä–∞—Ä—Ö–∏—è —Ä–æ—É—Ç–æ–≤:

```
‚îî‚îÄ‚îÄ app
    ‚îú‚îÄ‚îÄ root.jsx
    ‚îî‚îÄ‚îÄ routes
        ‚îú‚îÄ‚îÄ sales
        ‚îÇ   ‚îú‚îÄ‚îÄ invoices
        ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.jsx
        ‚îÇ   ‚îî‚îÄ‚îÄ invoices.jsx
```

–ö–∞–∫–æ–º—É —Ä–æ—É—Ç—É –±—É–¥–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –ø—É—Ç—å `/sales/invoices`? –†–æ—É—Ç—É `/sales/invoices.jsx` –∏–ª–∏ —Ä–æ—É—Ç—É `/sales/invoices/index.jsx`? –û—Ç–≤–µ—Ç: —Ä–æ—É—Ç—É `/sales/invoices.jsx`. –î–ª—è —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è —Å —Ä–æ—É—Ç–æ–º `/sales/invoices/index.jsx` –ø—É—Ç—å –¥–æ–ª–∂–µ–Ω –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º —Å—Ç—Ä–æ–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ `?index`:

```
‚îî‚îÄ‚îÄ app
    ‚îú‚îÄ‚îÄ root.jsx
    ‚îî‚îÄ‚îÄ routes
        ‚îú‚îÄ‚îÄ sales
        ‚îÇ   ‚îú‚îÄ‚îÄ invoices
        ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.jsx   <-- /sales/invoices?index
        ‚îÇ   ‚îî‚îÄ‚îÄ invoices.jsx    <-- /sales/invoices
```

–í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–ª—É—á–∞—è—Ö –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ `?index` –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–æ—Ä–º—ã –≤ –∏–Ω–¥–µ–∫—Å–Ω–æ–º –∏–ª–∏ –µ–≥–æ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–º —Ä–æ—É—Ç–µ), –≤ –¥—Ä—É–≥–∏—Ö - —ç—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `fetcher.submit()` –∏–ª–∏ `fetcher.load()`).

### –í–ª–æ–∂–µ–Ω–Ω—ã–µ URL –±–µ–∑ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –º–∞–∫–µ—Ç–æ–≤

–ò–Ω–æ–≥–¥–∞ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –¥–æ–±–∞–≤–∏—Ç—å –≤–ª–æ–∂–µ–Ω–Ω—ã–π URL –±–µ–∑ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –≤ –∏–µ—Ä–∞—Ä—Ö–∏—é UI. –†–∞—Å—Å–º–æ—Ç—Ä–∏–º —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å—á–µ—Ç–∞:

- –º—ã —Ö–æ—Ç–∏–º, —á—Ç–æ–±—ã URL –∏–º–µ–ª –≤–∏–¥ `/sales/invoices/$invoiceId/edit`;
- –º—ã —Ö–æ—Ç–∏–º, —á—Ç–æ–±—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –±—ã–ª –ø—Ä—è–º—ã–º –ø–æ—Ç–æ–º–∫–æ–º –∫–æ—Ä–Ω–µ–≤–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.

–î—Ä—É–≥–∏–º–∏ —Å–ª–æ–≤–∞–º–∏, –º—ã –Ω–µ —Ö–æ—Ç–∏–º —ç—Ç–æ–≥–æ:

```javascript
<Root>
  <Sales>
    <Invoices>
      <InvoiceId>
        <EditInvoice />
      </InvoiceId>
    </Invoices>
  </Sales>
</Root>
```

–ú—ã —Ö–æ—Ç–∏–º —ç—Ç–æ:

```javascript
<Root>
  <EditInvoice />
</Root>
```

–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–ª–æ—Å–∫–æ–π –∏–µ—Ä–∞—Ä—Ö–∏–∏ UI –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–ª–æ—Å–∫–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `.` –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏ —Ñ–∞–π–ª–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å —Å–µ–≥–º–µ–Ω—Ç—ã URL –±–µ–∑ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –≤ –∏–µ—Ä–∞—Ä—Ö–∏—é UI:

```
‚îî‚îÄ‚îÄ app
    ‚îú‚îÄ‚îÄ root.jsx
    ‚îî‚îÄ‚îÄ routes
        ‚îú‚îÄ‚îÄ sales
        ‚îÇ   ‚îú‚îÄ‚îÄ invoices
        ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ $invoiceId.jsx
        ‚îÇ   ‚îî‚îÄ‚îÄ invoices.jsx
        ‚îú‚îÄ‚îÄ sales.invoices.$invoiceId.edit.jsx üëà –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –≤–ª–æ–∂–µ–Ω–Ω—ã–º
        ‚îî‚îÄ‚îÄ sales.jsx
```

–ü—É—Ç–∏ `example.com/sales/invoices/123/edit` –±—É–¥–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —Ç–∞–∫–∞—è –∏–µ—Ä–∞—Ä—Ö–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

```javascript
<Root>
  <EditInvoice />
</Root>
```

–ê –ø—É—Ç–∏ `example.com/sales/invoices/123` (–±–µ–∑ `/edit`) —Ç–∞–∫–∞—è:

```javascript
<Root>
  <Sales>
    <Invoices>
      <InvoiceId />
    </Invoices>
  </Sales>
</Root>
```

### –ú–∞–∫–µ—Ç—ã –±–µ–∑ –ø—É—Ç–∏

–ò–Ω–æ–≥–¥–∞, –Ω–∞–æ–±–æ—Ä–æ—Ç, –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤ –∏–µ—Ä–∞—Ä—Ö–∏—é UI –±–µ–∑ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–µ–≥–º–µ–Ω—Ç–æ–≤ –≤ URL. –î–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –º–∞–∫–µ—Ç—ã –±–µ–∑ –ø—É—Ç–∏.

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ –º—ã —Ö–æ—Ç–∏–º –ø–æ–ª—É—á–∏—Ç—å —Ç–∞–∫—É—é –∏–µ—Ä–∞—Ä—Ö–∏—é UI:

```javascript
<Root>
  <Auth>
    <Login />
  </Auth>
</Root>
```

–í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –∏–µ—Ä–∞—Ä—Ö–∏—è —Ä–æ—É—Ç–æ–≤ –º–æ–∂–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:

```
app
‚îú‚îÄ‚îÄ root.jsx
‚îî‚îÄ‚îÄ routes
    ‚îú‚îÄ‚îÄ auth
    ‚îÇ   ‚îú‚îÄ‚îÄ login.jsx
    ‚îÇ   ‚îú‚îÄ‚îÄ logout.jsx
    ‚îÇ   ‚îî‚îÄ‚îÄ signup.jsx
    ‚îî‚îÄ‚îÄ auth.jsx
```

–£ –Ω–∞—Å –∏–º–µ–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–µ—Ä–∞—Ä—Ö–∏—è UI, –Ω–æ, –≤–æ–∑–º–æ–∂–Ω–æ, –º—ã –Ω–µ —Ö–æ—Ç–∏–º, —á—Ç–æ–±—ã –∫–∞–∂–¥—ã–π URL —Å–æ–¥–µ—Ä–∂–∞–ª –ø—Ä–µ—Ñ–∏–∫—Å `/auth`, –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–º–µ—Å—Ç–æ `/auth/login` –º—ã —Ö–æ—Ç–∏–º –≤–∏–¥–µ—Ç—å –ø—Ä–æ—Å—Ç–æ `/login`.

–î–ª—è —É–¥–∞–ª–µ–Ω–∏—è –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ URL –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ UI –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫ –Ω–∞–∑–≤–∞–Ω–∏—è–º —Ä–æ—É—Ç–∞ –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ 2 –Ω–∏–∂–Ω–∏—Ö –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏—è:

```
app
‚îú‚îÄ‚îÄ root.jsx
‚îî‚îÄ‚îÄ routes
    ‚îú‚îÄ‚îÄ __auth
    ‚îÇ   ‚îú‚îÄ‚îÄ login.jsx
    ‚îÇ   ‚îú‚îÄ‚îÄ logout.jsx
    ‚îÇ   ‚îî‚îÄ‚îÄ signup.jsx
    ‚îî‚îÄ‚îÄ __auth.jsx
```

### –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Å–µ–≥–º–µ–Ω—Ç—ã

–ï—Å–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–µ—Ñ–∏–∫—Å `$`, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∞—è —á–∞—Å—Ç—å –ø—É—Ç–∏ —Ä–æ—É—Ç–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º —Å–µ–≥–º–µ–Ω—Ç–æ–º. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ª—é–±–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ URL –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ —Å–µ–≥–º–µ–Ω—Ç–∞ –±—É–¥–µ—Ç –∏–∑–≤–ª–µ–∫–∞—Ç—å—Å—è –∏–∑ URL –∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å—Å—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º —Ä–æ—É—Ç `$invoiceId.jsx`. –ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –ø–æ –∞–¥—Ä–µ—Å—É `/sales/invoices/123` —Å—Ç—Ä–æ–∫–∞ `123` –±—É–¥–µ—Ç –∏–∑–≤–ª–µ—á–µ–Ω–∞ –∏–∑ URL –∏ –ø–µ—Ä–µ–¥–∞–Ω–∞ –≤ `loader`, `action` –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤ –≤–∏–¥–µ –æ–¥–Ω–æ–∏–º–µ–Ω–Ω–æ–≥–æ —Å–≤–æ–π—Å—Ç–≤–∞ –æ–±—ä–µ–∫—Ç–∞ `params`:

```javascript
import { useParams } from "@remix-run/react";

export async function loader({ params }) {
  const id = params.invoiceId;
}

export async function action({ params }) {
  const id = params.invoiceId;
}

export default function Invoice() {
  const params = useParams();
  const id = params.invoiceId;
}
```

–†–æ—É—Ç—ã –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–≥—É—Ç –±—ã—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è–º–∏.

```
app
‚îú‚îÄ‚îÄ root.jsx
‚îî‚îÄ‚îÄ routes
    ‚îú‚îÄ‚îÄ projects
    ‚îÇ   ‚îú‚îÄ‚îÄ $projectId
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ $taskId.jsx
    ‚îÇ   ‚îî‚îÄ‚îÄ $projectId.jsx
    ‚îî‚îÄ‚îÄ projects.jsx
```

–í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –ø–æ –∞–¥—Ä–µ—Å—É `/projects/123/abc` –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –±—É–¥—É —Å–ª–µ–¥—É—é—â–∏–º–∏:

```
params.projectId; // "123"
params.taskId; // "abc"
```

### –°–ø–ª–∞—Ç—ã

–ï—Å–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ `$` (`$.jsx`), —Ç–æ —Ç–∞–∫–æ–π —Ä–æ—É—Ç —è–≤–ª—è–µ—Ç—Å—è —Å–ø–ª–∞—Ç–æ–º. –° —Ç–∞–∫–∏–º —Ä–æ—É—Ç–æ–º —Å–æ–≤–ø–∞–¥–∞–µ—Ç –ª—é–±–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ URL –¥–ª—è –æ—Å—Ç–∞–≤—à–µ–π—Å—è —á–∞—Å—Ç–∏ URL –¥–æ –∫–æ–Ω—Ü–∞. –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Å–µ–≥–º–µ–Ω—Ç–æ–≤, —Å–ø–ª–∞—Ç –Ω–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ —Å–ª–µ–¥—É—é—â–µ–≥–æ `/`.

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º —Ç–∞–∫—É—é –∏–µ—Ä–∞—Ä—Ö–∏—é —Ä–æ—É—Ç–æ–≤:

```
app
‚îú‚îÄ‚îÄ root.jsx
‚îî‚îÄ‚îÄ routes
    ‚îú‚îÄ‚îÄ files
    ‚îÇ   ‚îú‚îÄ‚îÄ $.jsx
    ‚îÇ   ‚îú‚îÄ‚îÄ mine.jsx
    ‚îÇ   ‚îî‚îÄ‚îÄ recent.jsx
    ‚îî‚îÄ‚îÄ files.jsx
```

–ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –ø–æ –∞–¥—Ä–µ—Å—É `example.com/files/images/work/flyer.jpg`, —Å–µ–≥–º–µ–Ω—Ç—ã URL, –Ω–∞—á–∏–Ω–∞—è —Å `files` –±—É–¥—É—Ç –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω—ã —Å–ø–ª–∞—Ç–æ–º –∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ —á–µ—Ä–µ–∑ `params["*"]`:

```javascript
export async function loader({ params }) {
  params["*"]; // "images/work/flyer.jpg"
}
```

–°–ø–ª–∞—Ç—ã –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü 404 —Å –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ `loader` (–ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∫–∞—Å—Ç–æ–º–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã 404 —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –∫–æ—Ä–Ω–µ–≤–æ–π `CatchBoundary`, –Ω–µ –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –∑–∞–≥—Ä—É–∂–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è —Å —Ä–æ—É—Ç–∞–º–∏).

## –†–µ—Å—É—Ä—Å–Ω—ã–µ —Ä–æ—É—Ç—ã / Resource Routes

–†–µ—Å—É—Ä—Å–Ω—ã–µ —Ä–æ—É—Ç—ã –Ω–µ —è–≤–ª—è—é—Ç—Å—è —á–∞—Å—Ç—å—é UI, –Ω–æ —è–≤–ª—è—é—Ç—Å—è —á–∞—Å—Ç—å—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –û–Ω–∏ –º–æ–≥—É—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –ª—é–±—ã–µ –æ—Ç–≤–µ—Ç—ã.

–ë–æ–ª—å—à–∞—è —á–∞—Å—Ç—å —Ä–æ—É—Ç–æ–≤ –≤ Remix —è–≤–ª—è–µ—Ç—Å—è —Ä–æ—É—Ç–∞–º–∏ UI, —Ç.–µ. —Ä–æ—É—Ç–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–Ω–¥–µ—Ä—è—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã. –ù–æ —Ä–æ—É—Ç –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–æ–ª–∂–µ–Ω —ç—Ç–æ –¥–µ–ª–∞—Ç—å. –†–æ—É—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É—é—Ç –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, —è–≤–ª—è—é—Ç—Å—è —Ä–µ—Å—É—Ä—Å–Ω—ã–º–∏. –°–ª—É—á–∞–∏ –∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

- JSON API –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–æ–¥ —Å Remix UI;
- –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è PDF;
- –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∫–æ–Ω–æ–∫ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–π –¥–ª—è –ø–æ—Å—Ç–æ–≤ –±–ª–æ–≥–∞ –∏–ª–∏ –¥—Ä—É–≥–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü;
- –≤–µ–±-—Ö—É–∫–∏ –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤ –≤—Ä–æ–¥–µ Stripe –∏–ª–∏ GitHub;
- CSS-—Ñ–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Ä–µ–Ω–¥–µ—Ä—è—Ç –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ –¥–ª—è —Ç–µ–º—ã, –≤—ã–±—Ä–∞–Ω–Ω–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º.

### –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–Ω–æ–≥–æ —Ä–æ—É—Ç–∞

–†–µ—Å—É—Ä—Å–Ω—ã–π —Ä–æ—É—Ç –¥–æ–ª–∂–µ–Ω —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–∏–±–æ `loader` (–¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ GET-–∑–∞–ø—Ä–æ—Å–æ–≤), –ª–∏–±–æ `action` (–¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥—Ä—É–≥–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤).

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º —Ä–æ—É—Ç –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –æ—Ç—á–µ—Ç–∞ (–≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Å—Å—ã–ª–∫—É):

```javascript
// app/routes/reports/$id.tsx
export async function loader({ params }: LoaderArgs) {
  return json(await getReport(params.id));
}

export default function Report() {
  const report = useLoaderData<typeof loader>();

  return (
    <div>
      <h1>{report.name}</h1>
      <Link to="pdf" reloadDocument>
        PDF
      </Link>
      {/* ... */}
    </div>
  );
}
```

–°—Å—ã–ª–∫–∞ –≤–µ–¥–µ—Ç –Ω–∞ PDF-–≤–µ—Ä—Å–∏—é —Å—Ç—Ä–∞–Ω–∏—Ü—ã. –î–ª—è –µ–µ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ä–µ—Å—É—Ä—Å–Ω—ã–π —Ä–æ—É—Ç:

```javascript
// app/routes/reports/$id/pdf.tsx
export async function loader({ params }: LoaderArgs) {
  const report = await getReport(params.id);

  const pdf = await generateReportPDF(report);

  return new Response(pdf, {
    status: 200,
    headers: {
      "Content-Type": "application/pdf",
    },
  });
}
```

–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –Ω–∞ —Å—Å—ã–ª–∫—É, –æ–Ω –ø–æ–ª—É—á–∞–µ—Ç –æ—Ç—á–µ—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ PDF.

_–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ_: –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ä–µ—Å—É—Ä—Å–Ω—ã–π —Ä–æ—É—Ç —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–∏–±–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `Link` —Å –∞—Ç—Ä–∏–±—É—Ç–æ–º `reloadDocument`, –ª–∏–±–æ HTML-—ç–ª–µ–º–µ–Ω—Ç `a`. `Link` –±–µ–∑ `reloadDocument` —Å—á–∏—Ç–∞–µ—Ç—Å—è —Å—Å—ã–ª–∫–æ–π –Ω–∞ —Ä–æ—É—Ç UI.

–î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ –∫ –ø—É—Ç–∏ —Ä–µ—Å—É—Ä—Å–Ω–æ–≥–æ —Ä–æ—É—Ç–∞, –º–æ–∂–Ω–æ –æ–±–µ—Ä–Ω—É—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∏–ª–∏ `.` –≤ `[]`:

```bash
# /reports/123/pdf
app/routes/reports/$id/pdf.ts

# /reports/123.pdf
app/routes/reports/$id[.pdf].ts

# /reports/123.pdf
app/routes/reports/$id[.]pdf.ts
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤

–î–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ GET-–∑–∞–ø—Ä–æ—Å–æ–≤ –∏–∑ —Ä–µ—Å—É—Ä—Å–Ω–æ–≥–æ —Ä–æ—É—Ç–∞ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è `loader`:

```javascript
import type { LoaderArgs } from "@remix-run/node";
import { json } from "@remix-run/node";

export const loader = async ({ request }: LoaderArgs) => {
  return json({ success: true }, 200);
};
```

–î–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥—Ä—É–≥–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∏–∑ —Ä–µ—Å—É—Ä—Å–Ω–æ–≥–æ —Ä–æ—É—Ç–∞ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è `action`:

```javascript
import type { ActionArgs } from "@remix-run/node";

export const action = async ({ request }: ActionArgs) => {
  switch (request.method) {
    case "POST": {
      // ...
    }
    case "PUT": {
      // ...
    }
    case "PATCH": {
      // ...
    }
    case "DELETE": {
      // ...
    }
    default: {
      throw new Response("–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –º–µ—Ç–æ–¥", {
        status: 400
      })
    }
  }
};
```

### –í–µ–±-—Ö—É–∫–∏

–ü—Ä–∏–º–µ—Ä –≤–µ–±-—Ö—É–∫–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –∫–æ–º–º–∏—Ç–∞ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ GitHub:

```javascript
import type { ActionArgs } from "@remix-run/node";
import { json } from "@remix-run/node";
import crypto from "crypto";

export const action = async ({ request }: ActionArgs) => {
  if (request.method !== "POST") {
    return json({ message: "–ú–µ—Ç–æ–¥ –∑–∞–ø—Ä–µ—â–µ–Ω" }, 405);
  }

  const payload = await request.json();

  /* –≤–∞–ª–∏–¥–∏—Ä—É–µ–º –≤–µ–±-—Ö—É–∫ */
  const signature = request.headers.get(
    "X-Hub-Signature-256"
  );
  const generatedSignature = `sha256=${crypto
    .createHmac("sha256", process.env.GITHUB_WEBHOOK_SECRET)
    .update(JSON.stringify(payload))
    .digest("hex")}`;

  if (signature !== generatedSignature) {
    return json({ message: "Signature mismatch" }, 401);
  }

  /* –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –≤–µ–±-—Ö—É–∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–º–µ—â–∞–µ–º —Ñ–æ–Ω–æ–≤—É—é –∑–∞–¥–∞—á—É –≤ –æ—á–µ—Ä–µ–¥—å) */

  return json({ success: true }, 200);
};
```

## –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ä–æ—É—Ç–æ–≤ / API Routes

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º —Ç–∞–∫–æ–π —Ä–æ—É—Ç:

```javascript
// routes/teams.tsx
export async function loader() {
  return json(await getTeams());
}

export default function Teams() {
  return (
    <TeamsView teams={useLoaderData<typeof loader>()} />
  );
}
```

–ü—Ä–∏ –∫–ª–∏–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –ø–æ `<Link to="/teams" />` Remix –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —É —Å–µ—Ä–≤–µ—Ä–∞ –≤ `loader` –∏ —Ä–µ–Ω–¥–µ—Ä–∏—Ç –º–æ–¥—É–ª—å. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –Ω–∞–º –Ω–µ –Ω—É–∂–µ–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ä–æ—É—Ç –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å API.

–ß—Ç–æ –µ—Å–ª–∏ –º—ã —Ö–æ—Ç–∏–º –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ `loader` –±–µ–∑ —É—á–∞—Å—Ç–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è? –•–æ—Ä–æ—à–∏–º –ø—Ä–∏–º–µ—Ä–æ–º —Ç–∞–∫–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏ —è–≤–ª—è–µ—Ç—Å—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç Combobox, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–ø–∏—Å–∏ –∏–∑ –ë–î –∏ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.

–î–ª—è —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ö—É–∫ `useFetcher`.

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ —É –Ω–∞—Å –µ—Å—Ç—å —Ç–∞–∫–æ–π —Ä–æ—É—Ç –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ–∏—Å–∫–∞:

```javascript
// routes/city-search.tsx
export async function loader({ request }: LoaderArgs) {
  const url = new URL(request.url);

  return json(
    await searchCities(url.searchParams.get("q"))
  );
}
```

–í—ã–∑—ã–≤–∞–µ–º `useFetcher()` –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ:

```javascript
function CitySearchCombobox() {
  const cities = useFetcher();

  return (
    <cities.Form method="get" action="/city-search">
      <Combobox aria-label="Cities">
        <div>
          <ComboboxInput
            name="q"
            onChange={(event) =>
              cities.submit(event.target.form)
            }
          />
          {cities.state === "submitting" ? (
            <Spinner />
          ) : null}
        </div>

        {cities.data ? (
          <ComboboxPopover className="shadow-popup">
            {cities.data.error ? (
              <p>–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≥–æ—Ä–æ–¥–æ–≤</p>
            ) : cities.data.length ? (
              <ComboboxList>
                {cities.data.map((city) => (
                  <ComboboxOption
                    key={city.id}
                    value={city.name}
                  />
                ))}
              </ComboboxList>
            ) : (
              <span>–ü–æ–¥—Ö–æ–¥—è—â–∏—Ö –≥–æ—Ä–æ–¥–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</span>
            )}
          </ComboboxPopover>
        ) : null}
      </Combobox>
    </cities.Form>
  );
}
```

## –ë—ç–∫–µ–Ω–¥ –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ / Backend for frontend

–ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ç–æ, —á—Ç–æ Remix –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Ñ—É–ª–ª—Å—Ç–µ–∫-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –æ–Ω –æ—Ç–ª–∏—á–Ω–æ –≤–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É "–ë—ç–∫–µ–Ω–¥ –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞". –≠—Ç–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Remix –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–∞ –º–µ–∂–¥—É UI –∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Å–µ—Ä–≤–µ—Ä–Ω—ã–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏.

–ü–æ—Å–∫–æ–ª—å–∫—É Remix "–ø–æ–ª–∏—Ñ–∏–ª–ª–∏—Ç" Web Fetch API, –º—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `fetch` –ø—Ä—è–º–æ –≤ `loader` –∏ `action` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞:

```javascript
import type { LoaderArgs } from "@remix-run/node";
import { json } from "@remix-run/node";
import escapeHtml from "escape-html";

export async function loader({ request }: LoaderArgs) {
  const apiUrl = "http://api.example.com/some-data.json";

  const res = await fetch(apiUrl, {
    headers: {
      Authorization: `Bearer ${process.env.API_TOKEN}`,
    },
  });

  const data = await res.json();

  const prunedData = data.map((record) => {
    return {
      id: record.id,
      title: record.title,
      formattedBody: escapeHtml(record.content),
    };
  });

  return json(prunedData);
}
```

–¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –ø–æ–∑–≤–æ–ª—è–µ—Ç:

- —É–ø—Ä–æ—Å—Ç–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å–æ —Å—Ç–æ—Ä–æ–Ω–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏, –∞ —Ç–∞–∫–∂–µ —Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ–∫–µ–Ω—ã –∏ —Å–µ–∫—Ä–µ—Ç—ã –≤–Ω–µ —Å–±–æ—Ä–∫–∏ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞;
- —Å–æ–∫—Ä–∞—Ç–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã—Ö –ø–æ —Å–µ—Ç–∏, —á—Ç–æ –º–æ–∂–µ—Ç —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ –ø–æ–≤—ã—Å–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è;
- –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä, —á—Ç–æ —Ç–∞–∫–∂–µ —Ö–æ—Ä–æ—à–æ –≤–ª–∏—è–µ—Ç –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

## –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö / Data Loading

–û–¥–Ω–∏–º –∏–∑ –≥–ª–∞–≤–Ω—ã—Ö –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤ Remix —è–≤–ª—è–µ—Ç—Å—è —É–ø—Ä–æ—â–µ–Ω–∏–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö. Remix –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

- —Ä–µ–Ω–¥–µ—Ä–∏—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ;
- —è–≤–ª—è–µ—Ç—Å—è —É—Å—Ç–æ–π—á–∏–≤—ã–º –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º —Å–µ—Ç–µ–≤—ã—Ö —É—Å–ª–æ–≤–∏–π;
- –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–µ –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã;
- –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ, JS-–º–æ–¥—É–ª–∏, CSS –∏ –¥—Ä—É–≥–∏–µ —Ä–µ—Å—É—Ä—Å—ã –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ —Å –æ–¥–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–∞ –¥—Ä—É–≥—É—é. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å –≤–æ–¥–æ–ø–∞–¥–æ–≤ (waterfalls) —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥+–ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –±–æ–ª–µ–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ–º—É UI;
- –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –º–µ–∂–¥—É –¥–∞–Ω–Ω—ã–º–∏ –≤ UI –∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø—É—Ç–µ–º –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ `action`;
- –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏;
- –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ –æ—à–∏–±–∫–∏ —Å –ø–æ–º–æ—â—å—é –ø—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª–µ–π (error boundaries);
- –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ö–æ—Ä–æ—à–∏–π UX –¥–ª—è "–ù–µ –Ω–∞–π–¥–µ–Ω–æ" –∏ "–ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω" —Å –ø–æ–º–æ—â—å—é –ø–µ—Ä–µ—Ö–≤–∞—Ç—á–∏–∫–æ–≤ (catch boundaries).

### –û—Å–Ω–æ–≤—ã

–ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –º–æ–∂–µ—Ç —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏ —Ñ—É–Ω–∫—Ü–∏—é `loader`. –•—É–∫ `useLoaderData` –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ `loader` –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ:

```javascript
import { json } from "@remix-run/node";
import { useLoaderData } from "@remix-run/react";

export const loader = async () => {
  return json([
    { id: "1", name: "Pants" },
    { id: "2", name: "Jacket" },
  ]);
};

export default function Products() {
  const products = useLoaderData<typeof loader>();

  return (
    <div>
      <h1>–°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤</h1>
      {products.map((product) => (
        <div key={product.id}>{product.name}</div>
      ))}
    </div>
  );
}
```

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –∫–∞–∫ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, —Ç–∞–∫ –∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ. `loader` –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –º–∞—Å—Å–∏–≤ —Ç–æ–≤–∞—Ä–æ–≤ –Ω–µ –≤–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Å–±–æ—Ä–∫—É –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞. –≠—Ç–æ —Ç–∞–∫–∂–µ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –º—ã –º–æ–∂–µ–º –±–µ–∑–æ–ø–∞—Å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ API –∏ SDK –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–ª–∞—Ç–µ–∂–µ–π, CMS –∏ —Ç.–¥.

–ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ –º–æ–¥—É–ª–∏ –≤–∫–ª—é—á–∞—é—Ç—Å—è –≤ –∫–ª–∏–µ–Ω—Ç—Å–∫—É—é —Å–±–æ—Ä–∫—É, –∏–º–ø–æ—Ä—Ç —ç—Ç–∏—Ö –º–æ–¥—É–ª–µ–π —Å–ª–µ–¥—É–µ—Ç –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –≤ —Ñ–∞–π–ª —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º, —Å–æ–¥–µ—Ä–∂–∞—â–∏–º —Å—É—Ñ—Ñ–∏–∫—Å `.server.ts` (`{something}.server.ts`).

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–æ—É—Ç–∞

–ö–æ–≥–¥–∞ –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏ —Ñ–∞–π–ª–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è —Å–∏–º–≤–æ–ª `$`, –Ω–∞–ø—Ä–∏–º–µ—Ä, `routes/users/$userId.tsx` –∏–ª–∏ `routes/users/$userId/projects/$projectId.tsx`, –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Å–µ–≥–º–µ–Ω—Ç—ã (–Ω–∞—á–∏–Ω–∞—é—â–∏–µ—Å—è —Å `$`) –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –∏–∑ URL –∏ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ `loader` –≤ –∫–∞—á–µ—Å—Ç–≤–µ –æ–±—ä–µ–∫—Ç–∞ `params`:

```javascript
import type { LoaderArgs } from "@remix-run/node";

export const loader = async ({ params }: LoaderArgs) => {
  console.log(params.userId);
  console.log(params.projectId);
};
```

–≠—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –ø–æ–∏—Å–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö:

```javascript
import type { LoaderArgs } from "@remix-run/node";
import { json } from "@remix-run/node";

export const loader = async ({ params }: LoaderArgs) => {
  return json(
    await fakeDb.project.findMany({
      where: {
        userId: params.userId,
        projectId: params.projectId,
      },
    })
  );
};
```

__–¢–∏–ø—ã –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤__

–ü–æ—Å–∫–æ–ª—å–∫—É –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–æ–¥–µ—Ä–∂–∞—Ç—Å—è –≤ URL, –∞ –Ω–µ –≤ –∏—Å—Ö–æ–¥–Ω–æ–º –∫–æ–¥–µ, –º—ã –Ω–µ –º–æ–∂–µ–º –±—ã—Ç—å —É–≤–µ—Ä–µ–Ω—ã –≤ —Ç–æ–º, —á—Ç–æ –æ–Ω–∏ –≤—Å–µ–≥–¥–∞ –±—É–¥—É—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã. –ü–æ—ç—Ç–æ–º—É —Ç–∏–ø–æ–º –∫–ª—é—á–µ–π –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —è–≤–ª—è–µ—Ç—Å—è `string | undefined`. –•–æ—Ä–æ—à–µ–π –ø—Ä–∞–∫—Ç–∏–∫–æ–π —è–≤–ª—è–µ—Ç—Å—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø–µ—Ä–µ–¥ –∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Å –ø–æ–º–æ—â—å—é `invariant`:

```javascript
import type { LoaderArgs } from "@remix-run/node";
import invariant from "tiny-invariant";

export const loader = async ({ params }: LoaderArgs) => {
  invariant(params.userId, "–û–∂–∏–¥–∞–µ—Ç—Å—è params.userId");
  invariant(params.projectId, "–û–∂–∏–¥–∞–µ—Ç—Å—è params.projectId");

  params.projectId; // <-- TS —Ç–µ–ø–µ—Ä—å –∑–Ω–∞–µ—Ç, —á—Ç–æ —Ç–∏–ø–æ–º `projectId` —è–≤–ª—è–µ—Ç—Å—è `string`
};
```

–î–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–∞–∫–∏—Ö –∏—Å–∫–ª—é—á–µ–Ω–∏–π –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª–∏ (error boundaries).

### –í–Ω–µ—à–Ω–∏–µ API

Remix –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–∏—Ñ–∏–ª–ª –¥–ª—è `fetch` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, —á—Ç–æ –æ–±–ª–µ–≥—á–∞–µ—Ç –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö JSON API. –í–º–µ—Å—Ç–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º, –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫, —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –≥–æ–Ω–∫–æ–π —É—Å–ª–æ–≤–∏–π (race conditions) –∏ —Ç.–ø., –º—ã –ø—Ä–æ—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –≤ `loader` (–Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ), –∞ Remix –¥–µ–ª–∞–µ—Ç –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω–æ–µ:

```javascript
import { json } from "@remix-run/node";
import { useLoaderData } from "@remix-run/react";

export async function loader() {
  const res = await fetch("https://api.github.com/gists");

  return json(await res.json());
}

export default function GistsRoute() {
  const gists = useLoaderData<typeof loader>();

  return (
    <ul>
      {gists.map((gist) => (
        <li key={gist.id}>
          <a href={gist.html_url}>{gist.id}</a>
        </li>
      ))}
    </ul>
  );
}
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–ü–æ—Å–∫–æ–ª—å–∫—É Remix –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –º—ã –º–æ–∂–µ–º –Ω–∞–ø—Ä—è–º—É—é –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ –ë–î –≤ –º–æ–¥—É–ª—è—Ö. –ü—Ä–∏–º–µ—Ä –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Postgres —Å –ø–æ–º–æ—â—å—é [Prisma](https://prisma.io/):

```javascript
// app/db.server.ts
import { PrismaClient } from "@prisma/client";
const db = new PrismaClient();
export default db;
```

```javascript
// app/routes/products/$categoryId.tsx
import type { LoaderArgs } from "@remix-run/node";
import { json } from "@remix-run/node";
import { useLoaderData } from "@remix-run/react";

import db from "~/db.server";

export const loader = async ({ params }: LoaderArgs) => {
  return json(
    await db.product.findMany({
      where: {
        categoryId: params.categoryId,
      },
    })
  );
};

export default function ProductCategory() {
  const products = useLoaderData<typeof loader>();

  return (
    <div>
      <p>{products.length} –¢–æ–≤–∞—Ä–æ–≤</p>
      {/* ... */}
    </div>
  );
}
```

–î–ª—è —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–∏–ø—ã, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–µ Prisma Client, –ø—Ä–∏ –≤—ã–∑–æ–≤–µ `useLoaderData()`:

```javascript
import type { LoaderArgs } from "@remix-run/node";
import { json } from "@remix-run/node";
import { useLoaderData } from "@remix-run/react";

import db from "~/db.server";

async function getLoaderData(productId: string) {
  const product = await db.product.findUnique({
    where: {
      id: productId,
    },
    select: {
      id: true,
      name: true,
      imgSrc: true,
    },
  });

  return product;
}

export const loader = async ({ params }: LoaderArgs) => {
  return json(await getLoaderData(params.productId));
};

export default function Product() {
  const product = useLoaderData<typeof loader>();

  return (
    <div>
      <p>–¢–æ–≤–∞—Ä {product.id}</p>
      {/* ... */}
    </div>
  );
}
```

### –ù–µ –Ω–∞–π–¥–µ–Ω–æ

–ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∑–∞–ø–∏—Å–∏ –≤ –ë–î –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—ã–±—Ä–æ—Å–∏—Ç—å –æ—Ç–≤–µ—Ç –≤ `loader` –∏ Remix –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞ –∏ –ø–µ—Ä–µ–¥–∞—Å—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–ª–∏–∂–∞–π—à–µ–º—É –ø–µ—Ä–µ—Ö–≤–∞—Ç—á–∏–∫—É (catch boundary):

```javascript
export const loader = async ({
  params,
  request,
}: LoaderArgs) => {
  const product = await db.product.findOne({
    where: { id: params.productId },
  });

  if (!product) {
    // –º—ã –Ω–µ –º–æ–∂–µ–º –æ—Ç—Ä–µ–Ω–¥–µ—Ä–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç,
    // –ø–æ—ç—Ç–æ–º—É –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ–º –æ—Ç–≤–µ—Ç –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–¥–∞
    // –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã "–ù–µ –Ω–∞–π–¥–µ–Ω–æ"
    throw new Response("Not Found", { status: 404 });
  }

  const cart = await getCart(request);

  return json({
    product,
    inCart: cart.includes(product.id),
  });
};
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å—Ç—Ä–æ–∫–∏ –∑–∞–ø—Ä–æ—Å–∞

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å—Ç—Ä–æ–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ (–ø–æ–∏—Å–∫–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏) (URL Search Params) - —ç—Ç–æ —á–∞—Å—Ç—å URL, —Å–ª–µ–¥—É—é—â–∞—è –∑–∞ `?`. –≠—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–æ—Å—Ç—É–ø–Ω—ã –≤ `request.url`:

```javascript
import type { LoaderArgs } from "@remix-run/node";
import { json } from "@remix-run/node";

export const loader = async ({ request }: LoaderArgs) => {
  const url = new URL(request.url);
  const term = url.searchParams.get("term");

  return json(await fakeProductSearch(term));
};
```

–ó–¥–µ—Å—å:

- –æ–±—ä–µ–∫—Ç [request](https://developer.mozilla.org/en-US/docs/Web/API/Request) —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–≤–æ–π—Å—Ç–≤–æ `url`;
- –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä [URL](https://developer.mozilla.org/en-US/docs/Web/API/URL) –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —Å—Ç—Ä–æ–∫—É URL –≤ –æ–±—ä–µ–∫—Ç;
- `url.searchParams` - —ç—Ç–æ —ç–∫–∑–µ–º–ø–ª—è—Ä [URLSearchParams](https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams), —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–Ω—É—é –≤ –æ–±—ä–µ–∫—Ç —Å—Ç—Ä–æ–∫—É –∑–∞–ø—Ä–æ—Å–∞.

__–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö__

–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç—Ä–æ–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ –≤ —Å–ª—É—á–∞–µ —Å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Ä–æ—É—Ç–æ–≤, –≤—Å–µ —ç—Ç–∏ —Ä–æ—É—Ç—ã –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è. –≠—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å —Ç–µ–º, —á—Ç–æ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å—Ç—Ä–æ–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ª—é–±—ã–º `loader` –≤ —ç—Ç–∏—Ö —Ä–æ—É—Ç–∞—Ö. –î–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ä–æ—É—Ç–æ–≤ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å [shouldReload](https://remix.run/docs/en/v1/route/should-reload) (–¥–∞–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–∫–∞ —è–≤–ª—è–µ—Ç—Å—è –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã–º, –ø–æ—ç—Ç–æ–º—É –≤ —Ä–∞–º–∫–∞—Ö —ç—Ç–æ–≥–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –Ω–µ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç—Å—è).

__–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å—Ç—Ä–æ–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö__

–ò–Ω–æ–≥–¥–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è —á–∏—Ç–∞—Ç—å –∏ –æ–±–Ω–æ–≤–ª—è—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å—Ç—Ä–æ–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö, –∞ –Ω–µ –≤ `loader` –∏–ª–∏ `action`. –°—É—â–µ—Å—Ç–≤—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ø–æ—Å–æ–±–æ–≤ —ç—Ç–æ –¥–µ–ª–∞—Ç—å.

_–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å—Ç—Ä–æ–∫–∏ –∑–∞–ø—Ä–æ—Å–∞_

–ü—Ä–∏–º–µ—Ä –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å—Ç—Ä–æ–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º:

```javascript
// app/products/shoes
export default function ProductFilters() {
  return (
    <Form method="get">
      <label htmlFor="nike">Nike</label>
      <input
        type="checkbox"
        id="nike"
        name="brand"
        value="nike"
      />

      <label htmlFor="adidas">Adidas</label>
      <input
        type="checkbox"
        id="adidas"
        name="brand"
        value="adidas"
      />

      <button type="submit">–û–±–Ω–æ–≤–∏—Ç—å</button>
    </Form>
  );
}
```

–ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±—Ä–∞–ª –æ–¥–∏–Ω –±—Ä–µ–Ω–¥, –Ω–∞–ø—Ä–∏–º–µ—Ä, Nike, —Ç–æ —Å—Ç—Ä–æ–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –±—É–¥–µ—Ç –∏–º–µ—Ç—å –≤–∏–¥ `/products/shoes?brand=nike`, –µ—Å–ª–∏ –æ–±–∞, —Ç–æ `/products/shoes?brand=nike&brand=adidas`.

_–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ_, —á—Ç–æ `brand` –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –≤ —Å—Ç—Ä–æ–∫–µ –∑–∞–ø—Ä–æ—Å–∞, –ø–æ—Å–∫–æ–ª—å–∫—É –æ–±–∞ —á–µ–∫–±–æ–∫—Å–∞ –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è `brand`. –î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —ç—Ç–∏–º –∑–Ω–∞—á–µ–Ω–∏—è–º –≤ `loader` –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –º–µ—Ç–æ–¥ `searchParams.getAll`:

```javascript
import type { LoaderArgs } from "@remix-run/node";
import { json } from "@remix-run/node";

export async function loader({ request }: LoaderArgs) {
  const url = new URL(request.url);
  const brands = url.searchParams.getAll("brand");

  return json(await getProducts({ brands }));
}
```

__–î–æ–ø–æ–ª–Ω–µ–Ω–∏–µ URL —Å—Ç—Ä–æ–∫–æ–π –∑–∞–ø—Ä–æ—Å–∞__

URL –ª–µ–≥–∫–æ –¥–æ–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å—Ç—Ä–æ–∫–æ–π –∑–∞–ø—Ä–æ—Å–∞ —Å –ø–æ–º–æ—â—å—é –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ `Link`:

```javascript
<Link to="?brand=nike">Nike (—Ç–æ–ª—å–∫–æ)</Link>
```

__–ß—Ç–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å—Ç—Ä–æ–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö__

–î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º —Å—Ç—Ä–æ–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ö—É–∫ `useSearchParams`:

```javascript
import { useSearchParams } from "@remix-run/react";

export default function ProductFilters() {
  const [searchParams] = useSearchParams();
  const brands = searchParams.getAll("brand");

  return (
    <Form method="get">
      <label htmlFor="nike">Nike</label>
      <input
        type="checkbox"
        id="nike"
        name="brand"
        value="nike"
        defaultChecked={brands.includes("nike")}
      />

      <label htmlFor="adidas">Adidas</label>
      <input
        type="checkbox"
        id="adidas"
        name="brand"
        value="adidas"
        defaultChecked={brands.includes("adidas")}
      />

      <button type="submit">–û–±–Ω–æ–≤–∏—Ç—å</button>
    </Form>
  );
}
```

–° –ø–æ–º–æ—â—å—é —Ö—É–∫–∞ `useSubmit` –º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ñ–æ—Ä–º—É –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∑–Ω–∞—á–µ–Ω–∏—è –ª—é–±–æ–≥–æ –ø–æ–ª—è:

```javascript
import {
  useSubmit,
  useSearchParams,
} from "@remix-run/react";

export default function ProductFilters() {
  const submit = useSubmit();
  const [searchParams] = useSearchParams();
  const brands = searchParams.getAll("brand");

  return (
    <Form
      method="get"
      onChange={(e) => submit(e.currentTarget)}
    >
      {/* ... */}
    </Form>
  );
}
```

__–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å—Ç—Ä–æ–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ –∏ —É–ø—Ä–∞–≤–ª—è–µ–º—ã–µ –∏–Ω–ø—É—Ç—ã__

–ß—Ç–æ –µ—Å–ª–∏ –º—ã —Ö–æ—Ç–∏–º —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ —á–µ–∫–±–æ–∫—Å–æ–≤ —Å–æ —Å—Ç—Ä–æ–∫–æ–π –∑–∞–ø—Ä–æ—Å–∞? –í —Å–ª—É—á–∞–µ —Å —É–ø—Ä–∞–≤–ª—è–µ–º—ã–º–∏ –∏–Ω–ø—É—Ç–∞–º–∏ (controlled inputs) —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ –Ω–µ —Ç–∞–∫ –ø—Ä–æ—Å—Ç–æ, –∫–∞–∫ –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å—Å—è –Ω–∞ –ø–µ—Ä–≤—ã–π –≤–∑–≥–ª—è–¥.

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –±—Ä–µ–Ω–¥–∞ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∫–∞–∫ `<input type="checkbox">` —Ç–∞–∫ –∏ `<Link />`:

```javascript
import { useSearchParams } from "@remix-run/react";

export default function ProductFilters() {
  const [searchParams] = useSearchParams();
  const brands = searchParams.getAll("brand");

  return (
    <Form method="get">
      <p>
        <label htmlFor="nike">Nike</label>
        <input
          type="checkbox"
          id="nike"
          name="brand"
          value="nike"
          defaultChecked={brands.includes("nike")}
        />
        <Link to="?brand=nike">Nike</Link>
      </p>

      <button type="submit">–û–±–Ω–æ–≤–∏—Ç—å</button>
    </Form>
  );
}
```

–ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç —á–µ–∫–±–æ–∫—Å –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–æ—Ä–º—É, URL –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —á–µ–∫–±–æ–∫—Å–∞. –ù–æ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –Ω–∞ —Å—Å—ã–ª–∫—É, —Ç–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ URL, –∞ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —á–µ–∫–±–æ–∫—Å–∞ –æ—Å—Ç–∞–µ—Ç—Å—è –ø—Ä–µ–∂–Ω–∏–º. –ß—Ç–æ –µ—Å–ª–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è —Å `defaultChecked` –Ω–∞ `checked`?

```javascript
<input
  type="checkbox"
  id="adidas"
  name="brand"
  value="adidas"
  checked={brands.includes("adidas")}
/>
```

–í–æ–∑–Ω–∏–∫–∞–µ—Ç –¥—Ä—É–≥–∞—è –ø—Ä–æ–±–ª–µ–º–∞: –ø—Ä–∏ –∫–ª–∏–∫–µ –ø–æ —Å—Å—ã–ª–∫–µ –º–µ–Ω—è–µ—Ç—Å—è –∫–∞–∫ URL, —Ç–∞–∫ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —á–µ–∫–±–æ–∫—Å–∞, –Ω–æ —Å–∞–º —á–µ–∫–±–æ–∫—Å –±–æ–ª—å—à–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–æ—Å–∫–æ–ª—å–∫—É React –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ —á–µ–∫–±–æ–∫—Å–∞ –¥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É—é—â–µ–≥–æ –µ–≥–æ URL.

–°—É—â–µ—Å—Ç–≤—É–µ—Ç, –∫–∞–∫ –º–∏–Ω–∏–º—É–º, 2 —Ä–µ—à–µ–Ω–∏—è.

–°–∞–º—ã–º –ø—Ä–æ—Å—Ç—ã–º —è–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ä–º—ã –ø—Ä–∏ –≤—ã–±–æ—Ä–µ —á–µ–∫–±–æ–∫—Å–∞:

```javascript
import {
  useSubmit,
  useSearchParams,
} from "@remix-run/react";

export default function ProductFilters() {
  const submit = useSubmit();
  const [searchParams] = useSearchParams();
  const brands = searchParams.getAll("brand");

  return (
    <Form method="get">
      <p>
        <label htmlFor="nike">Nike</label>
        <input
          type="checkbox"
          id="nike"
          name="brand"
          value="nike"
          onChange={(e) => submit(e.currentTarget.form)}
          checked={brands.includes("nike")}
        />
        <Link to="?brand=nike">Nike</Link>
      </p>

      {/* ... */}
    </Form>
  );
}
```

_–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ_: –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–æ—Ä–º—ã –≤ `onChange()` —Å–ª–µ–¥—É–µ—Ç –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—Ç—å —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è `submit` —Å –ø–æ–º–æ—â—å—é `stopPropagation()` –≤–æ –∏–∑–±–µ–∂–∞–Ω–∏–µ –≤—Å–ø–ª—ã—Ç–∏—è (bubble) —Å–æ–±—ã—Ç–∏—è –¥–æ —Ñ–æ—Ä–º—ã –∏ –µ–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏.

–í—Ç–æ—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç –Ω–∞–ª–∏—á–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è —á–µ–∫–±–æ–∫—Å–∞:

- –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å—Ç—Ä–æ–∫–∏ –∑–∞–ø—Ä–æ—Å–∞;
- –æ–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏ –≤—ã–±–æ—Ä–µ —á–µ–∫–±–æ–∫—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º;
- –æ–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç—Ä–æ–∫–∏ –∑–∞–ø—Ä–æ—Å–∞.

```javascript
import {
  useSubmit,
  useSearchParams,
} from "@remix-run/react";

export default function ProductFilters() {
  const submit = useSubmit();
  const [searchParams] = useSearchParams();
  const brands = searchParams.getAll("brand");

  const [nikeChecked, setNikeChecked] = React.useState(
    // –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å—Ç—Ä–æ–∫–∏ –∑–∞–ø—Ä–æ—Å–∞
    brands.includes("nike")
  );

  // –æ–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç—Ä–æ–∫–∏ –∑–∞–ø—Ä–æ—Å–∞
  // (–æ—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ä–º—ã –∏–ª–∏ –Ω–∞–∂–∞—Ç–∏–µ —Å—Å—ã–ª–∫–∏)
  React.useEffect(() => {
    setNikeChecked(brands.includes("nike"));
  }, [brands, searchParams]);

  return (
    <Form method="get">
      <p>
        <label htmlFor="nike">Nike</label>
        <input
          type="checkbox"
          id="nike"
          name="brand"
          value="nike"
          onChange={(e) => {
            // –æ–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ —á–µ–∫–±–æ–∫—Å–∞ –±–µ–∑ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã
            setNikeChecked(true);
          }}
          checked={nikeChecked}
        />
        <Link to="?brand=nike">Nike</Link>
      </p>

      {/* ... */}
    </Form>
  );
}
```

–≠—Ç—É –ª–æ–≥–∏–∫—É —Ä–∞–±–æ—Ç—ã —Å —á–µ–∫–±–æ–∫—Å–∞–º–∏ –º–æ–∂–Ω–æ –∞–±—Å—Ç—Ä–∞–≥–∏—Ä–æ–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

```javascript
<div>
  <SearchCheckbox name="brand" value="nike" />
  <SearchCheckbox name="brand" value="reebok" />
  <SearchCheckbox name="brand" value="adidas" />
</div>;

function SearchCheckbox({ name, value }) {
  const [searchParams] = useSearchParams();
  const all = searchParams.getAll(name);
  const [checked, setChecked] = React.useState(
    all.includes(value)
  );

  React.useEffect(() => {
    setChecked(all.includes(value));
  }, [all, searchParams, value]);

  return (
    <input
      type="checkbox"
      name={name}
      value={value}
      checked={checked}
      onChange={(e) => setChecked(e.target.checked)}
    />
  );
}
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

Remix –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤—Å–µ —Ä–æ—É—Ç—ã –≤ —Ç—Ä–µ—Ö —Å–ª—É—á–∞—è—Ö:

- –≤—ã–∑–æ–≤ `action` (—Ñ–æ—Ä–º—ã, `useSubmit()`, `fetcher.submit()`);
- –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ –∑–∞–ø—Ä–æ—Å–∞;
- –ø–µ—Ä–µ—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ —Ç–µ–∫—É—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É (–∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–ª–∏–∫–∞–µ—Ç –ø–æ —Å—Å—ã–ª–∫–µ, –≤–µ–¥—É—â–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–π –æ–Ω —É–∂–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è).

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º

Remix —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —á—Ç–æ –∏—Å–∫–ª—é—á–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–∞–∫–∏—Ö-–ª–∏–±–æ –±–∏–±–ª–∏–æ—Ç–µ–∫ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –≤—Ä–æ–¥–µ  `React Query`, `SWR`, `Apollo`, `Relay`, `urql` –∏ —Ç.–¥. –û–¥–Ω–∞–∫–æ –æ–Ω –≤–æ–≤—Å–µ –Ω–µ –∏—Å–∫–ª—é—á–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ —Å–ª—É—á–∞—è—Ö, –∫–æ–≥–¥–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º—ã—Ö Remix, –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

### –ó–∞–º–µ—Ç–∫–∏

`loader` –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å –ø–æ–º–æ—â—å—é `fetch`, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º–æ–≥–æ –±—Ä–∞—É–∑–µ—Ä–æ–º, –ø–æ—ç—Ç–æ–º—É –¥–∞–Ω–Ω—ã–µ —Å–µ—Ä–∏–∞–ª–∏–∑—É—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é `JSON.stringify()`. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –∑–∞–≥—Ä—É–∑—á–∏–∫–æ–º, –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–µ—Ä–∏–∞–ª–∏–∑—É–µ–º—ã–º–∏. –ü—Ä–∏–º–µ—Ä —á–∞—Å—Ç–∏—á–Ω–æ –Ω–µ—Å–µ—Ä–∏–∞–ª–∏–∑—É–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö:

```javascript
export async function loader() {
  return {
    date: new Date(),
    someMethod() {
      return "–Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ";
    },
  };
}

export default function RouteComp() {
  const data = useLoaderData<typeof loader>();
  console.log(data);
  // '{"date":"..."}'
}
```

–î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–º –∑–∞–≥—Ä—É–∑—á–∏–∫–æ–º, –Ω–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `loader`:

```javascript
export const loader = async () => {
  return json(await fakeDb.products.findMany());
};

export default function RouteComp() {
  // –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
  const data = loader();
}
```

## –ó–∞–ø–∏—Å—å –¥–∞–Ω–Ω—ã—Ö / Data Writes

–ó–∞–ø–∏—Å—å –¥–∞–Ω–Ω—ã—Ö –≤ Remix –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ –¥–≤—É—Ö —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã—Ö –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö: `<form>` –∏ HTTP. –ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–≥–æ —É–ª—É—á—à–µ–Ω–∏—è –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è UI, –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤–∞–ª–∏–¥–∞—Ü–∏–∏, –º–æ–¥–µ–ª—å –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –æ—Å–Ω–æ–≤—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Ñ–æ—Ä–º–∞—Ö HTML.

–ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–æ—Ä–º—ã Remix:

- –≤—ã–∑—ã–≤–∞–µ—Ç `action()` –¥–ª—è —Ñ–æ—Ä–º—ã;
- –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ (`loader()`) –¥–ª—è –≤—Å–µ—Ö —Ä–æ—É—Ç–æ–≤ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

–°—É—â–µ—Å—Ç–≤—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ø–æ—Å–æ–±–æ–≤ –≤—ã–∑–≤–∞—Ç—å `action()` –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é —Ä–æ—É—Ç–æ–≤:

- `<Form>`
- `useSubmit()`
- `useFetcher()`

–í –¥–∞–Ω–Ω–æ–º —Ä–∞–∑–¥–µ–ª–µ –º—ã –±—É–¥–µ–º –≥–æ–≤–æ—Ä–∏—Ç—å —Ç–æ–ª—å–∫–æ –æ —Ñ–æ—Ä–º–∞—Ö.

### –§–æ—Ä–º—ã

–ù–∞—Ç–∏–≤–Ω—ã–µ —Ñ–æ—Ä–º—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç 2 –≥–ª–∞–≥–æ–ª–∞ (verbs) HTTP: `GET` –∏ `POST`. –≠—Ç–∏ –≥–ª–∞–≥–æ–ª—ã —Å–æ–æ–±—â–∞—é—Ç Remix –æ –Ω–∞—à–∏—Ö –Ω–∞–º–µ—Ä–µ–Ω–∏—è—Ö. –í —Å–ª—É—á–∞–µ —Å `GET` Remix –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫–∏–µ —á–∞—Å—Ç–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –º–µ–Ω—è—é—Ç—Å—è –∏ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —Ç–æ–ª—å–∫–æ –¥–ª—è —ç—Ç–∏—Ö —á–∞—Å—Ç–µ–π, –∞ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —á–∞—Å—Ç–µ–π, –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è –ø—Ä–µ–∂–Ω–∏–º–∏, –¥–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –∏–∑ –∫—ç—à–∞. –í —Å–ª—É—á–∞–µ —Å `POST` Remix –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∏—Ö —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏ —Å —Å–µ—Ä–≤–µ—Ä–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏.

__GET__

`GET` - —ç—Ç–æ –æ–±—ã—á–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è (navigation), –∫–æ–≥–¥–∞ –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ —Å—Ç—Ä–æ–∫—É –∑–∞–ø—Ä–æ—Å–∞ URL. –†–∞—Å—Å–º–æ—Ç—Ä–∏–º —Ç–∞–∫—É—é —Ñ–æ—Ä–º—É:

```javascript
<form method="get" action="/search">
  <label>–ò—Å–∫–∞—Ç—å <input name="term" type="text" /></label>
  <button type="submit">–ü–æ–∏—Å–∫</button>
</form>
```

–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø–æ–ª–Ω—è–µ—Ç –ø–æ–ª–µ `term` –∏ –Ω–∞–∂–∏–º–∞–µ–º "–ü–æ–∏—Å–∫", –±—Ä–∞—É–∑–µ—Ä –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã –≤ —Å—Ç—Ä–æ–∫—É –∑–∞–ø—Ä–æ—Å–∞ –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –µ–µ –∫ URL, —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –≤ `action`. –ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–µ–ª `Remix`. –¢–æ–≥–¥–∞ –±—Ä–∞—É–∑–µ—Ä –≤—ã–ø–æ–ª–Ω–∏—Ç –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫ `/search?term=remix`. –ï—Å–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ–º –∏–Ω–ø—É—Ç–∞ –±—É–¥–µ—Ç `q`, –±—Ä–∞—É–∑–µ—Ä –≤—ã–ø–æ–ª–Ω–∏—Ç –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫ `/search?q=remix`.

–ü—Ä–∏–º–µ—Ä —Å –±–û–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –ø–æ–ª–µ–π:

```javascript
<form method="get" action="/search">
  <fieldset>
    <legend>Brand</legend>
    <label>
      <input name="brand" value="nike" type="checkbox" />
      Nike
    </label>
    <label>
      <input name="brand" value="reebok" type="checkbox" />
      Reebok
    </label>
    <label>
      <input name="color" value="white" type="checkbox" />
      –ë–µ–ª—ã–π
    </label>
    <label>
      <input name="color" value="black" type="checkbox" />
      –ß–µ—Ä–Ω—ã–π
    </label>
    <button type="submit">–ü–æ–∏—Å–∫</button>
  </fieldset>
</form>
```

–í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ–≥–æ, –∫–∞–∫–∏–µ —á–µ–∫–±–æ–∫—Å—ã –≤—ã–±—Ä–∞–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –±—Ä–∞—É–∑–µ—Ä –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫ —Ç–∞–∫–∏–º URL:

```
/search?brand=nike&color=black
/search?brand=nike&brand=reebok&color=white
```

__POST__

–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è, –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–ª–∏ —É–¥–∞–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–µ—Ç–æ–¥ `POST`. –ò —Ä–µ—á—å –∏–¥–µ—Ç –Ω–µ —Ç–æ–ª—å–∫–æ –æ –±–æ–ª—å—à–∏—Ö —Ñ–æ—Ä–º–∞—Ö, –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –Ω–æ –∏ –æ –∫–Ω–æ–ø–∫–∞—Ö —Ç–∏–ø–∞ "–ù—Ä–∞–≤–∏—Ç—Å—è", –æ–±–µ—Ä–Ω—É—Ç—ã—Ö –≤ —Ñ–æ—Ä–º—É. –†–∞—Å—Å–º–æ—Ç—Ä–∏–º —Ç–∞–∫—É—é —Ñ–æ—Ä–º—É –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:

```javascript
<form method="post" action="/projects">
  <label>–ù–∞–∑–≤–∞–Ω–∏–µ: <input name="name" type="text" /></label>
  <label>–û–ø–∏—Å–∞–Ω–∏–µ: <textarea name="description"></textarea></label>
  <button type="submit">–°–æ–∑–¥–∞—Ç—å</button>
</form>
```

–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–°–æ–∑–¥–∞—Ç—å", –±—Ä–∞—É–∑–µ—Ä –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã –≤ —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (request body) –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –¥–∞–Ω–Ω—ã–µ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞—Ç—å –Ω–æ—É—é –∑–∞–ø–∏—Å—å –≤ –ë–î. –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç. –í–µ—Ä–æ—è—Ç–Ω–æ, –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏ –Ω–∞–º —Å–ª–µ–¥—É–µ—Ç –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å —Ç–æ–ª—å–∫–æ —á—Ç–æ —Å–æ–∑–¥–∞–Ω–Ω—ã–º –ø—Ä–æ–µ–∫—Ç–æ–º:

```javascript
export async function action({ request }: ActionArgs) {
  const body = await request.formData();
  // —Å–æ–∑–¥–∞–µ–º –ø—Ä–æ–µ–∫—Ç
  const project = await createProject(body);
  // –≤—ã–ø–æ–ª–Ω—è–µ–º –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
  return redirect(`/projects/${project.id}`);
}
```

–°–æ–±—Å—Ç–≤–µ–Ω–Ω–æ, —ç—Ç–æ –≤—Å–µ, —á—Ç–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º—É—Ç–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –≤ Remix.

### –ü—Ä–∏–º–µ—Ä –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–π –º—É—Ç–∞—Ü–∏–∏

–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –º—ã —Ä–µ–∞–ª–∏–∑—É–µ–º —Å–ª–µ–¥—É—é—â–µ–µ:

- –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ JS;
- –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã;
- –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫;
- –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∑–∞–≥—Ä—É–∑–∫–∏ (–ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ);
- –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ (–ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ).

_–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ_: –¥–ª—è –º—É—Ç–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –ø—Ä–∏–º–µ—Ä–µ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `Form`. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —ç—Ç–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –≤–º–µ—Å—Ç–æ –Ω–∞—Ç–∏–≤–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ `form` —á–∞—Å—Ç–∏—á–Ω–æ –æ—Ç–∫–ª—é—á–∞–µ—Ç –¥–µ—Ñ–æ–ª—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –±—Ä–∞—É–∑–µ—Ä–∞ –ø–æ –æ–±—Ä–∞–±–æ—Ç–∫–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã. –ï—Å–ª–∏ –≤—ã –Ω–µ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI, –ø–µ—Ä–µ–¥–∞–π—Ç–µ `Form` –ø—Ä–æ–ø `reloadDocument`. –≠—Ç–æ —Å–¥–µ–ª–∞–µ—Ç `Form` –∏ `form` –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–¥–µ–Ω—Ç–∏—á–Ω—ã–º–∏.

__–§–æ—Ä–º–∞__

–î–æ–ø—É—Å—Ç–∏–º, —á—Ç–æ –≤ `app/routes/projects/new.tsx` —É –Ω–∞—Å –∏–º–µ–µ—Ç—Å—è —Ç–∞–∫–∞—è —Ñ–æ—Ä–º–∞:

```javascript
import { Form } from "@remix-run/react";

export default function NewProject() {
  return (
    <Form method="post" action="/projects/new">
      <p>
        <label>
          –ù–∞–∑–≤–∞–Ω–∏–µ: <input name="name" type="text" />
        </label>
      </p>
      <p>
        <label>
          –û–ø–∏—Å–∞–Ω–∏–µ:
          <br />
          <textarea name="description" />
        </label>
      </p>
      <p>
        <button type="submit">–°–æ–∑–¥–∞—Ç—å</button>
      </p>
    </Form>
  );
}
```

–î–æ–±–∞–≤–ª—è–µ–º `action()` –¥–ª—è —ç—Ç–æ–π —Ñ–æ—Ä–º—ã (POST-–∑–∞–ø—Ä–æ—Å—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è `action()`, –∞ GET-–∑–∞–ø—Ä–æ—Å—ã - `loader()`):

```javascript
import type { ActionArgs } from "@remix-run/node";
import { redirect } from "@remix-run/node";

export const action = async ({ request }: ActionArgs) => {
  const formData = await request.formData();
  // —Å–æ–∑–¥–∞–µ–º –ø—Ä–æ–µ–∫—Ç
  const project = await createProject(formData);
  // –≤—ã–ø–æ–ª–Ω—è–µ–º –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
  return redirect(`/projects/${project.id}`);
};

export default function NewProject() {
  // ...
}
```

__–í–∞–ª–∏–¥–∞—Ü–∏—è__

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ –Ω–∞—à API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

```javascript
const [errors, project] = await createProject(formData);
```

–ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –æ—à–∏–±–æ–∫ –º—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –∫ —Ñ–æ—Ä–º–µ –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∏—Ö:

```javascript
export const action = async ({ request }: ActionArgs) => {
  const formData = await request.formData();
  const [errors, project] = await createProject(formData);

  if (errors) {
    const values = Object.fromEntries(formData);
    return json({ errors, values });
  }

  return redirect(`/projects/${project.id}`);
};
```

–î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–º —Ñ—É–Ω–∫—Ü–∏–µ–π `action` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ö—É–∫ `useActionData`:

```javascript
import type { ActionArgs } from "@remix-run/node";
import { redirect } from "@remix-run/node";
import { useActionData } from "@remix-run/react";

export const action = async ({ request }: ActionArgs) => {
  // ...
};

export default function NewProject() {
  const actionData = useActionData<typeof action>();

  return (
    <form method="post" action="/projects/new">
      <p>
        <label>
          –ù–∞–∑–≤–∞–Ω–∏–µ:{" "}
          <input
            name="name"
            type="text"
            defaultValue={actionData?.values.name}
          />
        </label>
      </p>

      {actionData?.errors.name ? (
        <p style={{ color: "red" }}>
          {actionData.errors.name}
        </p>
      ) : null}

      <p>
        <label>
          –û–ø–∏—Å–∞–Ω–∏–µ:
          <br />
          <textarea
            name="description"
            defaultValue={actionData?.values.description}
          />
        </label>
      </p>

      {actionData?.errors.description ? (
        <p style={{ color: "red" }}>
          {actionData.errors.description}
        </p>
      ) : null}

      <p>
        <button type="submit">–°–æ–∑–¥–∞—Ç—å</button>
      </p>
    </form>
  );
}
```

_–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ_ –Ω–∞ –∞—Ç—Ä–∏–±—É—Ç `defaultValue`. –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —ç—Ç–æ–≥–æ –∞—Ç—Ä–∏–±—É—Ç–∞ —Ñ–æ—Ä–º–∞ –±—É–¥–µ—Ç –æ—á–∏—â–∞—Ç—å—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ.

__–°–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è__

–î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–æ—Å—Ç–æ—è–Ω–∏—é –æ–∂–∏–¥–∞–Ω–∏—è –∏–ª–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞ (transition) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ö—É–∫ `useTransition`:

```javascript
import { redirect } from "@remix-run/node";
import {
  useActionData,
  Form,
  useTransition,
} from "@remix-run/react";

// ...

export default function NewProject() {
  const transition = useTransition();
  const actionData = useActionData<typeof action>();

  return (
    <Form method="post">
      <fieldset
        disabled={transition.state === "submitting"}
      >
        <p>
          <label>
            –ù–∞–∑–≤–∞–Ω–∏–µ:{" "}
            <input
              name="name"
              type="text"
              defaultValue={
                actionData
                  ? actionData.values.name
                  : undefined
              }
            />
          </label>
        </p>

        {actionData && actionData.errors.name ? (
          <p style={{ color: "red" }}>
            {actionData.errors.name}
          </p>
        ) : null}

        <p>
          <label>
            –û–ø–∏—Å–∞–Ω–∏–µ:
            <br />
            <textarea
              name="description"
              defaultValue={
                actionData
                  ? actionData.values.description
                  : undefined
              }
            />
          </label>
        </p>

        {actionData && actionData.errors.description ? (
          <p style={{ color: "red" }}>
            {actionData.errors.description}
          </p>
        ) : null}

        <p>
          <button type="submit">
            {transition.state === "submitting"
              ? "–°–æ–∑–¥–∞–Ω–∏–µ..."
              : "–°–æ–∑–¥–∞—Ç—å"}
          </button>
        </p>
      </fieldset>
    </Form>
  );
}
```

–¢–µ–ø–µ—Ä—å –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–°–æ–∑–¥–∞—Ç—å" –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–ª–µ–π —Ñ–æ—Ä–º—ã –∏ —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ "–°–æ–∑–¥–∞–Ω–∏–µ...".

–ö—Ä–æ–º–µ –¥–∞–Ω–Ω—ã—Ö –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã, —Å–æ–¥–µ—Ä–∂–∞—â–∏—Ö—Å—è –≤ `transition.submission`, –º—ã –º–æ–∂–µ–º –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º —Ñ–æ—Ä–º—ã —á–µ—Ä–µ–∑ `transition.formData`.

__–°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö__

–†–µ–∞–ª–∏–∑—É–µ–º –ø—Ä–æ—Å—Ç–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–∏—è –≤—ã—Å–æ—Ç—ã –∏ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –æ–± –æ—à–∏–±–∫–∞—Ö:

```javascript
type Props = {
  error?: string;
  isSubmitting: boolean;
}

function ValidationMessage({ error, isSubmitting }: Props) {
  const [show, setShow] = useState(!!error);

  useEffect(() => {
    const id = setTimeout(() => {
      const hasError = !!error;
      setShow(hasError && !isSubmitting);
    });
    return () => clearTimeout(id);
  }, [error, isSubmitting]);

  return (
    <div
      style={{
        opacity: show ? 1 : 0,
        height: show ? "1em" : 0,
        color: "red",
        transition: "all 300ms ease-in-out",
      }}
    >
      {error}
    </div>
  );
}
```

–û–±–æ—Ä–∞—á–∏–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –≤ —ç—Ç–æ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏ –º–µ–Ω—è–µ–º —Ü–≤–µ—Ç –≥—Ä–∞–Ω–∏—Ü –∏–Ω–ø—É—Ç–æ–≤ –Ω–∞ –∫—Ä–∞—Å–Ω—ã–π –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –æ—à–∏–±–∫–∏:

```javascript
export default function NewProject() {
  const transition = useTransition();
  const actionData = useActionData<typeof action>();

  return (
    <Form method="post">
      <fieldset
        disabled={transition.state === "submitting"}
      >
        <p>
          <label>
            –ù–∞–∑–≤–∞–Ω–∏–µ:{" "}
            <input
              name="name"
              type="text"
              defaultValue={
                actionData
                  ? actionData.values.name
                  : undefined
              }
              style={{
                borderColor: actionData?.errors.name
                  ? "red"
                  : "",
              }}
            />
          </label>
        </p>

        {actionData?.errors.name ? (
          <ValidationMessage
            isSubmitting={transition.state === "submitting"}
            error={actionData?.errors?.name}
          />
        ) : null}

        <p>
          <label>
            –û–ø–∏—Å–∞–Ω–∏–µ:
            <br />
            <textarea
              name="description"
              defaultValue={actionData?.values.description}
              style={{
                borderColor: actionData?.errors.description
                  ? "red"
                  : "",
              }}
            />
          </label>
        </p>

        <ValidationMessage
          isSubmitting={transition.state === "submitting"}
          error={actionData?.errors.description}
        />

        <p>
          <button type="submit">
            {transition.state === "submitting"
              ? "–°–æ–∑–¥–∞–Ω–∏–µ..."
              : "–°–æ–∑–¥–∞—Ç—å"}
          </button>
        </p>
      </fieldset>
    </Form>
  );
}
```

## –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI / Optimistic UI

–û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI (–æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–π UI) - —ç—Ç–æ –ø–∞—Ç—Ç–µ—Ä–Ω, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –æ–±–Ω–æ–≤–ª—è—Ç—å UI –º–æ–º–µ–Ω—Ç–∞–ª—å–Ω–æ —Å –ø–æ–º–æ—â—å—é "—Ñ–µ–π–∫–æ–≤—ã—Ö" (–≤ —Ç–æ–º —Å–º—ã—Å–ª–µ, —á—Ç–æ –æ–Ω–∏ –æ—Ç–ª–∏—á–∞—é—Ç—Å—è –æ—Ç —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö) –¥–∞–Ω–Ω—ã—Ö –±–µ–∑ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –≤—Ä–µ–º—è, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ —Å–µ—Ä–≤–µ—Ä—É –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö. –ö–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ —É –Ω–∞—Å –¥–ª—è —ç—Ç–æ–≥–æ –∏–º–µ–µ—Ç—Å—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö. –ï—Å–ª–∏ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤–æ–∑–Ω–∏–∫–ª–∞ –æ—à–∏–±–∫–∞, –º—ã –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ UI –∏ —Å–æ–æ–±—â–∞–µ–º –æ –ø—Ä–æ–±–ª–µ–º–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é. –û–¥–Ω–∞–∫–æ –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ.

–í Remix –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é —Ö—É–∫–æ–≤ `useTransition` –∏ `useFetcher`.

### –°—Ç—Ä–∞—Ç–µ–≥–∏—è

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–æ—Ä–º—É (–∏–ª–∏ –º—ã –¥–µ–ª–∞–µ–º —ç—Ç–æ —Å–∞–º–∏ —Å –ø–æ–º–æ—â—å—é `useSubmit()` –∏–ª–∏ `fetcher.submit()`).
2. Remix –≤—ã–ø–æ–ª–Ω—è–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫—É —Ñ–æ—Ä–º—ã –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤ –Ω–∞—à–µ —Ä–∞—Å–ø–æ—Ä—è–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã –≤ `transition.submission` –∏–ª–∏ `fetcher.submission`.
3. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `submission.formData` –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ–π –≤–µ—Ä—Å–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, —Ç.–µ. —Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –∫–æ—Ç–æ—Ä–∞—è –¥–æ–ª–∂–Ω–∞ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è –≤ —Å–ª—É—á–∞–µ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã.
4. Remix –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ:
   - –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–æ—Ä–º—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∏—á–µ–≥–æ –Ω–µ –∑–∞–º–µ—á–∞–µ—Ç;
   - –ø—Ä–∏ –Ω–µ—É–¥–∞—á–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∏—Å—Ö–æ–¥–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ.

### –ü—Ä–∏–º–µ—Ä

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞.

–†–æ—É—Ç –ø—Ä–æ–µ–∫—Ç–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç –∏ —Ä–µ–Ω–¥–µ—Ä–∏—Ç –µ–≥–æ:

```javascript
// app/routes/project/$id.tsx
import type { LoaderArgs } from "@remix-run/node";
import { json } from "@remix-run/node";
import { useLoaderData } from "@remix-run/react";

import { ProjectView } from "~/components/project";

export async function loader({ params }: LoaderArgs) {
  return json(await findProject(params.id));
}

export default function ProjectRoute() {
  const project = useLoaderData<typeof loader>();

  return <ProjectView project={project} />;
}
```

–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–º –∑–¥–µ—Å—å —è–≤–ª—è–µ—Ç—Å—è —Ç–æ, —á—Ç–æ —Ä–æ—É—Ç –ø—Ä–æ–µ–∫—Ç–∞ —Ä–µ–Ω–¥–µ—Ä–∏—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `ProjectView`, –∫–æ—Ç–æ—Ä—ã–π –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è UI. –≠—Ç–æ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –º–æ–∂–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:

```javascript
// app/components/project.tsx
export type { Project } from "~/types";

type Props = {
  project: Project
}

export function ProjectView({ project }: Props) {
  return (
    <div>
      <h2>{project.title}</h2>
      <p>{project.description}</p>
      <ul>
        {project.tasks.map((task) => (
          <li key={task.id}>{task.name}</li>
        ))}
      </ul>
    </div>
  );
}
```

–†–µ–∞–ª–∏–∑—É–µ–º —Ä–æ—É—Ç —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞:

```javascript
// app/routes/projects/new.tsx
import type { ActionArgs } from "@remix-run/node";
import { redirect } from "@remix-run/node";
import { Form } from "@remix-run/react";

import { createProject } from "~/utils";

export const action = async ({ request }: ActionArgs) => {
  const body = await request.formData();
  const newProject = Object.fromEntries(body);

  const project = await createProject(newProject);

  return redirect(`/projects/${project.id}`);
};

export default function NewProject() {
  return (
    <>
      <h2>–ù–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç</h2>
      <Form method="post">
        <label>
          –ù–∞–∑–≤–∞–Ω–∏–µ: <input name="title" type="text" />
        </label>
        <label htmlFor="description">–û–ø–∏—Å–∞–Ω–∏–µ:</label>
        <textarea name="description" id="description" />
        <button type="submit">–°–æ–∑–¥–∞—Ç—å</button>
      </Form>
    </>
  );
}
```

`useTransition()` –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª–µ–≥–∫–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –≤—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã, —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–π –∑–∞–ø–∏—Å–∏ –≤ –ë–î –∏ –æ—Ç–≤–µ—Ç–∞ —Å–µ—Ä–≤–µ—Ä–∞ –≤ –≤–∏–¥–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–æ–µ–∫—Ç–∞:

```javascript
import type { ActionArgs } from "@remix-run/node";
import { redirect } from "@remix-run/node";
// !
import { Form, useTransition } from "@remix-run/react";

import { createProject } from "~/utils";

export const action = async ({ request }: ActionArgs) => {
  const body = await request.formData();
  const newProject = Object.fromEntries(body);
  const project = await createProject(newProject);
  return redirect(`/projects/${project.id}`);
};

export default function NewProject() {
  // !
  const transition = useTransition();

  return (
    <>
      <h2>–ù–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç</h2>
      <Form method="post">
        <label>
          –ù–∞–∑–≤–∞–Ω–∏–µ: <input name="title" type="text" />
        </label>
        <label htmlFor="description">–û–ø–∏—Å–∞–Ω–∏–µ:</label>
        <textarea name="description" id="description" />
        <button
          type="submit"
          // !
          disabled={transition.submission}
        >
          {transition.submission
            ? "–°–æ–∑–¥–∞–Ω–∏–µ..."
            : "–°–æ–∑–¥–∞—Ç—å"}
        </button>
      </Form>
    </>
  );
}
```

–û–¥–Ω–∞–∫–æ, –ø–æ—Å–∫–æ–ª—å–∫—É –º—ã –∑–Ω–∞–µ–º, —á—Ç–æ —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø–æ—á—Ç–∏ –Ω–∞–≤–µ—Ä–Ω—è–∫–∞ –±—É–¥–µ—Ç —É—Å–ø–µ—à–Ω—ã–º, –∏–º–µ–µ–º –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –∑–Ω–∞–µ–º, –∫–∞–∫ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü–∞, –º—ã –º–æ–∂–µ—Ç –∑–∞–º–µ–Ω–∏—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º `ProjectView`:

```javascript
import type { ActionArgs } from "@remix-run/node";
import { redirect } from "@remix-run/node";
import { Form, useTransition } from "@remix-run/react";

// !
import { ProjectView } from "~/components/project";
import { createProject } from "~/utils";

export const action = async ({ request }: ActionArgs) => {
  const body = await request.formData();
  const newProject = Object.fromEntries(body);
  const project = await createProject(newProject);
  return redirect(`/projects/${project.id}`);
};

export default function NewProject() {
  const transition = useTransition();
  // !
  return transition.submission ? (
    <ProjectView
      project={Object.fromEntries(
        transition.submission.formData
      )}
    />
  ) : (
    <>
      <h2>–ù–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç</h2>
      <Form method="post">
        <label>
          –ù–∞–∑–≤–∞–Ω–∏–µ: <input name="title" type="text" />
        </label>
        <label htmlFor="description">–û–ø–∏—Å–∞–Ω–∏–µ:</label>
        {/* ! */}
        <textarea name="description" id="description" />
        <button type="submit">–°–æ–∑–¥–∞—Ç—å</button>
      </Form>
    </>
  );
}
```

–¢–µ–ø–µ—Ä—å –ø–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∞–ª "–°–æ–∑–¥–∞—Ç—å", UI –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ –µ–≥–æ —Å—Ç—Ä–∞–Ω–∏—Ü—É. –ü–æ—Å–∫–æ–ª—å–∫—É –≤ –æ–±–æ–∏—Ö —Å–ª—É—á–∞—è—Ö –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ UI –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `ProjectView`, –≤—Å–µ, —á—Ç–æ –º–æ–∂–µ—Ç –∑–∞–º–µ—Ç–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, —ç—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ URL.

–°–∞–º–æ–π —Å–ª–æ–∂–Ω–æ–π —á–∞—Å—Ç—å—é –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è UI —è–≤–ª—è–µ—Ç—Å—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –æ—à–∏–±–æ–∫ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ —Ç–æ–º, —á—Ç–æ –æ–ø–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–≤–∞–ª–∏–ª–∞—Å—å. –ó–¥–µ—Å—å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç 2 –≤–∞—Ä–∏–∞–Ω—Ç–∞: –ø–æ–∑–≤–æ–ª–∏—Ç—å Remix –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—à–∏–±–∫—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –±–ª–∏–∂–∞–π—à–µ–≥–æ `ErrorBoundary` –∏–ª–∏ –≤–µ—Ä–Ω—É—Ç—å –æ—à–∏–±–∫—É –∏–∑ `loader()`. –†–∞—Å—Å–º–æ—Ç—Ä–∏–º –≤—Ç–æ—Ä–æ–π –≤–∞—Ä–∏–∞–Ω—Ç:

```javascript
import type { ActionArgs } from "@remix-run/node";
import { json, redirect } from "@remix-run/node";
import {
  Form,
  useActionData,
  useTransition,
} from "@remix-run/react";

import { ProjectView } from "~/components/project";
import { createProject } from "~/utils";

export const action = async ({ request }: ActionArgs) => {
  const body = await request.formData();
  const newProject = Object.fromEntries(body);

  try {
    const project = await createProject(newProject);

    return redirect(`/projects/${project.id}`);
  } catch (e: unknown) {
    console.error(e);

    return json("–í–æ –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞", {
      status: 500,
    });
  }
};

export default function NewProject() {
  const error = useActionData<typeof action>();
  const transition = useTransition();

  return transition.submission ? (
    <ProjectView
      project={Object.fromEntries(
        transition.submission.formData
      )}
    />
  ) : (
    <>
      <h2>–ù–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç</h2>
      <Form method="post">
        <label>
          –ù–∞–∑–≤–∞–Ω–∏–µ: <input name="title" type="text" />
        </label>
        <label htmlFor="description">–û–ø–∏—Å–∞–Ω–∏–µ:</label>
        <textarea name="description" id="description" />
        <button type="submit">–°–æ–∑–¥–∞—Ç—å</button>
      </Form>
      {error ? <p>{error}</p> : null}
    </>
  );
}
```

–¢–µ–ø–µ—Ä—å –ø—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –æ—à–∏–±–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫ —Ñ–æ—Ä–º–µ –∏ –≤–∏–¥–∏—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.

### –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞

–í–æ –∏–∑–±–µ–∂–∞–Ω–∏–µ –ª–∏—à–Ω–∏—Ö –æ—à–∏–±–æ–∫, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ–º –∏–ª–∏ –Ω–µ–≤–µ—Ä–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º –¥–∞–Ω–Ω—ã—Ö, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞, –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω—ã–º –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª–µ–π —Ñ–æ—Ä–º—ã –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ. –ö —Å—á–∞—Å—Ç—å—é, —ç—Ç–æ –ª–µ–≥–∫–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å –ø–æ–º–æ—â—å—é –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤ HTML-—ç–ª–µ–º–µ–Ω—Ç–æ–≤:

```javascript
import type { ActionArgs } from "@remix-run/node";
import { json, redirect } from "@remix-run/node";
import {
  Form,
  useActionData,
  useTransition,
} from "@remix-run/react";

import { ProjectView } from "~/components/project";
import { createProject } from "~/utils";

export const action = async ({ request }: ActionArgs) => {
  const body = await request.formData();
  const newProject = Object.fromEntries(body);
  try {
    const project = await createProject(newProject);
    return redirect(`/projects/${project.id}`);
  } catch (e: unknown) {
    console.error(e);
    return json("–í–æ –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞", {
      status: 500,
    });
  }
};

export default function NewProject() {
  const error = useActionData<typeof action>();
  const transition = useTransition();

  return transition.submission ? (
    <ProjectView
      project={Object.fromEntries(
        transition.submission.formData
      )}
    />
  ) : (
    <>
      <h2>–ù–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç</h2>
      <Form method="post">
        <label>
          –ù–∞–∑–≤–∞–Ω–∏–µ:{" "}
          <input
            // –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –Ω–∞–∑–≤–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ - 3 —Å–∏–º–≤–æ–ª–∞
            minLength={3}
            name="title"
            // –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ —è–≤–ª—è–µ—Ç—Å—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º
            required
            type="text"
          />
        </label>
        <label htmlFor="description">–û–ø–∏—Å–∞–Ω–∏–µ:</label>
        <textarea name="description" id="description" />
        <button type="submit">–°–æ–∑–¥–∞—Ç—å</button>
      </Form>
      {error ? <p>{error}</p> : null}
    </>
  );
}
```

–ö —Å–ª–æ–≤—É, —à–∞–±–ª–æ–Ω –ø–æ–ª—è –¥–ª—è –≤–≤–æ–¥–∞ email –º–æ–∂–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:

```javascript
<input
  type="email"
  name="email"
  // !
  pattern="[^@\s]+@[^@\s]+\.[^@\s]+"
  required
/>
```

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –º–æ–¥—É–ª–µ–π / Module Constraints

–ü–æ—Å–∫–æ–ª—å–∫—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Remix –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–∞–∫ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, —Ç–∞–∫ –∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ, —Å–ª–µ–¥—É–µ—Ç –ø—Ä–æ—è–≤–ª—è—Ç—å –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏–∏ –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –º–æ–¥—É–ª–µ–π (module side effects).

- —Å–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–æ–¥ - Remix –Ω–µ —Å–º–æ–∂–µ—Ç —É–¥–∞–ª–∏—Ç—å —Å–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–æ–¥ –∏–∑ —Å–±–æ—Ä–∫–∏ –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏—Ö —Å–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–æ–¥;
- –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–æ–¥ - Remix —Ä–µ–Ω–¥–µ—Ä–∏—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –ø–æ—ç—Ç–æ–º—É –º–æ–¥—É–ª–∏ –Ω–∞ –≤–µ—Ä—Ö–Ω–µ–º —É—Ä–æ–≤–Ω–µ –Ω–µ –¥–æ–ª–∂–Ω—ã —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∫–æ–¥, –æ–±—Ä–∞—â–∞—é—â–∏–π—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–Ω—ã–º API.

### –£–¥–∞–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ –∫–æ–¥–∞ –∏–∑ —Å–±–æ—Ä–∫–∏ –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞

–î–ª—è —É–¥–∞–ª–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ –∫–æ–¥–∞ –∏–∑ —Å–±–æ—Ä–∫–∏ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞ Remix –¥–µ–ª–∞–µ—Ç —Å–ª–µ–¥—É—é—â–µ–µ:

- —Å–æ–∑–¥–∞–µ—Ç "–ø—Ä–æ–∫—Å–∏—Ä—É—é—â–∏–π" –º–æ–¥—É–ª—å –¥–ª—è —Ä–æ—É—Ç–∞;
- —ç—Ç–æ—Ç –º–æ–¥—É–ª—å –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ –±—Ä–∞—É–∑–µ—Ä–Ω—ã–µ —ç–∫—Å–ø–æ—Ä—Ç—ã.

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –º–æ–¥—É–ª—å, —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É—é—â–∏–π —Ñ—É–Ω–∫—Ü–∏–∏ `loader`, `meta` –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç:

```javascript
import { json } from "@remix-run/node";
import { useLoaderData } from "@remix-run/react";

import PostsView from "../PostsView";
import { prisma } from "../db";

export async function loader() {
  return json(await prisma.post.findMany());
}

export function meta() {
  return { title: "–°–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–æ–≤" };
}

export default function Posts() {
  const posts = useLoaderData<typeof loader>();
  return <PostsView posts={posts} />;
}
```

–°–µ—Ä–≤–µ—Ä—É —Ç—Ä–µ–±—É—é—Ç—Å—è –≤–µ—Å—å –∫–æ–¥ –º–æ–¥—É–ª—è, –∞ –±—Ä–∞—É–∑–µ—Ä—É - —Ç–æ–ª—å–∫–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏ `meta()`. –ï—Å–ª–∏ `prisma` –ø–æ–ø–∞–¥–µ—Ç –≤ –∫–ª–∏–µ–Ω—Ç—Å–∫—É—é —Å–±–æ—Ä–∫—É, —Ç–æ –º–æ–¥—É–ª—å —Å–ª–æ–º–∞–µ—Ç—Å—è, –ø–æ—Å–∫–æ–ª—å–∫—É `prisma` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ API Node.js.

–ü—Ä–æ–∫—Å–∏-–º–æ–¥—É–ª—å –¥–ª—è —ç—Ç–æ–≥–æ —Ä–æ—É—Ç–∞ –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:

```javascript
export { meta, default } from "./routes/posts.tsx";
```

–ê –∫–æ–¥ –¥–ª—è –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π —Å–±–æ—Ä–∫–∏ —Ç–∞–∫:

```javascript
import { useLoaderData } from "@remix-run/react";

import PostsView from "../PostsView";

export function meta() {
  return { title: "–°–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–æ–≤" };
}

export default function Posts() {
  const posts = useLoaderData<typeof loader>();

  return <PostsView posts={posts} />;
}
```

__–ü–æ–±–æ—á–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –º–æ–¥—É–ª–µ–π__

–ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏, –ø–æ–±–æ—á–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç - —ç—Ç–æ –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π —á—Ç–æ-—Ç–æ –¥–µ–ª–∞–µ—Ç, –∞ –ø–æ–±–æ—á–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç –º–æ–¥—É–ª—è - —ç—Ç–æ –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π —á—Ç–æ-—Ç–æ –¥–µ–ª–∞–µ—Ç –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –º–æ–¥—É–ª—è.

–ù–∞–ø—Ä–∏–º–µ—Ä, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–∫–æ–π —Å—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞ –≤ –ø—Ä–µ–¥—ã–¥—É—â–∏–π –ø—Ä–∏–º–µ—Ä —Å–ª–æ–º–∞–µ—Ç –º–æ–¥—É–ª—å:

```javascript
import { json } from "@remix-run/node";
import { useLoaderData } from "@remix-run/react";

import PostsView from "../PostsView";
import { prisma } from "../db";
// !
console.log(prisma);

export async function loader() {
  return json(await prisma.post.findMany());
}

export function meta() {
  return { title: "–°–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–æ–≤" };
}

export default function Posts() {
  const posts = useLoaderData<typeof loader>();
  return <PostsView posts={posts} />;
}
```

–ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã–π —Å–µ—Ä–≤–µ—Ä–Ω—ã–π –º–æ–¥—É–ª—å `prisma` –≤—ã–≤–æ–¥–∏—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å, –ø–æ—ç—Ç–æ–º—É –∫–æ–¥ –¥–ª—è –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π —Å–±–æ—Ä–∫–∏ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

```javascript
import { useLoaderData } from "@remix-run/react";

import PostsView from "../PostsView";
// !
import { prisma } from "../db"; // üò¨
// !
console.log(prisma); // ü•∂

export function meta() {
  return { title: "–°–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–æ–≤" };
}

export default function Posts() {
  const posts = useLoaderData<typeof loader>();
  return <PostsView posts={posts} />;
}
```

`loader()` –±—ã–ª–∞ —É–¥–∞–ª–µ–Ω–∞, –Ω–æ –∏–º–ø–æ—Ä—Ç `prisma` –æ—Å—Ç–∞–ª—Å—è.

–í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –ø—Ä–æ–±–ª–µ–º—É –ª–µ–≥–∫–æ —É—Å—Ç—Ä–∞–Ω–∏—Ç—å –ø—É—Ç–µ–º –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏—è –≤ `loader()`:

```javascript
import { json } from "@remix-run/node";
import { useLoaderData } from "@remix-run/react";

import PostsView from "../PostsView";
import { prisma } from "../db";

export async function loader() {
  // !
  console.log(prisma);
  return json(await prisma.post.findMany());
}

export function meta() {
  return { title: "–°–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–æ–≤" };
}

export default function Posts() {
  const posts = useLoaderData<typeof loader>();
  return <PostsView posts={posts} />;
}
```

–¢–µ–ø–µ—Ä—å –∏–º–ø–æ—Ä—Ç `prisma` –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω –≤–º–µ—Å—Ç–µ —Å `loader()`.

–ï—Å–ª–∏ –≤—ã —Å—Ç–æ–ª–∫–Ω—É–ª–∏—Å—å —Å —Å–∏—Ç—É–∞—Ü–∏–µ–π, –∫–æ–≥–¥–∞ —Å–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–æ–¥ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ —Å–±–æ—Ä–∫—É –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –º–æ–¥—É–ª–µ–π, –ø–µ—Ä–µ–Ω–µ—Å–∏—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ –≤ —Ñ–∞–π–ª, –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ—Ç–æ—Ä–æ–≥–æ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—É—Ñ—Ñ–∏–∫—Å `server`, –Ω–∞–ø—Ä–∏–º–µ—Ä, `db.server.ts`. –≠—Ç–æ —Å–æ–æ–±—â–∏—Ç Remix, —á—Ç–æ —Ç–∞–∫–æ–π –∫–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.

### –§—É–Ω–∫—Ü–∏–∏ –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞

–ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å Remix –≤–µ–ª–∏–∫ —Å–æ–±–ª–∞–∑–Ω –∞–±—Å—Ç—Ä–∞–≥–∏—Ä–æ–≤–∞—Ç—å `loader()` —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–π –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞ (higher order functions), –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–∞–∫:

```javascript
import { redirect } from "@remix-run/node";

export function removeTrailingSlash(loader) {
  return function (arg) {
    const { request } = arg;
    const url = new URL(request.url);
    if (
      url.pathname !== "/" &&
      url.pathname.endsWith("/")
    ) {
      return redirect(request.url.slice(0, -1), {
        status: 308,
      });
    }
    return loader(arg);
  };
}
```

–ò –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

```javascript
import { removeTrailingSlash } from "~/http";

export const loader = removeTrailingSlash(({ request }) => {
  return { some: "data" };
});
```

–≠—Ç–æ –¥–µ–ª–∞–µ—Ç `loader()` –ø–æ–±–æ—á–Ω—ã–º —ç—Ñ—Ñ–µ–∫—Ç–æ–º –º–æ–¥—É–ª—è, –ø–æ—ç—Ç–æ–º—É –æ–Ω –Ω–µ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω –∏–∑ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π —Å–±–æ—Ä–∫–∏.

–î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ä–∞–Ω–Ω–∏–π –≤–æ–∑–≤—Ä–∞—Ç –æ—Ç–≤–µ—Ç–∞, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—ã–±—Ä–æ—Å–∏—Ç—å –æ—Ç–≤–µ—Ç –≤ `loader()`:

```javascript
import { redirect } from "@remix-run/node";

export function removeTrailingSlash(url) {
  if (url.pathname !== "/" && url.pathname.endsWith("/")) {
    throw redirect(request.url.slice(0, -1), {
      status: 308,
    });
  }
}
```

–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

```javascript
import { json } from "@remix-run/node";

import { removeTrailingSlash } from "~/http";

export const loader = async ({ request }: LoaderArgs) => {
  removeTrailingSlash(request.url);
  return json({ some: "data" });
};
```

–≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç Remix –∏—Å–∫–ª—é—á–∏—Ç—å `loader` –∏–∑ —Å–±–æ—Ä–∫–∏ –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, —Ç–∞–∫–æ–π –∫–æ–¥ –ª–µ–≥—á–µ —á–∏—Ç–∞—Ç—å. –°—Ä–∞–≤–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –±–ª–æ–∫–∏ –∫–æ–¥–∞:

```javascript
// 1
export const loader = async ({ request }: LoaderArgs) => {
  return removeTrailingSlash(request.url, () => {
    return withSession(request, (session) => {
      return requireUser(session, (user) => {
        return json(user);
      });
    });
  });
};

// 2
export const loader = async ({ request }: LoaderArgs) => {
  removeTrailingSlash(request.url);
  const session = await getSession(request);
  const user = await requireUser(session);
  return json(user);
};
```

–ö–∞–∫–æ–π –≤–∞–º –Ω—Ä–∞–≤–∏—Ç—Å—è –±–æ–ª—å—à–µ? –ü–æ–ª–∞–≥–∞—é, –æ—Ç–≤–µ—Ç –æ—á–µ–≤–∏–¥–µ–Ω. –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Å—Ç–∏ –∞–Ω–∞–ª–æ–≥–∏—é –º–µ–∂–¥—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `async/await` –≤–º–µ—Å—Ç–æ –ø—Ä–æ–º–∏—Å–æ–≤ –∏ –∫–æ–ª–ª–±—ç–∫–æ–≤.

### –ë—Ä–∞—É–∑–µ—Ä–Ω—ã–π –∫–æ–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

Remix –Ω–µ —É–¥–∞–ª—è–µ—Ç –±—Ä–∞—É–∑–µ—Ä–Ω—ã–π –∫–æ–¥ –∏–∑ —Å–±–æ—Ä–∫–∏ –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞, –ø–æ—Å–∫–æ–ª—å–∫—É –º–æ–¥—É–ª–∏ –Ω—É–∂–¥–∞—é—Ç—Å—è –≤ –∫–∞–∂–¥–æ–º —ç–∫—Å–ø–æ—Ä—Ç–µ –¥–ª—è —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∑–∞ –∏–∑–æ–ª—è—Ü–∏—é –∫–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–ª–∂–µ–Ω –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ, –ª–æ–∂–∏—Ç—Å—è –Ω–∞ –ø–ª–µ—á–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞.

–°–ª–µ–¥—É—é—â–∏–π –ø—Ä–∏–º–µ—Ä —Å–ª–æ–º–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:

```javascript
import { loadStripe } from "@stripe/stripe-js";

// –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `window` –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞, –ø–æ—Å–∫–æ–ª—å–∫—É –∫–æ–¥ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
const stripe = await loadStripe(window.ENV.stripe);

export async function redirectToStripeCheckout(sessionId) {
  return stripe.redirectToCheckout({ sessionId });
}
```

__–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±—Ä–∞—É–∑–µ—Ä–Ω—ã—Ö API__

–°—É—â–µ—Å—Ç–≤—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ø–æ—Å–æ–±–æ–≤ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –±—Ä–∞—É–∑–µ—Ä–Ω—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ –º–æ–¥—É–ª—è.

_–ó–∞—â–∏—Ç–Ω–∏–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (document guard)_

```javascript
import firebase from "firebase/app";

// !
if (typeof document !== "undefined") {
  firebase.initializeApp(document.ENV.firebase);
}

export { firebase };
```

–ï—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `document` –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞, –∑–Ω–∞—á–∏—Ç —Å—Ä–µ–¥–æ–π –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–¥–∞ —è–≤–ª—è–µ—Ç—Å—è –±—Ä–∞—É–∑–µ—Ä. –ü—Ä–æ–≤–µ—Ä–∫–∞ "–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ—Å—Ç–∏" `document` —è–≤–ª—è–µ—Ç—Å—è –±–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –±—Ä–∞—É–∑–µ—Ä–∞, —á–µ–º `window`, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤ Deno, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–º–µ–µ—Ç—Å—è –≥–ª–æ–±–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `window`.

_–õ–µ–Ω–∏–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è_

–°—É—Ç—å –¥–∞–Ω–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ —Å–æ—Å—Ç–æ–∏—Ç –≤ —Ç–æ–º, —á—Ç–æ –±—Ä–∞—É–∑–µ—Ä–Ω—ã–π API –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (–≤—ã–∑–æ–≤–µ —Ñ—É–Ω–∫—Ü–∏–∏):

```javascript
import { loadStripe } from "@stripe/stripe-js";

export async function redirectToStripeCheckout(sessionId) {
  // !
  const stripe = await loadStripe(window.ENV.stripe);
  return stripe.redirectToCheckout({ sessionId });
}
```

–í–æ –∏–∑–±–µ–∂–∞–Ω–∏–µ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–∞–ø–∏—Å–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤ –≥–ª–æ–±–∞–ª—å–Ω—É—é (–≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –º–æ–¥—É–ª—è) –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é:

```javascript
import { loadStripe } from "@stripe/stripe-js";

let _stripe;
async function getStripe() {
  if (!_stripe) {
    _stripe = await loadStripe(window.ENV.stripe);
  }
  return _stripe;
}

export async function redirectToStripeCheckout(sessionId) {
  const stripe = await getStripe();
  return stripe.redirectToCheckout({ sessionId });
}
```

__–†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Å –±—Ä–∞—É–∑–µ—Ä–Ω—ã–º–∏ API__

–î—Ä—É–≥–∏–º —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–º —Å–ª—É—á–∞–µ–º —è–≤–ª—è–µ—Ç—Å—è –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ –±—Ä–∞—É–∑–µ—Ä–Ω—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞.

–°–ª–µ–¥—É—é—â–∏–º –ø—Ä–∏–º–µ—Ä —Å–ª–æ–º–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –ø–æ—Å–∫–æ–ª—å–∫—É —Å–µ—Ä–≤–µ—Ä –ø–æ–ø—ã—Ç–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (local storage):

```javascript
function useLocalStorage(key) {
  const [state, setState] = useState(
    localStorage.getItem(key)
  );

  const setWithLocalStorage = (nextState) => {
    setState(nextState);
  };

  return [state, setWithLocalStorage];
}
```

–î–ª—è —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ —Ö—É–∫ `useEffect`:

```javascript
function useLocalStorage(key) {
  const [state, setState] = useState(null);

  useEffect(() => {
    setState(localStorage.getItem(key));
  }, [key]);

  const setWithLocalStorage = (nextState) => {
    setState(nextState);
  };

  return [state, setWithLocalStorage];
}
```

–ù–∞–ø–æ—Å–ª–µ–¥–æ–∫, —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –∫–∞—Å—Ç–æ–º–Ω—ã–π —Ö—É–∫, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –±–µ–∑–æ–ø–∞—Å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ö—É–∫ `useLayoutEffect`:

```javascript
import React from "react";

const canUseDOM = typeof document !== "undefined";

const useLayoutEffect = canUseDOM
  ? React.useLayoutEffect
  : () => {};
```

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ / Error Handling

Remix –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç (catch) –æ—à–∏–±–∫—É –∏ —Ä–µ–Ω–¥–µ—Ä–∏—Ç –±–ª–∏–∂–∞–π—à–∏–π (–∫ –º–µ—Å—Ç—É –µ–µ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è) `ErrorBoundary` (–ø—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª—å) –≤ —Å–ª—É—á–∞—è—Ö, –∫–æ–≥–¥–∞ –æ—à–∏–±–∫–∞ –≤–æ–∑–Ω–∏–∫–ª–∞ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ:

- —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ;
- —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ;
- –≤ `loader()` –ø—Ä–∏ –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –¥–æ–∫—É–º–µ–Ω—Ç–∞;
- –≤ `action()` –ø—Ä–∏ –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –¥–æ–∫—É–º–µ–Ω—Ç–∞;
- –≤ `loader()` –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ (Remix —Å–µ—Ä–∏–∞–ª–∏–∑—É–µ—Ç –æ—à–∏–±–∫—É –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ–µ –ø–æ —Å–µ—Ç–∏ –≤ –±—Ä–∞—É–∑–µ—Ä);
- –≤ `action()` –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ.

### –ö–æ—Ä–Ω–µ–≤–æ–π –ø—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª—å

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Å—Ç–∞—Ä—Ç–æ–≤–æ–≥–æ —à–∞–±–ª–æ–Ω–∞ –≤ —Ñ–∞–π–ª–µ `root.{tsx|jsx}` –∏–º–µ–µ—Ç—Å—è —Ç–∞–∫–æ–π –ø—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª—å:

```javascript
export function ErrorBoundary({ error }) {
  console.error(error);

  return (
    <html>
      <head>
        <title>–û, –Ω–µ—Ç!</title>
        <Meta />
        <Links />
      </head>
      <body>
        {/* UI, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è –ø—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –æ—à–∏–±–∫–∏ */}
        <Scripts />
      </body>
    </html>
  );
}
```

–ü—Ä–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–µ –∫–æ—Ä–Ω–µ–≤–æ–≥–æ –ø—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª—è –ø–µ—Ä–µ–º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –≤–µ—Å—å –¥–æ–∫—É–º–µ–Ω—Ç - —ç—Ç–æ –æ–±—ä—è—Å–Ω—è–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ `Meta`, `Links` –∏ `Scripts`.

### –í–ª–æ–∂–µ–Ω–Ω—ã–µ –ø—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª–∏

–ö–∞–∂–¥—ã–π —Ä–æ—É—Ç –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –ø—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª—å. –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ —Ç–∞–∫–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ —Å–æ—Å—Ç–æ–∏—Ç –≤ —Ç–æ–º, —á—Ç–æ –ø—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –æ—à–∏–±–∫–∏ –≤ —Ä–æ—É—Ç–µ —Å –ø—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª–µ–º —Ç–æ–ª—å–∫–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è —á–∞—Å—Ç—å UI –æ–∫–∞–∂–µ—Ç—Å—è —Å–ª–æ–º–∞–Ω–Ω–æ–π, –æ—Å—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –∫–∞–∫ –∑–∞–¥—É–º—ã–≤–∞–ª–æ—Å—å.

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º —Ç–∞–∫—É—é –∏–µ—Ä–∞—Ä—Ö–∏—é —Ä–æ—É—Ç–æ–≤:

```routes
‚îú‚îÄ‚îÄ sales
‚îÇ   ‚îú‚îÄ‚îÄ invoices
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ $invoiceId.js
‚îÇ   ‚îî‚îÄ‚îÄ invoices.js
‚îî‚îÄ‚îÄ sales.js
```

–ï—Å–ª–∏ `$invoiceId.js` —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç `ErrorBoundary` –∏ –æ—à–∏–±–∫–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –≤ –µ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ, `loader()` –∏–ª–∏ `action()`, —Å–ª–æ–º–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ä–∞–∑–¥–µ–ª —Å—á–µ—Ç–∞ (invoice), –æ—Å—Ç–∞–ª—å–Ω–∞—è —á–∞—Å—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã –±—É–¥–µ—Ç —É—Å–ø–µ—à–Ω–æ –æ—Ç—Ä–µ–Ω–¥–µ—Ä–µ–Ω–∞.

–ï—Å–ª–∏ —Ä–æ—É—Ç –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –ø—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª—è, –æ—à–∏–±–∫–∞ "–≤—Å–ø–ª—ã–≤–∞–µ—Ç" –¥–æ –±–ª–∏–∂–∞–π—à–µ–≥–æ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –ø—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª—è, –ø–æ—ç—Ç–æ–º—É –Ω–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å `ErrorBoundary` –∏–∑ –∫–∞–∂–¥–æ–≥–æ –º–æ–¥—É–ª—è.

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏ 404 / Not Found Handling

–°–ª—É—á–∞–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å—Ç–∞—Ç—É—Å-–∫–æ–¥–∞ 404:

- URL –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç –Ω–∏ —Å –æ–¥–Ω–∏–º —Ä–æ—É—Ç–æ–º;
- `loader()` –Ω–µ –æ–±–Ω–∞—Ä—É–∂–∏–ª –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

–ü–µ—Ä–≤—ã–π —Å–ª—É—á–∞–π –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è Remix –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ç–æ—Ä–æ–≥–æ —Å–ª—É—á–∞—è - –∑–∞–¥–∞—á–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞.

–ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –¥–∞–Ω–Ω—ã—Ö, –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–±—Ä–æ—Å–∏—Ç—å –æ—Ç–≤–µ—Ç:

```javascript
export async function loader({ params }: LoaderArgs) {
  const page = await db.page.findOne({
    where: { slug: params.slug },
  });

  if (!page) {
    throw new Response("–ù–µ –Ω–∞–π–¥–µ–Ω–æ", {
      status: 404,
    });
  }

  return json(page);
}
```

Remix –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç —Ç–∞–∫–æ–π –æ—Ç–≤–µ—Ç –∏ –ø–µ—Ä–µ–¥–∞–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–ª–∏–∂–∞–π—à–µ–º—É –ø–µ—Ä–µ—Ö–≤–∞—Ç—á–∏–∫—É (catch boundary). –ü–µ—Ä–µ—Ö–≤–∞—Ç—á–∏–∫ –ø–æ—Ö–æ–∂ –Ω–∞ –ø—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª—å (error boundary), —Ç–æ–ª—å–∫–æ –≤–º–µ—Å—Ç–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ `ErrorBoundary` –∏–∑ –º–æ–¥—É–ª—è –¥–æ–ª–∂–µ–Ω —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `CatchBoundary`.

–ö–æ–≥–¥–∞ –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –æ—Ç–≤–µ—Ç, –∫–æ–¥ `loader()` –ø–µ—Ä–µ—Å—Ç–∞–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –Ω–∞–º –Ω–µ –Ω—É–∂–Ω–æ –∑–∞–±–æ—Ç–∏—Ç—å—Å—è –æ–± –æ–±—Ä–∞–±–æ—Ç–∫–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ–∂–∏–¥–∞–Ω–∏—è, –æ—à–∏–±–æ–∫ –∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ.

__–ö–æ—Ä–Ω–µ–≤–æ–π –ø–µ—Ä–µ—Ö–≤–∞—Ç—á–∏–∫__

–ö–æ—Ä–Ω–µ–≤–æ–π –ø–µ—Ä–µ—Ö–≤–∞—Ç—á–∏–∫ –º–æ–∂–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:

```javascript
export function CatchBoundary() {
  const caught = useCatch();

  return (
    <html>
      <head>
        <title>–£–ø—Å!</title>
        <Meta />
        <Links />
      </head>
      <body>
        <h1>
          {caught.status} {caught.statusText}
        </h1>
        <Scripts />
      </body>
    </html>
  );
}
```

__–í–ª–æ–∂–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ—Ö–≤–∞—Ç—á–∏–∫–∏__

–ö–∞–∂–¥—ã–π —Ä–æ—É—Ç –º–æ–∂–µ—Ç —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –ø–µ—Ä–µ—Ö–≤–∞—Ç—á–∏–∫–∞:

```javascript
import type { LoaderArgs } from "@remix-run/node";
import {
  Form,
  useLoaderData,
  useParams,
} from "@remix-run/react";

export async function loader({ params }: LoaderArgs) {
  const page = await db.page.findOne({
    where: { slug: params.slug },
  });

  if (!page) {
    throw new Response("–ù–µ –Ω–∞–π–¥–µ–Ω–æ", {
      status: 404,
    });
  }

  return json(page);
}

export function CatchBoundary() {
  const params = useParams();

  return (
    <div>
      <h2>–ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç</h2>
      <Form action="../create">
        <button
          type="submit"
          name="slug"
          value={params.slug}
        >
          –°–æ–∑–¥–∞—Ç—å {params.slug}?
        </button>
      </Form>
    </div>
  );
}

export default function Page() {
  return <PageView page={useLoaderData<typeof loader>()} />;
}
```

–ü–æ–Ω—è—Ç–Ω–æ, —á—Ç–æ —Ç–∞–∫ –º–æ–≥—É—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è –ª—é–±—ã–µ –æ—Ç–≤–µ—Ç—ã, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ 404.

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—ã –æ–∫—Ä—É–∂–µ–Ω–∏—è / Environment Variables

Remix –∏–º–µ–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É [dotenv](https://www.npmjs.com/package/dotenv) –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –ø–æ—ç—Ç–æ–º—É –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∫–æ–º–∞–Ω–¥—ã `remix dev` –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—ã –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ `process.env`.

–°–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```bash
touch .env
```

–†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º —ç—Ç–æ—Ç —Ñ–∞–π–ª:

```bash
SOME_SECRET=super-secret
```

–ü–æ–ª—É—á–∞–µ–º –¥–æ—Å—Ç—É–ø –∫ —ç—Ç–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –≤ `loader()` –∏–ª–∏ `action()`:

```javascript
export async function loader() {
  console.log(process.env.SOME_SECRET);
}
```

–ü—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∫–æ–º–∞–Ω–¥—ã `remix serve` –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—ã –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ `process.env` –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è, –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å—Å—è –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–º —Å–µ—Ä–≤–µ—Ä–æ–º. –°–ø–æ—Å–æ–±—ã –∏—Ö —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ —Ö–æ—Å—Ç–∏–Ω–≥–∞.

–ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Å–ª–µ–¥—É—é—â–µ–µ:

- –≤–µ—Ä–Ω—É—Ç—å `ENV` –∏–∑ –∫–æ—Ä–Ω–µ–≤–æ–≥–æ `loader()`:

```javascript
export async function loader() {
  return json({
    ENV: {
      STRIPE_PUBLIC_KEY: process.env.STRIPE_PUBLIC_KEY,
      FAUNA_DB_URL: process.env.FAUNA_DB_URL,
    },
  });
}

export function Root() {
  return (
    <html lang="en">
      <head>
        <Meta />
        <Links />
      </head>
      <body>
        <Outlet />
        <Scripts />
      </body>
    </html>
  );
}
```

- –∑–∞–ø–∏—Å–∞—Ç—å `ENV` –≤ –≥–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç `window`:

```javascript
export async function loader() {
  return json({
    ENV: {
      STRIPE_PUBLIC_KEY: process.env.STRIPE_PUBLIC_KEY,
    },
  });
}

export function Root() {
  const data = useLoaderData<typeof loader>();

  return (
    <html lang="en">
      <head>
        <Meta />
        <Links />
      </head>
      <body>
        <Outlet />
        <script
          dangerouslySetInnerHTML={{
            __html: `window.ENV = ${JSON.stringify(
              data.ENV
            )}`,
          }}
        />
        <Scripts />
      </body>
    </html>
  );
}
```

```javascript
import { loadStripe } from "@stripe/stripe-js";

export async function redirectToStripeCheckout(
  sessionId
) {
  const stripe = await loadStripe(
    window.ENV.STRIPE_PUBLIC_KEY
  );
  return stripe.redirectToCheckout({ sessionId });
}
```

## –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è / Styling

–û—Å–Ω–æ–≤–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —è–≤–ª—è–µ—Ç—Å—è –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ `<link rel="stylesheet">` –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É. –í Remix —ç—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º —ç–∫—Å–ø–æ—Ä—Ç–∞ –∏–∑ —Ä–æ—É—Ç–∞ —Ñ—É–Ω–∫—Ü–∏–∏ `links`. –ö–æ–≥–¥–∞ —Ä–æ—É—Ç —è–≤–ª—è–µ—Ç—Å—è –∞–∫—Ç–∏–≤–Ω—ã–º, —Ç–∞–±–ª–∏—Ü–∞ —Å—Ç–∏–ª–µ–π –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É. –ö–æ–≥–¥–∞ —Ä–æ—É—Ç –±–æ–ª—å—à–µ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –∞–∫—Ç–∏–≤–Ω—ã–º, —Ç–∞–±–ª–∏—Ü–∞ —Å—Ç–∏–ª–µ–π —É–¥–∞–ª—è–µ—Ç—Å—è —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

```javascript
export function links() {
  return [
    {
      rel: "stylesheet",
      href: "https://unpkg.com/modern-css-reset@1.4.0/dist/reset.min.css",
    },
  ];
}
```

`links()` –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Ä–æ—É—Ç–æ–≤ –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è –∏ —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è –ø–æ –ø–æ—Ä—è–¥–∫—É (–Ω–∞—á–∏–Ω–∞—è —Å –∫–æ—Ä–Ω–µ–≤–æ–≥–æ —Ä–æ—É—Ç–∞) –≤ –≤–∏–¥–µ —Ç–µ–≥–æ–≤ `link` —Å –ø–æ–º–æ—â—å—é –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ `Link` –≤ —Ä–∞–∑–¥–µ–ª–µ `head` –≤ —Ñ–∞–π–ª–µ `app/root.jsx`:

```javascript
import { Links } from "@remix-run/react";

export default function Root() {
  return (
    <html>
      <head>
        <Links />
        {/* ... */}
      </head>
      {/* ... */}
    </html>
  );
}
```

–§–∞–π–ª—ã CSS –º–æ–≥—É—Ç –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ –º–æ–¥—É–ª–∏ –Ω–∞–ø—Ä—è–º—É—é. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ Remix:

- –∫–æ–ø–∏—Ä—É–µ—Ç —Ñ–∞–π–ª –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π —Å–±–æ—Ä–∫–∏;
- —Å–æ–∑–¥–∞–µ—Ç –æ—Ç–ø–µ—á–∞—Ç–æ–∫ (fingerprint) —Ñ–∞–π–ª–∞ –¥–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–≥–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è;
- –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç URL –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –º–æ–¥—É–ª–µ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞.

```javascript
import styles from "~/styles/global.css";

export function links() {
  return [{ rel: "stylesheet", href: styles }];
}
```

–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `<link>` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∏–ª–µ–π –∑–∞–∫–ª—é—á–∞—é—Ç—Å—è –≤ —Å–ª–µ–¥—É—é—â–µ–º:

- URL –º–æ–∂–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å—Å—è –±—Ä–∞—É–∑–µ—Ä–æ–º –∏ CDN;
- –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ URL –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ä–∞–∑–Ω—ã–º–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è;
- —Ç–∞–±–ª–∏—Ü–∞ —Å—Ç–∏–ª–µ–π –º–æ–∂–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Å JS;
- —Ä–µ—Å—É—Ä—Å—ã CSS –º–æ–≥—É—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å—Å—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ —Å –ø–æ–º–æ—â—å—é `<link rel="prefetch" />`;
- –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö –Ω–µ –ª–æ–º–∞—é—Ç –∫—ç—à –¥–ª—è —Å—Ç–∏–ª–µ–π;
- –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å—Ç–∏–ª—è—Ö –Ω–µ –ª–æ–º–∞—é—Ç –∫—ç—à –¥–ª—è JS.

### –û–±—ã—á–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã —Å—Ç–∏–ª–µ–π

__–°—Ç–∏–ª–∏ —Ä–æ—É—Ç–æ–≤__

–ö–∞–∂–¥—ã–π —Ä–æ—É—Ç –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É:

```javascript
// app/routes/dashboard.tsx
import styles from "~/styles/dashboard.css";

export function links() {
  return [{ rel: "stylesheet", href: styles }];
}
```

```javascript
// app/routes/accounts.tsx
import styles from "~/styles/accounts.css";

export function links() {
  return [{ rel: "stylesheet", href: styles }];
}
```

```javascript
// app/routes/sales.tsx
import styles from "~/styles/sales.css";

export function links() {
  return [{ rel: "stylesheet", href: styles }];
}
```

–°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ URL –∏ –∑–∞–≥—Ä—É–∂–∞–µ–º—ã—Ö —Å—Ç–∏–ª–µ–π –º–æ–∂–µ—Ç –≤—ã–≥—è–ª–¥–µ—Ç—å —Ç–∞–∫:

- `/dashboard` - `dashboard.css`;
- `/dashboard/accounts` - `dashboard.css` –∏ `accounts.css`;
- `/dashboard/sales` - `dashboard.css` –∏ `sales.css`.

–¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –∫ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç–∏–ª–µ–π —Ä–µ—à–∞–µ—Ç –º–Ω–æ–≥–∏–µ –ø—Ä–æ–±–ª–µ–º—ã, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å–æ —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–µ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: –∑–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–ª—å–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –Ω–∞ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Å—Ç–∏–ª–µ–π, —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ –∏ –Ω–∞–∑–≤–∞–Ω–∏–π –∫–ª–∞—Å—Å–æ–≤, –∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ä—ã—Ö —Å—Ç–∏–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∏ —Ç.–¥.

__–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏__

–í –ª—é–±–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∏–º–µ—é—Ç—Å—è –æ–±—â–∏–µ (—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ - shared) –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã: —Ñ–æ—Ä–º—ã, –∫–Ω–æ–ø–∫–∏, –º–∞–∫–µ—Ç—ã –∏ –¥—Ä. –í Remix –¥–ª—è —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏ —Ç–∞–∫–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–∏–Ω –∏–∑ 2 –ø–æ–¥—Ö–æ–¥–æ–≤.

_–ì–ª–æ–±–∞–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å—Ç–∏–ª–µ–π_

–°–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª `shared.css` (–∏–ª–∏ `global.css`):

```css
/* app/styles/shared.css */
/* –∏—Å–ø–æ–ª—å–∑—É–µ–º –Ω–∞–∑–≤–∞–Ω–∏—è –∫–ª–∞—Å—Å–æ–≤ */
.PrimaryButton {
  /* ... */
}

.TileGrid {
  /* ... */
}

/* –∏–ª–∏ data-–∞—Ç—Ä–∏–±—É—Ç—ã */
[data-primary-button] {
  /* ... */
}

[data-tile-grid] {
  /* ... */
}
```

–ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º —ç—Ç–æ—Ç —Ñ–∞–π–ª –≤ `app/root.tsx`:

```javascript
// app/root.tsx
import styles from "~/styles/shared.css";

export function links() {
  return [{ rel: "stylesheet", href: styles }];
}
```

_–°–æ–≤–º–µ—Å—Ç–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ç–∏–ª–µ–π_

–°–æ–∑–¥–∞–µ–º CSS-—Ñ–∞–π–ª –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∏ –∑–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç–∏–ª–∏ –≤ —Ä–æ—É—Ç–µ, –∫–æ—Ç–æ—Ä—ã–π –µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç.

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ —É –Ω–∞—Å –∏–º–µ–µ—Ç—Å—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `Button` –≤ `app/components/button/index.js` —Å–æ —Å—Ç–∏–ª—è–º–∏ –≤ `app/components/button/styles.css`, –∞ —Ç–∞–∫–∂–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `PrimaryButton`, —Ä–∞—Å—à–∏—Ä—è—é—â–∏–π `Button`.

```css
/* app/components/button/styles.css */
.btn {
  border: solid 1px;
  background: white;
  color: #454545;
}
```

```javascript
// app/components/button/index.jsx
import styles from "./styles.css";

export const links = () => [
  { rel: "stylesheet", href: styles },
];

export const Button = React.forwardRef(
  ({ children, ...props }, ref) => {
    return <button {...props} ref={ref} className="btn" />;
  }
);
Button.displayName = "Button";
```

_–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ_, —á—Ç–æ `Button` —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç `links()`, —Ö–æ—Ç—è –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —Ä–æ—É—Ç–æ–º.

```css
/* app/components/button-primary/styles.css */
.btn-primary {
  background: blue;
  color: white;
}
```

```javascript
// app/components/button-primary/index.jsx
import { Button, links as buttonLinks } from "../button";
import styles from "./styles.css";

export const links = () => [
  ...buttonLinks(),
  { rel: "stylesheet", href: styles },
];

export const PrimaryButton = React.forwardRef(
  ({ children, ...props }, ref) => {
    return (
      <Button {...props} ref={ref} className="btn btn-primary" />
    );
  }
);
PrimaryButton.displayName = "PrimaryButton";
```

_–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ_, —á—Ç–æ `PrimaryButton` –≤–∫–ª—é—á–∞–µ—Ç —Å—Ç–∏–ª–∏ –¥–ª—è `Button`.

–ü–æ—Å–∫–æ–ª—å–∫—É –∫–Ω–æ–ø–∫–∏ –Ω–µ —è–≤–ª—è—é—Ç—Å—è —Ä–æ—É—Ç–∞–º–∏, —Ç.–µ. –Ω–µ —Å–≤—è–∑–∞–Ω—ã —Å —Å–µ–≥–º–µ–Ω—Ç–∞–º–∏ URL, Remix –Ω–µ –∑–Ω–∞–µ—Ç, –∫–æ–≥–¥–∞ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å, –∑–∞–≥—Ä—É–∂–∞—Ç—å –∏ –≤—ã–≥—Ä—É–∂–∞—Ç—å –∏—Ö —Å—Ç–∏–ª–∏. –ü–æ—ç—Ç–æ–º—É –∏–º–ø–æ—Ä—Ç –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å—Ç–∏–ª–µ–π –¥–ª—è –∫–Ω–æ–ø–æ–∫ –¥–æ–ª–∂–µ–Ω –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ —Ä–æ—É—Ç–µ, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–Ω–æ–ø–∫–∏:

```javascript
import styles from "~/styles/index.css";

import {
  PrimaryButton,
  links as primaryButtonLinks,
} from "~/components/button-primary";

export function links() {
  return [
    ...primaryButtonLinks(),
    { rel: "stylesheet", href: styles },
  ];
}
```

_–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤_

–° –ø–æ–º–æ—â—å—é —Ç–µ–≥–∞ `link` –º–æ–≥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –Ω–µ —Ç–æ–ª—å–∫–æ —Å—Ç–∏–ª–∏, –Ω–æ –∏ –¥—Ä—É–≥–∏–µ —Ä–µ—Å—É—Ä—Å—ã, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:

```css
/* app/components/copy-to-clipboard/style.css */
.copy-to-clipboard {
  background: url("/icons/clipboard.svg");
}
```

```javascript
// app/components/copy-to-clipboard/index.jsx
import styles from "./styles.css";

export const links = () => [
  {
    rel: "preload",
    href: "/icons/clipboard.svg",
    as: "image",
    type: "image/svg+xml",
  },
  { rel: "stylesheet", href: styles },
];

export const CopyToClipboard = React.forwardRef(
  ({ children, ...props }, ref) => {
    return (
      <Button {...props} ref={ref} className="copy-to-clipboard" />
    );
  }
);
CopyToClipboard.displayName = "CopyToClipboard";
```

_–ú–µ–¥–∏–∞-–∑–∞–ø—Ä–æ—Å—ã_

–ê—Ç—Ä–∏–±—É—Ç `media` –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —à–∏—Ä–∏–Ω—ã —ç–∫—Ä–∞–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —Ç.–ø.:

```javascript
export function links() {
  return [
    {
      rel: "stylesheet",
      href: mainStyles,
    },
    {
      rel: "stylesheet",
      href: largeStyles,
      media: "(min-width: 1024px)",
    },
    {
      rel: "stylesheet",
      href: xlStyles,
      media: "(min-width: 1280px)",
    },
    {
      rel: "stylesheet",
      href: darkStyles,
      media: "(prefers-color-scheme: dark)",
    },
  ];
}
```

### TailwindCSS

–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
npm i -D npm-run-all tailwindcss
```

–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º [Tailwind](https://tailwindcss.com/):

```bash
npx tailwindcss init
```

–†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º `tailwind.config.js`:

```javascript
/** @type {import('tailwindcss').Config} */
module.exports = {
  content: ["./app/**/*.{js,jsx,ts,tsx}"],
  theme: {
    extend: {},
  },
  plugins: [],
};
```

–û–±–Ω–æ–≤–ª—è–µ–º —Ä–∞–∑–¥–µ–ª `scripts` –≤ —Ñ–∞–π–ª–µ `package.json`:

```json
{
  "scripts": {
    "build": "run-s \"build:*\"",
    "build:css": "npm run generate:css -- --minify",
    "build:remix": "remix build",
    "dev": "run-p \"dev:*\"",
    "dev:css": "npm run generate:css -- --watch",
    "dev:remix": "remix dev",
    "generate:css": "npx tailwindcss -o ./app/tailwind.css",
    "start": "remix-serve build"
  }
}
```

–ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–π —Ñ–∞–π–ª CSS –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:

```javascript
// app/root.tsx
import type { LinksFunction } from "@remix-run/node"; // or cloudflare/deno

import styles from "./tailwind.css";

export const links: LinksFunction = () => [
  { rel: "stylesheet", href: styles },
];
```

–î–ª—è –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏–∏ —Å—Ç–∏–ª–µ–π Tailwind —Å –ø–æ–º–æ—â—å—é –¥–∏—Ä–µ–∫—Ç–∏–≤—ã `@apply` –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å CSS-—Ñ–∞–π–ª –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, `styles/tailwind.css`:

```css
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer components {
  .custom-class {
    @apply ...;
  }
}
```

–ò –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É `generate:css` –≤ `package.json`:

```json
"generate:css": "npx tailwindcss -i ./styles/tailwind.css -o ./app/tailwind.css"
```

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–π —Ñ–∞–π–ª –≤ `.gitignore`:

```
node_modules

/.cache
/build
/public/build
.env

/app/tailwind.css
```

### PostCSS

–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
npm i -D postcss-cli postcss autoprefixer
```

–°–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª `postcss.config.js` –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:

```javascript
module.exports = {
  plugins: {
    autoprefixer: {},
  },
};
```

–°–æ–∑–¥–∞–µ–º CSS-—Ñ–∞–π–ª –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, `styles/app.css`.

–î–æ–±–∞–≤–ª—è–µ–º —Å–∫—Ä–∏–ø—Ç—ã –≤ `package.json`:

```json
"dev:css": "postcss styles --base styles --dir app/styles -w",
"build:css": "postcss styles --base styles --dir app/styles --env production"
```

–î–∞–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç —Ñ–∞–π–ª—ã –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `styles` –∏ –ø–æ–º–µ—â–∞—é—Ç –∏—Ö –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `app/styles`.

–ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–π —Ñ–∞–π–ª –≤ `app/root.tsx`:

```javascript
import type { LinksFunction } from "@remix-run/node";

import styles from "./styles/app.css";

export const links: LinksFunction = () => {
  return [{ rel: "stylesheet", href: styles }];
};
```

–î–ª—è –∑–∞–ø—É—Å–∫–∞ [PostCSS](https://postcss.org/) –∏ Remix –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å npm-–ø–∞–∫–µ—Ç [concurrently](https://www.npmjs.com/package/concurrently):

```bash
npm i -D concurrently
```

```json
"scripts": {
  "dev": "concurrently \"npm run dev:css\" \"remix dev\""
}
```

### SASS

–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º [SASS](https://sass-lang.com/):

```bash
npm i -D sass
```

–î–æ–±–∞–≤–ª—è–µ–º —Å–∫—Ä–∏–ø—Ç –≤ `package.json`:

```json
"sass": "sass --watch app/:app/"
```

–ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è, —á—Ç–æ —Ñ–∞–π–ª—ã SASS –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `app`. –§–ª–∞–≥ `--watch` –æ–∑–Ω–∞—á–∞–µ—Ç –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ –∑–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º, —É–¥–∞–ª–µ–Ω–∏–µ–º –∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–µ–π —Ñ–∞–π–ª–æ–≤.

–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ SASS –∏ Remix:

```json
"dev": "concurrently \"npm run sass\" \"remix dev\""
```

## TypeScript

Remix –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç JS –∏ TS –∏–∑ –∫–æ—Ä–æ–±–∫–∏, –Ω–æ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä Remix –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É —Ç–∏–ø–æ–≤ (–æ–Ω –ø—Ä–æ—Å—Ç–æ –∏—Ö —É–¥–∞–ª—è–µ—Ç). –û–¥–Ω–∞–∫–æ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∏–ø–æ–≤ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ `package.json` —Ç–∞–∫–æ–π —Å–∫—Ä–∏–ø—Ç:

```json
"typecheck": "tsc -b"
```

–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–æ–≤ TS —Ç–∞–∫–∂–µ –≤—Å—Ç—Ä–æ–µ–Ω—ã –≤ Remix. –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è —Ñ–∞–π–ª `remix.env.d.ts`:

```javascript
/// <reference types="@remix-run/dev" />
/// <reference types="@remix-run/node" />
```

–°—Å—ã–ª–∫–∞ –Ω–∞ —ç—Ç–æ—Ç —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –≤ `tsconfig.json`:

```json
"include": ["remix.env.d.ts", "**/*.ts", "**/*.tsx"]
```

## –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–æ–¥—É–ª—è —Ä–æ—É—Ç–∞ / Route Module API

–ö–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, —Ä–æ—É—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π —á–∞—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (User Interface, UI) –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —Ç–∞–∫–æ–≥–æ –∫–∞–∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç React —Å —Å–µ—Ä–≤–µ—Ä–Ω—ã–º–∏ —Ö—É–∫–∞–º–∏ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞.

### –§—É–Ω–∫—Ü–∏—è, —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º–∞—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

–≠—Ç–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –ø—Ä–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–∏ —Å —Ä–æ—É—Ç–æ–º (–µ–≥–æ –ø—É—Ç–µ–º –∏–ª–∏ –∞–¥—Ä–µ—Å–æ–º):

```javascript
export default function SomeRouteComponent() {
  return (
    <div>
      <h1>–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ-–∫–∞!</h1>
      <p>–Ø –∏—Å–ø–æ–ª—å–∑—É—é React —É–∂–µ 7 –ª–µ—Ç.</p>
    </div>
  );
}
```

### loader

–ö–∞–∂–¥—ã–π —Ä–æ—É—Ç –º–æ–∂–µ—Ç –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –∑–∞–≥—Ä—É–∑–∫–∏ - `loader`, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø–µ—Ä–µ–¥ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º –¥–ª—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —Ä–æ—É—Ç—É. `loader()` –º–æ–∂–Ω–æ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∫–∞–∫ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∑–∞–ø—Ä–æ—Å–∞ GET, –ø–æ—ç—Ç–æ–º—É –º—ã –Ω–µ –¥–æ–ª–∂–Ω—ã —á–∏—Ç–∞—Ç—å –≤ –Ω–µ–π —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (request body) - —ç—Ç–æ –∑–∞–¥–∞—á–∞ —Ñ—É–Ω–∫—Ü–∏–∏ `action` (—Å–º. –Ω–∏–∂–µ).

```javascript
import { json } from "@remix-run/node";
import type { LoaderFunction } from "@remix-run/node";

export const loader: LoaderFunction = async () => {
  // —Ñ—É–Ω–∫—Ü–∏—è `json` –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç —Å–µ—Ä–∏–∞–ª–∏–∑—É–µ–º—ã–π –æ–±—ä–µ–∫—Ç –≤ –æ—Ç–≤–µ—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON
  return json({ ok: true });
};
```

–î–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ. –ü—Ä–∏ –Ω–∞—á–∞–ª—å–Ω–æ–º —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–µ –æ–Ω–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞ HTML. –ü—Ä–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ Remix –≤—ã–∑—ã–≤–∞–µ—Ç –µ–µ —Å –ø–æ–º–æ—â—å—é `fetch()`. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≤ `action()` –º–æ–∂–Ω–æ –Ω–∞–ø—Ä—è–º—É—é –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–µ–∫—Ä–µ—Ç—ã —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –∏ —Ç.–¥. –ö–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ UI, —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ —Å–±–æ—Ä–∫–∏ –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞.

–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–Ω–æ-—Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è (Object-Relational Mapping, ORM) `Prisma`:

```javascript
import { json } from "@remix-run/node";
import { useLoaderData } from "@remix-run/react";

import { prisma } from "../db";

export const loader = async () => {
  // –ø–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ –ë–î
  return json(await prisma.user.findMany());
};

export default function Users() {
  const users = useLoaderData();

  return (
    <ul>
      {users.map((user) => (
        <li key={user.id}>{user.name}</li>
      ))}
    </ul>
  );
}
```

Remix –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç ("–ø–æ–ª–∏—Ñ–∏–ª–∏—Ç") `fetch()` –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ `loader()`.

__–ê—Ä–≥—É–º–µ–Ω—Ç—ã, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–µ `loader()`__

_params_

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å—Ç—Ä–æ–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ —Ä–æ—É—Ç–∞ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è `loader()`. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ —É –Ω–∞—Å –µ—Å—Ç—å `loader()` –ø–æ –∞–¥—Ä–µ—Å—É `data/invoices/$invoiceId.tsx`, Remix –∏–∑–≤–ª–µ—á–µ—Ç `invoiceId` –∏ –ø–µ—Ä–µ–¥–∞—Å—Ç –µ–≥–æ `loader()`. –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω—ã–º –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ API –∏–ª–∏ –ë–î:

```javascript
// –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ—Å–µ—Ç–∏–ª /invoices/123
export const loader: LoaderFunction = async ({
  params,
}) => {
  console.log(params.invoiceId); // "123"
};
```

_request_

–≠–∫–∑–µ–º–ø–ª—è—Ä [Fetch Request](https://developer.mozilla.org/en-US/docs/Web/API/Request) —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –∑–∞–ø—Ä–æ—Å–µ.

–î–∞–Ω–Ω—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è —á—Ç–µ–Ω–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ HTTP –∑–∞–ø—Ä–æ—Å–∞, URL –∏–ª–∏ [URLSearchParams](https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams), –Ω–∞–ø—Ä–∏–º–µ—Ä:

```javascript
export const loader: LoaderFunction = async ({
  request,
}) => {
  // —á–∏—Ç–∞–µ–º –∫—É–∫–∏
  const cookie = request.headers.get("Cookie");

  // —Ä–∞–∑–±–∏—Ä–∞–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å—Ç—Ä–æ–∫–∏ –∑–∞–ø—Ä–æ—Å–∞
  const searchParams = new URLSearchParams(request.url);
  const search = searchParams.get("search");
};
```

_context_

–ö–æ–Ω—Ç–µ–∫—Å—Ç, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–π —Ñ—É–Ω–∫—Ü–∏–∏ `getLoadContext` –∞–¥–∞–ø—Ç–µ—Ä–∞ —Å–µ—Ä–≤–µ—Ä–∞. –≠—Ç–æ —Å–ø–æ—Å–æ–± –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –º–æ—Å—Ç –º–µ–∂–¥—É API –∑–∞–ø—Ä–æ—Å–∞/–æ—Ç–≤–µ—Ç–∞ –∞–¥–∞–ø—Ç–µ—Ä–∞ –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º Remix.

–î–æ–ø—É—Å—Ç–∏–º, –Ω–∞—à —Å–µ—Ä–≤–µ—Ä `Express` –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:

```javascript
const {
  createRequestHandler,
} = require("@remix-run/express");

app.all(
  "*",
  createRequestHandler({
    getLoadContext(req, res) {
      // —ç—Ç–æ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º `loader()`
      return { expressUser: req.user };
    },
  })
);
```

–ü–æ–ª—É—á–∞–µ–º –¥–æ—Å—Ç—É–ø –∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –≤ `loader()`:

```javascript
export const loader: LoaderFunction = async ({
  context,
}) => {
  const { expressUser } = context;
  // ...
};
```

__–û—Ç–≤–µ—Ç, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–π `loader()`__

`loader()` –¥–æ–ª–∂–Ω–∞ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å [Fetch Response](https://developer.mozilla.org/en-US/docs/Web/API/Response):

```javascript
export const loader: LoaderFunction = async () => {
  const users = await db.users.findMany();
  const body = JSON.stringify(users);

  return new Response(body, {
    headers: {
      "Content-Type": "application/json",
    },
  });
};
```

–£—Ç–∏–ª–∏—Ç–∞ `json` —É–ø—Ä–æ—â–∞–µ—Ç —ç—Ç–æ—Ç –ø—Ä–æ—Ü–µ—Å—Å:

```javascript
import { json } from "@remix-run/node";

export const loader: LoaderFunction = async () => {
  const users = await fakeDb.users.findMany();

  return json(users);
};
```

`json()` –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –≤ –æ—Ç–≤–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, —Ç–∞–∫—É—é –∫–∞–∫ –∑–∞–≥–æ–ª–æ–≤–∫–∏ HTTP –∏–ª–∏ —Å—Ç–∞—Ç—É—Å-–∫–æ–¥:

```javascript
import { json } from "@remix-run/node";

export const loader: LoaderFunction = async ({
  params,
}) => {
  const user = await fakeDb.project.findOne({
    where: { id: params.id },
  });

  if (!user) {
    return json("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω", { status: 404 });
  }

  return json(user);
};
```

__–í—ã–±—Ä–æ—Å –æ—Ç–≤–µ—Ç–∞ –≤ `loader()`__

–í–º–µ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—Ç–∞ –æ—Ç–≤–µ—Ç–∞ –≤ `loader()`, –µ–≥–æ –º–æ–∂–Ω–æ –≤—ã–±—Ä–æ—Å–∏—Ç—å (`throw`). –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç "–ø—Ä–æ—Ä–≤–∞—Ç—å—Å—è" —Å–∫–≤–æ–∑—å —Å—Ç–µ–∫ –≤—ã–∑–æ–≤–æ–≤ (call stack) –∏ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π `UI` —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç—É–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ —Å –ø–æ–º–æ—â—å—é `CatchBoundary` (—Å–º. –Ω–∏–∂–µ).

–ü—Ä–∏–º–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è —É—Ç–∏–ª–∏—Ç—ã, –≤—ã–±—Ä–∞—Å—ã–≤–∞—é—â–µ–π –æ—Ç–≤–µ—Ç –≤ `loader()`, —á—Ç–æ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–¥–∞ –∏ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥—É —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ `UI`:

```javascript
// app/db.ts
import { json } from "@remix-run/node";
import type { ThrownResponse } from "@remix-run/react";

export type InvoiceNotFoundResponse = ThrownResponse<
  404,
  string
>;

export function getInvoice(id, user) {
  const invoice = db.invoice.find({ where: { id } });

  if (!invoice) {
    throw json("–°—á–µ—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω", { status: 404 });
  }

  return invoice;
}
```

```javascript
// app/http.ts
import { redirect } from "@remix-run/node";
import { getSession } from "./session";

export async function requireUserSession(request) {
  const session = await getSession(
    request.headers.get("cookie")
  );

  if (!session) {
    // –ø–æ—Å–∫–æ–ª—å–∫—É —É—Ç–∏–ª–∏—Ç—ã `redirect` –∏ `json` –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –æ—Ç–≤–µ—Ç—ã,
    // –∏—Ö —Ç–∞–∫–∂–µ –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Å—ã–≤–∞—Ç—å
    throw redirect("/login", 302);
  }

  return session.get("user");
}
```

```javascript
// app/routes/invoice/$invoiceId.tsx
import { useCatch, useLoaderData } from "@remix-run/react";
import type { ThrownResponse } from "@remix-run/react";

import { requireUserSession } from "~/http";
import { getInvoice } from "~/db";
import type {
  Invoice,
  InvoiceNotFoundResponse,
} from "~/db";

type InvoiceCatchData = {
  invoiceOwnerEmail: string;
};

type ThrownResponses =
  | InvoiceNotFoundResponse
  | ThrownResponse<401, InvoiceCatchData>;

export const loader = async ({ request, params }) => {
  const user = await requireUserSession(request);
  const invoice: Invoice = getInvoice(params.invoiceId);

  if (!invoice.userIds.includes(user.id)) {
    const data: InvoiceCatchData = {
      invoiceOwnerEmail: invoice.owner.email,
    };

    throw json(data, { status: 401 });
  }

  return json(invoice);
};

export default function InvoiceRoute() {
  const invoice = useLoaderData<Invoice>();

  return <InvoiceView invoice={invoice} />;
}

export function CatchBoundary() {
  // —Å–∏–≥–Ω–∞—Ç—É—Ä–∞ `caught` - `{ status, statusText, data }`
  const caught = useCatch<ThrownResponses>();

  switch (caught.status) {
    case 401:
      return (
        <div>
          <p>–£ –≤–∞—Å –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —ç—Ç–æ–º—É —Å—á–µ—Ç—É.</p>
          <p>
            –°–≤—è–∂–∏—Ç–µ—Å—å —Å {caught.data.invoiceOwnerEmail} –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞.
          </p>
        </div>
      );
    case 404:
      return <div>–°—á–µ—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω</div>;
  }

  // –µ—Å–ª–∏ —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫, —Ç–æ –æ—à–∏–±–∫–∞ –±—É–¥–µ—Ç –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω–∞ –±–ª–∏–∂–∞–π—à–∏–º `ErrorBoundary` (—Å–º. –Ω–∏–∂–µ)
  // throw new Error("–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Å—Ç–∞—Ç—É—Å –≤ catch boundary");
  return (
    <div>
      –ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫: {caught.status}{" "}
      {caught.statusText}
    </div>
  );
}
```

### action

–ö–∞–∫ –∏ `loader()`, `action` - —ç—Ç–æ —Å–µ—Ä–≤–µ—Ä–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –º—É—Ç–∞—Ü–∏–π –¥–∞–Ω–Ω—ã—Ö –∏ –¥—Ä—É–≥–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π. –ï—Å–ª–∏ –∫ —Ä–æ—É—Ç—É –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–µ GET-–∑–∞–ø—Ä–æ—Å (POST, PUT, PATCH, DELETE), —Ç–æ `action()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–µ—Ä–µ–¥ `loader()`.

`action()` –∏–º–µ–µ—Ç —Ç–∞–∫–æ–π –∂–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, —á—Ç–æ –∏ `loader()`. –†–∞–∑–Ω–∏—Ü–∞ –≤ —Ç–æ–º, –∫–æ–≥–¥–∞ –æ–Ω–∏ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è.

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑–º–µ—â–∞—Ç—å —Å–æ–≤–º–µ—Å—Ç–Ω–æ (co-locate) –≤—Å–µ, —á—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å –¥–∞–Ω–Ω—ã–º–∏, –≤ –æ–¥–Ω–æ–º –º–æ–¥—É–ª–µ —Ä–æ—É—Ç–∞: —á—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –æ—Ç–≤–µ—á–∞—é—â–∏–π –∑–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö, –∏ –∑–∞–ø–∏—Å—å –¥–∞–Ω–Ω—ã—Ö.

```javascript
import { json, redirect } from "@remix-run/node";
import { Form } from "@remix-run/react";

import { fakeGetTodos, fakeCreateTodo } from "~/utils/db";
import { TodoList } from "~/components/TodoList";

export async function loader() {
  return json(await fakeGetTodos());
}

export async function action({ request }) {
  const body = await request.formData();

  const todo = await fakeCreateTodo({
    title: body.get("title"),
  });

  return redirect(`/todos/${todo.id}`);
}

export default function Todos() {
  const data = useLoaderData();

  return (
    <div>
      <TodoList todos={data} />
      <Form method="post">
        <input type="text" name="title" />
        <button type="submit">–°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É</button>
      </Form>
    </div>
  );
}
```

_–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ_: —Ñ–æ—Ä–º–∞ –±–µ–∑ –ø—Ä–æ–ø–∞ `action` (`<Form method="post">`) –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ —Ä–æ—É—Ç—É, –≤ –∫–æ—Ç–æ—Ä–æ–º –æ–Ω–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è.

### headers

–ö–∞–∂–¥—ã–π —Ä–æ—É—Ç –º–æ–∂–µ—Ç –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ HTTP. –û–¥–Ω–∏–º –∏–∑ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ —è–≤–ª—è–µ—Ç—Å—è Cache-Control, —É–∫–∞–∑—ã–≤–∞—é—â–∏–π –±—Ä–∞—É–∑–µ—Ä—É –∏ —Å–µ—Ç–∏ –¥–æ—Å—Ç–∞–≤–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (Content Delivery Network, CDN) –≥–¥–µ –∏ –Ω–∞ –ø—Ä–æ—Ç—è–∂–µ–Ω–∏–∏ –∫–∞–∫–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É.

```javascript
export function headers({
  actionHeaders,
  loaderHeaders,
  parentHeaders,
}) {
  return {
    "X-Stretchy-Pants": "–∑–∞–±–∞–≤—ã —Ä–∞–¥–∏",
    "Cache-Control": "max-age=300, s-maxage=3600",
  };
}
```

–ó–∞–≥–æ–ª–æ–≤–∫–∏ `loader()` –∏ `action()` –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è `headers()`:

```javascript
export function headers({ loaderHeaders }) {
  return {
    "Cache-Control": loaderHeaders.get("Cache-Control"),
  };
}
```

`actionHeaders` –∏ `loaderHeaders` —è–≤–ª—è—é—Ç—Å—è —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏ –∫–ª–∞—Å—Å–∞ [Headers](https://developer.mozilla.org/en-US/docs/Web/API/Headers).

–í —Å–ª—É—á–∞–µ —Å –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ —Ä–æ—É—Ç–∞–º–∏, "–ø–æ–±–µ–∂–¥–∞–µ—Ç" `headers()` –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ (—Å–∞–º–æ–≥–æ –≥–ª—É–±–æ–∫–æ –≤–ª–æ–∂–µ–Ω–Ω–æ–≥–æ) —Ä–æ—É—Ç–∞. –ó–∞–≥–æ–ª–æ–≤–∫–∏ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ —Ä–æ—É—Ç–∞ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –∞—Ä–≥—É–º–µ–Ω—Ç–µ `parentHeaders`, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º–æ–º `headers()` –¥–æ—á–µ—Ä–Ω–µ–≥–æ —Ä–æ—É—Ç–∞.

–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ HTTP –º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≤ —Ñ–∞–π–ª–µ `entry.server.ts`:

```javascript
import { renderToString } from "react-dom/server";
import { RemixServer } from "@remix-run/react";
import type { EntryContext } from "@remix-run/node";

export default function handleRequest(
  request: Request,
  responseStatusCode: number,
  responseHeaders: Headers,
  remixContext: EntryContext
) {
  const markup = renderToString(
    <RemixServer context={remixContext} url={request.url} />
  );

  responseHeaders.set("Content-Type", "text/html");
  // !
  responseHeaders.set("X-Powered-By", "Hugs");

  return new Response("<!DOCTYPE html>" + markup, {
    status: responseStatusCode,
    headers: responseHeaders,
  });
}
```

### meta

–§—É–Ω–∫—Ü–∏—è `meta` –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –º–µ—Ç–∞-—Ç—ç–≥–∏ HTML-–¥–æ–∫—É–º–µ–Ω—Ç–∞. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ –≤ –∫–∞–∂–¥–æ–º —Ä–æ—É—Ç–µ, –∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º —Ä–æ—É—Ç–æ–≤ –º–∞–∫–µ—Ç–∞ (layout route) (–¥–ª—è —Ç–∞–∫–∏—Ö —Ä–æ—É—Ç–æ–≤ –º–µ—Ç–∞-—Ç—ç–≥–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –∏—Ö –æ—Å–Ω–æ–≤–Ω—ã–º–∏ –∏–ª–∏ –∏–Ω–¥–µ–∫—Å–Ω—ã–º–∏ —Ä–æ—É—Ç–∞–º–∏ (index routes)).

```javascript
import type { MetaFunction } from "@remix-run/node";

export const meta: MetaFunction = () => {
  return {
    title: "–ù–µ—á—Ç–æ –∫–ª–µ–≤–æ–µ",
    description: "–ü—Ä–µ–≤—å—é –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –ø–æ–∏—Å–∫–∞.",
  };
};
```

–ú–µ—Ç–∞-—Ç—ç–≥–∏ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Ä–æ—É—Ç–æ–≤ –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è.

__–ö–æ–Ω—Ç–µ–∫—Å—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤ `meta()`__

`meta()` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–±—ä–µ–∫—Ç —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏:

- `data` - –¥–∞–Ω–Ω—ã–µ, —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã–µ `loader()`;
- `location` - –æ–±—ä–µ–∫—Ç –ø–æ–¥–æ–±–Ω—ã–π `window.location` —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Ç–µ–∫—É—â–µ–º —Ä–æ—É—Ç–µ;
- `params` - –æ–±—ä–µ–∫—Ç, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å—Ç—Ä–æ–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ —Ä–æ—É—Ç–∞;
- `parentsData` - —Ö—ç—à-—Ç–∞–±–ª–∏—Ü–∞ –¥–∞–Ω–Ω—ã—Ö, —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã—Ö `loader()` —Ç–µ–∫—É—â–µ–≥–æ –∏ –≤—Å–µ—Ö —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏—Ö —Ä–æ—É—Ç–æ–≤.

### links

–§—É–Ω–∫—Ü–∏—è `links` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —ç–ª–µ–º–µ–Ω—Ç—ã `link`, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–∏ –ø–æ—Å–µ—â–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º:

```javascript
import type { LinksFunction } from "@remix-run/node";

export const links: LinksFunction = () => {
  return [
    {
      rel: "icon",
      href: "/favicon.png",
      type: "image/png",
    },
    {
      rel: "stylesheet",
      href: "https://example.com/some/styles.css",
    },
    { page: "/users/123" },
    {
      rel: "preload",
      href: "/images/banner.jpg",
      as: "image",
    },
  ];
};
```

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `links()` —è–≤–ª—è–µ—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –≤ Remix.

### CatchBoundary

`CatchBoundary` - —ç—Ç–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç React, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è, –∫–æ–≥–¥–∞ `loader()` –∏–ª–∏ `action()` –≤—ã–±—Ä–∞—Å—ã–≤–∞—é—Ç –æ—Ç–≤–µ—Ç.

`CatchBoundary` —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–æ—É—Ç–∞. –û–Ω –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —Å—Ç–∞—Ç—É—Å-–∫–æ–¥—É –∏ –≤—ã–±—Ä–æ—à–µ–Ω–Ω–æ–º—É –æ—Ç–≤–µ—Ç—É —á–µ—Ä–µ–∑ —Ö—É–∫ `useCatch`:

```javascript
import { useCatch } from "@remix-run/react";

export function CatchBoundary() {
  const caught = useCatch();

  return (
    <div>
      <h1>–ü–µ—Ä–µ—Ö–≤–∞—Ç</h1>
      <p>–°—Ç–∞—Ç—É—Å: {caught.status}</p>
      <pre>
        <code>{JSON.stringify(caught.data, null, 2)}</code>
      </pre>
    </div>
  );
}
```

### ErrorBoundary

`ErrorBoundary` - —ç—Ç–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç React, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –ø—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ª—é–±–æ–π –æ—à–∏–±–∫–∏ –≤ —Ä–æ—É—Ç–µ, –∫–∞–∫ –ø—Ä–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–µ, —Ç–∞–∫ –∏ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö. –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—Ç—å –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è (uncaught exceptions).

`ErrorBoundary` —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –æ–±—ã—á–Ω—ã–µ [–ø—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª–∏](https://reactjs.org/docs/error-boundaries.html) React —Å –Ω–µ–∫–æ—Ç–æ—Ä—ã–º–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏.

–î–∞–Ω–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç –æ–¥–∏–Ω –ø—Ä–æ–ø - –≤–æ–∑–Ω–∏–∫—à—É—é –æ—à–∏–±–∫—É:

```javascript
export function ErrorBoundary({ error }) {
  return (
    <div>
      <h1>–û—à–∏–±–∫–∞</h1>
      <p>{error.message}</p>
      <p>–¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ —Å—Ç–µ–∫–∞:</p>
      <pre>{error.stack}</pre>
    </div>
  );
}
```

### handle

–§—É–Ω–∫—Ü–∏—è `handle` –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å —Ö—É–∫–æ–º `useMatches` (—Å–º. –Ω–∏–∂–µ). –û–Ω–∞ –º–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –ª—é–±—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:

```javascript
export const handle = {
  its: "all yours",
};
```

### –ò–º–ø–æ—Ä—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤

–õ—é–±–æ–π —Ñ–∞–π–ª, –Ω–∞—Ö–æ–¥—è—â–∏–π—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `app`, –º–æ–∂–µ—Ç –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ –º–æ–¥—É–ª—å. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ Remix –¥–µ–ª–∞–µ—Ç —Å–ª–µ–¥—É—é—â–µ–µ:

- –∫–æ–ø–∏—Ä—É–µ—Ç —Ñ–∞–π–ª –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Å–±–æ—Ä–∫–∏ –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞;
- —Å–æ–∑–¥–∞–µ—Ç –æ—Ç–ø–µ—á–∞—Ç–æ–∫ (fingerprint) —Ñ–∞–π–ª–∞ –¥–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–≥–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è (long-term caching);
- –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–π URL, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –º–æ–¥—É–ª–µ–π –ø—Ä–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–µ.

```javascript
import type { LinksFunction } from "@remix-run/node";

import styles from "./styles/app.css";
import banner from "./images/banner.jpg";

export const links: LinksFunction = () => {
  return [{ rel: "stylesheet", href: styles }];
};

export default function Page() {
  return (
    <div>
      <h1>–ù–µ–∫–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞</h1>
      <img src={banner} />
    </div>
  );
}
```

##  –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã / Components

### Links, LiveReload, Meta, Scripts, ScrollRestoration

–≠—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –≤ –∫–æ—Ä–Ω–µ–≤–æ–º —Ä–æ—É—Ç–µ (`root.tsx`):

```javascript
import type {
  LinksFunction,
  MetaFunction,
} from "@remix-run/node";
import {
  Links,
  LiveReload,
  Meta,
  Outlet,
  Scripts,
  ScrollRestoration,
} from "@remix-run/react";

import globalStylesheetUrl from "./global-styles.css";

export const links: LinksFunction = () => {
  return [{ rel: "stylesheet", href: globalStylesheetUrl }];
};

export const meta: MetaFunction = () => ({
  charset: "utf-8",
  title: "–ú–æ–µ –≤–æ—Å—Ö–∏—Ç–∏—Ç–µ–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ",
  viewport: "width=device-width,initial-scale=1",
});

export default function App() {
  return (
    <html lang="en">
      <head>
        {/* –í—Å–µ —ç–∫—Å–ø–æ—Ä—Ç—ã `meta()` –≤—Å–µ—Ö —Ä–æ—É—Ç–æ–≤ */}
        <Meta />

        {/* –í—Å–µ —ç–∫—Å–ø–æ—Ä—Ç—ã `links()` –≤—Å–µ—Ö —Ä–æ—É—Ç–æ–≤ */}
        <Links />
      </head>
      <body>
        {/* –î–æ—á–µ—Ä–Ω–∏–µ —Ä–æ—É—Ç—ã */}
        <Outlet />

        {/* –£–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–∑–∏—Ü–∏–µ–π –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞—Ö –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ */}
        <ScrollRestoration />

        {/* –¢–µ–≥–∏ `script` */}
        <Scripts />

        {/* –í—ã–ø–æ–ª–Ω—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–¥–∞ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ */}
        <LiveReload />
      </body>
    </html>
  );
}
```

### Link

–≠—Ç–æ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç —Ç–µ–≥ `a`, –∫–æ—Ç–æ—Ä—ã–π —è–≤–ª—è–µ—Ç—Å—è –æ—Å–Ω–æ–≤–Ω—ã–º —Å—Ä–µ–¥—Å—Ç–≤–æ–º –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏. –û–Ω –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `Link` –∏–∑ `React Router`, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª, —Å–≤—è–∑–∞–Ω–Ω—ã–π —Å –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–º –ø–æ–ª—É—á–µ–Ω–∏–µ–º —Ä–µ—Å—É—Ä—Å–æ–≤ (resource prefetching).

```javascript
import { Link } from "@remix-run/react";

export default function GlobalNav() {
  return (
    <nav>
      <Link to="/dashboard">–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</Link>{" "}
      <Link to="/account">–ê–∫–∫–∞—É–Ω—Ç</Link>{" "}
      <Link to="/support">–ü–æ–¥–¥–µ—Ä–∂–∫–∞</Link>
    </nav>
  );
}
```

–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø—Ä–æ–ø–æ–º `prefetch`:

```javascript
<>
  <Link /> {/* –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é "none" */}
  <Link prefetch="none" />
  <Link prefetch="intent" />
  <Link prefetch="render" />
</>
```

- `none` - –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é. –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Å—Å—ã–ª–æ–∫ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π —Å–µ—Å—Å–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –±—Ä–∞—É–∑–µ—Ä –Ω–µ —Å–º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ;
- `intent` - –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã—Ä–∞–∂–∞–µ—Ç –Ω–∞–º–µ—Ä–µ–Ω–∏–µ –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É. –≠—Ç–æ –Ω–∞–º–µ—Ä–µ–Ω–∏–µ –≤—ã—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞–≤–µ–¥–µ–Ω–∏–µ–º –∫—É—Ä—Å–æ—Ä–∞ –∏–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π —Ñ–æ–∫—É—Å–∞ –Ω–∞ —Å—Å—ã–ª–∫—É. –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å–ø–æ—Å–æ–±;
- `render` - –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–µ —Å—Å—ã–ª–∫–∏.

### PrefetchPageLinks

–î–∞–Ω–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç –≤—Å–µ —Ç–µ–≥–∏ `<link rel="prefetch">` –∏ `<link rel="modulepreload"/>` –¥–ª—è –≤—Å–µ—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ —É–∫–∞–∑–∞–Ω–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø—É—Ç—å –∫ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∞–±—Å–æ–ª—é—Ç–Ω—ã–º):

```javascript
<PrefetchPageLinks page="/absolute/path/to/page" />
```

### NavLink

`NavLink` - —ç—Ç–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ç–∏–ø `Link`, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± "–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏" —Å—Å—ã–ª–∫–∏. –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω—ã–º –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –º–µ–Ω—é –Ω–∞–≤–∏–≥–∞—Ü–∏–∏, —Ç–∞–∫–æ–≥–æ –∫–∞–∫ —Ö–ª–µ–±–Ω—ã–µ –∫—Ä–æ—à–∫–∏ –∏–ª–∏ –Ω–∞–±–æ—Ä –≤–∫–ª–∞–¥–æ–∫, –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞.

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∞–∫—Ç–∏–≤–Ω–æ–º—É `NavLink` –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫–ª–∞—Å—Å `active`. –ü—Ä–æ–ø `style` —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ–º–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é, –ø–æ–∑–≤–æ–ª—è—é—â—É—é –∫–∞—Å—Ç–æ–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è.

```javascript
import { NavLink } from "@remix-run/react";

function NavList() {
  // —ç—Ç–∏ —Å—Ç–∏–ª–∏ –±—É–¥—É—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –∫ –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Å—Å—ã–ª–∫–µ
  const activeStyle = {
    textDecoration: "underline",
  };
  const activeClassName = "underline";

  return (
    <nav>
      <ul>
        <li>
          <NavLink
            to="messages"
            style={({ isActive }) =>
              isActive ? activeStyle : undefined
            }
          >
            –°–æ–æ–±—â–µ–Ω–∏—è
          </NavLink>
        </li>
        <li>
          <NavLink
            to="tasks"
            className={({ isActive }) =>
              isActive ? activeClassName : undefined
            }
          >
            –ó–∞–¥–∞—á–∏
          </NavLink>
        </li>
      </ul>
    </nav>
  );
}
```

–ü—Ä–æ–ø `end` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, —á—Ç–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –±—É–¥–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–º —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–∏ –µ–≥–æ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –ø—É—Ç–∏, —Ç.–µ. –±–µ–∑ —É—á–µ—Ç–∞ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π –ø—É—Ç–µ–π –µ–≥–æ –¥–æ—á–µ—Ä–Ω–∏—Ö —Ä–æ—É—Ç–æ–≤:

```javascript
<NavLink to="/" end>
  –ì–ª–∞–≤–Ω–∞—è
</NavLink>
```

### Form

`Form` - —ç—Ç–æ –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö, —Ç–µ.–µ –∏—Ö —Å–æ–∑–¥–∞–Ω–∏—è, –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ —É–¥–∞–ª–µ–Ω–∏—è:

```javascript
import { Form } from "@remix-run/react";

function NewEvent() {
  return (
    <Form method="post" action="/events">
      <input type="text" name="title" />
      <input type="text" name="description" />
    </Form>
  );
}
```

- –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –¥–∞–Ω–Ω—ã–º–∏ –±—É–¥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏—è JavaScript –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ;
- –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã –≤—Å–µ `loader()` –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±–µ—Å–ø–µ—á–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏ UI;
- `Form` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–µ—Ä–∏–∞–ª–∏–∑—É–µ—Ç –¥–∞–Ω–Ω—ã–µ (–ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏ —Å —Ç–µ–º, –∫–∞–∫ —ç—Ç–æ –¥–µ–ª–∞–µ—Ç –±—Ä–∞—É–∑–µ—Ä –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ JS);
- —Ö—É–∫ `useTransition` (—Å–º. –Ω–∏–∂–µ) –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ `UI`.

__–ü—Ä–æ–ø—ã `Form`__

_action_

–í –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ —ç—Ç–æ—Ç –ø—Ä–æ–ø –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è. –§–æ—Ä–º—ã –±–µ–∑ –ø—Ä–æ–ø–∞ `action` (`<Form method="post">`) –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç –¥–∞–Ω–Ω—ã–µ —Ä–æ—É—Ç—É, –≤ –∫–æ—Ç–æ—Ä–æ–º –æ–Ω–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è. –≠—Ç–æ –æ–±–ª–µ–≥—á–∞–µ—Ç —Å–æ–≤–º–µ—Å—Ç–Ω–æ–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, –∞ —Ç–∞–∫–∂–µ —Ñ—É–Ω–∫—Ü–∏–π —á—Ç–µ–Ω–∏—è –∏ –∑–∞–ø–∏—Å–∏ –¥–∞–Ω–Ω—ã—Ö.

`action()` –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ –¥—Ä—É–≥–æ–º—É —Ä–æ—É—Ç—É:

```javascript
<Form action="/projects/new" method="post" />
```

–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç `loader()`, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞–ø—Ä–æ—Å–∞ GET –≤–æ –≤—Å–µ—Ö —Ä–æ—É—Ç–∞—Ö, —Å–æ–≤–ø–∞–¥–∞—é—â–∏—Ö —Å URL, `action()` –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞–ø—Ä–æ—Å–∞ POST –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ —Å–∞–º–æ–º –≥–ª—É–±–æ–∫–æ –≤–ª–æ–∂–µ–Ω–Ω–æ–º —Å–æ–≤–ø–∞–¥–∞—é—â–µ–º —Ä–æ—É—Ç–µ –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ —Ä–µ—á—å –Ω–µ –∏–¥–µ—Ç –æ–± –∏–Ω–¥–µ–∫—Å–Ω–æ–º —Ä–æ—É—Ç–µ. –í –ø–æ—Å–ª–µ–¥–Ω–µ–º —Å–ª—É—á–∞–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `action()` —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ —Ä–æ—É—Ç–∞.

–ï—Å–ª–∏ –º—ã —Ö–æ—Ç–∏–º –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –æ—Å–Ω–æ–≤–Ω–æ–º—É —Ä–æ—É—Ç—É, —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä —Å—Ç—Ä–æ–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ `index` –≤ `action()`: `<Form action="/accounts?index" method="post" />`.

_method_

–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç [–º–µ—Ç–æ–¥ –∑–∞–ø—Ä–æ—Å–∞ HTTP](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods): GET, POST, PUT, PATCH, DELETE. –î–µ—Ñ–æ–ª—Ç–Ω—ã–º –º–µ—Ç–æ–¥–æ–º —è–≤–ª—è–µ—Ç—Å—è GET.

```javascript
<Form method="post" />
```

–ù–∞—Ç–∏–≤–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç `form` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∑–∞–ø—Ä–æ—Å—ã GET –∏ POST. –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ JS –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ Remix –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –≤—Å–µ –Ω–µ GET-–∑–∞–ø—Ä–æ—Å—ã –≤ POST-–∑–∞–ø—Ä–æ—Å—ã. –≠—Ç—É –ø—Ä–æ–±–ª–µ–º—É –º–æ–∂–Ω–æ —Ä–µ—à–∏—Ç—å —Å –ø–æ–º–æ—â—å—é —Å–∫—Ä—ã—Ç–æ–≥–æ –∏–Ω–ø—É—Ç–∞ `<input type="hidden" name="_method" value="delete" />`. –ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ JS –æ–± —ç—Ç–æ–º –º–æ–∂–Ω–æ –Ω–µ –±–µ—Å–ø–æ–∫–æ–∏—Ç—å—Å—è.

_encType_

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ `application/x-www-form-urlencoded`, –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `multipart/form-data`.

_replace_

–£–∫–∞–∑—ã–≤–∞–µ—Ç —Ñ–æ—Ä–º–µ –∑–∞–º–µ–Ω–∏—Ç—å —Ç–µ–∫—É—â—É—é —Å—É—â–Ω–æ—Å—Ç—å –≤ —Å—Ç–µ–∫–µ –∏—Å—Ç–æ—Ä–∏–∏ –≤–º–µ—Å—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–π. –ú–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω—ã–º, –∫–æ–≥–¥–∞ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ä–º—ã, —á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–≥ –≤–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É, –Ω–∞–∂–∞–≤ –∫–Ω–æ–ø–∫—É "–ù–∞–∑–∞–¥" –æ–¥–∏–Ω —Ä–∞–∑.

_reloadDocument_

–ï—Å–ª–∏ –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ `true`, —Ñ–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –±—Ä–∞—É–∑–µ—Ä–æ–º, –∞ –Ω–µ JS. –î–∞–Ω–Ω—ã–π –ø—Ä–æ–ø —è–≤–ª—è–µ—Ç—Å—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º –¥–ª—è `Form`, –æ—Ç–ø—Ä–∞–≤–ª—è—é—â–µ–π –¥–∞–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å–Ω–æ–º—É —Ä–æ—É—Ç—É.

## –•—É–∫–∏ / Hooks

### useLoaderData

–≠—Ç–æ—Ç —Ö—É–∫ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Ä–∞–∑–æ–±—Ä–∞–Ω–Ω—ã–º –¥–∞–Ω–Ω—ã–º, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–º `loader()` —Ç–µ–∫—É—â–µ–≥–æ —Ä–æ—É—Ç–∞:

```javascript
import { json } from "@remix-run/node";
import { useLoaderData } from "@remix-run/react";

export async function loader() {
  return json(await fakeDb.invoices.findAll());
}

export default function Invoices() {
  const invoices = useLoaderData();
  // ...
}
```

### useActionData

–≠—Ç–æ—Ç —Ö—É–∫ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Ä–∞–∑–æ–±—Ä–∞–Ω–Ω—ã–º –¥–∞–Ω–Ω—ã–º, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–º `action()` —Ç–µ–∫—É—â–µ–≥–æ —Ä–æ—É—Ç–∞. –ï—Å–ª–∏ —Ñ–æ—Ä–º–∞ –µ—â–µ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–ª–∞—Å—å, `useActionData()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `undefined`:

```javascript
import { json } from "@remix-run/node";
import { useActionData, Form } from "@remix-run/react";

export async function action({ request }) {
  const body = await request.formData();

  const name = body.get("visitorsName");

  return json({ message: `–ü—Ä–∏–≤–µ—Ç, ${name}` });
}

export default function Invoices() {
  const data = useActionData();

  return (
    <Form method="post">
      <p>
        <label>
          –ö–∞–∫ –í–∞—Å –∑–æ–≤—É—Ç?
          <input type="text" name="visitorsName" />
        </label>
      </p>
      <p>{data ? data.message : "Waiting..."}</p>
    </Form>
  );
}
```

–¢–∏–ø–∏—á–Ω—ã–º —Å–ª—É—á–∞–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `useActionData()` —è–≤–ª—è–µ—Ç—Å—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã:

```javascript
import { redirect, json } from "@remix-run/node";
import { Form, useActionData } from "@remix-run/react";

export async function action({ request }) {
  const form = await request.formData();
  const email = form.get("email");
  const password = form.get("password");
  const errors = {};

  // –≤–∞–ª–∏–¥–∏—Ä—É–µ–º –ø–æ–ª—è
  if (typeof email !== "string" || !email.includes("@")) {
    errors.email = "–≠—Ç–æ –Ω–µ –ø–æ—Ö–æ–∂–µ –Ω–∞ –∞–¥—Ä–µ—Å —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã";
  }

  if (typeof password !== "string" || password.length < 6) {
    errors.password = "–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ—Å—Ç–æ—è—Ç—å –º–∏–Ω–∏–º—É–º –∏–∑ 6 —Å–∏–º–≤–æ–ª–æ–≤";
  }

  // –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –æ—à–∏–±–∫–∏
  if (Object.keys(errors).length) {
    return json(errors, { status: 422 });
  }

  // —Å–æ–∑–¥–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –≤—ã–ø–æ–ª–Ω—è–µ–º –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
  await createUser(form);
  return redirect("/dashboard");
}

export default function Signup() {
  const errors = useActionData();

  return (
    <>
      <h1>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h1>
      <Form method="post">
        <p>
          <input type="text" name="email" />
          {errors?.email ? (
            <span>{errors.email}</span>
          ) : null}
        </p>
        <p>
          <input type="text" name="password" />
          {errors?.password ? (
            <span>{errors.password}</span>
          ) : null}
        </p>
        <p>
          <button type="submit">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
        </p>
      </Form>
    </>
  );
}
```

### useSubmit

–≠—Ç–æ—Ç —Ö—É–∫ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ñ–æ—Ä–º—É –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ. –û–Ω –ø–æ—Ö–æ–∂ –Ω–∞ —Ö—É–∫ `useNavigate` –∏–∑ `React Router` –¥–ª—è —Ñ–æ—Ä–º—ã. –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω—ã–º, –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–∏ –ª—é–±–æ–≥–æ –ø–æ–ª—è:

```javascript
import { json } from "@remix-run/node";
import { useSubmit, useTransition } from "@remix-run/react";

export async function loader() {
  return json(await getUserPreferences());
}

export async function action({ request }) {
  await updatePreferences(await request.formData());

  return redirect("/prefs");
}

function UserPreferences() {
  const submit = useSubmit();
  const transition = useTransition();

  function handleChange(event) {
    submit(event.currentTarget, { replace: true });
  }

  return (
    <Form method="post" onChange={handleChange}>
      <label>
        <input type="checkbox" name="darkMode" value="on" />{" "}
        –¢–µ–º–Ω–∞—è —Ç–µ–º–∞
      </label>
      {transition.state === "submitting" ? (
        <p>–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...</p>
      ) : null}
    </Form>
  );
}
```

–≠—Ç–æ —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω—ã–º –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—ã—Ö–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ —Å–∏—Å—Ç–µ–º—ã –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –µ–≥–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –≤ —Ç–µ—á–µ–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, 5 –º–∏–Ω—É—Ç:

```javascript
import { useSubmit, useTransition } from "@remix-run/react";
import { useEffect } from "react";

function AdminPage() {
  useSessionTimeout();

  return <div>{/* ... */}</div>;
}

function useSessionTimeout() {
  const submit = useSubmit();
  const transition = useTransition();

  useEffect(() => {
    const timer = setTimeout(() => {
      submit(null, { method: "post", action: "/logout" });
    }, 5 * 60_000);

    return () => clearTimeout(timer);
  }, [submit, transition]);
}
```

### useTransition

–≠—Ç–æ—Ç —Ö—É–∫ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤—Å—é –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–µ—Ä–µ—Ö–æ–¥–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö. –û–Ω –æ—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–ª–µ–¥—É—é—â–∏—Ö –≤–µ—â–µ–π:

- –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∑–∞–≥—Ä—É–∑–∫–∏;
- —Å–ø–∏–Ω–Ω–µ—Ä—ã —Å—Å—ã–ª–æ–∫;
- –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ñ–æ—Ä–º—ã –Ω–∞ –ø–µ—Ä–∏–æ–¥ –º—É—Ç–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö;
- —Å–ø–∏–Ω–Ω–µ—Ä—ã –∫–Ω–æ–ø–æ–∫;
- –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–æ–≤–æ–π –∑–∞–ø–∏—Å–∏ –¥–æ –µ–µ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ;
- –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–æ –µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.

```javascript
import { useTransition } from "@remix-run/react";

function SomeComponent() {
  const transition = useTransition();
  // transition.state;
  // transition.type;
  // transition.submission;
  // transition.location;
}
```

_state_

–°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–µ—Ä–µ—Ö–æ–¥–∞:

- `idle` - –ø–µ—Ä–µ—Ö–æ–¥ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç;
- `submitting` - —Ñ–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞, –≤—ã–∑–≤–∞–Ω–∞ –ª–∏–±–æ `loader()` (–ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ GET), –ª–∏–±–æ `action()` (–ø—Ä–∏ –¥—Ä—É–≥–æ–º –∑–∞–ø—Ä–æ—Å–µ);
- `loading` - –≤—ã–∑–≤–∞–Ω–∞ `loader()` —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ä–æ—É—Ç–∞ –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

–ü–µ—Ä–µ—Ö–æ–¥ –ø—Ä–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏:

```
idle ‚Üí loading ‚Üí idle
```

–ü–µ—Ä–µ—Ö–æ–¥ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–æ—Ä–º—ã –º–µ—Ç–æ–¥–æ–º GET:

```
idle ‚Üí submitting ‚Üí idle
```

–ü–µ—Ä–µ—Ö–æ–¥ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–æ—Ä–º—ã –¥—Ä—É–≥–∏–º –º–µ—Ç–æ–¥–æ–º:

```
idle ‚Üí submitting ‚Üí loading ‚Üí idle
```

```javascript
function SubmitButton() {
  const transition = useTransition();

  const text =
    transition.state === "submitting"
      ? "–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ..."
      : transition.state === "loading"
        ? "–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ"
        : "–í–ø–µ—Ä–µ–¥";

  return <button type="submit">{text}</button>;
}
```

_type_

–¢–∏–ø –ø–µ—Ä–µ—Ö–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–µ—Ä–µ—Ö–æ–¥–∞:

- `state === 'idle'`:
  - `idle`;
- `state === 'submitting'`:
  - `loaderSubmission` - —Ñ–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –º–µ—Ç–æ–¥–æ–º GET, –≤—ã–∑–≤–∞–Ω–∞ `loader()`;
  - `actionSubmission` - —Ñ–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –¥—Ä—É–≥–∏–º –º–µ—Ç–æ–¥–æ–º, –≤—ã–∑–≤–∞–Ω–∞ `action()`;
- `state === 'loading'`:
  - `loaderSubmissionRedirect` - `loader()` –≤—ã–ø–æ–ª–Ω–∏–ª–∞ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–π —Ä–æ—É—Ç;
  - `actionRedirect` - `action()` –≤—ã–ø–æ–ª–Ω–∏–ª–∞ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–π —Ä–æ—É—Ç;
  - `actionReload` - `action()` –≤–µ—Ä–Ω—É–ª–∞ –¥–∞–Ω–Ω—ã–µ, –≤—Å–µ `loader()` –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è;
  - `fetchActionRedirect` - `fetcher` –≤ `action()` –≤—ã–ø–æ–ª–Ω–∏–ª –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–π —Ä–æ—É—Ç;
  - `normalRedirect` - `loader()` –æ–±—ã—á–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ (–∏–ª–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è) –≤—ã–ø–æ–ª–Ω–∏–ª–∞ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π —Ä–æ—É—Ç;
  - `normalLoad` - –æ–±—ã—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –æ–±—ã—á–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏.

```javascript
function SubmitButton() {
  const transition = useTransition();

  const loadTexts = {
    actionRedirect: "–î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã, –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ...",
    actionReload: "–î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã, –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Å–≤–µ–∂–∏–µ –¥–∞–Ω–Ω—ã–µ...",
  };

  const text =
    transition.state === "submitting"
      ? "–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ..."
      : transition.state === "loading"
      ? loadTexts[transition.type] || "–ó–∞–≥—Ä—É–∑–∫–∞..."
      : "–í–ø–µ—Ä–µ–¥";

  return <button type="submit">{text}</button>;
}
```

_submission_

–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–µ—Ä–µ—Ö–æ–¥–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è.

_location_

–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–ª–µ–¥—É—é—â–µ–π –ª–æ–∫–∞—Ü–∏–∏. –ü—Ä–∏–º–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ `Link`, –∫–æ—Ç–æ—Ä—ã–π "–∑–Ω–∞–µ—Ç", –∫–æ–≥–¥–∞ –µ–≥–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è —Å—Ç–∞—Ç—å –∞–∫—Ç–∏–≤–Ω–æ–π:

```javascript
import { Link, useResolvedPath } from "@remix-run/react";

function PendingLink({ to, children }) {
  const transition = useTransition();
  const path = useResolvedPath(to);

  const isPending =
    transition.state === "loading" &&
    transition.location.pathname === path.pathname;

  return (
    <Link
      data-pending={isPending ? "true" : null}
      to={to}
      children={children}
    />
  );
}
```

### useFetcher

–≠—Ç–æ—Ç —Ö—É–∫ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å UI –∫ `action()` –∏ `loader()`, —Ç.–µ. –æ—Å—É—â–µ—Å—Ç–≤–∏—Ç—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å —Å–µ—Ä–≤–µ—Ä–æ–º –±–µ–∑ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ `a` –∏ `form` –∏–ª–∏ –∏—Ö —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–∞–º–∏ –≤ Remix - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ `Link` –∏ `Form`.

–≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω—ã–º –≤ —Å–ª–µ–¥—É—é—â–∏—Ö —Å–ª—É—á–∞—è—Ö:

- –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö, –Ω–µ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å —Ä–æ—É—Ç–∞–º–∏ UI (–≤—Å–ø–ª—ã–≤–∞—é—â–∏–µ –æ–∫–Ω–∞, –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ñ–æ—Ä–º—ã –∏ —Ç.–¥.);
- –æ—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ `action()` –±–µ–∑ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ (—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ç–∏–ø–∞ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –Ω–æ–≤–æ—Å—Ç–Ω—É—é —Ä–∞—Å—Å—ã–ª–∫—É);
- –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ—Ç–ø—Ä–∞–≤–æ–∫ –≤ —Å–ø–∏—Å–∫–µ (—Ç—Ä–∏–≤–∏–∞–ª—å–Ω—ã–π "—Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á", –≥–¥–µ –Ω–∞–∂–∞—Ç–∏–µ –æ–¥–Ω–æ–π –∫–Ω–æ–ø–∫–∏ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö);
- –±–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –∏ –¥—Ä.

_–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ_: —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–º —Å–ø–æ—Å–æ–±–æ–º –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —è–≤–ª—è—é—Ç—Å—è —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã–µ —Ä–∞–Ω–µ–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:

- `useLoaderData()`;
- `Form`;
- `useActionData()`;
- `useTransition()`.

```javascript
import { useFetcher } from "@remix-run/react";

function SomeComponent() {
  const fetcher = useFetcher();

  const formOptions = {/* ... */}

  // –≤—ã–ø–æ–ª–Ω—è–µ–º –∑–∞–ø—Ä–æ—Å
  <fetcher.Form {...formOptions} />;

  useEffect(() => {
    fetcher.submit(data, options);
    fetcher.load(href);
  }, [fetcher]);

  // —Ñ–æ—Ä–º–∏—Ä—É–µ–º UI
  // fetcher.state;
  // fetcher.type;
  // fetcher.submission;
  // fetcher.data;
}
```

–ù–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–º–µ—Ç–æ–∫ –æ —Ç–æ–º, –∫–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

- –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–º–µ–Ω—ã –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ –±—Ä–∞—É–∑–µ—Ä–∞;
- –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–æ—Ä–º—ã –Ω–µ GET-–º–µ—Ç–æ–¥–æ–º, —Å–Ω–∞—á–∞–ª–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `action()`;
  - –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è `action()` –≤—Å–µ `loader()` –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–≤–µ–∂–∏—Ö –¥–∞–Ω–Ω—ã—Ö —Å —Ü–µ–ª—å—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ UI —Å —Å–µ—Ä–≤–µ—Ä–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º;
- –∫–æ–≥–¥–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–ø—Ä–æ—Å–æ–≤:
  - –¥–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è (commit) —Å–∞–º—ã–µ —Å–≤–µ–∂–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è;
  - —Å–∞–º—ã–µ —Å–≤–µ–∂–∏–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –ø–æ—Ä—è–¥–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤;
- –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫ –±–ª–∏–∂–∞–π—à–∏–º `ErrorBoundary`;
- –µ—Å–ª–∏ –≤—ã–∑–≤–∞–Ω–Ω—ã–π `action/loader` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `redirect()`, –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ.

__–°–≤–æ–π—Å—Ç–≤–∞ `fetcher`__

_state_

- `idle` - –Ω–∏—á–µ–≥–æ –Ω–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è;
- `submitting` - —Ñ–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞. –ï—Å–ª–∏ –æ–Ω–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –º–µ—Ç–æ–¥–æ–º GET, –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `loader()`, –µ—Å–ª–∏ –¥—Ä—É–≥–∏–º –º–µ—Ç–æ–¥–æ–º - `action()`;
- `loading` - `loader()` —Ä–æ—É—Ç–∞ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è `action()`.

_type_

- `state === 'idle'`:
  - `init` - –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ `fetcher`;
  - `done` - `fetcher` –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ—Ç –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç, –Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–æ, –¥–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ `fetcher.data`;
- `state === 'submitting'`:
  - `actionSubmission` - —Å–º. `useTransition()`;
  - `loaderSubmission` - —Å–º. `useTransition()`;
- `state === 'loading'`:
  - `actionReload` - —Å–º. `useTransition()`;
  - `actionRedirect` - —Å–º. `useTransition()`;
  - `normalLoad` - `loader()` –≤—ã–∑–≤–∞–Ω –±–µ–∑ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã (`fetcher.load()`).

_submission_

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `<fetcher.Form>` –∏–ª–∏ `fetcher.submit()` –¥–∞–Ω–Ω–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ –º–æ–∂–µ—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ–≥–æ UI. –û–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ, –∫–æ–≥–¥–∞ `fetcher` –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ `idle` –∏–ª–∏ `loading`.

_data_

–ó–¥–µ—Å—å —Ö—Ä–∞–Ω–∏—Ç—Å—è –æ—Ç–≤–µ—Ç `loader()` –∏–ª–∏ `action()`. –ü–æ—Å–ª–µ –∑–∞–ø–∏—Å–∏ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –¥–∞–∂–µ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞—Ö –∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –æ—Ç–ø—Ä–∞–≤–∫–∞—Ö —Ñ–æ—Ä–º—ã.

_Form_

–ê–Ω–∞–ª–æ–≥ `Form`, –Ω–æ –±–µ–∑ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏:

```javascript
function SomeComponent() {
  const fetcher = useFetcher();

  return (
    <fetcher.Form method="post" action="/some/route">
      <input type="text" />
    </fetcher.Form>
  );
}
```

_submit()_

–ê–Ω–∞–ª–æ–≥ `useSubmit()`, –Ω–æ –±–µ–∑ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏:

```javascript
function SomeComponent() {
  const fetcher = useFetcher();

  const onClick = () =>
    fetcher.submit({ some: "value" }, { method: "post" });

  // ...
}
```

_load()_

–ó–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ `loader()`:

```javascript
function SomeComponent() {
  const fetcher = useFetcher();

  useEffect(() => {
    if (fetcher.type === "init") {
      fetcher.load("/some/route");
    }
  }, [fetcher]);

  // –¥–∞–Ω–Ω—ã–µ –∏–∑ `loader()`
  // fetcher.data
}
```

__–ü—Ä–∏–º–µ—Ä—ã__

_–§–æ—Ä–º–∞ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –Ω–æ–≤–æ—Å—Ç–Ω—É—é —Ä–∞—Å—Å—ã–ª–∫—É_

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ –º—ã —Ö–æ—Ç–∏–º –∏–º–µ—Ç—å —Ñ–æ—Ä–º—É –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –Ω–æ–≤–æ—Å—Ç–Ω—É—é —Ä–∞—Å—Å—ã–ª–∫—É –≤ –ø–æ–¥–≤–∞–ª–µ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–∞—à–µ–≥–æ —Å–∞–π—Ç–∞. –î–ª—è —ç—Ç–æ–≥–æ –æ—Ç–ª–∏—á–Ω–æ –ø–æ–¥–æ–π–¥–µ—Ç `useFetcher()`. –°–æ–∑–¥–∞–µ–º —Ä–µ—Å—É—Ä—Å–Ω—ã–π —Ä–æ—É—Ç:

```javascript
// routes/newsletter/subscribe.ts
export async function action({ request }) {
  const email = (await request.formData()).get("email");

  try {
    await subscribe(email);
    return json({ ok: true });
  } catch (error) {
    return json({ error: error.message });
  }
}
```

–ó–∞—Ç–µ–º —Ä–µ–Ω–¥–µ—Ä–∏–º –≤ `root.tsx` –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Ç–∞–∫–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç:

```javascript
// ...

function NewsletterSignup() {
  const newsletter = useFetcher();
  const ref = useRef();

  useEffect(() => {
    if (newsletter.type === "done" && newsletter.data.ok) {
      ref.current.reset();
    }
  }, [newsletter]);

  return (
    <newsletter.Form
      ref={ref}
      method="post"
      action="/newsletter/subscribe"
    >
      <p>
        <input type="text" name="email" />{" "}
        <button
          type="submit"
          disabled={newsletter.state === "submitting"}
        >
          –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è
        </button>
      </p>

      {newsletter.type === "done" ? (
        newsletter.data.ok ? (
          <p>–°–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–¥–ø–∏—Å–∫—É!</p>
        ) : newsletter.data.error ? (
          <p data-error>{newsletter.data.error}</p>
        ) : null
      ) : null}
    </newsletter.Form>
  );
}
```

_–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ_: —ç—Ç–æ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ JS –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ.

_–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–º–µ—Ç–∫–∞ —Å—Ç–∞—Ç—å–∏ –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–π_

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ –º—ã —Ö–æ—Ç–∏–º –ø–æ–º–µ—á–∞—Ç—å —Å—Ç–∞—Ç—å—é –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—É—é –∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å –ø—Ä–æ–∫—Ä—É—Ç–∫—É –≤–Ω–∏–∑ –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∫–∞–∫–æ–µ-—Ç–æ –≤—Ä–µ–º—è:

```javascript
function useMarkAsRead({ articleId, userId }) {
  const marker = useFetcher();

  useSpentSomeTimeHereAndScrolledToTheBottom(() => {
    marker.submit(
      { userId },
      {
        method: "post",
        action: `/article/${articleId}/mark-as-read`,
      }
    );
  });
}
```

_–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ —É–∫–∞–∑–∞—Ç–µ–ª—è –Ω–∞ –µ–≥–æ –∞–≤–∞—Ç–∞—Ä_

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ –º—ã —Ö–æ—Ç–∏–º –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –∏ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º —É–∫–∞–∑–∞—Ç–µ–ª—è –Ω–∞ —Å–≤–æ–π –∞–≤–∞—Ç–∞—Ä:

```javascript
export async function loader({ params }) {
  return json(
    await fakeDb.user.find({ where: { id: params.id } })
  );
}

function UserAvatar({ partialUser }) {
  const userDetails = useFetcher();
  const [showDetails, setShowDetails] = useState(false);

  useEffect(() => {
    if (showDetails && userDetails.type === "init") {
      userDetails.load(`/users/${user.id}/details`);
    }
  }, [showDetails, userDetails]);

  return (
    <div
      onMouseEnter={() => setShowDetails(true)}
      onMouseLeave={() => setShowDetails(false)}
    >
      <img src={partialUser.profileImageUrl} />
      {showDetails ? (
        userDetails.type === "done" ? (
          <UserPopup user={userDetails.data} />
        ) : (
          <UserPopupLoading />
        )
      ) : null}
    </div>
  );
}
```

### useMatches

–≠—Ç–æ—Ç —Ö—É–∫ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ —Ä–æ—É—Ç—ã —Å—Ç—Ä–∞–Ω–∏—Ü—ã. –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω—ã–º –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–π –º–∞–∫–µ—Ç–∞ —Ç–µ–∫—É—â–µ–≥–æ —Ä–æ—É—Ç–∞:

```javascript
function SomeComponent() {
  const matches = useMatches();

  // ...
}
```

`matches` –∏–º–µ–µ—Ç —Å–ª–µ–¥—É—é—â—É—é —Ñ–æ—Ä–º—É:

```javascript
[
  { id, pathname, data, params, handle }, // –∫–æ—Ä–Ω–µ–≤–æ–π —Ä–æ—É—Ç
  { id, pathname, data, params, handle }, // —Ä–æ—É—Ç –º–∞–∫–µ—Ç–∞
  { id, pathname, data, params, handle }, // –¥–æ—á–µ—Ä–Ω–∏–π —Ä–æ—É—Ç
  // etc.
];
```

–¢–æ—Ç —Ñ–∞–∫—Ç, —á—Ç–æ Remix –∑–Ω–∞–µ—Ç –≤—Å–µ —Ä–æ—É—Ç—ã –∏ –¥–∞–Ω–Ω—ã–µ –¥–µ—Ä–µ–≤–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ React, –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å —Ç–µ–≥–∏ `meta`, `link` –∏ `script` –≤ –Ω–∞—á–∞–ª–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞, –¥–∞–∂–µ –ø—Ä–∏ —É—Å–ª–æ–≤–∏–∏, —á—Ç–æ –æ–Ω–∏ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –≤–æ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Ä–æ—É—Ç–∞—Ö.

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `useMatches()` —Å–æ–≤–º–µ—Å—Ç–Ω–æ —Å `handle()` –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏, –ø–æ—Ö–æ–∂–∏–µ –Ω–∞ `<Meta>`, `<Links>` –∏ `<Scripts>`.

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø—Ä–∏–º–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è —Ö–ª–µ–±–Ω—ã—Ö –∫—Ä–æ—à–µ–∫.

–ú—ã –º–æ–∂–µ–º –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –∏–∑ `handle()` —á—Ç–æ —É–≥–æ–¥–Ω–æ. –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –º—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ–º `breadcrumb()`.

1. –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É —Ö–ª–µ–±–Ω—ã—Ö –∫—Ä–æ—à–µ–∫ –≤ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π —Ä–æ—É—Ç:

```javascript
// routes/parent.tsx
export const handle = {
  breadcrumb: () => <Link to="/parent">–†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π —Ä–æ—É—Ç</Link>,
};
```

2. –î–µ–ª–∞–µ–º —Ç–æ–∂–µ —Å–∞–º–æ–µ –≤ –¥–æ—á–µ—Ä–Ω–µ–º —Ä–æ—É—Ç–µ:

```javascript
// routes/parent/child.tsx
export const handle = {
  breadcrumb: () => (
    <Link to="/parent/child">–î–æ—á–µ—Ä–Ω–∏–π —Ä–æ—É—Ç</Link>
  ),
};
```

3. –°–æ–±–∏—Ä–∞–µ–º —Ö–ª–µ–±–Ω—ã–µ –∫—Ä–æ—à–∫–∏ –≤ –∫–æ—Ä–Ω–µ–≤–æ–º —Ä–æ—É—Ç–µ —Å –ø–æ–º–æ—â—å—é `useMatches()`:

```javascript
// root.tsx
import {
  Links,
  Scripts,
  useLoaderData,
  useMatches,
} from "@remix-run/react";

export default function Root() {
  const matches = useMatches();

  return (
    <html lang="en">
      <head>
        <Links />
      </head>
      <body>
        <header>
          <ol>
            {matches
              // –ø—Ä–æ–ø—É—Å–∫–∞–µ–º —Ä–æ—É—Ç—ã, –Ω–µ –∏–º–µ—é—â–∏–µ —Ö–ª–µ–±–Ω—ã—Ö –∫—Ä–æ—à–µ–∫
              .filter(
                (match) =>
                  match.handle && match.handle.breadcrumb
              )
              // —Ä–µ–Ω–¥–µ—Ä–∏–º —Ö–ª–µ–±–Ω—ã–µ –∫—Ä–æ—à–∫–∏
              .map((match, index) => (
                <li key={index}>
                  {match.handle.breadcrumb(match)}
                </li>
              ))}
          </ol>
        </header>

        <Outlet />
      </body>
    </html>
  );
```

–î–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º —Ä–æ—É—Ç–∞ –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —á–µ—Ä–µ–∑ `match.data`.

### useBeforeUnload

–≠—Ç–æ—Ç —Ö—É–∫ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—é –Ω–∞–¥ `window.onbeforeunload`. –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –≤–∞–∂–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø–µ—Ä–µ–¥ –≤—ã–≥—Ä—É–∑–∫–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞:

```javascript
import { useBeforeUnload } from "@remix-run/react";

function SomeForm() {
  const [state, setState] = React.useState(null);

  // —Å–æ—Ö—Ä–∞–Ω—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø–µ—Ä–µ–¥ –≤—ã–≥—Ä—É–∑–∫–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
  useBeforeUnload(
    React.useCallback(() => {
      localStorage.setItem('stuff', JSON.stringify(state));
    }, [state])
  );

  // —á–∏—Ç–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
  React.useEffect(() => {
    if (state === null && localStorage.getItem('stuff')) {
      setState(JSON.parse(localStorage.getItem('stuff')));
    }
  }, [state]);

  return <>{/*... */}</>;
}
```

## –£—Ç–∏–ª–∏—Ç—ã HTTP / HTTP Helpers

### json

–£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–æ–≤ `application/json`. –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–¥–∏—Ä–æ–≤–∫–∞ `utf-8`:

```javascript
import { json } from "@remix-run/node";

export const loader = async () => {
  // —ç—Ç–æ —è–≤–ª—è–µ—Ç—Å—è —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ–º...
  return json({ any: "thing" });

  // –¥–ª—è —ç—Ç–æ–≥–æ
  return new Response(JSON.stringify({ any: "thing" }), {
    headers: {
      "Content-Type": "application/json; charset=utf-8",
    },
  });
};
```

`json()` –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å-–∫–æ–¥ –æ—Ç–≤–µ—Ç–∞ –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ HTTP:

```javascript
export const loader = async () => {
  return json(
    { not: "coffee" },
    {
      status: 418,
      headers: {
        "Cache-Control": "no-store",
      },
    }
  );
};
```

### redirect

–£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ç–≤–µ—Ç–æ–≤ `30x` - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

```javascript
import { redirect } from "@remix-run/node";

export const action = async () => {
  const userSession = await getUserSession();

  if (!userSession) {
    return redirect("/login");
  }

  return json({ ok: true });
};
```

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å—Ç–∞—Ç—É—Å-–∫–æ–¥ `302`. –≠—Ç–æ –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å:

```javascript
redirect(path, 301);
redirect(path, 303);
```

–ú—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ–º –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å `ResponseInit` –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ HTTP, –Ω–∞–ø—Ä–∏–º–µ—Ä, –æ —Å–µ—Å—Å–∏–∏:

```javascript
redirect(path, {
  headers: {
    "Set-Cookie": await commitSession(session),
  },
});

redirect(path, {
  status: 302,
  headers: {
    "Set-Cookie": await commitSession(session),
  },
});
```

–†–∞–∑—É–º–µ–µ—Ç—Å—è, –≤–º–µ—Å—Ç–æ `redirect()` –º–æ–∂–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –æ–±—ã—á–Ω—ã–π `Response`:

```javascript
// —ç—Ç–æ —è–≤–ª—è–µ—Ç—Å—è —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ–º...
return redirect("/else/where", 303);

// –¥–ª—è —ç—Ç–æ–≥–æ
return new Response(null, {
  status: 303,
  headers: {
    Location: "/else/where",
  },
});
```

## –ö—É–∫–∏ / Cookies

[–ö—É–∫–∏](https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies) - —ç—Ç–æ –Ω–µ–±–æ–ª—å—à–∞—è —á–∞—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ —Å–µ—Ä–≤–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–º –æ—Ç–≤–µ—Ç–µ, –∏ –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–∫—Ä–µ–ø–ª—è—é—Ç—Å—è –∫ –ø–æ—Å–ª–µ–¥—É—é—â–∏–º –∑–∞–ø—Ä–æ—Å–∞–º –±—Ä–∞—É–∑–µ—Ä–∞. –ö—É–∫–∏ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç–∞–∫–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞, –∫–∞–∫ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (—Å–º. –Ω–∏–∂–µ), –∫–æ—Ä–∑–∏–Ω–∞ —Ç–æ–≤–∞—Ä–æ–≤, –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —Ç.–¥.

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å `Cookie` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ª–æ–≥–∏—á–µ—Å–∫–∏–π –ø–æ–≤—Ç–æ—Ä–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∫—É–∫–∏.

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫—É–∫–∏

–•–æ—Ç—è –∫—É–∫–∏ –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Å–µ—Å—Å–∏–∏ (—Å–º. –Ω–∏–∂–µ).

–í Remix —Ä–∞–±–æ—Ç–∞ —Å –∫—É–∫–∏, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –≤ `loader()` –∏–ª–∏ `action()`.

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ –Ω–∞ –Ω–∞—à–µ–º —Å–∞–π—Ç–µ –µ—Å—Ç—å –±–∞–Ω–Ω–µ—Ä —Å –∞–∫—Ü–∏–æ–Ω–Ω—ã–º–∏ —Ç–æ–≤–∞—Ä–∞–º–∏. –ë–∞–Ω–Ω–µ—Ä —Ä–∞—Å–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –≤ –≤–µ—Ä—Ö–Ω–µ–π —á–∞—Å—Ç–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–Ω–æ–ø–∫—É –¥–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –≤–∏–¥–∂–µ—Ç–∞ –Ω–∞ –Ω–µ–¥–µ–ª—é.

–°–æ–∑–¥–∞–µ–º –∫—É–∫–∏:

```javascript
import { createCookie } from "@remix-run/node";

export const userPrefs = createCookie("user-prefs", {
  maxAge: 604_800, // –æ–¥–Ω–∞ –Ω–µ–¥–µ–ª—è
});
```

–≠—Ç—É –∫—É–∫–∏ –º–æ–∂–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ `loader()` –∏–ª–∏ `action()`. `loader()` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –≤–æ–ø—Ä–æ—Å–∞ –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –±–∞–Ω–Ω–µ—Ä–∞. –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –≤–∏–¥–∂–µ—Ç–∞ —Ñ–æ—Ä–º–∞ –≤—ã–∑—ã–≤–∞–µ—Ç `action()` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ —Ä–µ–Ω–¥–µ—Ä–∏—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É, –Ω–æ —É–∂–µ –±–µ–∑ –±–∞–Ω–Ω–µ—Ä–∞.

_–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ_: –≤ –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–æ–∑–¥–∞–≤–∞—Ç—å –≤—Å–µ –∫—É–∫–∏ –≤ —Ñ–∞–π–ª–µ `app/cookies.js` –∏ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Ö –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –º–æ–¥—É–ª–∏. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç Remix –∏—Å–∫–ª—é—á–∞—Ç—å –∫—É–∫–∏ –∏–∑ —Å–±–æ—Ä–∫–∏ –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞.

```javascript
import { json, redirect } from "@remix-run/node";
import { useLoaderData } from "@remix-run/react";
// !
import { userPrefs } from "~/cookies";

export async function loader({ request }) {
  const cookieHeader = request.headers.get("Cookie");
  // !
  const cookie =
    (await userPrefs.parse(cookieHeader)) || {};
  return json({ showBanner: cookie.showBanner });
}

export async function action({ request }) {
  const cookieHeader = request.headers.get("Cookie");
  // !
  const cookie =
    (await userPrefs.parse(cookieHeader)) || {};
  const bodyParams = await request.formData();

  if (bodyParams.get("bannerVisibility") === "hidden") {
    cookie.showBanner = false;
  }

  return redirect("/", {
    headers: {
      "Set-Cookie": await userPrefs.serialize(cookie),
    },
  });
}

export default function Home() {
  const { showBanner } = useLoaderData();

  return (
    <div>
      {showBanner ? (
        <div>
          <Link to="/sale">–ù–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç–µ —Ä–∞—Å–ø—Ä–æ–¥–∞–∂—É!</Link>
          <Form method="post">
            <input
              type="hidden"
              name="bannerVisibility"
              value="hidden"
            />
            <button type="submit">–°–∫—Ä—ã—Ç—å</button>
          </Form>
        </div>
      ) : null}
      <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h1>
    </div>
  );
}
```

### –ê—Ç—Ä–∏–±—É—Ç—ã –∫—É–∫–∏

–ö—É–∫–∏ –∏–º–µ—é—Ç [–Ω–µ—Å–∫–æ–ª—å–∫–æ –∞—Ç—Ä–∏–±—É—Ç–æ–≤](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie#attributes), –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∏—Ö –∏—Ö –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏, –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å, –ø—É—Ç—å –∏ –¥—Ä. –≠—Ç–∏ –∞—Ç—Ä–∏–±—É—Ç—ã –º–æ–≥—É—Ç —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å—Å—è –∫–∞–∫ –≤ `createCookie(name, options)`, —Ç–∞–∫ –∏ –≤ `serialize()` –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞ `Set-Cookie`.

```javascript
const cookie = createCookie("user-prefs", {
  // –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —ç—Ç–æ–π –∫—É–∫–∏
  domain: "remix.run",
  path: "/",
  sameSite: "lax",
  httpOnly: true,
  secure: true,
  expires: new Date(Date.now() + 60_000),
  maxAge: 60,
});

// –∏—Å–ø–æ–ª—å–∑—É–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
cookie.serialize(userPrefs);

// –∏–ª–∏ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ–º –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∏–∑ –Ω–∏—Ö
cookie.serialize(userPrefs, { sameSite: "strict" });
```

### –ü–æ–¥–ø–∏—Å–∞–Ω–∏–µ –∫—É–∫–∏

–ü–æ–¥–ø–∏—Å–∞–Ω–∏–µ (signing) –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å/–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫—É–∫–∏ –ø—Ä–∏ –µ–µ –ø–æ–ª—É—á–µ–Ω–∏–∏. –î–∞–Ω–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏–∏ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, —Ç–∞–∫–æ–π –∫–∞–∫ –¥–∞–Ω–Ω—ã–µ –æ–± –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.

–î–ª—è –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —É–∫–∞–∑–∞—Ç—å –º–∞—Å—Å–∏–≤ —Å–µ–∫—Ä–µ—Ç–æ–≤ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫—É–∫–∏:

```javascript
const cookie = createCookie("user-prefs", {
  secrets: ["s3cret1"],
});
```

–†–æ—Ç–∞—Ü–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Å–µ–∫—Ä–µ—Ç–∞ –≤ –Ω–∞—á–∞–ª–æ –º–∞—Å—Å–∏–≤–∞ `secrets`. –ö—É–∫–∏, –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–µ —Å –ø–æ–º–æ—â—å—é —Å—Ç–∞—Ä—ã—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤ –±—É–¥—É—Ç —É—Å–ø–µ—à–Ω–æ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ `cookie.parse()`, –∞ –Ω–æ–≤—ã–µ —Å–µ–∫—Ä–µ—Ç—ã –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è –∫—É–∫–∏, —Å–æ–∑–¥–∞–≤–∞–µ–º—ã—Ö –≤ `cookie.serialize()`:

```javascript
// app/cookies.js
const cookie = createCookie("user-prefs", {
  secrets: ["n3wsecr3t", "olds3cret"],
});

// –≤ —Ä–æ—É—Ç–µ
export async function loader({ request }) {
  const oldCookie = request.headers.get("Cookie");
  // `oldCookie` –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–¥–ø–∏—Å–∞–Ω —Å –ø–æ–º–æ—â—å—é `olds3cret`, –Ω–æ –±—É–¥–µ—Ç —É—Å–ø–µ—à–Ω–æ —Ä–∞–∑–æ–±—Ä–∞–Ω
  const value = await cookie.parse(oldCookie);

  new Response("...", {
    headers: {
      // `Set-Cookie` –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é `n3wsecr3t`
      "Set-Cookie": await cookie.serialize(value),
    },
  });
}
```

__createCookie__

–≠—Ç–∞ —É—Ç–∏–ª–∏—Ç–∞ —Å–æ–∑–¥–∞–µ—Ç –ª–æ–≥–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±—Ä–∞—É–∑–µ—Ä–Ω—ã–º–∏ –∫—É–∫–∏ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞:

```javascript
import { createCookie } from "@remix-run/node";

const cookie = createCookie("cookie-name", {
  // –≤—Å–µ —ç—Ç–∏ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞–Ω—ã –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–¥–∞ (runtime)
  domain: "remix.run",
  expires: new Date(Date.now() + 60_000),
  httpOnly: true,
  maxAge: 60,
  path: "/",
  sameSite: "lax",
  secrets: ["s3cret1"],
  secure: true,
});
```

__isCookie__

–≠—Ç–∞ —É—Ç–∏–ª–∏—Ç–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `true`, –µ—Å–ª–∏ –æ–±—ä–µ–∫—Ç —è–≤–ª—è–µ—Ç—Å—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º –¥–ª—è –∫—É–∫–∏:

```javascript
import { isCookie } from "@remix-run/node";

const cookie = createCookie("user-prefs");
console.log(isCookie(cookie)); // true
```

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å Cookie

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–π `createCookie()`, —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ª–µ–∑–Ω—ã—Ö —Å–≤–æ–π—Å—Ç–≤ –∏ –º–µ—Ç–æ–¥–æ–≤.

_name_

–ù–∞–∑–≤–∞–Ω–∏–µ –∫—É–∫–∏, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö `Cookie` –∏ `Set-Cookie`.

_parse()_

–ò–∑–≤–ª–µ–∫–∞–µ—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∫—É–∫–∏, —Å–æ–¥–µ—Ä–∂–∞—â–µ–≥–æ—Å—è –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ `Cookie`:

```javascript
const value = await cookie.parse(
  request.headers.get("Cookie")
);
```

_serialize()_

–°–µ—Ä–∏–∞–ª–∏–∑—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∏ –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –µ–≥–æ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –∫—É–∫–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–∞ `Set-Cookie`, –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –∏—Å—Ö–æ–¥—è—â–µ–º `Response`:

```javascript
new Response("...", {
  headers: {
    "Set-Cookie": await cookie.serialize({
      showBanner: true,
    }),
  },
});
```

_isSigned_

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `true`, –µ—Å–ª–∏ –∫—É–∫–∏ –ø–æ–¥–ø–∏—Å–∞–Ω–∞ —Å –ø–æ–º–æ—â—å—é `secrets`.

_expires_

–î–∞—Ç–∞ (–æ–±—ä–µ–∫—Ç `Date`), –∫–æ–≥–¥–∞ –∏—Å—Ç–µ–∫–∞–µ—Ç —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –∫—É–∫–∏. _–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ_: –µ—Å–ª–∏ –∫—É–∫–∏ —Å–æ–¥–µ—Ä–∂–∏—Ç `maxAge` –∏ `expires`, –∑–Ω–∞—á–µ–Ω–∏–µ–º `expires` –±—É–¥–µ—Ç —Ç–µ–∫—É—â–∞—è –¥–∞—Ç–∞ + `maxAge`, –ø–æ—Å–∫–æ–ª—å–∫—É `Max-Age` –∏–º–µ–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–µ—Ä–µ–¥ `Expires`.

## –°–µ—Å—Å–∏–∏ / Sessions

–°–µ—Å—Å–∏–∏ —è–≤–ª—è—é—Ç—Å—è –≤–∞–∂–Ω–æ–π —á–∞—Å—Ç—å—é –≤–µ–±-—Å–∞–π—Ç–æ–≤, –ø–æ—Å–∫–æ–ª—å–∫—É –ø–æ–∑–≤–æ–ª—è—é—Ç —Å–µ—Ä–≤–µ—Ä—É –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã, –∏—Å—Ö–æ–¥—è—â–∏–µ –æ—Ç –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ –ª–∏—Ü–∞. –û–Ω–∏ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.

–í Remix —Å–µ—Å—Å–∏–∏ —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–æ—É—Ç–æ–≤ –≤ –º–µ—Ç–æ–¥–∞—Ö `loader` –∏ `action` —Å –ø–æ–º–æ—â—å—é "—Ö—Ä–∞–Ω–∏–ª–∏—â–∞ —Å–µ—Å—Å–∏–∏" (–∫–æ—Ç–æ—Ä–æ–µ —Ä–µ–∞–ª–∏–∑—É–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `SessionStorage`). –•—Ä–∞–Ω–∏–ª–∏—â–µ —Å–µ—Å—Å–∏–∏ —É–º–µ–µ—Ç –ø–∞—Ä—Å–∏—Ç—å –∏ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫—É–∫–∏, –∞ —Ç–∞–∫–∂–µ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —Å–µ—Å—Å–∏–∏ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É.

Remix –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö —Ö—Ä–∞–Ω–∏–ª–∏—â —Å–µ—Å—Å–∏–∏ –¥–ª—è –Ω–∞–∏–±–æ–ª–µ–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –∏ –º–µ—Ç–æ–¥ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞:

- `createCookieSessionStorage()`;
- `createMemorySessionStorage()`;
- `createFileSessionStorage()`;
- `createSessionStorage()` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞.

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–µ—Å—Å–∏–π

–ü—Ä–∏–º–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ —Å–µ—Å—Å–∏–∏, –æ—Å–Ω–æ–≤–∞–Ω–Ω–æ–≥–æ –Ω–∞ –∫—É–∫–∏:

```javascript
// app/sessions.js
import { createCookieSessionStorage } from "@remix-run/node";

const { getSession, commitSession, destroySession } =
  createCookieSessionStorage({
    // –∫—É–∫–∏ –∏–∑ `createCookie()` –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –µ–µ —Å–æ–∑–¥–∞–Ω–∏—è
    cookie: {
      name: "__session",

      // –≤—Å–µ —ç—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —è–≤–ª—è—é—Ç—Å—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏
      domain: "remix.run",
      httpOnly: true,
      maxAge: 60,
      path: "/",
      sameSite: "lax",
      secrets: ["s3cret1"],
      secure: true,
    },
  });

export { getSession, commitSession, destroySession };
```

–•—Ä–∞–Ω–∏–ª–∏—â–µ —Å–µ—Å—Å–∏–∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–æ–∑–¥–∞–≤–∞—Ç—å –≤ —Ñ–∞–π–ª–µ `app/session.js`.

–í—Ö–æ–¥–Ω—ã–º–∏ –∏ –≤—ã—Ö–æ–¥–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ —Å–µ—Å—Å–∏–∏ —è–≤–ª—è—é—Ç—Å—è –∫—É–∫–∏ HTTP. `getSession()` –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–µ–∫—É—â—É—é —Å–µ—Å—Å–∏—é –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞ `Cookie` –≤—Ö–æ–¥—è—â–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞, –∞ `commitSession()` –∏ `destroySession()` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Set-Cookie` –¥–ª—è –∏—Å—Ö–æ–¥—è—â–µ–≥–æ –æ—Ç–≤–µ—Ç–∞.

–≠—Ç–∏ –º–µ—Ç–æ–¥—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ `loader()` –∏ `action()` –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º —Å–µ—Å—Å–∏–∏.

–§–æ—Ä–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –º–æ–∂–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:

```javascript
import { json, redirect } from "@remix-run/node";
import { useLoaderData } from "@remix-run/react";

import { getSession, commitSession } from "../sessions";

export async function loader({ request }) {
  const session = await getSession(
    request.headers.get("Cookie")
  );

  if (session.has("userId")) {
    // –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É, –µ—Å–ª–∏ –æ–Ω —É–∂–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
    return redirect("/");
  }

  const data = { error: session.get("error") };

  return json(data, {
    headers: {
      "Set-Cookie": await commitSession(session),
    },
  });
}

export async function action({ request }) {
  const session = await getSession(
    request.headers.get("Cookie")
  );
  const form = await request.formData();
  const username = form.get("username");
  const password = form.get("password");

  const userId = await validateCredentials(
    username,
    password
  );

  if (userId == null) {
    session.flash("error", "–ù–µ–≤–µ—Ä–Ω–æ–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è/–ø–∞—Ä–æ–ª—å");

    // –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —Å –æ—à–∏–±–∫–∞–º–∏
    return redirect("/login", {
      headers: {
        "Set-Cookie": await commitSession(session),
      },
    });
  }

  session.set("userId", userId);

  // –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ, –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
  return redirect("/", {
    headers: {
      "Set-Cookie": await commitSession(session),
    },
  });
}

export default function Login() {
  const { currentUser, error } = useLoaderData();

  return (
    <div>
      {error ? <div className="error">{error}</div> : null}
      <form method="POST">
        <div>
          <p>–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</p>
        </div>
        <label>
          –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: <input type="text" name="username" />
        </label>
        <label>
          –ü–∞—Ä–æ–ª—å: <input type="password" name="password" />
        </label>
      </form>
    </div>
  );
}
```

–§–æ—Ä–º–∞ –¥–ª—è –≤—ã—Ö–æ–¥–∞ –∏–∑ —Å–∏—Å—Ç–µ–º—ã –º–æ–∂–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:

```javascript
import { getSession, destroySession } from "../sessions";

export const action: ActionFunction = async ({
  request,
}) => {
  const session = await getSession(
    request.headers.get("Cookie")
  );

  return redirect("/login", {
    headers: {
      "Set-Cookie": await destroySession(session),
    },
  });
};

export default function LogoutRoute() {
  return (
    <>
      <p>–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –≤—ã–π—Ç–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã?</p>
      <Form method="post">
        <button>–í—ã–π—Ç–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã</button>
      </Form>
      <Link to="/">–Ø –ø–µ—Ä–µ–¥—É–º–∞–ª</Link>
    </>
  );
}
```

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã —Å —Å–µ—Å—Å–∏—è–º–∏

–ò–∑-–∑–∞ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Ä–æ—É—Ç–æ–≤ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ `loader()`. –ü–æ—ç—Ç–æ–º—É –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `session.flash()` –∏–ª–∏ `session.unset()` –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –¥—Ä—É–≥–∏–µ `loader()`, —É—á–∞—Å—Ç–≤—É—é—â–∏–µ –≤ –∑–∞–ø—Ä–æ—Å–µ, –Ω–µ –±—É–¥—É—Ç —á–∏—Ç–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —Å–µ—Å—Å–∏–∏, –≤ –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ, –º—ã –ø–æ–ª—É—á–∏–º –≥–æ–Ω–∫—É —É—Å–ª–æ–≤–∏–π (race conditions).

_isSession()_

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `true`, –µ—Å–ª–∏ –æ–±—ä–µ–∫—Ç —è–≤–ª—è–µ—Ç—Å—è —Å–µ—Å—Å–∏–µ–π Remix:

```javascript
import { isSession } from "@remix-run/node";

const sessionData = { foo: "bar" };
const session = createSession(sessionData, "remix-session");
console.log(isSession(session)); // true
```

_createSessionStorage()_

Remix –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å —Å–µ—Å—Å–∏–∏ –≤ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π –ë–î. `createSessionStorage()` —Ç—Ä–µ–±—É–µ—Ç `cookie` (–∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –¥–ª—è –µ–µ —Å–æ–∑–¥–∞–Ω–∏—è) –∏ –Ω–∞–±–æ—Ä –º–µ—Ç–æ–¥–æ–≤ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è, —á—Ç–µ–Ω–∏—è, –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ —É–¥–∞–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —Å–µ—Å—Å–∏–∏. –ö—É–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ —Å–µ—Å—Å–∏–∏.

–ü—Ä–∏–º–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ —Å–µ—Å—Å–∏–∏ —Å –ø–æ–º–æ—â—å—é –∫–ª–∏–µ–Ω—Ç–∞ –ë–î –æ–±—â–µ–≥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è:

```javascript
import { createSessionStorage } from "@remix-run/node";

function createDatabaseSessionStorage({
  cookie,
  host,
  port,
}) {
  // –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∫–ª–∏–µ–Ω—Ç–∞ –ë–î
  const db = createDatabaseClient(host, port);

  return createSessionStorage({
    cookie,
    async createData(data, expires) {
      // `expires` - —ç—Ç–æ –¥–∞—Ç–∞, –ø–æ—Å–ª–µ –∫–æ—Ç–æ—Ä–æ–π –¥–∞–Ω–Ω—ã–µ —Å—á–∏—Ç–∞—é—Ç—Å—è –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–º–∏.
      // –ú—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ —Å–≤–æ–π—Å—Ç–≤–æ –¥–ª—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏
      // –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏ –∏–∑ –ë–î
      const id = await db.insert(data);
      return id;
    },
    async readData(id) {
      return (await db.select(id)) || null;
    },
    async updateData(id, data, expires) {
      await db.update(id, data);
    },
    async deleteData(id) {
      await db.delete(id);
    },
  });
}
```

–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —ç—Ç–æ–π —É—Ç–∏–ª–∏—Ç—ã:

```javascript
const { getSession, commitSession, destroySession } =
  createDatabaseSessionStorage({
    host: "localhost",
    port: 1234,
    cookie: {
      name: "__session",
      sameSite: "lax",
    },
  });
```

_createCookieSessionStorage()_

–ü–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–µ—Å—Å–∏–∏, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞ –∫—É–∫–∏.

–ì–ª–∞–≤–Ω—ã–º –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ–º —Ç–∞–∫–æ–π —Å–µ—Å—Å–∏–∏ —è–≤–ª—è–µ—Ç—Å—è —Ç–æ, —á—Ç–æ –¥–ª—è –µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã –∏–ª–∏ –ë–î. –û–¥–Ω–∞–∫–æ —Ä–∞–∑–º–µ—Ä —Ç–∞–∫–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –≤–µ—Å—å–º–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω –∏, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç 4 –ö–±.

–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–æ–º —è–≤–ª—è–µ—Ç—Å—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –≤—ã–∑—ã–≤–∞—Ç—å `commitSession()` –ø–æ—á—Ç–∏ –≤ –∫–∞–∂–¥–æ–π `loader()` –∏ `action()`. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –µ—Å–ª–∏ –º—ã –≤—ã–∑—ã–≤–∞–µ–º `session.flash()` –≤ –æ–¥–Ω–æ–π `action()`, –∏ –∑–∞—Ç–µ–º - `session.get()` –≤ –¥—Ä—É–≥–æ–π, –º—ã –¥–æ–ª–∂–Ω—ã –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö:

```javascript
import { createCookieSessionStorage } from "@remix-run/node";

const { getSession, commitSession, destroySession } =
  createCookieSessionStorage({
    cookie: {
      name: "__session",
      secrets: ["r3m1xr0ck5"],
      sameSite: "lax",
    },
  });
```

_createMemorySessionStorage()_

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —ç—Ç–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –∫—É–∫–∏ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞. _–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ_: —ç—Ç–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

```javascript
import {
  createCookie,
  createMemorySessionStorage,
} from "@remix-run/node";

const sessionCookie = createCookie("__session", {
  secrets: ["r3m1xr0ck5"],
  sameSite: true,
});

const { getSession, commitSession, destroySession } =
  createMemorySessionStorage({
    cookie: sessionCookie,
  });

export { getSession, commitSession, destroySession };
```

_createFileSessionStorage()_

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —ç—Ç–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –≤—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Å—Å–∏–∏ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ.

–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ–º —è–≤–ª—è–µ—Ç—Å—è —Ç–æ, —á—Ç–æ –≤ –∫—É–∫–∏ —Ö—Ä–∞–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å–µ—Å—Å–∏–∏, –æ—Å—Ç–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ñ–∞–π–ª–µ –∏–ª–∏ –Ω–∞ –¥–∏—Å–∫–µ, —á—Ç–æ –æ—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å–µ—Å—Å–∏–∏, —Ä–∞–∑–º–µ—Ä –∫–æ—Ç–æ—Ä–æ–π –ø—Ä–µ–≤—ã—à–∞–µ—Ç 4 –ö–±.

```javascript
import {
  createCookie,
  createFileSessionStorage,
} from "@remix-run/node";

const sessionCookie = createCookie("__session", {
  secrets: ["r3m1xr0ck5"],
  sameSite: true,
});

const { getSession, commitSession, destroySession } =
  createFileSessionStorage({
    // –∫–æ—Ä–Ω–µ–≤–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –∑–∞–ø–∏—Å–∏ —Ñ–∞–π–ª–æ–≤
    // —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–Ω–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è –∑–∞–ø–∏—Å–∏
    dir: "/app/sessions",
    cookie: sessionCookie,
  });

export { getSession, commitSession, destroySession };
```

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ–±—ä–µ–∫—Ç–∞ —Å–µ—Å—Å–∏–∏

_has(key)_

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `true`, –µ—Å–ª–∏ —Å–µ—Å—Å–∏—è —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `key`:

```javascript
session.has("userId");
```

_set(key, value)_

–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `key` –≤ –∑–Ω–∞—á–µ–Ω–∏–µ `value`:

```javascript
session.set("userId", "1243");
```

_flash(key, value)_

–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º —á—Ç–µ–Ω–∏–∏. –ú–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω—ã–º –¥–ª—è "—Ñ–ª—ç—à-—Å–æ–æ–±—â–µ–Ω–∏–π" (flash messages) –∏ —Å–æ–æ–±—â–µ–Ω–∏–π –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ñ–æ—Ä–º—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```javascript
import { getSession, commitSession } from "../sessions";

export async function action({ request, params }) {
  const session = await getSession(
    request.headers.get("Cookie")
  );
  const deletedProject = await archiveProject(
    params.projectId
  );

  session.flash(
    "globalMessage",
    `–ü—Ä–æ–µ–∫—Ç ${deletedProject.name} —É—Å–ø–µ—à–Ω–æ –ø–µ—Ä–µ–º–µ—â–µ–Ω –≤ –∞—Ä—Ö–∏–≤`
  );

  return redirect("/dashboard", {
    headers: {
      "Set-Cookie": await commitSession(session),
    },
  });
}
```

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –º—ã –º–æ–∂–µ–º –ø—Ä–æ—á–∏—Ç–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ `loader()`:

```javascript
import { json } from "@remix-run/node";
import {
  Meta,
  Links,
  Scripts,
  Outlet,
} from "@remix-run/react";

import { getSession, commitSession } from "./sessions";

export async function loader({ request }) {
  const session = await getSession(
    request.headers.get("Cookie")
  );
  const message = session.get("globalMessage") || null;

  return json(
    { message },
    {
      headers: {
        // —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `cookieSessionStorage`
        "Set-Cookie": await commitSession(session),
      },
    }
  );
}

export default function App() {
  const { message } = useLoaderData();

  return (
    <html>
      <head>
        <Meta />
        <Links />
      </head>
      <body>
        {message ? (
          <div className="flash">{message}</div>
        ) : null}
        <Outlet />
        <Scripts />
      </body>
    </html>
  );
}
```

_get(key)_

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `key` (–∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞):

```javascript
session.get("userId");
```

_unset(key)_

–£–¥–∞–ª—è–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `key` –∏–∑ —Å–µ—Å—Å–∏–∏:

```javascript
session.unset("userId");
```

_–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ_: –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `cookieSessionStorage`, –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Å—Å–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å:

```javascript
export async function loader({ request }) {
  // ...

  return json(data, {
    headers: {
      "Set-Cookie": await commitSession(session),
    },
  });
}
```
