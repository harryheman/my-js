---
sidebar_position: 16
title: WebRTC –¥–ª—è –≤—Å–µ—Ö –∏ –∫–∞–∂–¥–æ–≥–æ
description: –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ WebRTC –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö
keywords: ['javascript', 'js', 'webrtc', 'guide', '—Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ', 'realtime communication', '–∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏']
tags: ['javascript', 'js', 'webrtc', 'guide', '—Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ', 'realtime communication', '–∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏']
---

# WebRTC

[–ò—Å—Ç–æ—á–Ω–∏–∫](https://webrtcforthecurious.com/)&nbsp;&nbsp;üëÄ

## –ß—Ç–æ —Ç–∞–∫–æ–µ WebRTC?

`WebRTC` (Web Real-Time Communication - –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏) - —ç—Ç–æ [API](https://ru.wikipedia.org/wiki/API) (Application Programming Interface - –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è) –∏ [–ø—Ä–æ—Ç–æ–∫–æ–ª](https://ru.wikipedia.org/wiki/%D0%9F%D1%80%D0%BE%D1%82%D0%BE%D0%BA%D0%BE%D0%BB_%D0%BF%D0%B5%D1%80%D0%B5%D0%B4%D0%B0%D1%87%D0%B8_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85). –ü—Ä–æ—Ç–æ–∫–æ–ª `WebRTC` - —ç—Ç–æ –Ω–∞–±–æ—Ä –ø—Ä–∞–≤–∏–ª, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –¥–≤—É–º –∞–≥–µ–Ω—Ç–∞–º `WebRTC` ([–±—Ä–∞—É–∑–µ—Ä–∞–º](https://ru.wikipedia.org/wiki/%D0%91%D1%80%D0%B0%D1%83%D0%B7%D0%B5%D1%80)) –≤–µ—Å—Ç–∏ –¥–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—É—é (bi-directional) –±–µ–∑–æ–ø–∞—Å–Ω—É—é –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—é –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏. `WebRTC API` –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Ç–æ–∫–æ–ª `WebRTC`. `WebRTC API` –≤ –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è `JavaScript`.

–í–æ–∑–º–æ–∂–Ω–æ, –≤–∞–º —É–∂–µ –∏–∑–≤–µ—Å—Ç–Ω–∞ –¥—Ä—É–≥–∞—è –ø–∞—Ä–∞ —Å –ø–æ—Ö–æ–∂–∏–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ–º [HTTP](https://developer.mozilla.org/ru/docs/Web/HTTP) –∏ [Fetch API](https://developer.mozilla.org/ru/docs/Web/API/Fetch_API). –í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ –ø—Ä–æ—Ç–æ–∫–æ–ª `WebRTC` - —ç—Ç–æ `HTTP`, –∞ `WebRTC API` - —ç—Ç–æ `Fetch API`.

–ü—Ä–æ—Ç–æ–∫–æ–ª `WebRTC` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —Ä–∞–±–æ—á–µ–π –≥—Ä—É–ø–ø–æ–π [rtcweb](https://datatracker.ietf.org/wg/rtcweb/documents/) [IETF](https://www.ietf.org/). `WebRTC API` –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –≤ [W3C](https://www.w3.org/) –∫–∞–∫ [webrtc](https://www.w3.org/TR/webrtc/).

### –ó–∞—á–µ–º –∏–∑—É—á–∞—Ç—å WebRTC?

–ï—Å–ª–∏ –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –∫—Ä–∞—Ç–∫–æ –æ–ø–∏—Å–∞—Ç—å –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ `WebRTC`, –ø–æ–ª—É—á–∏—Ç—Å—è –≤–æ—Ç —Ç–∞–∫–æ–π —Å–ø–∏—Å–æ–∫. –ü—Ä–∏—Ç–æ–º –æ–Ω –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –∏—Å—á–µ—Ä–ø—ã–≤–∞—é—â–∏–º, —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –ø—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ –≤—ã –≤—Å—Ç—Ä–µ—Ç–∏—Ç–µ—Å—å, –∏–∑—É—á–∞—è `WebRTC`. –ù–µ –≤–æ–ª–Ω—É–π—Ç–µ—Å—å, –µ—Å–ª–∏ –Ω–µ –∑–Ω–∞–∫–æ–º—ã —Å –∫–∞–∫–∏–º–∏-—Ç–æ —Ç–µ—Ä–º–∏–Ω–∞–º–∏, –≤—Å–µ –æ–Ω–∏ –±—É–¥—É—Ç —Ä–∞—Å–∫—Ä—ã—Ç—ã –¥–∞–ª–µ–µ:

- –û—Ç–∫—Ä—ã—Ç—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç
- –†–∞–∑–Ω—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–∞—Ö
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ NAT (NAT Traversal)
- –ü–µ—Ä–µ–ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
- –ö–æ–Ω—Ç—Ä–æ–ª—å –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏ (congestion control)
- –ù–∏–∑–∫–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ (–Ω–∞ —É—Ä–æ–≤–Ω–µ –¥–æ–ª–µ–π —Å–µ–∫—É–Ω–¥—ã, sub-second latency)

### –ü—Ä–æ—Ç–æ–∫–æ–ª WebRTC - —ç—Ç–æ —Å–æ–±—Ä–∞–Ω–∏–µ –¥—Ä—É–≥–∏—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

–í –ø—Ä–æ—Ü–µ—Å—Å–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –ø–æ–º–æ—â—å—é `WebRTC` –º–æ–∂–Ω–æ –≤—ã–¥–µ–ª–∏—Ç—å 4 —ç—Ç–∞–ø–∞:

- –°–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏—è (signalling)
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ (—É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è) (connection)
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (securing)
- –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è (–≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ) (communication)

–ü–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —ç—Ç–∞–ø–∞–º–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ. –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º —É—Å–ª–æ–≤–∏–µ–º –¥–ª—è –Ω–∞—á–∞–ª–∞ —Å–ª–µ–¥—É—é—â–µ–≥–æ —ç—Ç–∞–ø–∞ —è–≤–ª—è–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ.

–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —Ñ–∞–∫—Ç –æ `WebRTC` - –∫–∞–∂–¥—ã–π —ç—Ç–∞–ø —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –¥—Ä—É–≥–∏—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤.  –î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è `WebRTC` –±—ã–ª–æ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–æ –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π. –í —ç—Ç–æ–º —Å–º—ã—Å–ª–µ `WebRTC` - —ç—Ç–æ –∫–æ–º–±–∏–Ω–∞—Ü–∏—è –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ö–æ—Ä–æ—à–æ –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π, –ø–æ—è–≤–∏–≤—à–∏—Ö—Å—è –≤ –Ω–∞—á–∞–ª–µ 2000-—Ö –≥–æ–¥–æ–≤.

–ö–∞–∂–¥–æ–º—É –∏–∑ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã—Ö 4 —ç—Ç–∞–ø–æ–≤ –ø–æ—Å–≤—è—â–µ–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ä–∞–∑–¥–µ–ª, –Ω–æ –¥–ª—è –Ω–∞—á–∞–ª–∞ –¥–∞–≤–∞–π—Ç–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –∏—Ö –Ω–∞ —Å–∞–º–æ–º –≤—ã—Å–æ–∫–æ–º —É—Ä–æ–≤–Ω–µ.
–ü–æ—Å–∫–æ–ª—å–∫—É —ç—Ç–∞–ø—ã –∑–∞–≤–∏—Å—è—Ç –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞, –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º —ç—Ç–æ –æ–±–ª–µ–≥—á–∏—Ç –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –∏ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ –∏–∑ –Ω–∏—Ö.

#### –°–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏—è: –∫–∞–∫ [–ø–∏—Ä—ã](https://ru.wikipedia.org/wiki/%D0%9E%D0%B4%D0%BD%D0%BE%D1%80%D0%B0%D0%BD%D0%B3%D0%BE%D0%B2%D0%B0%D1%8F_%D1%81%D0%B5%D1%82%D1%8C) (peers) –Ω–∞—Ö–æ–¥—è—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ `WebRTC` –∞–≥–µ–Ω—Ç –Ω–µ –∑–Ω–∞–µ—Ç, —Å –∫–µ–º –∏ –ø–æ –ø–æ–≤–æ–¥—É —á–µ–≥–æ –±—É–¥–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è. –ò –∏–º–µ–Ω–Ω–æ —Å–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–µ—Ç –Ω–∞–º –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å.  –≠—Ç–æ –ø–µ—Ä–≤—ã–π —ç—Ç–∞–ø  –∏ –µ–≥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ ‚Äì –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –≤—ã–∑–æ–≤–∞ (–∑–≤–æ–Ω–∫–∞) (call) –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –¥–≤–∞ –∞–≥–µ–Ω—Ç–∞ `WebRTC` –º–æ–≥–ª–∏ –Ω–∞—á–∞—Ç—å –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—é.

–°–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏—è –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ [`SDP`](https://ru.wikipedia.org/wiki/Session_Description_Protocol) (Session Description Protocol - –ø—Ä–æ—Ç–æ–∫–æ–ª –æ–ø–∏—Å–∞–Ω–∏—è —Å–µ—Å—Å–∏–∏). –ù–∞–ø–æ–º–Ω–∏–º, —á—Ç–æ `SDP` ‚Äì  —ç—Ç–æ —Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª. –ö–∞–∂–¥–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ `SDP` —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–∞—Ä –∫–ª—é—á/–∑–Ω–∞—á–µ–Ω–∏–µ –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ø–∏—Å–æ–∫ "–º–µ–¥–∏–∞ —Ä–∞–∑–¥–µ–ª–æ–≤" (media sections). `SDP`, –∫–æ—Ç–æ—Ä—ã–º–∏ –æ–±–º–µ–Ω–∏–≤–∞—é—Ç—Å—è –∞–≥–µ–Ω—Ç—ã `WebRTC`, —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ª–µ–¥—É—é—â—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:
-[IP](https://ru.wikipedia.org/wiki/IP-%D0%B0%D0%B4%D1%80%D0%B5%D1%81) –∏ –ø–æ—Ä—Ç—ã, –ø–æ –∫–æ—Ç–æ—Ä—ã–º –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∞–≥–µ–Ω—Ç—É (candidates - –∫–∞–Ω–¥–∏–¥–∞—Ç—ã);
- –∫–∞–∫–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞—É–¥–∏–æ –∏ –≤–∏–¥–µ–æ —Ç—Ä–µ–∫–æ–≤ —Ö–æ—á–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∞–≥–µ–Ω—Ç;
- –∫–∞–∫–∏–µ –∞—É–¥–∏–æ –∏ –≤–∏–¥–µ–æ –∫–æ–¥–µ–∫–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –∫–∞–∂–¥—ã–º –∞–≥–µ–Ω—Ç–æ–º;
- –∑–Ω–∞—á–µ–Ω–∏—è, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (`uFrag/uPwd`);
- –∑–Ω–∞—á–µ–Ω–∏—è, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (certificate fingerprint - –æ—Ç–ø–µ—á–∞—Ç–æ–∫ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞).

_–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ_, —á—Ç–æ —Å–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏—è, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–Ω–µ `WebRTC`; `WebRTC`, –æ–±—ã—á–Ω–æ, –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ —Å–∏–≥–Ω–∞–ª—å–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (signalling messages). –î–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ `SDP` –º–µ–∂–¥—É –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–º–∏ –ø–∏—Ä–∞–º–∏ –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ç–∞–∫–∏–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏, –∫–∞–∫ –∫–æ–Ω–µ—á–Ω—ã–µ —Ç–æ—á–∫–∏ [REST](https://ru.wikipedia.org/wiki/REST), [–≤–µ–±-—Å–æ–∫–µ—Ç—ã](https://ru.wikipedia.org/wiki/WebSocket) –∏–ª–∏ –ø—Ä–æ–∫—Å–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (authentication proxies).

#### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ NAT —Å –ø–æ–º–æ—â—å—é STUN/TURN

–í –ø—Ä–æ—Ü–µ—Å—Å–µ —Å–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ –∞–≥–µ–Ω—Ç—ã `WebRTC` –ø–æ–ª—É—á–∞—é—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ. –î–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥—Ä—É–≥–∞—è —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è –ø–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–µ–º `ICE`.

`ICE` (Interactive Connectivity Establishment - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è) - —ç—Ç–æ –µ—â–µ –æ–¥–∏–Ω –ø—Ä–æ—Ç–æ–∫–æ–ª, –ø—Ä–µ–¥—à–µ—Å—Ç–≤—É—é—â–∏–π –ø–æ—è–≤–ª–µ–Ω–∏—é `WebRTC`. `ICE` –ø–æ–∑–≤–æ–ª—è–µ—Ç —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –º–µ–∂–¥—É –¥–≤—É–º—è –∞–≥–µ–Ω—Ç–∞–º–∏. –ê–≥–µ–Ω—Ç—ã –º–æ–≥—É—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –æ–¥–Ω–æ–π (–ª–æ–∫–∞–ª—å–Ω–æ–π) —Å–µ—Ç–∏ –∏–ª–∏ –≤ —Ä–∞–∑–Ω—ã—Ö –∫–æ–Ω—Ü–∞—Ö —Å–≤–µ—Ç–∞. `ICE` - —ç—Ç–æ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä—è–º–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –±–µ–∑ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞.

–ù–∞—Å—Ç–æ—è—â–µ–µ –≤–æ–ª—à–µ–±—Å—Ç–≤–æ - —ç—Ç–æ "–æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ NAT" –∏ —Å–µ—Ä–≤–µ—Ä—ã `STUN/TURN`. –ò —ç—Ç–æ –≤—Å–µ, —á—Ç–æ –≤–∞–º –Ω—É–∂–Ω–æ –¥–ª—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ —Å –∞–≥–µ–Ω—Ç–æ–º `ICE`, –Ω–∞—Ö–æ–¥—è—â–∏–º—Å—è –≤ –¥—Ä—É–≥–æ–π –ø–æ–¥—Å–µ—Ç–∏ (subnet).

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è `ICE` `WebRTC` –ø—Ä–∏—Å—Ç—É–ø–∞–µ—Ç –∫ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–≥–æ –∫–∞–Ω–∞–ª–∞. –û–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –∞—É–¥–∏–æ, –≤–∏–¥–µ–æ –∏ –¥—Ä—É–≥–∏—Ö –¥–∞–Ω–Ω—ã—Ö.

#### –û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∫–∞–Ω–∞–ª–∞ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–º–æ—â—å—é DTLS –∏ SRTP

–ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –º—ã —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ –¥–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –∫–∞–Ω–∞–ª –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ (—Å –ø–æ–º–æ—â—å—é `ICE`), –Ω–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ—Ç –∫–∞–Ω–∞–ª –±–µ–∑–æ–ø–∞—Å–Ω—ã–º. –≠—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é –¥–≤—É—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤, —Ç–∞–∫–∂–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –∑–∞–¥–æ–ª–≥–æ –¥–æ –ø–æ—è–≤–ª–µ–Ω–∏—è `WebRTC`. –ü–µ—Ä–≤—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª - —ç—Ç–æ [`DTLS`](https://ru.wikipedia.org/wiki/DTLS) (Datagram Transport Layer Security - –ø—Ä–æ—Ç–æ–∫–æ–ª [–¥–∞—Ç–∞–≥—Ä–∞–º–º](https://ru.wikipedia.org/wiki/%D0%94%D0%B0%D1%82%D0%B0%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B0) –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è), –∫–æ—Ç–æ—Ä—ã–π —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ—Å—Ç–æ [`TLS`](https://ru.wikipedia.org/wiki/TLS) –ø–æ–≤–µ—Ä—Ö [`UDP`](https://ru.wikipedia.org/wiki/UDP). `TLS` - —ç—Ç–æ –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –ø—Ä–æ—Ç–æ–∫–æ–ª, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ [`HTTPS`](https://ru.wikipedia.org/wiki/HTTPS). –í—Ç–æ—Ä–æ–π –ø—Ä–æ—Ç–æ–∫–æ–ª - —ç—Ç–æ [`SRTP`](https://ru.wikipedia.org/wiki/SRTP) (Secure Real-time Transport Protocol - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è  –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏).

–°–Ω–∞—á–∞–ª–∞ `WebRTC` –≤—ã–ø–æ–ª–Ω—è–µ—Ç [—Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏–µ](https://en.wikipedia.org/wiki/Handshaking) (handshake) `DTLS` —Å –ø–æ–º–æ—â—å—é —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è `ICE`. –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç `HTTPS`, `WebRTC` –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –æ—Ä–≥–∞–Ω (central authority) –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ `WebRTC` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç, –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–π —á–µ—Ä–µ–∑ `DTLS`, —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –æ—Ç–ø–µ—á–∞—Ç–∫–æ–º (fingerprint, –º—ã –ø–æ–¥—Ä–æ–±–Ω–æ –ø–æ–≥–æ–≤–æ—Ä–∏–º –æ–± —ç—Ç–æ–º –≤ —Ä–∞–∑–¥–µ–ª–µ, –ø–æ—Å–≤—è—â–µ–Ω–Ω–æ–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏), –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–º –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Å–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏–∏. –í –¥–∞–ª—å–Ω–µ–π—à–µ–º `DTLS-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ `DataChannel` (–∫–∞–Ω–∞–ª—É –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö).

–î–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –∞—É–¥–∏–æ/–≤–∏–¥–µ–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥—Ä—É–≥–æ–π –ø—Ä–æ—Ç–æ–∫–æ–ª –ø–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–µ–º [`RTP`](https://ru.wikipedia.org/wiki/Real-time_Transport_Protocol) (Real-time Transport Protocol - –ø—Ä–æ—Ç–æ–∫–æ–ª –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏). –ü–∞–∫–µ—Ç—ã, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–µ –ø–æ `RTP`, –∑–∞—â–∏—â–∞—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é `SRTP`. –°–µ—Å—Å–∏—è `SRTP` –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–ª—é—á–µ–π –∏–∑ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–π —Å–µ—Å—Å–∏–∏ `DTLS`.

–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –ï—Å–ª–∏ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —ç—Ç–∞–ø—ã –∑–∞–≤–µ—Ä—à–∏–ª–∏—Å—å —É—Å–ø–µ—à–Ω–æ, —É –Ω–∞—Å –∏–º–µ–µ—Ç—Å—è –¥–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è. –ï—Å–ª–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –º–µ–∂–¥—É –∞–≥–µ–Ω—Ç–∞–º–∏ `WebRTC` —è–≤–ª—è–µ—Ç—Å—è —Å—Ç–∞–±–∏–ª—å–Ω—ã–º, –º–æ–∂–Ω–æ –ø—Ä–∏—Å—Ç—É–ø–∞—Ç—å –∫ –æ–±–º–µ–Ω—É –¥–∞–Ω–Ω—ã–º–∏. –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –≤ —Ä–µ–∞–ª—å–Ω–æ–º –º–∏—Ä–µ –º—ã –ø–æ—Å—Ç–æ—è–Ω–Ω–æ —Å—Ç–∞–ª–∫–∏–≤–∞–µ–º—Å—è —Å –ø–æ—Ç–µ—Ä–µ–π –ø–∞–∫–µ—Ç–æ–≤ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–π –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å—é, –æ —á–µ–º –º—ã –ø–æ–≥–æ–≤–æ—Ä–∏–º –≤ —Å–ª–µ–¥—É—é—â–µ–º —Ä–∞–∑–¥–µ–ª–µ.

#### –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è –º–µ–∂–¥—É –ø–∏—Ä–∞–º–∏ —á–µ—Ä–µ–∑ RTP –∏ SCTP

–ò—Ç–∞–∫, –º—ã —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –¥–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –º–µ–∂–¥—É –¥–≤—É–º—è –∞–≥–µ–Ω—Ç–∞–º–∏ `WebRTC` –∏ –Ω–∞–∫–æ–Ω–µ—Ü-—Ç–æ –ø—Ä–∏—Å—Ç—É–ø–∞–µ–º –∫ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏! –î–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–≤–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞: `RTP` –∏ [SCTP](https://ru.wikipedia.org/wiki/SCTP) (Stream Control Transmission Protocol ‚Äî –ø—Ä–æ—Ç–æ–∫–æ–ª –ø–µ—Ä–µ–¥–∞—á–∏ —Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –ø–æ—Ç–æ–∫–æ–º). `RTP` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –º–µ–¥–∏–∞, –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å –ø–æ–º–æ—â—å—é `SRTP`, –∞ `SCTP` - –Ω—É–∂–µ–Ω –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∏ –ø—Ä–∏–µ–º–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ `DataChannel`, –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å –ø–æ–º–æ—â—å—é `DTLS`.

`RTP` —è–≤–ª—è–µ—Ç—Å—è –¥–æ–≤–æ–ª—å–Ω–æ –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–º, –Ω–æ –æ–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –¥–ª—è –ø–æ—Ç–æ–∫–æ–≤–æ–π –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏. –ì–∏–±–∫–æ—Å—Ç—å `RTP` –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º —Ä–µ—à–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π, –ø–æ—Ç–µ—Ä–µ–π –¥–∞–Ω–Ω—ã—Ö –∏ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–æ–π, —Å–∞–º—ã–º–∏ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏.

–ü–æ—Å–ª–µ–¥–Ω–∏–º –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º –≤ —Å—Ç–µ–∫–µ —è–≤–ª—è–µ—Ç—Å—è `SCTP`. –û–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –¥–æ—Å—Ç–∞–≤–∫–æ–π —Å–æ–æ–±—â–µ–Ω–∏–π. –ú—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä, –º–æ–∂–µ–º –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞—Ç—å –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å—é –∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –ø–æ—Ä—è–¥–∫–æ–º –¥–æ—Å—Ç–∞–≤–∫–∏ –ø–∞–∫–µ—Ç–æ–≤ –¥–∞–Ω–Ω—ã—Ö –≤ –ø–æ–ª—å–∑—É –Ω–∏–∑–∫–æ–π –∑–∞–¥–µ—Ä–∂–∫–∏ –¥–æ—Å—Ç–∞–≤–∫–∏. –ò–º–µ–Ω–Ω–æ –æ–Ω–∞ —è–≤–ª—è–µ—Ç—Å—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ–π –¥–ª—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

### WebRTC - –∫–æ–ª–ª–µ–∫—Ü–∏—è –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤

–ù–∞ –ø–µ—Ä–≤—ã–π –≤–∑–≥–ª—è–¥ `WebRTC` –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å—Å—è –ø–µ—Ä–µ–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º (over-engineered). –ù–æ –º—ã –º–æ–∂–µ–º –µ–º—É —ç—Ç–æ –ø—Ä–æ—Å—Ç–∏—Ç—å, —Ç–∞–∫ –∫–∞–∫ —Å –µ–≥–æ –ø–æ–º–æ—â—å—é –º—ã –º–æ–∂–µ–º —Ä–µ—à–∞—Ç—å –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–±–ª–µ–º. –ì–µ–Ω–∏–∞–ª—å–Ω–æ—Å—Ç—å `WebRTC` –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –µ–≥–æ —Å–∫—Ä–æ–º–Ω–æ—Å—Ç–∏: –æ–Ω –Ω–µ –ø—ã—Ç–∞–µ—Ç—Å—è —Ä–µ—à–∞—Ç—å –≤—Å–µ –∑–∞–¥–∞—á–∏ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ, –æ–Ω –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π –≤ –µ–¥–∏–Ω–æ–µ —Ü–µ–ª–æ–µ.

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –∏ –∏–∑—É—á–∞—Ç—å –∫–∞–∂–¥—É—é —á–∞—Å—Ç—å –ø–æ-–æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏. –û—á–µ–Ω—å –ø–æ–¥—Ö–æ–¥—è—â–µ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ   `WebRTC` ‚Äì  —ç—Ç–æ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä (orchestrator) –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –¥—Ä—É–≥–∏—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤.

<img src="https://habrastorage.org/webt/sq/lx/_w/sqlx_wxrgq97tnxjm8absyrmijk.png" />
<br />

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç WebRTC (API)?

–í —ç—Ç–æ–º —Ä–∞–∑–¥–µ–ª–µ –º—ã –ø–æ–≥–æ–≤–æ—Ä–∏–º –æ —Ç–æ–º, –∫–∞–∫ –ø—Ä–æ—Ç–æ–∫–æ–ª `WebRTC` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ `JavaScript API`. –≠—Ç–æ –Ω–µ –ø–æ–¥—Ä–æ–±–Ω—ã–π –æ–±–∑–æ—Ä, –∞ –≤—Å–µ–≥–æ –ª–∏—à—å –ø–æ–ø—ã—Ç–∫–∞ –Ω–∞—Ä–∏—Å–æ–≤–∞—Ç—å –æ–±—â—É—é –∫–∞—Ä—Ç–∏–Ω—É —Ç–æ–≥–æ, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

__new RTCPeerConnection__

`RTCPeerConnection` - "WebRTC-—Å–µ—Å—Å–∏—è" –≤–µ—Ä—Ö–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è. –û–Ω–∞ –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –≤—Å–µ —É–ø–æ–º—è–Ω—É—Ç—ã–µ –≤—ã—à–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã. –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø–æ–¥—Å–∏—Å—Ç–µ–º, –Ω–æ –ø–æ–∫–∞ –µ—â–µ –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç.

__addTrack__

`addTrack` —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π –ø–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö (stream) `RTP`.  –î–ª—è —ç—Ç–æ–≥–æ –ø–æ—Ç–æ–∫–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Å–ª—É—á–∞–π–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (Synchronization Source, `SSRC`). –ü–æ—Ç–æ–∫ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –æ–ø–∏—Å–∞–Ω–∏—è —Å–µ—Å—Å–∏–∏ (Session Description, `SDP`) (–≤ –º–µ–¥–∏–∞—Ä–∞–∑–¥–µ–ª–µ), –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º–æ–≥–æ `createOffer`. –ö–∞–∂–¥—ã–π –≤—ã–∑–æ–≤ `addTrack` —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π `SSRC` –∏ –º–µ–¥–∏–∞—Ä–∞–∑–¥–µ–ª.

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ `SRTP-—Å–µ—Å—Å–∏–∏` –∏ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è, —ç—Ç–∏ –º–µ–¥–∏–∞–ø–∞–∫–µ—Ç—ã –Ω–∞—á–∏–Ω–∞—é—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ `ICE`.

__createDataChannel__

`createDataChannel` —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π `SCTP-–ø–æ—Ç–æ–∫` –ø—Ä–∏ –µ–≥–æ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `SCTP` –æ—Ç–∫–ª—é—á–µ–Ω, –æ–Ω –≤–∫–ª—é—á–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –ª—é–±–æ–π —Å—Ç–æ—Ä–æ–Ω–æ–π –∫–∞–Ω–∞–ª–∞ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö.

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ `DTLS-—Å–µ—Å—Å–∏–∏` –∏ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è, —ç—Ç–∏ –ø–∞–∫–µ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏ –Ω–∞—á–∏–Ω–∞—é—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ `ICE`.

__createOffer__

`createOffer` –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ–ø–∏—Å–∞–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è (local state) —Å–µ—Å—Å–∏–∏, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º–æ–≥–æ —É–¥–∞–ª–µ–Ω–Ω–æ–º—É (–≤ –∑–Ω–∞—á–µ–Ω–∏–∏ "–Ω–∞—Ö–æ–¥—è—â–µ–º—É—Å—è –¥–∞–ª–µ–∫–æ", remote) –ø–∏—Ä—É.

–í—ã–∑–æ–≤ `createOffer` –Ω–∏—á–µ–≥–æ –Ω–µ –º–µ–Ω—è–µ—Ç –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –ø–∏—Ä–∞.

__setLocalDescription__

`setLocalDescription` —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç (commits) –∑–∞–ø—Ä–æ—à–µ–Ω–Ω—ã–µ (–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–Ω—ã–µ) –∏–∑–º–µ–Ω–µ–Ω–∏—è. `addTrack`, `createDataChannel` –∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ –≤—ã–∑–æ–≤—ã —è–≤–ª—è—é—Ç—Å—è –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –¥–æ –≤—ã–∑–æ–≤–∞ `setLocalDescription`. `setLocalDescription` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º, —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º `createOffer`.

__setRemoteDescription__

`setRemoteDescription` ‚Äì —Å–ø–æ—Å–æ–± –∏–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞ –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤. –≠—Ç–æ —Å–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏—è, –≤—ã–ø–æ–ª–Ω—è–µ–º–∞—è `JavaScript API`.

–ü–æ—Å–ª–µ –≤—ã–∑–æ–≤–∞ `setRemoteDescription` –æ–±–µ–∏–º–∏ —Å—Ç–æ—Ä–æ–Ω–∞–º–∏, –∞–≥–µ–Ω—Ç—ã `WebRTC` –∏–º–µ—é—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–ª—è –Ω–∞—á–∞–ª–∞ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ `P2P` (Peer-To-Peer - —Ä–∞–≤–Ω—ã–π –∫ —Ä–∞–≤–Ω–æ–º—É).

__addIceCandidate__

`addIceCandidate` –ø–æ–∑–≤–æ–ª—è–µ—Ç `WebRTC-–∞–≥–µ–Ω—Ç—É` –¥–æ–±–∞–≤–ª—è—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ `ICE` –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è. –î–∞–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ `ICE` –ø—Ä—è–º–æ –≤ –ø–æ–¥—Å–∏—Å—Ç–µ–º—É `ICE` –∏ –Ω–µ –æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∏–∫–∞–∫–æ–≥–æ –¥—Ä—É–≥–æ–≥–æ –≤–ª–∏—è–Ω–∏—è –Ω–∞ –æ–±—â–µ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ.

__ontrack__

`ontrack` - —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ (callback), –∫–æ—Ç–æ—Ä–∞—è –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ `RTP-–ø–∞–∫–µ—Ç–∞` –æ—Ç —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ –ø–∏—Ä–∞. –í—Ö–æ–¥—è—â–∏–µ –ø–∞–∫–µ—Ç—ã –ø–æ–º–µ—â–∞—é—Ç—Å—è –≤ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏, –∫–æ—Ç–æ—Ä–æ–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ `setRemoteDescription`.

__oniceconnectionstatechange__

`oniceconnectionstatechange` - —ç—Ç–æ –∫–æ–ª–±—ç–∫, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∞–≥–µ–Ω—Ç–∞ `ICE`. –¢–∞–∫ –º—ã –ø–æ–ª—É—á–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è.

__onconnectionstatechange__

`onconnectionstatechange` - —ç—Ç–æ –∫–æ–º–±–∏–Ω–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è `ICE` –∏ `DTLS`. –ú—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –∫–æ–ª–ª–±—ç–∫ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± —É—Å–ø–µ—à–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–µ `ICE` –∏ `DTLS`.

## –°–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏—è

–í –º–æ–º–µ–Ω—Ç —Å–≤–æ–µ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –∞–≥–µ–Ω—Ç `WebRTC` –Ω–∏—á–µ–≥–æ –Ω–µ –∑–Ω–∞–µ—Ç –æ –¥—Ä—É–≥–æ–º –ø–∏—Ä–µ. –û–Ω –Ω–µ –∏–º–µ–µ—Ç –Ω–∏ –º–∞–ª–µ–π—à–µ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –æ —Ç–æ–º, —Å –∫–µ–º –±—É–¥–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∏ —á–µ–º –æ–Ω–∏ –±—É–¥—É—Ç –æ–±–º–µ–Ω–∏–≤–∞—Ç—å—Å—è. –°–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏—è - —ç—Ç–æ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Å–æ–≤–µ—Ä—à–µ–Ω–∏—é –∑–≤–æ–Ω–∫–∞. –ü–æ—Å–ª–µ –æ–±–º–µ–Ω–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –∞–≥–µ–Ω—Ç—ã –º–æ–≥—É—Ç –æ–±—â–∞—Ç—å—Å—è –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º –Ω–∞–ø—Ä—è–º—É—é.

–°–æ–æ–±—â–µ–Ω–∏—è, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–µ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Å–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ - —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ —Ç–µ–∫—Å—Ç. –ê–≥–µ–Ω—Ç–∞–º –Ω–µ–≤–∞–∂–Ω–æ, –∫–∞–∫ –æ–Ω–∏ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è (–∫–∞–∫–æ–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –¥–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è). –ö–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, –æ–Ω–∏ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –≤–µ–±-—Å–æ–∫–µ—Ç—ã, –Ω–æ —ç—Ç–æ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ.

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

`WebRTC` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–æ—Ç–æ–∫–æ–ª `SDP`. –ß–µ—Ä–µ–∑ –Ω–µ–≥–æ –¥–≤–∞ –∞–≥–µ–Ω—Ç–∞ –æ–±–º–µ–Ω–∏–≤–∞—é—Ç—Å—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è. –°–∞–º –ø—Ä–æ—Ç–æ–∫–æ–ª –ª–µ–≥–∫–æ —á–∏—Ç–∞—Ç—å. –°–ª–æ–∂–Ω–æ—Å—Ç—å –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –ø—Ä–∏ –∏–∑—É—á–µ–Ω–∏–∏ –∑–Ω–∞—á–µ–Ω–∏–π, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã—Ö `WebRTC`.

–≠—Ç–æ—Ç –ø—Ä–æ—Ç–æ–∫–æ–ª –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–º –¥–ª—è `WebRTC`. –°–Ω–∞—á–∞–ª–∞ –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º `SDP` –≤ –æ—Ç—Ä—ã–≤–µ –æ—Ç `WebRTC`, –∞ –ø–æ—Å–ª–µ ‚Äì  –µ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≤ `WebRTC`.

### –ß—Ç–æ —Ç–∞–∫–æ–µ –ø—Ä–æ—Ç–æ–∫–æ–ª –æ–ø–∏—Å–∞–Ω–∏—è —Å–µ—Å—Å–∏–∏?

–ü—Ä–æ—Ç–æ–∫–æ–ª –æ–ø–∏—Å–∞–Ω–∏—è —Å–µ—Å—Å–∏–∏ (Session Description Protocol, SDP) –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –≤ [RFC 8866](https://datatracker.ietf.org/doc/html/rfc8866). –û–Ω —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –ø–∞—Ä –∫–ª—é—á/–∑–Ω–∞—á–µ–Ω–∏–µ. –ö–∞–∂–¥–∞—è –ø–∞—Ä–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ. –û–Ω –ø–æ—Ö–æ–∂ –Ω–∞ —Ñ–∞–π–ª [INI](https://en.wikipedia.org/wiki/INI_file). –û–ø–∏—Å–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ 0 –∏ –±–æ–ª–µ–µ –æ–ø–∏—Å–∞–Ω–∏–π –º–µ–¥–∏–∞ (media descriptions). –û–± –æ–ø–∏—Å–∞–Ω–∏–∏ —Å–µ—Å—Å–∏–∏ –º–æ–∂–Ω–æ –¥—É–º–∞—Ç—å –∫–∞–∫ –æ –º–∞—Å—Å–∏–≤–µ –æ–ø–∏—Å–∞–Ω–∏–π –º–µ–¥–∏–∞.

–û–ø–∏—Å–∞–Ω–∏–µ –º–µ–¥–∏–∞, –æ–±—ã—á–Ω–æ, –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–º—É –ø–æ—Ç–æ–∫—É –º–µ–¥–∏–∞–¥–∞–Ω–Ω—ã—Ö. –ü–æ—ç—Ç–æ–º—É, –µ—Å–ª–∏ –º—ã —Ö–æ—Ç–∏–º –æ–ø–∏—Å–∞—Ç—å –∑–≤–æ–Ω–æ–∫, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π 3 –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫–∞ –∏ 2 –∞—É–¥–∏–æ–ø–æ—Ç–æ–∫–∞, —É –Ω–∞—Å –±—É–¥–µ—Ç 5 –æ–ø–∏—Å–∞–Ω–∏–π –º–µ–¥–∏–∞.

#### –ò–∑—É—á–µ–Ω–∏–µ SDP

–ö–∞–∂–¥–∞—è –Ω–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞ –≤ –æ–ø–∏—Å–∞–Ω–∏–∏ —Å–µ—Å—Å–∏–∏ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –æ–¥–Ω–æ–≥–æ —Å–∏–º–≤–æ–ª–∞ - –∫–ª—é—á–∞. –ó–∞—Ç–µ–º —Å–ª–µ–¥—É–µ—Ç –∑–Ω–∞–∫ —Ä–∞–≤–µ–Ω—Å—Ç–≤–∞. –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω–æ–µ (–¥–æ –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏) - —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ.

`SDP` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≤—Å–µ –∫–ª—é—á–∏, –∫–æ—Ç–æ—Ä—ã–µ —è–≤–ª—è—é—Ç—Å—è –≤–∞–ª–∏–¥–Ω—ã–º–∏. –î–ª—è –∫–ª—é—á–µ–π –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –±—É–∫–≤—ã –ª–∞—Ç–∏–Ω—Å–∫–æ–≥–æ –∞–ª—Ñ–∞–≤–∏—Ç–∞. –ö–∞–∂–¥—ã–π –∫–ª—é—á –∏–º–µ–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –Ω–µ–±–æ–ª—å—à–æ–π –∫—É—Å–æ—á–µ–∫ –æ–ø–∏—Å–∞–Ω–∏—è —Å–µ—Å—Å–∏–∏:

```ini
a=first-value
a=second-value
```

–£ –Ω–∞—Å –µ—Å—Ç—å 2 —Å—Ç—Ä–æ–∫–∏ –∏ –æ–Ω–∏ –æ–±–µ –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å –∫–ª—é—á–∞ `a`. –ó–Ω–∞—á–µ–Ω–∏–µ–º –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–æ–∫–∏ —è–≤–ª—è–µ—Ç—Å—è `first-value`, –∞ –≤—Ç–æ—Ä–æ–π - `second-value`.

#### –ö–ª—é—á–∏ SDP, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –≤ WebRTC

–ù–µ –≤—Å–µ –∫–ª—é—á–∏, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –≤ `SDP`, –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ `WebRTC`. –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–ª—é—á–∏, —Ñ–∏–≥—É—Ä–∏—Ä—É—é—â–∏–µ –≤ –ø—Ä–æ—Ç–æ–∫–æ–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–µ—Å—Å–∏–∏ JavaScript (JavaScript Session Establishment Protocol, `JSEP`), –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–º –≤ [RFC 8829](https://datatracker.ietf.org/doc/html/rfc8829). –ü—Ä—è–º–æ —Å–µ–π—á–∞—Å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ 7 –∫–ª—é—á–µ–π:

- `v` - –≤–µ—Ä—Å–∏—è (version) (`0`);
- `o` - –∏—Å—Ç–æ—á–Ω–∏–∫ (origin), —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä, –ø–æ–ª–µ–∑–Ω—ã–π –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è;
- `s` - –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏ (`-`);
- `t` - —Ä–∞—Å—á–µ—Ç –≤—Ä–µ–º–µ–Ω–∏ (timing) (`0 0`);
- `m` - –æ–ø–∏—Å–∞–Ω–∏–µ –º–µ–¥–∏–∞ (`m=<media> <port> <proto> <fmt> ...`);
- `a` - –∞—Ç—Ä–∏–±—É—Ç, —Å–≤–æ–±–æ–¥–Ω–æ–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –ø–æ–ª–µ. –ù–∞–∏–±–æ–ª–µ–µ —á–∞—Å—Ç–æ –≤—Å—Ç—Ä–µ—á–∞—é—â–∏–π—Å—è –∫–ª—é—á;
- `c` - –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ (`IN IP4 0.0.0.0`).

#### –ú–µ–¥–∏–∞–æ–ø–∏—Å–∞–Ω–∏—è –≤ –æ–ø–∏—Å–∞–Ω–∏–∏ —Å–µ—Å—Å–∏–∏

–û–ø–∏—Å–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏ –º–æ–∂–µ—Ç —Å–æ—Å—Ç–æ—è—Ç—å –∏–∑ –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –æ–ø–∏—Å–∞–Ω–∏–π –º–µ–¥–∏–∞.

–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–µ–¥–∏–∞–æ–ø–∏—Å–∞–Ω–∏—è —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Å–ø–∏—Å–∫–∞ —Ñ–æ—Ä–º–∞—Ç–æ–≤ (formats). –≠—Ç–∏ —Ñ–æ—Ä–º–∞—Ç—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Ç–∏–ø–∞–º –ø–æ–ª–µ–∑–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ `RTP` (RTP Payload Types). –ö–æ–¥–µ–∫ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∞—Ç—Ä–∏–±—É—Ç–æ–º —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º `rtpmap` –≤ –æ–ø–∏—Å–∞–Ω–∏–∏ —Å–µ—Å—Å–∏–∏. –ö–∞–∂–¥–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –º–µ–¥–∏–∞ –º–æ–∂–µ—Ç —Å–æ—Å—Ç–æ—è—Ç—å –∏–∑ –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∞—Ç—Ä–∏–±—É—Ç–æ–≤.

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –µ—â–µ –æ–¥–∏–Ω –∫—É—Å–æ—á–µ–∫ –æ–ø–∏—Å–∞–Ω–∏—è —Å–µ—Å—Å–∏–∏:

```ini
v=0
m=audio 4000 RTP/AVP 111
a=rtpmap:111 OPUS/48000/2
m=video 4000 RTP/AVP 96
a=rtpmap:96 VP8/90000
a=my-sdp-value
```

–£ –Ω–∞—Å –µ—Å—Ç—å –¥–≤–∞ –æ–ø–∏—Å–∞–Ω–∏—è –º–µ–¥–∏–∞: –æ–¥–Ω–æ –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∞—É–¥–∏–æ —Å —Ñ–æ—Ä–º–∞—Ç–æ–º `111`, –¥—Ä—É–≥–æ–µ - –≤–∏–¥–µ–æ —Å —Ñ–æ—Ä–º–∞—Ç–æ–º `96`. –ü–µ—Ä–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –æ–¥–∏–Ω –∞—Ç—Ä–∏–±—É—Ç. –≠—Ç–æ—Ç –∞—Ç—Ä–∏–±—É—Ç –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç (–ø—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç, maps) —Ç–∏–ø –ø–æ–ª–µ–∑–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ `111` –∫–∞–∫ `Opus`. –í—Ç–æ—Ä–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–≤–∞ –∞—Ç—Ä–∏–±—É—Ç–∞. –ü–µ—Ä–≤—ã–π –∞—Ç—Ä–∏–±—É—Ç –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø –ø–æ–ª–µ–∑–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ `96` –∫–∞–∫ `VP8`, –≤—Ç–æ—Ä–æ–π - —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–∞—Å—Ç–æ–º–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ `my-sdp-value`.

#### –ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä

–í —Å–ª–µ–¥—É—é—â–µ–º –ø—Ä–∏–º–µ—Ä–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –≤—Å–µ –∫–ª—é—á–∏ `SDP`, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –≤ `WebRTC`:

```ini
v=0
o=- 0 0 IN IP4 127.0.0.1
s=-
c=IN IP4 127.0.0.1
t=0 0
m=audio 4000 RTP/AVP 111
a=rtpmap:111 OPUS/48000/2
m=video 4002 RTP/AVP 96
a=rtpmap:96 VP8/90000
```

- `v`, `o`, `s`, `c` –∏ `t` –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã, –Ω–æ –æ–Ω–∏ –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ —Å–µ—Å—Å–∏—é `WebRTC`;
- —É –Ω–∞—Å –∏–º–µ–µ—Ç—Å—è –¥–≤–∞ –æ–ø–∏—Å–∞–Ω–∏—è –º–µ–¥–∏–∞. –û–¥–Ω–æ —Å —Ç–∏–ø–æ–º `audio`, –¥—Ä—É–≥–æ–µ - `video`;
- –∫–∞–∂–¥–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –æ–¥–∏–Ω –∞—Ç—Ä–∏–±—É—Ç. –û–Ω –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –¥–µ—Ç–∞–ª–∏ [–∫–æ–Ω–≤–µ–π–µ—Ä–∞](https://en.wikipedia.org/wiki/Pipeline_(software)) (pipeline) `RTP`.

### –ö–∞–∫ SDP –∏ WebRTC —Ä–∞–±–æ—Ç–∞—é—Ç –≤–º–µ—Å—Ç–µ

–°–ª–µ–¥—É—é—â–∏–º –∫—É—Å–æ—á–∫–æ–º –ø–∞–∑–ª–∞ —è–≤–ª—è–µ—Ç—Å—è –ø–æ–Ω–∏–º–∞–Ω–∏–µ —Ç–æ–≥–æ, –∫–∞–∫ `WebRTC` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `SDP`.

#### –ß—Ç–æ —Ç–∞–∫–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –∏ –æ—Ç–≤–µ—Ç—ã?

`WebRTC` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–æ–¥–µ–ª—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ/–æ—Ç–≤–µ—Ç (offer/answer). –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –µ—Å–ª–∏ –æ–¥–∏–Ω –∞–≥–µ–Ω—Ç "–ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç" –Ω–∞—á–∞—Ç—å –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—é, –¥—Ä—É–≥–æ–π –∞–≥–µ–Ω—Ç "–æ—Ç–≤–µ—á–∞–µ—Ç", —Ö–æ—á–µ—Ç –æ–Ω —ç—Ç–æ–≥–æ –∏–ª–∏ –Ω–µ—Ç.

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–≤–µ—á–∞—é—â–µ–º—É –æ—Ç–∫–ª–æ–Ω–∏—Ç—å –Ω–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∏–º –∫–æ–¥–µ–∫–∏, —É–∫–∞–∑–∞–Ω–Ω—ã–µ –≤ –æ–ø–∏—Å–∞–Ω–∏—è—Ö –º–µ–¥–∏–∞. –¢–∞–∫–∏–º —Å–ø–æ—Å–æ–±–æ–º –ø–∏—Ä—ã –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç, –∫–∞–∫–∏–º–∏ —Ñ–æ—Ä–º–∞—Ç–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö –æ–Ω–∏ –±—É–¥—É—Ç –æ–±–º–µ–Ω–∏–≤–∞—Ç—å—Å—è.

#### –¢—Ä–∞–Ω—Å–∏–≤–µ—Ä—ã

–¢—Ä–∞–Ω—Å–∏–≤–µ—Ä—ã (–ø—Ä–∏–µ–º–æ–ø–µ—Ä–µ–¥–∞—Ç—á–∏–∫–∏, transceivers) - —ç—Ç–æ —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∞—è –¥–ª—è `WebRTC` –∫–æ–Ω—Ü–µ–ø—Ü–∏—è, –∫–æ—Ç–æ—Ä—É—é –≤—ã –≤—Å—Ç—Ä–µ—Ç–∏—Ç–µ –≤ `API`. –ò—Ö –æ—Å–Ω–æ–≤–Ω–æ–π –∑–∞–¥–∞—á–µ–π —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ "–æ–ø–∏—Å–∞–Ω–∏—è –º–µ–¥–∏–∞" –≤ `JavaScript API`. –ö–∞–∂–¥–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –º–µ–¥–∏–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ç—Ä–∞–Ω—Å–∏–≤–µ—Ä–æ–º. –ü—Ä–∏ –∫–∞–∂–¥–æ–º —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç—Ä–∞–Ω—Å–∏–≤–µ—Ä–∞ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –Ω–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –º–µ–¥–∏–∞.

–ö–∞–∂–¥–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏ –≤ `WebRTC` –∏–º–µ–µ—Ç –∞—Ç—Ä–∏–±—É—Ç, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∏–π –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö (direction). –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–≥–µ–Ω—Ç—É –æ–±—ä—è–≤–ª—è—Ç—å —Ç–∞–∫–∏–µ –≤–µ—â–∏, –∫–∞–∫, –Ω–∞–ø—Ä–∏–º–µ—Ä, "–Ø —Å–æ–±–∏—Ä–∞—é—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ–±–µ —ç—Ç–æ—Ç –∫–æ–¥–µ–∫, –Ω–æ –Ω–µ —Ö–æ—á—É –Ω–∏—á–µ–≥–æ –ø–æ–ª—É—á–∞—Ç—å –≤ –æ—Ç–≤–µ—Ç". –í–∞–ª–∏–¥–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —è–≤–ª—è—é—Ç—Å—è:

- `send` (sendonly, sending - –æ—Ç–ø—Ä–∞–≤–∫–∞);
- `recv` (recvonly, receiving - –ø–æ–ª—É—á–µ–Ω–∏–µ);
- `sendrecv` (–æ—Ç–ø—Ä–∞–≤–∫–∞ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ);
- `inactive` (–Ω–µ–∞–∫—Ç–∏–≤–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ).

#### –ó–Ω–∞—á–µ–Ω–∏—è SDP, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –≤ WebRTC

–ù–∏–∂–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω —Å–ø–∏—Å–æ–∫ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —á–∞—Å—Ç–æ –≤—Å—Ç—Ä–µ—á–∞—é—â–∏—Ö—Å—è –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –æ–ø–∏—Å–∞–Ω–∏—è —Å–µ—Å—Å–∏–∏, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∞–≥–µ–Ω—Ç–∞–º–∏. –ú–Ω–æ–≥–∏–µ –∏–∑ —ç—Ç–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É—é—Ç –ø–æ–¥—Å–∏—Å—Ç–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –º—ã –µ—â–µ –Ω–µ –æ–±—Å—É–∂–¥–∞–ª–∏ (–Ω–æ —Å–∫–æ—Ä–æ –æ–±—Å—É–¥–∏–º).

__group:BUNDLE__

–°–±–æ—Ä–∫–∞ (bundling) - —ç—Ç–æ –ø–µ—Ä–µ–¥–∞—á–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ç–∏–ø–æ–≤ —Ç—Ä–∞—Ñ–∏–∫–∞ —á–µ—Ä–µ–∑ –æ–¥–Ω–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ (—á–∞—Å—Ç–æ —ç—Ç–æ –Ω–∞–∑—ã–≤–∞—é—Ç ["–±–∞—Ç—á–∏–Ω–≥–æ–º"](https://en.wikipedia.org/wiki/Batch_processing), batching). –í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è—Ö `WebRTC` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º–µ–¥–∏–∞–ø–æ—Ç–æ–∫–∞ –≤—ã–¥–µ–ª—è–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ. –°–±–æ—Ä–∫–∞ —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ–π.

__fingerprint:sha-256__

–≠—Ç–æ [—Ö–µ—à](https://ru.wikipedia.org/wiki/%D0%A5%D0%B5%D1%88-%D1%81%D1%83%D0%BC%D0%BC%D0%B0) —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞, –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –ø–∏—Ä–æ–º –¥–ª—è `DTLS`. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è `DTLS` –º—ã —Å—Ä–∞–≤–Ω–∏–≤–∞–µ–º —Ö–µ—à —Å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Ç–æ–≥–æ, —á—Ç–æ –º—ã –æ–±—â–∞–µ–º—Å—è —Å —Ç–µ–º, –∫–æ–≥–æ –æ–∂–∏–¥–∞–µ–º.

__setup:__

–ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞ `DTLS`. –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, —á–µ–º —è–≤–ª—è–µ—Ç—Å—è –∞–≥–µ–Ω—Ç (–∫–ª–∏–µ–Ω—Ç–æ–º –∏–ª–∏ —Å–µ—Ä–≤–µ—Ä–æ–º), –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ `ICE`. –í–æ–∑–º–æ–∂–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:

- `setup:active` - –∑–∞–ø—É—Å–∫ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∫–ª–∏–µ–Ω—Ç–∞ `DTLS`;
- `setup:passive` - –∑–∞–ø—É—Å–∫ –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Å–µ—Ä–≤–µ—Ä–∞ `DTLS`;
- `setup:actpass` - –ø—Ä–æ—Å–∏–º –¥—Ä—É–≥–æ–≥–æ –∞–≥–µ–Ω—Ç–∞ `WebRTC` —Å–¥–µ–ª–∞—Ç—å –≤—ã–±–æ—Ä.

__ice-ufrag__

–ó–Ω–∞—á–µ–Ω–∏–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (user fragment) –¥–ª—è –∞–≥–µ–Ω—Ç–∞ `ICE`. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ç—Ä–∞—Ñ–∏–∫–∞ `ICE`.

__ice-pwd__

–ü–∞—Ä–æ–ª—å –¥–ª—è –∞–≥–µ–Ω—Ç–∞ `ICE`. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ç—Ä–∞—Ñ–∏–∫–∞ `ICE`.

__rtpmap__

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–≤—è–∑–∏ –º–µ–∂–¥—É –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –∫–æ–¥–µ–∫–æ–º –∏ —Ç–∏–ø–æ–º –ø–æ–ª–µ–∑–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ `RTP`. –¢–∏–ø—ã –ø–æ–ª–µ–∑–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ —è–≤–ª—è—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏, –ø–æ—ç—Ç–æ–º—É –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤—ã–∑–æ–≤–∞ –µ–≥–æ –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä –≤—ã–±–∏—Ä–∞–µ—Ç —Ç–∏–ø—ã –ø–æ–ª–µ–∑–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–¥–µ–∫–∞.

__fmtp__

–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è —Ç–∏–ø–∞ –ø–æ–ª–µ–∑–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏. –ú–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è –≤–∏–¥–µ–æ –∏–ª–∏ –∫–æ–¥–∏—Ä–æ–≤–∫–∏.

__candidate__

–ö–∞–Ω–¥–∏–¥–∞—Ç `ICE`, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –æ—Ç –∞–≥–µ–Ω—Ç–∞ `ICE`. –û–¥–∏–Ω –∏–∑ –∞–¥—Ä–µ—Å–æ–≤, –ø–æ –∫–æ—Ç–æ—Ä—ã–º –¥–æ—Å—Ç—É–ø–µ–Ω –∞–≥–µ–Ω—Ç `WebRTC`.

__ssrc__

–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç—Ä–µ–∫ –º–µ–¥–∏–∞–ø–æ—Ç–æ–∫–∞ (media stream track).

`label` - —ç—Ç–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ—Ç–æ–∫–∞. `mslabel` - –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Ç–æ–∫–æ–≤.

#### –ü—Ä–∏–º–µ—Ä –æ–ø–∏—Å–∞–Ω–∏—è —Å–µ—Å—Å–∏–∏

–ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º–æ–µ –∫–ª–∏–µ–Ω—Ç–æ–º `WebRTC`:

```ini
v=0
o=- 3546004397921447048 1596742744 IN IP4 0.0.0.0
s=-
t=0 0
a=fingerprint:sha-256 0F:74:31:25:CB:A2:13:EC:28:6F:6D:2C:61:FF:5D:C2:BC:B9:DB:3D:98:14:8D:1A:BB:EA:33:0C:A4:60:A8:8E
a=group:BUNDLE 0 1
m=audio 9 UDP/TLS/RTP/SAVPF 111
c=IN IP4 0.0.0.0
a=setup:active
a=mid:0
a=ice-ufrag:CsxzEWmoKpJyscFj
a=ice-pwd:mktpbhgREmjEwUFSIJyPINPUhgDqJlSd
a=rtcp-mux
a=rtcp-rsize
a=rtpmap:111 opus/48000/2
a=fmtp:111 minptime=10;useinbandfec=1
a=ssrc:350842737 cname:yvKPspsHcYcwGFTw
a=ssrc:350842737 msid:yvKPspsHcYcwGFTw DfQnKjQQuwceLFdV
a=ssrc:350842737 mslabel:yvKPspsHcYcwGFTw
a=ssrc:350842737 label:DfQnKjQQuwceLFdV
a=msid:yvKPspsHcYcwGFTw DfQnKjQQuwceLFdV
a=sendrecv
a=candidate:foundation 1 udp 2130706431 192.168.1.1 53165 typ host generation 0
a=candidate:foundation 2 udp 2130706431 192.168.1.1 53165 typ host generation 0
a=candidate:foundation 1 udp 1694498815 1.2.3.4 57336 typ srflx raddr 0.0.0.0 rport 57336 generation 0
a=candidate:foundation 2 udp 1694498815 1.2.3.4 57336 typ srflx raddr 0.0.0.0 rport 57336 generation 0
a=end-of-candidates
m=video 9 UDP/TLS/RTP/SAVPF 96
c=IN IP4 0.0.0.0
a=setup:active
a=mid:1
a=ice-ufrag:CsxzEWmoKpJyscFj
a=ice-pwd:mktpbhgREmjEwUFSIJyPINPUhgDqJlSd
a=rtcp-mux
a=rtcp-rsize
a=rtpmap:96 VP8/90000
a=ssrc:2180035812 cname:XHbOTNRFnLtesHwJ
a=ssrc:2180035812 msid:XHbOTNRFnLtesHwJ JgtwEhBWNEiOnhuW
a=ssrc:2180035812 mslabel:XHbOTNRFnLtesHwJ
a=ssrc:2180035812 label:JgtwEhBWNEiOnhuW
a=msid:XHbOTNRFnLtesHwJ JgtwEhBWNEiOnhuW
a=sendrecv
```

–í–æ—Ç —á—Ç–æ –º—ã –¥–æ–ª–∂–Ω—ã –ø–æ–Ω—è—Ç—å –∏–∑ —ç—Ç–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è:

- —É –Ω–∞—Å –∏–º–µ–µ—Ç—Å—è –¥–≤–∞ –º–µ–¥–∏–∞—Ä–∞–∑–¥–µ–ª–∞: –æ–¥–∏–Ω –¥–ª—è –∞—É–¥–∏–æ –∏ –æ–¥–∏–Ω –¥–ª—è –≤–∏–¥–µ–æ;
- –æ–±–∞ —è–≤–ª—è—é—Ç—Å—è —Ç—Ä–∞–Ω—Å–∏–≤–µ—Ä–∞–º–∏ `sendrecv`. –ú—ã –ø–æ–ª—É—á–∞–µ–º –¥–≤–∞ –ø–æ—Ç–æ–∫–∞ –∏ –º–æ–∂–µ–º –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–≤–∞ –ø–æ—Ç–æ–∫–∞ –≤ –æ—Ç–≤–µ—Ç;
- —É –Ω–∞—Å –∏–º–µ—é—Ç—Å—è –∫–∞–Ω–¥–∏–¥–∞—Ç—ã `ICE` –∏ –¥–µ—Ç–∞–ª–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–µ–¥–ø—Ä–∏–Ω—è—Ç—å –ø–æ–ø—ã—Ç–∫—É —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ;
- —É –Ω–∞—Å –∏–º–µ–µ—Ç—Å—è –æ—Ç–ø–µ—á–∞—Ç–æ–∫ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–¥–µ–ª–∞—Ç—å –∑–≤–æ–Ω–æ–∫ –±–µ–∑–æ–ø–∞—Å–Ω—ã–º.

## –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º—ã—Ö —Å–µ–≥–æ–¥–Ω—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —Ä–µ–∞–ª–∏–∑—É–µ—Ç –∫–ª–∏–µ–Ω—Ç-—Å–µ—Ä–≤–µ—Ä–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è. –¢–∞–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç –Ω–∞–ª–∏—á–∏–µ —Å–µ—Ä–≤–µ—Ä–∞ —Å –∏–∑–≤–µ—Å—Ç–Ω—ã–º –∏ —Å—Ç–∞–±–∏–ª—å–Ω—ã–º —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–º –∞–¥—Ä–µ—Å–æ–º (transport address) (`IP` –∏ –ø–æ—Ä—Ç). –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å, –∞ —Å–µ—Ä–≤–µ—Ä –Ω–∞ –Ω–µ–≥–æ –æ—Ç–≤–µ—á–∞–µ—Ç.

–í `WebRTC` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥—Ä—É–≥–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ - –æ–¥–Ω–æ—Ä–∞–Ω–≥–æ–≤–∞—è —Å–µ—Ç—å (Peer-to-Peer, P2P). –í —Ç–∞–∫–æ–π —Å–µ—Ç–∏ –∑–∞–¥–∞—á–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –º–µ–∂–¥—É –ø–∏—Ä–∞–º–∏. –≠—Ç–æ –æ–±—É—Å–ª–æ–≤–ª–µ–Ω–æ —Ç–µ–º, —á—Ç–æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–π –∞–¥—Ä–µ—Å –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –∑–∞—Ä–∞–Ω–µ–µ, –∏ –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å—Å—è –≤ —Ç–µ—á–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏ (session). `WebRTC` —Å–æ–±–∏—Ä–∞–µ—Ç –≤—Å—é –¥–æ—Å—Ç—É–ø–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏ –¥–µ–ª–∞–µ—Ç –º–Ω–æ–≥–æ–µ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–π –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ (bi-directional communication) –º–µ–∂–¥—É –∞–≥–µ–Ω—Ç–∞–º–∏.

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–∞–∫–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è - –∑–∞–¥–∞—á–∞ –Ω–µ –∏–∑ –ø—Ä–æ—Å—Ç—ã—Ö. –ê–≥–µ–Ω—Ç—ã –º–æ–≥—É—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ —Ä–∞–∑–Ω—ã—Ö —Å–µ—Ç—è—Ö, —Ç.–µ. –Ω–µ –∏–º–µ—Ç—å –ø—Ä—è–º–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è. –ò –¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω–æ –µ—Å—Ç—å, –º–æ–≥—É—Ç –±—ã—Ç—å –¥—Ä—É–≥–∏–µ –ø—Ä–æ–±–ª–µ–º—ã. –ù–∞–ø—Ä–∏–º–µ—Ä, –∫–ª–∏–µ–Ω—Ç—ã –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã (`UPD` <-> `TCP`) –∏–ª–∏ —Ä–∞–∑–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ `IP` (`IPv4` <-> `IPv6`).

–ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —ç—Ç–æ, `WebRTC` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å –∫–ª–∏–µ–Ω—Ç-—Å–µ—Ä–≤–µ—Ä–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π.

__–£–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö__

–ü–æ—Å–∫–æ–ª—å–∫—É –æ–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏ –º–µ–∂–¥—É –∞–≥–µ–Ω—Ç–∞–º–∏ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é, –Ω–∞–º –Ω–µ –Ω—É–∂–Ω–æ "–ø–ª–∞—Ç–∏—Ç—å" –∑–∞ —Å–µ—Ä–≤–µ—Ä, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –¥–ª—è —Ä–µ—Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–∏ (–ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è) —ç—Ç–∏—Ö –¥–∞–Ω–Ω—ã—Ö.

__–°–Ω–∏–∂–µ–Ω–∏–µ –∑–∞–¥–µ—Ä–∂–∫–∏__

–ü—Ä—è–º–∞—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è —è–≤–ª—è–µ—Ç—Å—è –±–æ–ª–µ–µ –±—ã—Å—Ç—Ä–æ–π. –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–Ω—É–∂–¥–µ–Ω –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–µ—Ä, —Ä–µ—Ç—Ä–∞–Ω—Å–ª—è—Ü–∏—è —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –∑–∞–¥–µ—Ä–∂–∫—É.

__–ü–æ–≤—ã—à–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏__

–ü—Ä—è–º–∞—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è —è–≤–ª—è–µ—Ç—Å—è –±–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π. –ü–æ—Å–∫–æ–ª—å–∫—É —Å–µ—Ä–≤–µ—Ä –Ω–µ —É—á–∞—Å—Ç–≤—É–µ—Ç –≤ –ø–µ—Ä–µ–¥–∞—á–µ –¥–∞–Ω–Ω—ã—Ö, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –±—ã—Ç—å —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –Ω–µ –±—É–¥—É—Ç —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–Ω—ã, –ø–æ–∫–∞ –Ω–µ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç –∞–¥—Ä–µ—Å–∞—Ç–∞.

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

–û–ø–∏—Å–∞–Ω–Ω—ã–π –≤—ã—à–µ –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è [—É—Å—Ç–∞–Ω–æ–≤–∫–æ–π –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è](https://datatracker.ietf.org/doc/html/rfc8445) (Interactive Connectivity Establishment, ICE).

`ICE` - —ç—Ç–æ –ø—Ä–æ—Ç–æ–∫–æ–ª, –∫–æ—Ç–æ—Ä—ã–π –ø—ã—Ç–∞–µ—Ç—Å—è –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –Ω–∞–∏–ª—É—á—à–∏–π —Å–ø–æ—Å–æ–± –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –º–µ–∂–¥—É –¥–≤—É–º—è –∞–≥–µ–Ω—Ç–∞–º–∏. –ö–∞–∂–¥—ã–π –∞–≥–µ–Ω—Ç –ø—É–±–ª–∏–∫—É–µ—Ç (publishes) –ø—É—Ç—å, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É –æ–Ω –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ—Å—Ç–∏–≥–Ω—É—Ç (reachable). –¢–∞–∫–∏–µ –ø—É—Ç–∏ –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è –∫–∞–Ω–¥–∏–¥–∞—Ç–∞–º–∏ (candidates). –ü–æ —Å—É—Ç–∏, –∫–∞–Ω–¥–∏–¥–∞—Ç - —ç—Ç–æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–π –∞–¥—Ä–µ—Å, –∫–æ—Ç–æ—Ä—ã–π –æ–¥–∏–Ω –∞–≥–µ–Ω—Ç —Å—á–∏—Ç–∞–µ—Ç –¥–æ—Å—Ç–∏–∂–∏–º—ã–º –¥–ª—è –¥—Ä—É–≥–æ–≥–æ –∞–≥–µ–Ω—Ç–∞. –ó–∞—Ç–µ–º `ICE` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ–¥—Ö–æ–¥—è—â—É—é –ø–∞—Ä—É –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤.

–î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è –≤ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ `ICE`, –Ω—É–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å, –∫–∞–∫–∏–µ —Ç—Ä—É–¥–Ω–æ—Å—Ç–∏ –Ω–∞–º –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –ø—Ä–µ–æ–¥–æ–ª–µ–≤–∞—Ç—å –Ω–∞ –ø—É—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è.

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –º–∏—Ä–∞

–û—Å–Ω–æ–≤–Ω–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ `ICE` - –ø—Ä–µ–æ–¥–æ–ª–µ–Ω–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π, –Ω–∞–∫–ª–∞–¥—ã–≤–∞–µ–º—ã—Ö –Ω–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω—ã–º –º–∏—Ä–æ–º. –ö—Ä–∞—Ç–∫–æ –æ–±—Å—É–¥–∏–º —ç—Ç–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è.

#### –†–∞–∑–Ω—ã–µ —Å–µ—Ç–∏

–í –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ –≤—Ç–æ—Ä–æ–π –∞–≥–µ–Ω—Ç –±—É–¥–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –¥—Ä—É–≥–æ–π —Å–µ—Ç–∏. –ö–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –º–µ–∂–¥—É –∞–≥–µ–Ω—Ç–∞–º–∏, –Ω–∞—Ö–æ–¥—è—â–∏–º–∏—Å—è –≤ —Ä–∞–∑–Ω—ã—Ö —Å–µ—Ç—è—Ö.

–ù–∏–∂–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –≥—Ä–∞—Ñ –¥–≤—É—Ö –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö —Å–µ—Ç–µ–π, —Å–æ–µ–¥–∏–Ω–µ–Ω–Ω—ã—Ö –≤–º–µ—Å—Ç–µ —á–µ—Ä–µ–∑ –ø—É–±–ª–∏—á–Ω—ã–π –ò–Ω—Ç–µ—Ä–Ω–µ—Ç. –í –∫–∞–∂–¥–æ–π —Å–µ—Ç–∏ —É –Ω–∞—Å –∏–º–µ–µ—Ç—Å—è –¥–≤–∞ —Ö–æ—Å—Ç–∞.

<img src="https://habrastorage.org/webt/6d/aj/pa/6dajpadwe3lnahtlj3mlya1ubnw.png" />
<br />

–î–ª—è —Ö–æ—Å—Ç–æ–≤, –Ω–∞—Ö–æ–¥—è—â–∏—Ö—Å—è –≤ –æ–¥–Ω–æ–π —Å–µ—Ç–∏, —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è - –ø—Ä–æ—Å—Ç–∞—è –∑–∞–¥–∞—á–∞. –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—é –º–µ–∂–¥—É `192.168.0.1 -> 192.168.0.2` –ª–µ–≥–∫–æ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å. –¢–∞–∫–∏–µ —Ö–æ—Å—Ç—ã –º–æ–≥—É—Ç –æ–±—â–∞—Ç—å—Å—è –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º –±–µ–∑ –ø–æ—Å—Ç–æ—Ä–æ–Ω–Ω–µ–π –ø–æ–º–æ—â–∏.

–û–¥–Ω–∞–∫–æ, —Ö–æ—Å—Ç, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π `Router B`, –Ω–µ –∏–º–µ–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ–±—â–∞—Ç—å—Å—è —Å —Ö–æ—Å—Ç–∞–º–∏, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–º–∏ `Router A`. –ö–∞–∫ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É `192.168.0.1` –∏–∑ `Router A` –∏ —Ç–∞–∫–∏–º –∂–µ `IP` –∏–∑ `Router B`? –≠—Ç–∏ `IP` —è–≤–ª—è—é—Ç—Å—è —á–∞—Å—Ç–Ω—ã–º–∏ (–∑–∞–∫—Ä—ã—Ç—ã–º–∏ –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ –º–∏—Ä–∞, private)! –•–æ—Å—Ç –∏–∑ `Router B` –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ `Router A`, –Ω–æ –∑–∞–ø—Ä–æ—Å –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è –Ω–∏—á–µ–º. –ö–∞–∫ `Router A` –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫–∞–∫–æ–º—É —Ö–æ—Å—Ç—É —Å–ª–µ–¥—É–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ?

#### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤

–í –æ–¥–Ω–∏—Ö —Å–µ—Ç—è—Ö –∑–∞–ø—Ä–µ—â–µ–Ω–∞ –ø–µ—Ä–µ–¥–∞—á–∞ —Ç—Ä–∞—Ñ–∏–∫–∞ –ø–æ `UDP`, –≤ –¥—Ä—É–≥–∏—Ö - –ø–æ `TCP`. –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Å–µ—Ç–∏ –º–æ–≥—É—Ç –∏–º–µ—Ç—å –æ—á–µ–Ω—å –Ω–∏–∑–∫—É—é [–º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –µ–¥–∏–Ω–∏—Ü—É –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö](https://ru.wikipedia.org/wiki/Maximum_transmission_unit) (Maximum Transmission Unit, MTU). –°—É—â–µ—Å—Ç–≤—É–µ—Ç –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å–µ—Ç–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç —Å–¥–µ–ª–∞—Ç—å –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—é –ø–æ –º–µ–Ω—å—à–µ–π –º–µ—Ä–µ –∑–∞—Ç—Ä—É–¥–Ω–∏—Ç–µ–ª—å–Ω–æ–π.

#### –ü—Ä–∞–≤–∏–ª–∞ –º–µ–∂—Å–µ—Ç–µ–≤—ã—Ö —ç–∫—Ä–∞–Ω–æ–≤

–ï—â–µ –æ–¥–Ω–æ–π –ø—Ä–æ–±–ª–µ–º–æ–π —è–≤–ª—è–µ—Ç—Å—è "–≥–ª—É–±–æ–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞–∫–µ—Ç–æ–≤" ("Deep Packet Inspection") –∏ –¥—Ä—É–≥–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–µ—Ç–µ–≤–æ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞. –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Å–µ—Ç–µ–≤—ã–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç —Ç–∞–∫–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏–∏ –∫–∞–∂–¥–æ–≥–æ –ø–∞–∫–µ—Ç–∞. –í–æ –º–Ω–æ–≥–∏—Ö —Å–ª—É—á–∞—è—Ö —ç—Ç–æ –ü–û –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç `WebRTC`, —Å—á–∏—Ç–∞–µ—Ç –ø–∞–∫–µ—Ç—ã `WebRTC` –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–º–∏ –ø–∞–∫–µ—Ç–∞–º–∏ `UDP`, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–º–∏ –ø–æ –ø–æ—Ä—Ç—É, –Ω–µ –≤—Ö–æ–¥—è—â–µ–º—É –≤ [–±–µ–ª—ã–π —Å–ø–∏—Å–æ–∫](https://en.wikipedia.org/wiki/Whitelisting) (whitelist).

### –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ NAT

–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ [–ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Å–µ—Ç–µ–≤—ã—Ö –∞–¥—Ä–µ—Å–æ–≤](https://ru.wikipedia.org/wiki/NAT) (Network Address Translation, NAT) (NAT Mapping) - —ç—Ç–æ –º–∞–≥–∏—è, –∫–æ—Ç–æ—Ä–∞—è –¥–µ–ª–∞–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ `WebRTC` –≤–æ–∑–º–æ–∂–Ω—ã–º. –≠—Ç–æ —Ç–æ, –±–ª–∞–≥–æ–¥–∞—Ä—è —á–µ–º—É –¥–≤–∞ –ø–∏—Ä–∞ –∏–∑ —Ä–∞–∑–Ω—ã—Ö —Å–µ—Ç–µ–π –º–æ–≥—É—Ç –æ–±—â–∞—Ç—å—Å—è –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º. –†–∞—Å—Å–º–æ—Ç—Ä–∏–º, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ `NAT`.

`NAT` –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–µ—Ç—Ä–∞–Ω—Å–ª—è—Ç–æ—Ä, –ø—Ä–æ–∫—Å–∏ –∏–ª–∏ —Å–µ—Ä–≤–µ—Ä. –£ –Ω–∞—Å –µ—Å—Ç—å `Agent 1` –∏ `Agent 2`, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Ä–∞–∑–Ω—ã—Ö —Å–µ—Ç—è—Ö. –ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —ç—Ç–æ, –æ–Ω–∏ –º–æ–≥—É—Ç –æ–±–º–µ–Ω–∏–≤–∞—Ç—å—Å—è –¥–∞–Ω–Ω—ã–º–∏. –í–æ—Ç –∫–∞–∫ —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç:

<img src="https://habrastorage.org/webt/tf/am/-8/tfam-87ok_feb9rduj6kx3oguxc.png" />
<br />

–î–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ–¥–æ–±–Ω–æ–π –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ –º—ã –ø—Ä–∏–±–µ–≥–∞–µ–º –∫ –ø–æ–º–æ—â–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è `NAT`. `Agent 1` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ—Ä—Ç `7000` –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è `WebRTC` —Å `Agent 2`. `192.168.0.1:7000` –ø—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç—Å—è (bind) –∫ `5.0.0.1:7000`. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç `Agent 2` "–¥–æ—Å—Ç–∏–≥–∞—Ç—å" `Agent 1`, –æ—Ç–ø—Ä–∞–≤–ª—è—è –ø–∞–∫–µ—Ç—ã –ø–æ –∞–¥—Ä–µ—Å—É `5.0.0.1:7000`. –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è `NAT` –ø–æ—Ö–æ–∂–µ –Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –≤–µ—Ä—Å–∏—é –ø–µ—Ä–µ–∞–¥—Ä–µ—Å–∞—Ü–∏–∏ –ø–æ—Ä—Ç–æ–≤ (port forwarding) –≤ —Ä–æ—É—Ç–µ—Ä–µ.

–û–±—Ä–∞—Ç–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω–æ–π `NAT` —è–≤–ª—è–µ—Ç—Å—è —Ç–æ, —á—Ç–æ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –µ–¥–∏–Ω–æ–π —Ñ–æ—Ä–º—ã –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π –ø–µ—Ä–µ–∞–¥—Ä–µ—Å–∞—Ü–∏–∏ –ø–æ—Ä—Ç–æ–≤), –≤ —Ä–∞–∑–Ω—ã—Ö —Å–µ—Ç—è—Ö –ø–æ–≤–µ–¥–µ–Ω–∏–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–º. –ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–∏ –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –º–æ–≥—É—Ç –¥–µ–ª–∞—Ç—å —ç—Ç–æ –ø–æ-—Ä–∞–∑–Ω–æ–º—É. –í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–ª—É—á–∞—è—Ö —Å–µ—Ç–µ–≤—ã–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –≤–æ–æ–±—â–µ –º–æ–≥—É—Ç –µ–≥–æ –æ—Ç–∫–ª—é—á–∏—Ç—å.

–•–æ—Ä–æ—à–µ–π –Ω–æ–≤–æ—Å—Ç—å—é —è–≤–ª—è–µ—Ç—Å—è —Ç–æ, —á—Ç–æ –≤—Å–µ —ç—Ç–∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –º–æ–Ω–∏—Ç–æ—Ä—è—Ç—Å—è –∏ —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–≥–µ–Ω—Ç—É `ICE` —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ `NAT` –∏ –µ–≥–æ –∞—Ç—Ä–∏–±—É—Ç—ã.

–î–æ–∫—É–º–µ–Ω—Ç–æ–º, –æ–ø–∏—Å—ã–≤–∞—é—â–∏–º –¥–∞–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å, —è–≤–ª—è–µ—Ç—Å—è [RFC 4787](https://datatracker.ietf.org/doc/html/rfc4787).

#### –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è NAT

–°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è - —Å–∞–º–∞—è –ª–µ–≥–∫–∞—è —á–∞—Å—Ç—å. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –º—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø–∞–∫–µ—Ç –ø–æ –∞–¥—Ä–µ—Å—É, –Ω–∞—Ö–æ–¥—è—â–µ–º—É—Å—è –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ –Ω–∞—à–µ–π —Å–µ—Ç–∏. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ `NAT` - —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—É–±–ª–∏—á–Ω—ã–µ `IP` –∏ –ø–æ—Ä—Ç, –∑–∞–Ω–∏–º–∞–µ–º—ã–π –Ω–∞—à–∏–º `NAT`. –ò—Å—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—é—Ç—Å—è —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —á—Ç–æ –∞–¥—Ä–µ—Å–æ–º –∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–∞ (source address) —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Å–æ–∑–¥–∞–Ω–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ. –ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –æ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ —Ö–æ—Å—Ç –≤–Ω—É—Ç—Ä–∏ —Å–æ–∑–¥–∞–≤—à–µ–≥–æ –µ–≥–æ `NAT`. –ò —ç—Ç–æ—Ç –ø—Ä–æ—Ü–µ—Å—Å —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Å–ª–æ–∂–Ω—ã–º, –∫–æ–≥–¥–∞ —Ä–µ—á—å –∑–∞—Ö–æ–¥–∏—Ç –æ –¥–µ—Ç–∞–ª—è—Ö —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è.

#### –í–∞—Ä–∏–∞–Ω—Ç—ã —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è NAT

–°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–µ–ª–∏—Ç—Å—è –Ω–∞ —Ç—Ä–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.

__–ê–≤—Ç–æ–Ω–æ–º–Ω–æ–µ (–Ω–µ –∑–∞–≤–∏—Å—è—â–µ–µ –æ—Ç –∫–æ–Ω–µ—á–Ω–æ–π —Ç–æ—á–∫–∏, endpoint-independent) –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ__

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –≤–Ω—É—Ç—Ä–∏ `NAT` —Å–æ–∑–¥–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ. –ï—Å–ª–∏ –º—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–≤–∞ –ø–∞–∫–µ—Ç–∞ –ø–æ –¥–≤—É–º —É–¥–∞–ª–µ–Ω–Ω—ã–º –∞–¥—Ä–µ—Å–∞–º, –¥–ª—è –æ–±–æ–∏—Ö –ø–∞–∫–µ—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–¥–Ω–æ –∏ —Ç–æ–∂–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ. –û–±–∞ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö —Ö–æ—Å—Ç–∞ –±—É–¥—É—Ç –≤–∏–¥–µ—Ç—å –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ `IP` –∏ –ø–æ—Ä—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–∞. –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤ –æ—Ç —Ö–æ—Å—Ç–æ–≤, –æ–Ω–∏ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –ª–æ–∫–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ (local listener).

–≠—Ç–æ –ª—É—á—à–∏–π —Å—Ü–µ–Ω–∞—Ä–∏–π. –î–ª—è –æ—Å—É—â–µ—Å—Ç–≤–ª–µ–Ω–∏—è –∑–≤–æ–Ω–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ, —á—Ç–æ–±—ã —Ö–æ—Ç—è –±—ã –æ–¥–Ω–∞ —Å—Ç–æ—Ä–æ–Ω–∞ –±—ã–ª–∞ —Ç–∞–∫–æ–≥–æ —Ç–∏–ø–∞.

__–ó–∞–≤–∏—Å—è—â–µ–µ –æ—Ç –∞–¥—Ä–µ—Å–∞ (address dependent) –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ__

–ù–æ–≤–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –ø–∞–∫–µ—Ç–∞ –ø–æ –Ω–æ–≤–æ–º—É –∞–¥—Ä–µ—Å—É. –ï—Å–ª–∏ –º—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–≤–∞ –ø–∞–∫–µ—Ç–∞ –≤ –¥–≤–∞ —Ä–∞–∑–Ω—ã—Ö —Ö–æ—Å—Ç–∞, —Å–æ–∑–¥–∞–µ—Ç—Å—è –¥–≤–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è. –ï—Å–ª–∏ –º—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–≤–∞ –ø–∞–∫–µ—Ç–∞ –≤ –æ–¥–∏–Ω —É–¥–∞–ª–µ–Ω–Ω—ã–π —Ö–æ—Å—Ç, –Ω–æ —Ä–∞–∑–Ω—ã–µ –ø–æ—Ä—Ç—ã, —Å–æ–∑–¥–∞–µ—Ç—Å—è –û–î–ù–û –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ.

__–ó–∞–≤–∏—Å—è—â–µ–µ –æ—Ç –∞–¥—Ä–µ—Å–∞ –∏ –ø–æ—Ä—Ç–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ__

–ù–æ–≤–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è, –µ—Å–ª–∏ –æ—Ç–ª–∏—á–∞—é—Ç—Å—è —É–¥–∞–ª–µ–Ω–Ω—ã–π `IP` –∏–ª–∏ –ø–æ—Ä—Ç. –ï—Å–ª–∏ –º—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–≤–∞ –ø–∞–∫–µ—Ç–∞ –≤ –æ–¥–∏–Ω —É–¥–∞–ª–µ–Ω–Ω—ã–π —Ö–æ—Å—Ç, –Ω–æ –≤ —Ä–∞–∑–Ω—ã–µ –ø–æ—Ä—Ç—ã, —Å–æ–∑–¥–∞–µ—Ç—Å—è –¥–≤–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è.

#### –í–∞—Ä–∏–∞–Ω—Ç—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è NAT

–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è - —ç—Ç–æ –ø—Ä–∞–≤–∏–ª–∞, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∏–µ, –∫—Ç–æ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ. –°—É—â–µ—Å—Ç–≤—É–µ—Ç —Ç—Ä–∏ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–∞:

__–ê–≤—Ç–æ–Ω–æ–º–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è__

–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—Ç–æ —É–≥–æ–¥–Ω–æ. –ú—ã –º–æ–∂–µ–º –¥–µ–ª–∏—Ç—å—Å—è –∏–º —Å –¥—Ä—É–≥–∏–º–∏ –ø–∏—Ä–∞–º–∏, –∏ –æ–Ω–∏ —Å–º–æ–≥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –≤ –Ω–µ–≥–æ —Ç—Ä–∞—Ñ–∏–∫.

__–ó–∞–≤–∏—Å—è—â–∞—è –æ—Ç –∞–¥—Ä–µ—Å–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è__

–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å–æ–∑–¥–∞–≤—à–∏–π –µ–≥–æ —Ö–æ—Å—Ç. –ï—Å–ª–∏ –º—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø–∞–∫–µ—Ç –≤ —Ö–æ—Å—Ç `A`, –æ–Ω –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ –æ—Ç–≤–µ—Ç –ª—é–±–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞–∫–µ—Ç–æ–≤. –ï—Å–ª–∏ —Ö–æ—Å—Ç `B` –æ—Ç–ø—Ä–∞–≤–∏—Ç –ø–∞–∫–µ—Ç –≤ —ç—Ç–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –¥–∞–Ω–Ω—ã–π –ø–∞–∫–µ—Ç –±—É–¥–µ—Ç –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è (will be ignored).

__–ó–∞–≤–∏—Å—è—â–∞—è –æ—Ç –∞–¥—Ä–µ—Å–∞ –∏ –ø–æ—Ä—Ç–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è__

–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ —Å–æ–∑–¥–∞–≤—à–∏–º –µ–≥–æ —Ö–æ—Å—Ç–æ–º –∏ –ø–æ—Ä—Ç–æ–º. –ï—Å–ª–∏ –º—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø–∞–∫–µ—Ç –≤ —Ö–æ—Å—Ç `A:5000`, –æ–Ω –º–æ–∂–µ—Ç –æ—Ç–≤–µ—Ç–∏—Ç—å –ª—é–±—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –ø–∞–∫–µ—Ç–æ–≤. –ü–∞–∫–µ—Ç, –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —Ö–æ—Å—Ç–æ–º `A:5001`, –±—É–¥–µ—Ç –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è.

#### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è NAT

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —É–Ω–∏—á—Ç–æ–∂–∞—Ç—å (destroy) –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ç–µ—á–µ–Ω–∏–µ –ø—è—Ç–∏ –º–∏–Ω—É—Ç, –Ω–æ —ç—Ç–æ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–µ–π "–∂–µ–ª–µ–∑–∞".

### STUN

[–£—Ç–∏–ª–∏—Ç—ã –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Å–µ—Å—Å–∏–π –¥–ª—è NAT](https://ru.wikipedia.org/wiki/STUN) (Session Traversal Utilities for NAT, STUN) - —ç—Ç–æ –ø—Ä–æ—Ç–æ–∫–æ–ª, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å `NAT`. –û–Ω –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –≤ [RFC 8489](https://tools.ietf.org/html/rfc8489), –≤ –∫–æ—Ç–æ—Ä–æ–º —Ç–∞–∫–∂–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–∫–µ—Ç–æ–≤ `STUN`. –ü—Ä–æ—Ç–æ–∫–æ–ª `STUN` —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `ICE/TURN`.

`STUN` –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è `NAT`. –î–æ `STUN` –º—ã –º–æ–≥–ª–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è, –Ω–æ –Ω–µ –º–æ–≥–ª–∏ –ø–æ–ª—É—á–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö `IP` –∏ –ø–æ—Ä—Ç–∞—Ö. `STUN` –Ω–µ —Ç–æ–ª—å–∫–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è, –æ–Ω —Ç–∞–∫–∂–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, –∫–æ—Ç–æ—Ä–æ–π –º–æ–∂–Ω–æ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Å –¥—Ä—É–≥–∏–º–∏ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –æ–Ω–∏ –º–æ–≥–ª–∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ.

–ù–∞—á–Ω–µ–º —Å –±–∞–∑–æ–≤–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è `STUN`. –ü–æ–∑–∂–µ –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º, –∫–∞–∫ `STUN` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `ICE` –∏ `TURN`. –†–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–ø—Ä–æ—Å/–æ—Ç–≤–µ—Ç (request/response) –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è, –∞ —Ç–∞–∫–∂–µ –ø–æ–≥–æ–≤–æ—Ä–∏–º –æ —Ç–æ–º, –∫–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± `IP` –∏ –ø–æ—Ä—Ç–∞—Ö. –î–∞–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –∫–æ–≥–¥–∞ —É –Ω–∞—Å –µ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä `stun:` –≤ –ø—É—Ç—è—Ö (urls) `ICE` –¥–ª—è `WebRTC PeerConnection` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `new RTCPeerConnection({ iceServers: [{ urls: ['stun:stun.l.google.com:19302'] }] })`). `STUN` –ø–æ–º–æ–≥–∞–µ—Ç –∫–æ–Ω–µ—á–Ω–æ–π —Ç–æ—á–∫–µ, –Ω–∞—Ö–æ–¥—è—â–µ–π—Å—è –∑–∞ `NAT`, –ø–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª–∏ –æ —Å–æ–∑–¥–∞–Ω–Ω–æ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏, –ø—É—Ç–µ–º –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ –∫ —Å–µ—Ä–≤–µ—Ä—É `STUN` –æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–æ–º, —á—Ç–æ –æ–Ω –≤–∏–¥–∏—Ç –∏–∑–≤–Ω–µ (observes).

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞

–ö–∞–∂–¥—ã–π –ø–∞–∫–µ—Ç `STUN` –∏–º–µ–µ—Ç —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:

```
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|0 0|     STUN Message Type     |         Message Length        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                         Magic Cookie                          |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
|                     Transaction ID (96 bits)                  |
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                             Data                              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
```

__STUN Message Type__

–¢–∏–ø –ø–∞–∫–µ—Ç–∞. –í –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –Ω–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç —Å–ª–µ–¥—É—é—â–µ–µ:

- –∑–∞–ø—Ä–æ—Å –Ω–∞ –ø—Ä–∏–≤—è–∑–∫—É –∏–ª–∏ —Å–≤—è–∑—ã–≤–∞–Ω–∏–µ (Binding Request) - `0x0001`;
- –æ—Ç–≤–µ—Ç –Ω–∞ –ø—Ä–∏–≤—è–∑–∫—É (Binding Response) - `0x0101`.

–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è `NAT` –º—ã –≤—ã–ø–æ–ª–Ω—è–µ–º `Binding Request`. –°–µ—Ä–≤–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞–º `Binding Response`.

__Message Length__

–î–ª–∏–Ω–∞ —Ä–∞–∑–¥–µ–ª–∞ `Data` (—Ä–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö). –≠—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–∞–Ω–Ω—ã–µ, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –≤ `Message Type`.

__Magic Cookie__

–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ `0x2112A442` –≤ —Å–µ—Ç–µ–≤–æ–º –ø–æ—Ä—è–¥–∫–µ –±–∞–π—Ç–æ–≤ (network byte order). –≠—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –æ—Ç–ª–∏—á–∞—Ç—å `STUN` –æ—Ç –¥—Ä—É–≥–∏—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤.

__Transaction ID__

96-–±–∏—Ç–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä, —É–Ω–∏–∫–∞–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∏–π –∑–∞–ø—Ä–æ—Å/–æ—Ç–≤–µ—Ç. –≠—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –ø–∞—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤.

__Data__

–î–∞–Ω–Ω—ã–µ —Å–æ–¥–µ—Ä–∂–∞—Ç —Å–ø–∏—Å–æ–∫ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ `STUN`. –ê—Ç—Ä–∏–±—É—Ç `STUN` –∏–º–µ–µ—Ç —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:

```
0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|         Type                  |            Length             |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                         Value (variable)                ....
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
```

`STUN Binding Request` –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞—Ç—Ä–∏–±—É—Ç—ã. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≤ –∑–∞–ø—Ä–æ—Å–µ —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –∑–∞–≥–æ–ª–æ–≤–æ–∫ (header).

`STUN Binding Response` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `XOR-MAPPED-ADDRESS (0x0020)`. –î–∞–Ω–Ω—ã–π –∞—Ç—Ä–∏–±—É—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç `IP` –∏ –ø–æ—Ä—Ç –∏–∑ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è `NAT`.

#### –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è NAT

"–¶–µ–Ω–∞" —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è `NAT` —Å –ø–æ–º–æ—â—å—é `STUN` - –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å. –ú—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º `Binding Request` —Å–µ—Ä–≤–µ—Ä—É `STUN`. –û–Ω –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∞–º `Binding Response`. `Binding Response` —Å–æ–¥–µ—Ä–∂–∏—Ç `Mapped Address`. `Mapped Address` - —Ç–æ, –∫–∞–∫ —Å–µ—Ä–≤–µ—Ä `STUN` –≤–∏–¥–∏—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ `NAT`. `Mapped Address` - —Ç–æ, —á—Ç–æ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥—Ä—É–≥–æ–π —Å—Ç–æ—Ä–æ–Ω–æ–π –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –Ω–∞—à –∞–¥—Ä–µ—Å.

`Mapped Address` - —ç—Ç–æ –Ω–∞—à `Public IP` (–ø—É–±–ª–∏—á–Ω—ã–π –∞–¥—Ä–µ—Å) –∏–ª–∏ `Server Reflexive Candidate` –≤ —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏–∏ `WebRTC`.

#### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ NAT

–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, `Mapped Address` –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –Ω–µ –≤–æ –≤—Å–µ—Ö —Å–ª—É—á–∞—è—Ö. –ï—Å–ª–∏ `NAT` —è–≤–ª—è–µ—Ç—Å—è –∑–∞–≤–∏—Å—è—â–∏–º –æ—Ç –∞–¥—Ä–µ—Å–∞, –º—ã –º–æ–∂–µ–º –ø–æ–ª—É—á–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —Ç–æ–ª—å–∫–æ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ `STUN`. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –¥—Ä—É–≥–æ–π —Å—Ç–æ—Ä–æ–Ω–æ–π –≤ `Mapped Address`, –±—É–¥—É—Ç –ø–æ—Ç–µ—Ä—è–Ω—ã (will be dropped). –≠—Ç–æ –¥–µ–ª–∞–µ—Ç `Mapped Address` –±–µ—Å–ø–æ–ª–µ–∑–Ω—ã–º. –ò –ø—Ä–æ–±–ª–µ–º–∞ —ç—Ç–∞ —Ä–µ—à–∞–µ—Ç—Å—è —Ç–µ–º, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä `STUN` –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –ø–∞–∫–µ—Ç—ã –∫ –ø–∏—Ä—É. –¢–∞–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è `TURN`.

[RFC 5780](https://tools.ietf.org/html/rfc5780) –æ–ø–∏—Å—ã–≤–∞–µ—Ç –º–µ—Ç–æ–¥ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–∞ `NAT`. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞—Ä–∞–Ω–µ–µ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä—è–º–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è.

### TURN

[–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ NAT —Å –ø–æ–º–æ—â—å—é —Ä–µ—Ç—Ä–∞–Ω—Å–ª—è—Ç–æ—Ä–æ–≤](https://ru.wikipedia.org/wiki/Traversal_Using_Relay_NAT) (Traversal Using Relays around NAT, TURN), –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –≤ [RFC 8656](https://datatracker.ietf.org/doc/html/rfc8656), —ç—Ç–æ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä—è–º–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è. –¢–∞–∫–æ–µ –º–æ–∂–µ—Ç –ø—Ä–æ–∏–∑–æ–π—Ç–∏ –ø—Ä–∏ –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Ç–∏–ø–æ–≤ `NAT` –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ –∞–≥–µ–Ω—Ç–∞–º–∏. `TURN` —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏. –°–æ–∑–¥–∞–≤–∞—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—é —Å –ø–æ–º–æ—â—å—é `TURN`, –º—ã –æ–±—Ñ—É—Å—Ü–∏—Ä—É–µ–º (—Å–∫—Ä—ã–≤–∞–µ–º) –Ω–∞—Å—Ç–æ—è—â–∏–µ –∞–¥—Ä–µ—Å–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤.

`TURN` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä. –≠—Ç–æ—Ç —Å–µ—Ä–≤–µ—Ä —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ–∫—Å–∏ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞. –ö–ª–∏–µ–Ω—Ç –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É `TURN` –∏ —Å–æ–∑–¥–∞–µ—Ç `Allocation` (—Ä–∞–∑–º–µ—â–µ–Ω–∏–µ). –ï–º—É –≤—ã–¥–µ–ª—è–µ—Ç—Å—è –≤—Ä–µ–º–µ–Ω–Ω—ã–π `IP`/–ø–æ—Ä—Ç/–ø—Ä–æ—Ç–æ–∫–æ–ª, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö. –î–∞–Ω–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è `Relayed Transport Address`. –≠—Ç–æ —Å–≤–æ–µ–≥–æ —Ä–æ–¥–∞ –∞–¥—Ä–µ—Å –ø–µ—Ä–µ–∞–¥—Ä–µ—Å–∞—Ü–∏–∏ (forwarding address), –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥—Ä—É–≥–æ–π —Å—Ç–æ—Ä–æ–Ω–æ–π –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ —Ç—Ä–∞—Ñ–∏–∫–∞ —á–µ—Ä–µ–∑ `TURN`. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–∏—Ä–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–π `Relayed Transport Address`, —á—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è `Permission` (—Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è) –Ω–∞ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—é.

–ü—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ —Ç—Ä–∞—Ñ–∏–∫–∞ —á–µ—Ä–µ–∑ `TURN`, –æ–Ω –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `Relayed Transport Address`. –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Ç—Ä–∞—Ñ–∏–∫–∞ —É–¥–∞–ª–µ–Ω–Ω—ã–º –ø–∏—Ä–æ–º, –æ–Ω –≤–∏–¥–∏—Ç, —á—Ç–æ —Ç—Ä–∞—Ñ–∏–∫ –ø—Ä–∏—à–µ–ª –æ—Ç `TURN`.

#### –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª TURN

–ü–æ–≥–æ–≤–æ—Ä–∏–º –æ —Ç–æ–º, —á—Ç–æ –¥–æ–ª–∂–µ–Ω —Å–¥–µ–ª–∞—Ç—å –∫–ª–∏–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π —Ö–æ—á–µ—Ç —Å–æ–∑–¥–∞—Ç—å —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ –≤ `TURN`. –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è —Å —Ç–µ–º, –∫—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `TURN`, –Ω–µ —Ç—Ä–µ–±—É–µ—Ç —Å–æ–≤–µ—Ä—à–µ–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π. –î—Ä—É–≥–æ–π –ø–∏—Ä –ø—Ä–æ—Å—Ç–æ –ø–æ–ª—É—á–∞–µ—Ç `IP` –∏ –ø–æ—Ä—Ç, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö.

__–†–∞–∑–º–µ—â–µ–Ω–∏—è__

–†–∞–∑–º–µ—â–µ–Ω–∏—è - —è–¥—Ä–æ `TURN`. `Allocation` - "—Å–µ—Å—Å–∏—è `TURN`". –î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –≤ `TURN` –º—ã –æ–±—Ä–∞—â–∞–µ–º—Å—è –∫ `Server Transport Address` —Å–µ—Ä–≤–µ—Ä `TURN` (–ø–æ—Ä—Ç–æ–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —è–≤–ª—è–µ—Ç—Å—è `3478`).

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä—É –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å —Å–ª–µ–¥—É—é—â—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:

- –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è/–ø–∞—Ä–æ–ª—å - —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è —Ç—Ä–µ–±—É–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏;
- —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ–º - —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª –º–µ–∂–¥—É —Å–µ—Ä–≤–µ—Ä–æ–º (`Server Transport Address`) –∏ –ø–∏—Ä–∞–º–∏: `UDP` –∏–ª–∏ `TCP`;
- `Even-Port` - –º—ã –º–æ–∂–µ–º –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ—Ä—Ç–æ–≤ –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ä–∞–∑–º–µ—â–µ–Ω–∏–π, –Ω–µ –æ—Ç–Ω–æ—Å—è—â–∏—Ö—Å—è –∫ `WebRTC`.

–ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ –º—ã –ø–æ–ª—É—á–∞–µ–º –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ `TURN` –æ—Ç–≤–µ—Ç —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏ –≤ —Ä–∞–∑–¥–µ–ª–µ `Data`:

- `XOR-MAPPED-ADDRESS` - `Mapped Address` –∫–ª–∏–µ–Ω—Ç–∞ `TURN` (TURN Client). –ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –¥–∞–Ω–Ω—ã—Ö –≤ `Relayed Transport Address`, –æ–Ω–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ —ç—Ç–æ—Ç –∞–¥—Ä–µ—Å;
- `RELAYED-ADDRESS` - –∞–¥—Ä–µ—Å, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–π –¥—Ä—É–≥–∏–º –∫–ª–∏–µ–Ω—Ç–∞–º. –ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –ø–∞–∫–µ—Ç–∞ –ø–æ —ç—Ç–æ–º—É –∞–¥—Ä–µ—Å—É, –æ–Ω –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –∫–ª–∏–µ–Ω—Ç—É `TURN`;
- `LIFETIME` - —Å–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –æ—Å—Ç–∞–ª–æ—Å—å –¥–æ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è `TURN`. –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å —É–≤–µ–ª–∏—á–µ–Ω–æ —á–µ—Ä–µ–∑ –æ—Ç–ø—Ä–∞–≤–∫—É –∑–∞–ø—Ä–æ—Å–∞ `Refresh`.

__–†–∞–∑—Ä–µ—à–µ–Ω–∏—è__

–£–¥–∞–ª–µ–Ω–Ω—ã–π —Ö–æ—Å—Ç –Ω–µ –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –Ω–∞—à `Relayed Transport Address` –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –º—ã –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏–º –µ–º—É —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ. –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –º—ã –≥–æ–≤–æ—Ä–∏–º —Å–µ—Ä–≤–µ—Ä—É `TURN`, —á—Ç–æ —É–∫–∞–∑–∞–Ω–Ω—ã–º `IP` –∏ –ø–æ—Ä—Ç—É —Ä–∞–∑—Ä–µ—à–µ–Ω –≤—Ö–æ–¥—è—â–∏–π —Ç—Ä–∞—Ñ–∏–∫.

–£–¥–∞–ª–µ–Ω–Ω—ã–π —Ö–æ—Å—Ç –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –Ω–∞–º `IP` –∏ –ø–æ—Ä—Ç –≤ —Ç–æ–º –≤–∏–¥–µ, –≤ –∫–∞–∫–æ–º –æ–Ω–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ `TURN`. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –æ–Ω –¥–æ–ª–∂–µ–Ω –æ—Ç–ø—Ä–∞–≤–∏—Ç—å `STUN Binding Request`. –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω–æ–π –æ—à–∏–±–∫–æ–π —è–≤–ª—è–µ—Ç—Å—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ç–∞–∫–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –Ω–µ —Ç–æ–º—É —Å–µ—Ä–≤–µ—Ä—É `TURN`. –ü–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ —É–¥–∞–ª–µ–Ω–Ω—ã–π —Ö–æ—Å—Ç –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ –Ω–∞–º —Å –ø—Ä–æ—Å—å–±–æ–π –æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è.

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ –º—ã —Ö–æ—Ç–∏–º —Å–æ–∑–¥–∞—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –¥–ª—è —Ö–æ—Å—Ç–∞, –Ω–∞—Ö–æ–¥—è—â–µ–≥–æ—Å—è –∑–∞ `Address Dependent Mapping`. –ï—Å–ª–∏ –º—ã –ø–æ–ª—É—á–∏–º `Mapped Address` –æ—Ç –¥—Ä—É–≥–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ `TURN`, –≤–µ—Å—å –≤—Ö–æ–¥—è—â–∏–π —Ç—Ä–∞—Ñ–∏–∫ –±—É–¥–µ—Ç –ø–æ—Ç–µ—Ä—è–Ω. –ü—Ä–∏ –∫–∞–∂–¥–æ–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏ —Å –¥—Ä—É–≥–∏–º —Ö–æ—Å—Ç–æ–º —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ. –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç 5 –º–∏–Ω—É—Ç.

__SendIndication/ChannelData__

–≠—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω—ã –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞ `TURN` –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π —É–¥–∞–ª–µ–Ω–Ω–æ–º—É –ø–∏—Ä—É.

`SendIndication` - —Å–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ. –í–Ω—É—Ç—Ä–∏ –Ω–µ–≥–æ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏, –∞ —Ç–∞–∫–∂–µ –∞–¥—Ä–µ—Å–∞—Ç. –û—Ç–ø—Ä–∞–≤–∫–∞ –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–æ–æ–±—â–µ–Ω–∏–π —É–¥–∞–ª–µ–Ω–Ω–æ–º—É –ø–∏—Ä—É —è–≤–ª—è–µ—Ç—Å—è —Ä–∞—Å—Ç–æ—á–∏—Ç–µ–ª—å–Ω–æ–π. –ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ 1000 —Å–æ–æ–±—â–µ–Ω–∏–π `IP` –∞–¥—Ä–µ—Å —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ –ø–∏—Ä–∞ –±—É–¥–µ—Ç –ø–æ–≤—Ç–æ—Ä–µ–Ω 1000 —Ä–∞–∑!

`ChannelData` –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ –±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è `IP-–∞–¥—Ä–µ—Å–∞`. –ú—ã —Å–æ–∑–¥–∞–µ–º –∫–∞–Ω–∞–ª (channel) —Å `IP` –∏ –ø–æ—Ä—Ç–æ–º. –ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –Ω–µ–º —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è `ChannelId`, –∞ `IP` –∏ –ø–æ—Ä—Ç –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è —Å–µ—Ä–≤–µ—Ä–æ–º. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–º–µ–Ω—å—à–∏—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–æ–æ–±—â–µ–Ω–∏–π.

__–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ__

–†–∞–∑–º–µ—â–µ–Ω–∏—è —É–Ω–∏—á—Ç–æ–∂–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –î–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –µ–≥–æ `LIFETIME` (–≤—Ä–µ–º—è –∂–∏–∑–Ω–∏) –¥–æ–ª–∂–Ω–æ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è.

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ TURN

`TURN` –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ –¥–≤—É—Ö —Ñ–æ—Ä–º–∞—Ö. –ö–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, —É –Ω–∞—Å –∏–º–µ–µ—Ç—Å—è –æ–¥–∏–Ω –ø–∏—Ä, –≤—ã—Å—Ç—É–ø–∞—é—â–∏–π –≤ —Ä–æ–ª–∏ "–∫–ª–∏–µ–Ω—Ç–∞ `TURN`", –∏ –¥—Ä—É–≥–æ–π —Å—Ç–æ—Ä–æ–Ω–∞, –æ–±—Ä–∞—â–∞—é—â–∞—è—Å—è –∫ "–∫–ª–∏–µ–Ω—Ç—É" –Ω–∞–ø—Ä—è–º—É—é. –í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–ª—É—á–∞—è—Ö –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `TURN` –Ω–∞ –æ–±–µ–∏—Ö —Å—Ç–æ—Ä–æ–Ω–∞—Ö, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ –ø—Ä–∏—á–∏–Ω–µ —Ç–æ–≥–æ, —á—Ç–æ –æ–±–µ —Å—Ç–æ—Ä–æ–Ω—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Å–µ—Ç—è—Ö, –±–ª–æ–∫–∏—Ä—É—é—â–∏—Ö `UDP`, –ø–æ—ç—Ç–æ–º—É —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ —Å–µ—Ä–≤–µ—Ä–∞–º–∏ `TURN` –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `TCP`.

__–û–¥–Ω–∞ –∞–ª–ª–æ–∫–∞—Ü–∏—è TURN –¥–ª—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏__

<img src="https://habrastorage.org/webt/8n/na/ah/8nnaahtbdukwvf40milw0dgfbim.png" />
<br />

__–î–≤–µ –∞–ª–ª–æ–∫–∞—Ü–∏–∏ TURN –¥–ª—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏__

<img src="https://habrastorage.org/webt/13/yy/qp/13yyqpl0xsojihqa1rycg1qg1k4.png" />
<br />

### ICE

`ICE` - —Ç–æ, –∫–∞–∫ `WebRTC` –ø–æ–¥–∫–ª—é—á–∞–µ—Ç –¥–≤—É—Ö –∞–≥–µ–Ω—Ç–æ–≤. –≠—Ç–æ—Ç –ø—Ä–æ—Ç–æ–∫–æ–ª –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –≤ [RFC 8445](https://datatracker.ietf.org/doc/html/rfc8445). `ICE` - –ø—Ä–æ—Ç–æ–∫–æ–ª –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è. –û–Ω –æ–ø–∏—Å—ã–≤–∞–µ—Ç –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã (routes) –º–µ–∂–¥—É –¥–≤—É–º—è –ø–∏—Ä–∞–º–∏ –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.

–≠—Ç–∏ —Ä–æ—É—Ç—ã –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è `Candidate Pairs` (–ø–∞—Ä–∞–º–∏ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤) –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Å–æ–±–æ–π –ø–∞—Ä—É –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∏ —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã—Ö –∞–¥—Ä–µ—Å–æ–≤. –í–æ—Ç –≥–¥–µ –≤ –∏–≥—Ä—É –≤—Å—Ç—É–ø–∞—é—Ç `STUN` –∏ `TURN`. –≠—Ç–∏ –∞–¥—Ä–µ—Å–∞ –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–∞—à–∏–º–∏ –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ `IP` –∏ –ø–æ—Ä—Ç–æ–º, –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º `NAT` –∏–ª–∏ `Relayed Transport Address`. –ö–∞–∂–¥–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ —Å–æ–±–∏—Ä–∞–µ—Ç –∞–¥—Ä–µ—Å–∞, –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω–∞ —Ö–æ—á–µ—Ç (–∏ –º–æ–∂–µ—Ç) –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –ø–µ—Ä–µ–¥–∞–µ—Ç –∏—Ö –¥—Ä—É–≥–æ–π —Å—Ç–æ—Ä–æ–Ω–µ –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ–ø—ã—Ç–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.

–î–≤–∞ –∞–≥–µ–Ω—Ç–∞ `ICE` –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç —Å –ø–æ–º–æ—â—å—é –ø–∏–Ω–≥-–ø–∞–∫–µ—Ç–æ–≤ (ping packets) `ICE` (–∫–æ—Ç–æ—Ä—ã–µ —Ñ–æ—Ä–º–∞–ª—å–Ω–æ –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è - connectivity checks) –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è. –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å—Ç–æ—Ä–æ–Ω—ã –º–æ–≥—É—Ç –æ–±–º–µ–Ω–∏–≤–∞—Ç—å—Å—è –¥–∞–Ω–Ω—ã–º–∏. –≠—Ç–æ –ø–æ—Ö–æ–∂–µ –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–±—ã—á–Ω—ã—Ö [–≤–µ–±-—Å–æ–∫–µ—Ç–æ–≤](https://ru.wikipedia.org/wiki/WebSocket). –í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ `STUN`.

#### –°–æ–∑–¥–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞ ICE

–ê–≥–µ–Ω—Ç `ICE` –º–æ–∂–µ—Ç –±—ã—Ç—å `Controlling` (—É–ø—Ä–∞–≤–ª—è—é—â–∏–º) –∏–ª–∏ `Controlled` (—É–ø—Ä–∞–≤–ª—è–µ–º—ã–º). –£–ø—Ä–∞–≤–ª—è—é—â–∏–π –∞–≥–µ–Ω—Ç - —ç—Ç–æ —Ç–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–±–∏—Ä–∞–µ—Ç `Candidate Pair`. –ö–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, –ø–∏—Ä, –æ—Ç–ø—Ä–∞–≤–ª—è—é—â–∏–π –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –æ–± —É—Å—Ç–∞–Ω–æ–≤–∫–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (offer), —è–≤–ª—è–µ—Ç—Å—è —É–ø—Ä–∞–≤–ª—è—é—â–µ–π —Å—Ç–æ—Ä–æ–Ω–æ–π.

–ö–∞–∂–¥–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –∏–º–µ—Ç—å `user fragment` –∏ `password`. –°—Ç–æ—Ä–æ–Ω—ã –¥–æ–ª–∂–Ω—ã –æ–±–º–µ–Ω—è—Ç—å—Å—è —ç—Ç–∏–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –¥–æ –Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è. `user fragment` –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ –≤–∏–¥–µ –æ–±—ã—á–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –∏ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –¥–µ–º—É–ª—å—Ç–∏–ø–ª–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è (demuxing) –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–µ–∞–Ω—Å–æ–≤ `ICE`. `password` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∞—Ç—Ä–∏–±—É—Ç–∞ `MESSAGE-INTEGRITY`. –í –∫–æ–Ω—Ü–µ –∫–∞–∂–¥–æ–≥–æ –ø–∞–∫–µ—Ç–∞ `STUN` –∏–º–µ–µ—Ç—Å—è –∞—Ç—Ä–∏–±—É—Ç —Å [—Ö–µ—à–µ–º](https://ru.wikipedia.org/wiki/%D0%A5%D0%B5%D1%88-%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F) —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –ø–∞–∫–µ—Ç–∞ - `password` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∫–ª—é—á–∞. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –ø–∞–∫–µ—Ç, —Ç.–µ. —É–±–µ–¥–∏—Ç—å—Å—è –≤ —Ç–æ–º, —á—Ç–æ –æ–Ω –Ω–µ –±—ã–ª –ø–æ–¥–º–µ–Ω–µ–Ω –∏–ª–∏ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –ø–µ—Ä–µ–¥–∞—á–∏.

–í —Å–ª—É—á–∞–µ —Å `WebRTC` —ç—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `Session Description` (–æ–ø–∏—Å–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏), –æ –∫–æ—Ç–æ—Ä–æ–º —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–ª–æ—Å—å –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–º —Ä–∞–∑–¥–µ–ª–µ.

#### –°–±–æ—Ä –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ (Candidate Gathering)

–¢–µ–ø–µ—Ä—å –Ω–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–±—Ä–∞—Ç—å –≤—Å–µ –∞–¥—Ä–µ—Å–∞, –ø–æ –∫–æ—Ç–æ—Ä—ã–º –¥–æ—Å—Ç–∏–∂–∏–º—ã –∞–≥–µ–Ω—Ç—ã. –≠—Ç–∏ –∞–¥—Ä–µ—Å–∞ –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è –∫–∞–Ω–¥–∏–¥–∞—Ç–∞–º–∏.

__–•–æ—Å—Ç__

–ö–∞–Ω–¥–∏–¥–∞—Ç —Ö–æ—Å—Ç–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º. –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å `UDP` –∏–ª–∏ `TCP`.

__mDNS__

–ö–∞–Ω–¥–∏–¥–∞—Ç `mDNS` –ø–æ—Ö–æ–∂ –Ω–∞ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ —Ö–æ—Å—Ç–∞, –Ω–æ –µ–≥–æ `IP-–∞–¥—Ä–µ—Å` —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è. –í–º–µ—Å—Ç–æ `IP-–∞–¥—Ä–µ—Å–∞` –¥—Ä—É–≥–æ–π —Å—Ç–æ—Ä–æ–Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è [`UUID`](https://ru.wikipedia.org/wiki/UUID) –≤ –∫–∞—á–µ—Å—Ç–≤–µ –Ω–∞–∑–≤–∞–Ω–∏—è —Ö–æ—Å—Ç–∞. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –º—ã –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –º–Ω–æ–≥–æ–∞–¥—Ä–µ—Å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ (multicast listener), –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã –∫ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω–æ–º—É `UUID`.

–ï—Å–ª–∏ –º—ã –Ω–∞—Ö–æ–¥–∏–º—Å—è –≤ –æ–¥–Ω–æ–π —Å–µ—Ç–∏ —Å –∞–≥–µ–Ω—Ç–æ–º, –º—ã –º–æ–∂–µ–º –Ω–∞–π—Ç–∏ –¥—Ä—É–≥ –¥—Ä—É–≥–∞ —á–µ—Ä–µ–∑ [–º—É–ª—å—Ç–∏–∫–∞—Å—Ç](https://ru.wikipedia.org/wiki/%D0%9C%D1%83%D0%BB%D1%8C%D1%82%D0%B8%D0%B2%D0%B5%D1%89%D0%B0%D0%BD%D0%B8%D0%B5) (multicast). –ï—Å–ª–∏ –º—ã –∏ –∞–≥–µ–Ω—Ç –Ω–∞—Ö–æ–¥–∏–º—Å—è –≤ —Ä–∞–∑–Ω—ã—Ö —Å–µ—Ç—è—Ö, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–µ –ø–æ–ª—É—á–∏—Ç—Å—è. –ö–∞–∫ –º–∏–Ω–∏–º—É–º, –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Å–µ—Ç–∏ —è–≤–Ω–æ –Ω–µ —Ä–∞–∑—Ä–µ—à–∏—Ç —Ç–∞–∫—É—é –ø–µ—Ä–µ–¥–∞—á—É –ø–∞–∫–µ—Ç–æ–≤.

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±–µ—Å–ø–µ—á–∏—Ç—å –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å. –í —Å–ª—É—á–∞–µ —Å –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–º —Ö–æ—Å—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –Ω–∞—à `IP` –∞–¥—Ä–µ—Å —á–µ—Ä–µ–∑ `WebRTC` (–¥–∞–∂–µ –Ω–µ –ø—ã—Ç–∞—è—Å—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ), –Ω–æ –≤ —Å–ª—É—á–∞–µ —Å –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–º `mDNS` –æ–Ω –ø–æ–ª—É—á–∏—Ç —Ç–æ–ª—å–∫–æ —Å–ª—É—á–∞–π–Ω—ã–π `UUID`.

__Server Reflexive__

–ö–∞–Ω–¥–∏–¥–∞—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ (Server Reflexive Candidate) –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Å–µ—Ä–≤–µ—Ä–æ–º `STUN` –≤ –æ—Ç–≤–µ—Ç –Ω–∞ `STUN Binding Request`.

–ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ `STUN Binding Response` —Å–æ–¥–µ—Ä–∂–∞—â–∏–π—Å—è –≤ –Ω–µ–º `XOR-MAPPED-ADDRESS` - —ç—Ç–æ –Ω–∞—à –∫–∞–Ω–¥–∏–¥–∞—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞.

__Peer Reflexive__

–ö–∞–Ω–¥–∏–¥–∞—Ç –æ—Ç –ø–∏—Ä–∞ (Peer Reflexive Candidate) - —ç—Ç–æ –∫–æ–≥–¥–∞ –º—ã –ø–æ–ª—É—á–∞–µ–º –≤—Ö–æ–¥—è—â–∏–π –∑–∞–ø—Ä–æ—Å –æ—Ç –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ –∞–¥—Ä–µ—Å–∞ . –ü–æ—Å–∫–æ–ª—å–∫—É `ICE` - —ç—Ç–æ –ø—Ä–æ—Ç–æ–∫–æ–ª —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π, –º—ã –∑–Ω–∞–µ–º, —á—Ç–æ —Ç—Ä–∞—Ñ–∏–∫ —è–≤–ª—è–µ—Ç—Å—è –≤–∞–ª–∏–¥–Ω—ã–º. –≠—Ç–æ –≤—Å–µ–≥–æ –ª–∏—à—å –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —É–¥–∞–ª–µ–Ω–Ω—ã–π –ø–∏—Ä –æ–±—â–∞–µ—Ç—Å—è —Å –Ω–∞–º–∏ —Å –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ –∞–¥—Ä–µ—Å–∞.

–≠—Ç–æ –æ–±—ã—á–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –æ–±—â–µ–Ω–∏–∏ `Host Candidate` —Å `Server Reflexive Candidate`. –ü–æ—Å–∫–æ–ª—å–∫—É –º—ã –æ–±—â–∞–µ–º—Å—è –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ –Ω–∞—à–µ–π –ø–æ–¥—Å–µ—Ç–∏, —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ `NAT`. –ü–æ–º–Ω–∏—Ç–µ, –º—ã –≥–æ–≤–æ—Ä–∏–ª–∏ –æ —Ç–æ–º, —á—Ç–æ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è - —ç—Ç–æ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –ø–∞–∫–µ—Ç—ã `STUN`? –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ `STUN` –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–∏—Ä—É –≤–µ—Ä–Ω—É—Ç—å –∞–¥—Ä–µ—Å –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ –æ—Ç –ø–∏—Ä–∞ (peer-reflexive address).

__Relay__

–†–µ–ª–µ–π–Ω—ã–π –∫–∞–Ω–¥–∏–¥–∞—Ç –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Å–µ—Ä–≤–µ—Ä–æ–º `TURN`.

–ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–≥–æ —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è (handshake) –º—ã –ø–æ–ª—É—á–∞–µ–º `RELAYED-ADDRESS` - –Ω–∞—à —Ä–µ–ª–µ–π–Ω—ã–π –∫–∞–Ω–¥–∏–¥–∞—Ç.

#### –ü—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

–¢–µ–ø–µ—Ä—å –º—ã –∑–Ω–∞–µ–º `user fragment`, `password` –∏ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞. –í—ã–ø–æ–ª–Ω—è–µ–º –ø–æ–ø—ã—Ç–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è! –ö–∞–Ω–¥–∏–¥–∞—Ç—ã —Ä–∞–∑–±–∏–≤–∞—é—Ç—Å—è –ø–æ–ø–∞—Ä–Ω–æ. –ü–æ—ç—Ç–æ–º—É –µ—Å–ª–∏ —É –Ω–∞—Å –±—ã–ª–æ —Ç—Ä–∏ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ –æ—Ç –∫–∞–∂–¥–æ–π —Å—Ç–æ—Ä–æ–Ω—ã, –º—ã –ø–æ–ª—É—á–∞–µ–º –¥–µ–≤—è—Ç—å –ø–∞—Ä –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤.

–í–æ—Ç –∫–∞–∫ —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç:

<img src="https://habrastorage.org/webt/ev/fd/i-/evfdi-n53jzyix7u_ut-hb-srxo.png" />
<br />

#### –í—ã–±–æ—Ä –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤

–£–ø—Ä–∞–≤–ª—è—é—â–∏–π –∏ —É–ø—Ä–∞–≤–ª—è–µ–º—ã–π –∞–≥–µ–Ω—Ç—ã –Ω–∞—á–∏–Ω–∞—é—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Ç—Ä–∞—Ñ–∏–∫ —á–µ—Ä–µ–∑ –∫–∞–∂–¥—É—é –ø–∞—Ä—É. –≠—Ç–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –æ–¥–∏–Ω –∞–≥–µ–Ω—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∑–∞ `Address Dependent Mapping`, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —Å–æ–∑–¥–∞–Ω–∏—é `Peer Reflexive Candidate`.

–ö–∞–∂–¥–∞—è `Candidate Pair` (–ø–∞—Ä–∞ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤), –∫–æ—Ç–æ—Ä–∞—è "–≤–∏–¥–∏—Ç" —Ç—Ä–∞—Ñ–∏–∫, —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø–∞—Ä–æ–π `Valid Candidate` (–≤–∞–ª–∏–¥–Ω—ã—Ö –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤). –£–ø—Ä–∞–≤–ª—è—é—â–∏–π –∞–≥–µ–Ω—Ç –±–µ—Ä–µ—Ç –æ–¥–Ω–æ–≥–æ `Valid Candidate` –∏ –≤—ã–¥–≤–∏–≥–∞–µ—Ç (nominate) –µ–≥–æ. –í—ã–¥–≤–∏–Ω—É—Ç—ã–µ —Å—Ç–æ—Ä–æ–Ω–∞–º–∏ –∫–∞–Ω–¥–∏–¥–∞—Ç—ã —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è `Nominated Pair` (–Ω–æ–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –ø–∞—Ä–æ–π). –ê–≥–µ–Ω—Ç—ã —Å–Ω–æ–≤–∞ –ø—ã—Ç–∞—é—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—É—é –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—é. –ü—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ —É—Å–ø–µ—Ö–∞, `Nominated Pair` —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è `Selected Candidate Pair` (–≤—ã–±—Ä–∞–Ω–Ω–æ–π –∏–ª–∏ –∏–∑–±—Ä–∞–Ω–Ω–æ–π –ø–∞—Ä–æ–π –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤). –≠—Ç–∞ –ø–∞—Ä–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞ –ø—Ä–æ—Ç—è–∂–µ–Ω–∏–∏ –æ—Å—Ç–∞–≤—à–µ–π—Å—è —á–∞—Å—Ç–∏ —Å–µ—Å—Å–∏–∏.

#### –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞

–ï—Å–ª–∏ `Selected Candidate Pair` –ø—Ä–µ–∫—Ä–∞—â–∞–µ—Ç —Ä–∞–±–æ—Ç—É –ø–æ –∫–∞–∫–æ–π-–ª–∏–±–æ –ø—Ä–∏—á–∏–Ω–µ (–∏—Å—Ç–µ–∫ —Å—Ä–æ–∫ –∂–∏–∑–Ω–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è `NAT`, —É–ø–∞–ª —Å–µ—Ä–≤–µ—Ä `TURN`) –∞–≥–µ–Ω—Ç `ICE` –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ `Failed`. –û–±–∞ –∞–≥–µ–Ω—Ç–∞ –º–æ–≥—É—Ç –±—ã—Ç—å –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω—ã, –∏ –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞—á–Ω–µ—Ç—Å—è —Å–Ω–∞—á–∞–ª–∞.

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–ö–∞–∂–¥–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ `WebRTC` –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç—Å—è –∏ —à–∏—Ñ—Ä—É–µ—Ç—Å—è. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –±—ã—Ç—å —É–≤–µ—Ä–µ–Ω–Ω—ã–º –≤ —Ç–æ–º, —á—Ç–æ —Ç—Ä–µ—Ç—å—è —Å—Ç–æ—Ä–æ–Ω–∞ –Ω–µ –≤–∏–¥–∏—Ç —Ç–æ–≥–æ, —á—Ç–æ –º—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º, –∏ –Ω–µ –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å (–≤—Å—Ç–∞–≤–ª—è—Ç—å) —Ñ–∏–∫—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è. –¢–∞–∫–∂–µ –º–æ–∂–Ω–æ –±—ã—Ç—å —É–≤–µ—Ä–µ–Ω–Ω—ã–º, —á—Ç–æ –∞–≥–µ–Ω—Ç, –≥–µ–Ω–µ—Ä–∏—Ä—É—é—â–∏–π –æ–ø–∏—Å–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏ - —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ç–æ—Ç, —Å –∫–µ–º –º—ã —Ö–æ—Ç–∏–º –æ–±—â–∞—Ç—å—Å—è.

–û—á–µ–Ω—å –≤–∞–∂–Ω–æ, —á—Ç–æ–±—ã –Ω–∏–∫—Ç–æ –Ω–µ –º–æ–≥ –ø–æ–¥–º–µ–Ω—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è. –ù–µ —Å—Ç—Ä–∞—à–Ω–æ, –µ—Å–ª–∏ —Ç—Ä–µ—Ç—å—è —Å—Ç–æ—Ä–æ–Ω–∞ –ø—Ä–æ—á–∏—Ç–∞–µ—Ç –æ–ø–∏—Å–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏ –≤–æ –≤—Ä–µ–º—è –ø–µ—Ä–µ–¥–∞—á–∏. –û–¥–Ω–∞–∫–æ, `WebRTC` –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∑–∞—â–∏—Ç—ã –æ—Ç –µ–µ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏. –ó–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫ –º–æ–∂–µ—Ç –æ—Å—É—â–µ—Å—Ç–≤–∏—Ç—å –∞—Ç–∞–∫—É ["—á–µ–ª–æ–≤–µ–∫ –ø–æ—Å–µ—Ä–µ–¥–∏–Ω–µ"](https://ru.wikipedia.org/wiki/%D0%90%D1%82%D0%B0%D0%BA%D0%B0_%D0%BF%D0%BE%D1%81%D1%80%D0%B5%D0%B4%D0%BD%D0%B8%D0%BA%D0%B0) (–∞—Ç–∞–∫–∞ –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–∞) –ø—É—Ç–µ–º –ø–æ–¥–º–µ–Ω—ã –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ `ICE` –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç–ø–µ—á–∞—Ç–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞.

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

–î–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è `WebRTC` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 2 —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–∞: `DTLS` –∏ `SRTP`.

`DTLS` –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –ø–æ–¥–≥–æ—Ç–æ–≤–∫—É —Å–µ—Å—Å–∏–∏ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ –æ–±–º–µ–Ω–∏–≤–∞—Ç—å—Å—è –¥–∞–Ω–Ω—ã–º–∏ –º–µ–∂–¥—É –ø–∏—Ä–∞–º–∏. –û–Ω –ø–æ—Ö–æ–∂ –Ω–∞ `TLS`, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `HTTPS`, –Ω–æ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è `DTLS` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `UDP` –≤–º–µ—Å—Ç–æ `TCP`. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ `DTLS` –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –Ω–∞–¥–µ–∂–Ω—É—é –¥–æ—Å—Ç–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π. `SRTP` –±—ã–ª —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –æ–±–º–µ–Ω–∞ –º–µ–¥–∏–∞–¥–∞–Ω–Ω—ã–º–∏. –û–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å `DTLS`.

–°–Ω–∞—á–∞–ª–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `DTLS`. –û–Ω –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏–µ —á–µ—Ä–µ–∑ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ `ICE`. `DTLS` - —ç—Ç–æ –∫–ª–∏–µ–Ω—Ç-—Å–µ—Ä–≤–µ—Ä–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª, –ø–æ—ç—Ç–æ–º—É –æ–¥–Ω–∞ –∏–∑ —Å—Ç–æ—Ä–æ–Ω –¥–æ–ª–∂–Ω–∞ –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞—Ç—å —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏–µ. –†–æ–ª–∏ "–∫–ª–∏–µ–Ω—Ç/—Å–µ—Ä–≤–µ—Ä" –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Å–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏–∏. –í —Ö–æ–¥–µ —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è `DTLS` –∫–∞–∂–¥–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è –∫–∞–∂–¥—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç—Å—è —Å –µ–≥–æ —Ö–µ—à–µ–º, —Å–æ–¥–µ—Ä–∂–∞—â–∏–º—Å—è –≤ –æ–ø–∏—Å–∞–Ω–∏–∏ —Å–µ—Å—Å–∏–∏. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–±–µ–¥–∏—Ç—å—Å—è –≤ —Ç–æ–º, —á—Ç–æ —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏–µ –ø—Ä–æ–∏–∑–æ—à–ª–æ —Å –æ–∂–∏–¥–∞–µ–º—ã–º –∞–≥–µ–Ω—Ç–æ–º. –ó–∞—Ç–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ `DTLS` –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ —Å –ø–æ–º–æ—â—å—é `DataChannel`.

–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Å—Å–∏–∏ `SRTP` –º—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –µ–µ —Å –ø–æ–º–æ—â—å—é –∫–ª—é—á–µ–π, —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö `DTLS`. `SRTP` –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º–∞ —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è, –ø–æ—ç—Ç–æ–º—É –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é –≤–Ω–µ—à–Ω–∏—Ö –∫–ª—é—á–µ–π. –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ `SRTP-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è` —Å—Ç–æ—Ä–æ–Ω—ã –º–æ–≥—É—Ç –æ–±–º–µ–Ω–∏–≤–∞—Ç—å—Å—è –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –º–µ–¥–∏–∞–¥–∞–Ω–Ω—ã–º–∏.

### Security 101

–î–∞–≤–∞–π—Ç–µ –ø–æ–∑–Ω–∞–∫–æ–º–∏–º—Å—è —Å —Ç–µ—Ä–º–∏–Ω–∞–º–∏, —É–ø–æ—Ç—Ä–µ–±–ª—è–µ–º—ã–º–∏ –≤ –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏–∏.

__–û–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç –∏ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç__

–û–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç (plaintext) - —ç—Ç–æ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è. –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç (ciphertext) - —ç—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è.

__–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ__

[–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ](https://ru.wikipedia.org/wiki/%D0%A8%D0%B8%D1%84%D1%80) (—à–∏—Ñ—Ä, cipher) - —ç—Ç–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π –ø–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—é –æ–±—ã—á–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –≤ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π. –®–∏—Ñ—Ä –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–π —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞. –ö–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, —à–∏—Ñ—Ä –∏–º–µ–µ—Ç –∫–ª—é—á, –º–µ–Ω—è—é—â–∏–π –µ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ. –î–∞–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å —Ç–∞–∫–∂–µ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è encrypting (—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ) –∏ decrypting (—Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞).

–ü—Ä–∏–º–µ—Ä–æ–º –ø—Ä–æ—Å—Ç–æ–≥–æ —à–∏—Ñ—Ä–∞ —è–≤–ª—è–µ—Ç—Å—è [ROT13](https://ru.wikipedia.org/wiki/ROT13). –ö–∞–∂–¥–∞—è –±—É–∫–≤–∞ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ —Å–¥–≤–∏–≥–∞–µ—Ç—Å—è –Ω–∞ `13` —Å–∏–º–≤–æ–ª–æ–≤ –≤–ø–µ—Ä–µ–¥. –î–ª—è —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏ –∫–∞–∂–¥–∞—è –±—É–∫–≤–∞ —Å–¥–≤–∏–≥–∞–µ—Ç—Å—è –Ω–∞ `13` —Å–∏–º–≤–æ–ª–æ–≤ –Ω–∞–∑–∞–¥. –û–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç `HELLO` —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º `URYYB`. –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ —à–∏—Ñ—Ä - —ç—Ç–æ `ROT`, –∞ –∫–ª—é—á - `13`.

__–•–µ—à-—Ñ—É–Ω–∫—Ü–∏–∏__

[–•–µ—à-—Ñ—É–Ω–∫—Ü–∏—è](https://ru.wikipedia.org/wiki/%D0%A5%D0%B5%D1%88-%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F) (hash function) - —ç—Ç–æ –Ω–µ–æ–±—Ä–∞—Ç–∏–º—ã–π (–æ–¥–Ω–æ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π) –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ —Ö–µ—à (digest - —Ñ–∞—Ä—à, –º–µ—à–∞–Ω–∏–Ω–∞). –î–ª—è –æ–¥–Ω–∏—Ö –∏ —Ç–µ—Ö –∂–µ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤—Å–µ–≥–¥–∞ –ø–æ–ª—É—á–∞–µ—Ç—Å—è –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –í–∞–∂–Ω–æ, —á—Ç–æ–±—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—ã–ª –Ω–µ–æ–±—Ä–∞—Ç–∏–º—ã–º. –†–µ–∑—É–ª—å—Ç–∞—Ç –Ω–µ –¥–æ–ª–∂–µ–Ω –ø–æ–∑–≤–æ–ª—è—Ç—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ. –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–±–µ–¥–∏—Ç—å—Å—è –≤ —Ç–æ–º, —á—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ –±—ã–ª–æ –ø–æ–¥–º–µ–Ω–µ–Ω–æ.

–ü—Ä–æ—Å—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –±—É–¥–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è, –ø—Ä–æ–ø—É—Å–∫–∞—é—â–∞—è –∫–∞–∂–¥—É—é –≤—Ç–æ—Ä—É—é –±—É–∫–≤—É. `HELLO` —Å—Ç–∞–Ω–µ—Ç `HLO`. –ú—ã –Ω–µ –º–æ–∂–µ–º "–≤–µ—Ä–Ω—É—Ç—å—Å—è" –∫ `HELLO`, –Ω–æ –º—ã –º–æ–∂–µ–º —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `HELLO` —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Ö–µ—à–µ–º.

__–ü—É–±–ª–∏—á–Ω—ã–µ –∏ –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –∫–ª—é—á–∏__

–ö—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—É–±–ª–∏—á–Ω–æ–≥–æ/–ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–µ–π (public/private key) –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Ç–∏–ø —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è, –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ `DTLS` –∏ `SRTP`. –í —Ç–∞–∫–æ–π —Å–∏—Å—Ç–µ–º–µ —É –Ω–∞—Å –∏–º–µ–µ—Ç—Å—è –¥–≤–∞ –∫–ª—é—á–∞: –ø—É–±–ª–∏—á–Ω—ã–π (–æ—Ç–∫—Ä—ã—Ç—ã–π) –∏ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π (–∑–∞–∫—Ä—ã—Ç—ã–π). –ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –∏ –µ–≥–æ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –¥—Ä—É–≥–∏–º –ª–∏—Ü–∞–º. –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏ –∏ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∏–∑–≤–µ—Å—Ç–µ–Ω —Ç–æ–ª—å–∫–æ –Ω–∞–º. –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ —Å –ø–æ–º–æ—â—å—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞.

__–ü—Ä–æ—Ç–æ–∫–æ–ª –î–∏—Ñ—Ñ–∏-–•–µ–ª–ª–º–∞–Ω–∞__

[–ü—Ä–æ—Ç–æ–∫–æ–ª –î–∏—Ñ—Ñ–∏ ‚Äî –•–µ–ª–ª–º–∞–Ω–∞](https://ru.wikipedia.org/wiki/%D0%9F%D1%80%D0%BE%D1%82%D0%BE%D0%BA%D0%BE%D0%BB_%D0%94%D0%B8%D1%84%D1%84%D0%B8_%E2%80%94_%D0%A5%D0%B5%D0%BB%D0%BB%D0%BC%D0%B0%D0%BD%D0%B0) (Diffie‚ÄìHellman Protocol) –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–≤—É–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –≤—Å—Ç—Ä–µ—á–∞–ª–∏—Å—å, –±–µ–∑–æ–ø–∞—Å–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ–±—â–∏–µ —Å–µ–∫—Ä–µ—Ç—ã —á–µ—Ä–µ–∑ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å `A` –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–µ–∫—Ä–µ—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é `B`, –Ω–µ –æ–ø–∞—Å–∞—è—Å—å –ø—Ä–æ—Å–ª—É—à–∫–∏ (eavesdropping). –≠—Ç–æ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã [–¥–∏—Å–∫—Ä–µ—Ç–Ω–æ–≥–æ –ª–æ–≥–∞—Ä–∏—Ñ–º–∏—Ä–æ–≤–∞–Ω–∏—è](https://ru.wikipedia.org/wiki/%D0%94%D0%B8%D1%81%D0%BA%D1%80%D0%B5%D1%82%D0%BD%D0%BE%D0%B5_%D0%BB%D0%BE%D0%B3%D0%B0%D1%80%D0%B8%D1%84%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5). –≠—Ç–æ –¥–µ–ª–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω—ã–º —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏–µ `DTLS`.

__–ü—Å–µ–≤–¥–æ—Å–ª—É—á–∞–π–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è__

–ü—Å–µ–≤–¥–æ—Å–ª—É—á–∞–π–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è (Pseudorandom Function, PRF) - –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –≥–µ–Ω–µ—Ä–∏—Ä—É—é—â–∞—è –∑–Ω–∞—á–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞ –ø–µ—Ä–≤—ã–π –≤–∑–≥–ª—è–¥ –∫–∞–∂—É—Ç—Å—è —Å–ª—É—á–∞–π–Ω—ã–º–∏. –û–Ω–∞ –º–æ–∂–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤—Ö–æ–¥–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –∏ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ–¥–∏–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

__–§—É–Ω–∫—Ü–∏—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –∫–ª—é—á–∞__

[–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ (–¥–µ—Ä–∏–≤–∞—Ü–∏—è) –∫–ª—é—á–∞](https://ru.wikipedia.org/wiki/%D0%A4%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F_%D1%84%D0%BE%D1%80%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F_%D0%BA%D0%BB%D1%8E%D1%87%D0%B0) (key derivation) - —ç—Ç–æ —Ä–∞–∑–Ω–æ–≤–∏–¥–Ω–æ—Å—Ç—å –ø—Å–µ–≤–¥–æ—Å–ª—É—á–∞–π–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏. –î–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —É—Å–∏–ª–µ–Ω–∏—è –∫–ª—é—á–∞. –û–¥–Ω–∏–º –∏–∑ –Ω–∞–∏–±–æ–ª–µ–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ —è–≤–ª—è–µ—Ç—Å—è [—Ä–∞—Å—Ç—è–∂–∫–∞ (—Ä–∞—Å—Ç—è–∂–µ–Ω–∏–µ) –∫–ª—é—á–∞](https://en.wikipedia.org/wiki/Key_stretching) (key stretching).

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ —É –Ω–∞—Å –∏–º–µ–µ—Ç—Å—è –∫–ª—é—á —Ä–∞–∑–º–µ—Ä–æ–º 8 –±–∞–π—Ç–æ–≤. –ú—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `KDF` –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å –µ–≥–æ —Å–∏–ª—å–Ω–µ–µ (–¥–ª–∏–Ω–Ω–µ–µ).

__–û–¥–Ω–æ–∫—Ä–∞—Ç–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–µ —á–∏—Å–ª–æ__

[–û–¥–Ω–æ–∫—Ä–∞—Ç–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–µ —á–∏—Å–ª–æ](https://ru.wikipedia.org/wiki/Nonce) (nonce) - —ç—Ç–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è. –û–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–∞–∑–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø—Ä–∏ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–∏ –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ —Å–æ–æ–±—â–µ–Ω–∏—è. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —É–Ω–∏–∫–∞–ª—å–Ω—ã–π `nonce`.

__–ö–æ–¥ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏—è__

–ö–æ–¥ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏—è (message authentication code) - —ç—Ç–æ —Ö–µ—à, –ø–æ–º–µ—â–∞–µ–º—ã–π –≤ –∫–æ–Ω–µ—Ü —Å–æ–æ–±—â–µ–Ω–∏—è. `MAC` –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫ —Å–æ–æ–±—â–µ–Ω–∏—è.

__–†–æ—Ç–∞—Ü–∏—è –∫–ª—é—á–µ–π__

–†–æ—Ç–∞—Ü–∏—è –∫–ª—é—á–µ–π (key rotation) - —ç—Ç–æ –ø—Ä–∞–∫—Ç–∏–∫–∞ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–π –∑–∞–º–µ–Ω—ã –∫–ª—é—á–µ–π. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–Ω–∏–∑–∏—Ç—å —É—â–µ—Ä–± –æ—Ç –≤–æ–∑–º–æ–∂–Ω–æ–π –∫—Ä–∞–∂–∏ (—É—Ç–µ—á–∫–∏) –∫–ª—é—á–∞, —Ç.–µ. –¥–æ–±–∏—Ç—å—Å—è —Ç–æ–≥–æ, —á—Ç–æ —É–∫—Ä–∞–¥–µ–Ω–Ω—ã–π –∏–ª–∏ —Ä–∞—Å–∫—Ä—ã—Ç—ã–π –¥—Ä—É–≥–∏–º —Å–ø–æ—Å–æ–±–æ–º –∫–ª—é—á –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏ –ª–∏—à—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–æ–æ–±—â–µ–Ω–∏–π.

### DTLS

`DTLS` –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–≤—É–º –ø–∏—Ä–∞–º —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –±–µ–∑ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏. –î–∞–∂–µ –µ—Å–ª–∏ –∫—Ç–æ-—Ç–æ –±—É–¥–µ—Ç –ø—Ä–æ—Å–ª—É—à–∏–≤–∞—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ, –æ–Ω –Ω–µ —Å–º–æ–∂–µ—Ç —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è.

–î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç–æ–º –∏ —Å–µ—Ä–≤–µ—Ä–æ–º `DTLS`, —Å—Ç–∞–ª–æ –≤–æ–∑–º–æ–∂–Ω–æ–π, –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã –ø—Ä–∏–π—Ç–∏ –∫ —Å–æ–≥–ª–∞—à–µ–Ω–∏—é –æ —à–∏—Ñ—Ä–µ –∏ –∫–ª—é—á–µ. –≠—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è. –í —Ö–æ–¥–µ —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –≤ –≤–∏–¥–µ –æ–±—ã—á–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞. –ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –∫–ª–∏–µ–Ω—Ç –∏–ª–∏ —Å–µ—Ä–≤–µ—Ä –æ–±–º–µ–Ω—è—é—Ç—Å—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–ª—è –Ω–∞—á–∞–ª–∞ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è `Change Cipher Spec`. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –≤—Å–µ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–¥–≤–µ—Ä–≥–∞—é—Ç—Å—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—é.

#### –§–æ—Ä–º–∞—Ç –ø–∞–∫–µ—Ç–∞

–ö–∞–∂–¥—ã–π –ø–∞–∫–µ—Ç `DTLS` –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞.

__–¢–∏–ø —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ__

–¢–∏–ø —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ (content type) –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–¥–Ω–∏–º –∏–∑:

- `20` - `Change Chipher Spec`;
- `22` - —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏–µ (Handshake);
- `23` - –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (Application Data).

`Handshake` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–±–º–µ–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–π –¥–ª—è –Ω–∞—á–∞–ª–∞ —Å–µ—Å—Å–∏–∏. `Change Chipher Spec` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥—Ä—É–≥–æ–π —Å—Ç–æ—Ä–æ–Ω—ã –æ –Ω–∞—á–∞–ª–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π. `Application Data` - —ç—Ç–æ —Å–∞–º–∏ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è.

__–í–µ—Ä—Å–∏—è__

–í–µ—Ä—Å–∏—è (version) –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ `0x0000feff` (–¥–ª—è `DTLS v1.0`) –∏–ª–∏ `0x0000fefd` (–¥–ª—è `DTLS v1.2`). –í–µ—Ä—Å–∏–∏ 1.1 –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.

__–≠–ø–æ—Ö–∞__

–≠–ø–æ—Ö–∞ (epoch) –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `0` –∏ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ `1` –ø–æ—Å–ª–µ `Change Chipher Spec`. –õ—é–±—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å "–Ω–µ–Ω—É–ª–µ–≤–æ–π —ç–ø–æ—Ö–æ–π" –∑–∞—à–∏—Ñ—Ä–æ–≤—ã–≤–∞—é—Ç—Å—è.

__–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä__

–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä (sequence number) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ—Ä—è–¥–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π. –ü—Ä–∏ –∫–∞–∂–¥–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–π –Ω–æ–º–µ—Ä —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è. –ü—Ä–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ —ç–ø–æ—Ö–∏, –¥–∞–Ω–Ω—ã–π –Ω–æ–º–µ—Ä –æ–±–Ω—É–ª—è–µ—Ç—Å—è.

__–î–ª–∏–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –ø–æ–ª–µ–∑–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞__

–ü–æ–ª–µ–∑–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ (payload) - —ç—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–∏–ø —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ. –î–ª—è `Application Data` –ø–æ–ª–µ–∑–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π —è–≤–ª—è—é—Ç—Å—è –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ. –î–ª—è `Handshake` –ø–æ–ª–µ–∑–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–∏–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏—è. –î–ª–∏–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è (length) –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–∞–∑–º–µ—Ä –ø–æ–ª–µ–∑–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏.

#### –†—É–∫–æ–ø–æ–∂–∞—Ç–∏–µ

–í –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è –∫–ª–∏–µ–Ω—Ç –∏ —Å–µ—Ä–≤–µ—Ä –æ–±–º–µ–Ω–∏–≤–∞—é—Ç—Å—è —Å–µ—Ä–∏–µ–π —Å–æ–æ–±—â–µ–Ω–∏–π. –≠—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –≥—Ä—É–ø–ø–∏—Ä—É—é—Ç—Å—è –≤ –ø–∞–∫–µ—Ç—ã (flights). –ö–∞–∂–¥—ã–π –ø–∞–∫–µ—Ç –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏–π –∏–ª–∏ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ. –ü–∞–∫–µ—Ç —Å—á–∏—Ç–∞–µ—Ç—Å—è –ø–æ–ª—É—á–µ–Ω–Ω—ã–º —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –¥–æ—Å—Ç–∞–≤–∫–∏ –≤—Å–µ—Ö —Å–æ–¥–µ—Ä–∂–∞—â–∏—Ö—Å—è –≤ –Ω–µ–º —Å–æ–æ–±—â–µ–Ω–∏–π. –î–∞–ª–µ–µ –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è.

<img src="https://habrastorage.org/webt/7x/ol/qn/7xolqn1dp4518tdgbqyytiwct04.png" />
<br />

__ClientHello__

`ClientHello` - —ç—Ç–æ –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞. –û–Ω–æ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–µ—Ä–µ—á–µ–Ω—å –∞—Ç—Ä–∏–±—É—Ç–æ–≤. –≠—Ç–∏ –∞—Ç—Ä–∏–±—É—Ç—ã —Å–æ–æ–±—â–∞—é—Ç —Å–µ—Ä–≤–µ—Ä—É —à–∏—Ñ—Ä –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∫–ª–∏–µ–Ω—Ç–æ–º. –î–∞–Ω–Ω—ã–π —à–∏—Ñ—Ä —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–∞—á–µ—Å—Ç–≤–µ —à–∏—Ñ—Ä–∞ `SCTP`. `ClientHello` —Ç–∞–∫–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ª—É—á–∞–π–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –≤–ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–ª—é—á–µ–π —Å–µ—Å—Å–∏–∏.

__HelloVerifyRequest__

`HelloVerifyRequest` - —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ –∫–ª–∏–µ–Ω—Ç—É. –û–Ω–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∫–ª–∏–µ–Ω—Ç –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∏–º–µ–ª –Ω–∞–º–µ—Ä–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å `ClientHello`. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –∫–ª–∏–µ–Ω—Ç —Å–Ω–æ–≤–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `ClientHello`, –Ω–æ —É–∂–µ —Å —Ç–æ–∫–µ–Ω–æ–º –∏–∑ `HelloVerifyRequest`.

__ServerHello__

`ServerHello` - —ç—Ç–æ –æ—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ —Å–µ—Å—Å–∏–∏. –û–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç —à–∏—Ñ—Ä –∏ —Å–ª—É—á–∞–π–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.

__Certificate__

`Certificate` —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞ –∏–ª–∏ —Å–µ—Ä–≤–µ—Ä–∞. –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –¥—Ä—É–≥–æ–π —Å—Ç–æ—Ä–æ–Ω—ã –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏. –ü–æ—Å–ª–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è –º—ã –ø—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Ö–µ—à —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –µ–≥–æ –æ—Ç–ø–µ—á–∞—Ç–∫–æ–º –≤ `SessionDescription`.

__ServerKeyExchange/ClientKeyExchange__

–≠—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –ø—É–±–ª–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞. –ü—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç –∏ —Å–µ—Ä–≤–µ—Ä –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç –ø–∞—Ä—É –∫–ª—é—á–µ–π. –ü–æ—Å–ª–µ —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è —ç—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ `Pre-Master Secret`.

__CertificateRequest__

`CertificateRequest` - —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ –∫–ª–∏–µ–Ω—Ç—É –æ –∂–µ–ª–∞–Ω–∏–∏ –ø–µ—Ä–≤–æ–≥–æ –ø–æ–ª—É—á–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç. –°–µ—Ä–≤–µ—Ä –º–æ–∂–µ—Ç –ø—Ä–æ—Å–∏—Ç—å (request) –∏–ª–∏ —Ç—Ä–µ–±–æ–≤–∞—Ç—å (require) –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞.

__ServerHelloDone__

`ServerHelloDone` —É–≤–µ–¥–æ–º–ª—è–µ—Ç –∫–ª–∏–µ–Ω—Ç–∞ –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è —Å–µ—Ä–≤–µ—Ä–æ–º.

__CertificateVerify__

`CertificateVerify` -  —Ç–∞–∫ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –Ω–∞–ª–∏—á–∏–µ —É –Ω–µ–≥–æ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞ –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏—è —Å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º.

__ChangeCipherSpec__

`ChangeCipherSpec` –∏–Ω—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –ø–æ–ª—É—á–∞—Ç–µ–ª—è –æ —Ç–æ–º, —á—Ç–æ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –±—É–¥—É—Ç –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–º–∏.

__Finished__

`Finished` —è–≤–ª—è–µ—Ç—Å—è –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–º –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ö–µ—à –≤—Å–µ—Ö –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–±–µ–¥–∏—Ç—å—Å—è –≤ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è.

#### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–µ–π

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è –º—ã –º–æ–∂–µ–º –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ. –®–∏—Ñ—Ä –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è —Å–µ—Ä–≤–µ—Ä–æ–º –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –≤ –µ–≥–æ `ServerHello`. –ù–æ –∫–∞–∫ –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –∫–ª—é—á?

–°–Ω–∞—á–∞–ª–∞ –º—ã –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º `Pre-Master Secret`. –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —ç—Ç–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–æ—Ç–æ–∫–æ–ª –î–∏—Ñ—Ñ–∏-–•–µ–ª–º–∞–Ω–∞ –¥–ª—è –∫–ª—é—á–µ–π, –æ–±–º–µ–Ω–∏–≤–∞–µ–º—ã—Ö —Å –ø–æ–º–æ—â—å—é `ServerKeyExchange` –∏ `ClientKeyExchange`. –î–µ—Ç–∞–ª–∏ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —à–∏—Ñ—Ä–∞.

–ó–∞—Ç–µ–º –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è `Master Secret`. –ö–∞–∂–¥–∞—è –≤–µ—Ä—Å–∏—è `DTLS` –∏–º–µ–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—É—é –ø—Å–µ–≤–¥–æ—Å–ª—É—á–∞–π–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é. –î–ª—è `DTLS v1.2` —Ñ—É–Ω–∫—Ü–∏—è "–±–µ—Ä–µ—Ç" `Pre-Master Secret` –∏ —Å–ª—É—á–∞–π–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ `ClientHello` –∏ `ServerHello`. –†–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Å–µ–≤–¥–æ—Å–ª—É—á–∞–π–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ —è–≤–ª—è–µ—Ç—Å—è `Master Secret`. `Master Secret` - —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —à–∏—Ñ—Ä–∞.

#### –û–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏

–†–∞–±–æ—á–µ–π –ª–æ—à–∞–¥–∫–æ–π `DTLS` —è–≤–ª—è–µ—Ç—Å—è `ApplicationData`. –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —à–∏—Ñ—Ä–∞ –º—ã –º–æ–∂–µ–º —à–∏—Ñ—Ä–æ–≤–∞—Ç—å –∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è.

–°–æ–æ–±—â–µ–Ω–∏—è `ApplicationData` –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ `DTLS`, –∫–∞–∫ –æ–ø–∏—Å—ã–≤–∞–ª–æ—Å—å —Ä–∞–Ω–µ–µ. `Payload` –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º. –¢–µ–ø–µ—Ä—å —É –Ω–∞—Å –∏–º–µ–µ—Ç—Å—è —Å–µ—Å—Å–∏—è `DTLS` –∏ –º—ã –º–æ–∂–µ–º –æ–±—â–∞—Ç—å—Å—è –±–µ–∑–æ–ø–∞—Å–Ω–æ.

### SRTP

`SRTP` - —ç—Ç–æ –ø—Ä–æ—Ç–æ–∫–æ–ª, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –ø–∞–∫–µ—Ç–æ–≤ `RTP`. –î–ª—è –Ω–∞—á–∞–ª–∞ —Å–µ—Å—Å–∏–∏ `SRTP` –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–ª—é—á–∏ –∏ —à–∏—Ñ—Ä. –í –æ—Ç–ª–∏—á–∏–∏ –æ—Ç `DTLS` –∑–¥–µ—Å—å —É –Ω–∞—Å –Ω–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º–∞ —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è. –í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –∫–ª—é—á–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –≤ —Ö–æ–¥–µ —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è `DTLS`.

`DTLS` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–π `API` –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞ –∫–ª—é—á–µ–π —Å —Ü–µ–ª—å—é –∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –¥—Ä—É–≥–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–∞—Ö. –î–∞–Ω–Ω—ã–π `API` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –≤ [RFC 5705](https://datatracker.ietf.org/doc/html/rfc5705).

#### –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏

`SRTP` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –¥–µ—Ä–∏–≤–∞—Ü–∏–∏ –∫–ª—é—á–µ–π, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏–∏ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö. –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–µ—Å—Å–∏–∏ `SRTP` –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–ª—é—á–µ–π –¥–ª—è —à–∏—Ñ—Ä–∞ `SRTP`. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∫ –æ–±—Ä–∞–±–æ—Ç–∫–µ –¥–∞–Ω–Ω—ã—Ö.

#### –û–±–º–µ–Ω –º–µ–¥–∏–∞–¥–∞–Ω–Ω—ã–º–∏

–ö–∞–∂–¥—ã–π –ø–∞–∫–µ—Ç `RTP` –∏–º–µ–µ—Ç 16-–±–∏—Ç–Ω—ã–π `SequenceNumber` (–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä). –≠—Ç–æ—Ç –Ω–æ–º–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ –ø–∞–∫–µ—Ç–æ–≤ (–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –Ω–æ–º–µ—Ä–∞ –Ω–∞–ø–æ–º–∏–Ω–∞—é—Ç –ø–µ—Ä–≤–∏—á–Ω—ã–µ –∫–ª—é—á–∏ - primary keys). –í —Ö–æ–¥–µ —Å–µ—Å—Å–∏–∏ —ç—Ç–æ—Ç –Ω–æ–º–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è. –î–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Å—á–µ—Ç—á–∏–∫ (rollover counter).

–ü—Ä–∏ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–∏ –ø–∞–∫–µ—Ç–∞ `SRTP` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—á–µ—Ç—á–∏–∫ –∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä –≤ –∫–∞—á–µ—Å—Ç–≤–µ –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è (nonce). –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–æ–±–∏—Ç—å—Å—è —Ç–æ–≥–æ, —á—Ç–æ –¥–∞–∂–µ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –µ–≥–æ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –±—É–¥–µ—Ç —Ä–∞–∑–Ω—ã–º. –≠—Ç–æ –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–∞—Ç—Ç–µ—Ä–Ω–∞ –∞—Ç–∞–∫—É—é—â–∏–º, –∞ —Ç–∞–∫–∂–µ –æ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∞—Ç–∞–∫–∏.

## –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

–°–µ—Ç–∏ - —ç—Ç–æ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª—å–Ω—ã–π —Ñ–∞–∫—Ç–æ—Ä –¥–ª—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏. –í –∏–¥–µ–∞–ª—å–Ω–æ–º –º–∏—Ä–µ —Ä–∞–∑–º–µ—Ä –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω –∏ –ø–∞–∫–µ—Ç—ã –¥–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ. –í —Ä–µ–∞–ª—å–Ω–æ–º –º–∏—Ä–µ —ç—Ç–æ –Ω–µ —Ç–∞–∫. –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–µ—Ç–µ–π —è–≤–ª—è—é—Ç—Å—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º–∏, —É—Å–ª–æ–≤–∏—è –º–æ–≥—É—Ç –∏–∑–º–µ–Ω–∏—Ç—å—Å—è –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è. –ò–∑–º–µ—Ä–µ–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–µ—Ç–µ–π —Ç–∞–∫–∂–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Å–ª–æ–∂–Ω—É—é –∑–∞–¥–∞—á—É. –ú—ã –ø–æ–ª—É—á–∞–µ–º —Ä–∞–∑–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç "–∂–µ–ª–µ–∑–∞", –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∏ –∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫.

–í —Å–ª—É—á–∞–µ —Å –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–µ–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –µ—â–µ –æ–¥–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞, –∫–æ—Ç–æ—Ä–æ–π –Ω–µ—Ç –≤ –¥—Ä—É–≥–∏—Ö —Å—Ä–µ–¥–∞—Ö. –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –º–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å–∞–π—Ç–∞ –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–µ—Ç—è—Ö –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —Å–µ—Ä—å–µ–∑–Ω–æ–π –ø—Ä–æ–±–ª–µ–º–æ–π. –î–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏—Ö–æ–¥—è—Ç, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å—á–∞—Å—Ç–ª–∏–≤—ã. –û–¥–Ω–∞–∫–æ –≤ `WebRTC` "—Å—Ç–∞—Ä—ã–µ" –¥–∞–Ω–Ω—ã–µ —è–≤–ª—è—é—Ç—Å—è –±–µ—Å–ø–æ–ª–µ–∑–Ω—ã–º–∏. –ù–∏–∫–æ–≥–æ –Ω–µ –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç, —á—Ç–æ –±—ã–ª–æ —Å–∫–∞–∑–∞–Ω–æ –Ω–∞ –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏ –ø—è—Ç—å —Å–µ–∫—É–Ω–¥ –Ω–∞–∑–∞–¥. –ü–æ—ç—Ç–æ–º—É –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ —Å–∏—Å—Ç–µ–º, —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, –∑–∞—á–∞—Å—Ç—É—é –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –≤—ã–±–∏—Ä–∞—Ç—å –º–µ–∂–¥—É –∑–∞–¥–µ—Ä–∂–∫–æ–π –≤ –ø–µ—Ä–µ–¥–∞—á–µ –∏ —Ä–∞–∑–º–µ—Ä–æ–º –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

### –ö–∞–∫–∏–µ –∞—Ç—Ä–∏–±—É—Ç—ã –¥–µ–ª–∞—é—Ç —Å–µ—Ç–∏ —Å–ª–æ–∂–Ω—ã–º–∏?

–ö–æ–¥, –∫–æ—Ç–æ—Ä—ã–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–æ –≤—Å–µ—Ö —Å–µ—Ç—è—Ö, —è–≤–ª—è–µ—Ç—Å—è —Å–ª–æ–∂–Ω—ã–º. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —É—á–∏—Ç—ã–≤–∞—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ä–∞–∑–Ω—ã—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –Ω–µ–æ—á–µ–≤–∏–¥–Ω—ã–º –æ–±—Ä–∞–∑–æ–º –≤–ª–∏—è—Ç—å –¥—Ä—É–≥ –Ω–∞ –¥—Ä—É–≥–∞. –ù–∏–∂–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω —Å–ø–∏—Å–æ–∫ –Ω–∞–∏–±–æ–ª–µ–µ –æ–±—â–∏—Ö –∑–∞–¥–∞—á, —Å —Ä–µ—à–µ–Ω–∏–µ–º –∫–æ—Ç–æ—Ä—ã—Ö —Å—Ç–∞–ª–∫–∏–≤–∞—é—Ç—Å—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏.

__–ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å__

–ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å (bandwidth) - —ç—Ç–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –ø–æ —Å–µ—Ç–∏. –í–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å, —á—Ç–æ –¥–∞–Ω–Ω–∞—è –≤–µ–ª–∏—á–∏–Ω–∞ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π. –ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–∞–≥—Ä—É–∑–∫–∏, —Ç.–µ. –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ª—é–¥–µ–π, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏—Ö —ç—Ç–æ—Ç –º–∞—Ä—à—Ä—É—Ç (—Ä–æ—É—Ç).

__–í—Ä–µ–º—è –ø–µ—Ä–µ–¥–∞—á–∏ –∏ –≤—Ä–µ–º—è –≤ –ø—É—Ç–∏ —Ç—É–¥–∞ –∏ –æ–±—Ä–∞—Ç–Ω–æ__

–í—Ä–µ–º—è –ø–µ—Ä–µ–¥–∞—á–∏ (transmission time) - —ç—Ç–æ –≤—Ä–µ–º—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –ø–∞–∫–µ—Ç–æ–º –ø—É–Ω–∫—Ç–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è. –ö–∞–∫ –∏ –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å, —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç–Ω—ã–º. –í—Ä–µ–º—è –ø–µ—Ä–µ–¥–∞—á–∏ –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å—Å—è –≤ —Ö–æ–¥–µ —Å–µ—Å—Å–∏–∏.

```ini
transmission_time = receive_time - send_time
```

–î–ª—è —Ä–∞—Å—á–µ—Ç–∞ –≤—Ä–µ–º—è –ø–µ—Ä–µ–¥–∞—á–∏ –Ω–∞–º –Ω—É–∂–Ω—ã —á–∞—Å—ã –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –∏ –ø–æ–ª—É—á–∞—Ç–µ–ª—è, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å —Ç–æ—á–Ω–æ—Å—Ç—å—é –¥–æ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥. –î–∞–∂–µ –Ω–µ–±–æ–ª—å—à–∞—è —Ä–∞–∑–Ω–∏—Ü–∞ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –Ω–µ–Ω–∞–¥–µ–∂–Ω–æ–º—É –∏–∑–º–µ—Ä–µ–Ω–∏—é –≤—Ä–µ–º–µ–Ω–∏. –ü–æ—Å–∫–æ–ª—å–∫—É `WebRTC` —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç –≤ –≤—ã—Å–æ–∫–æ–≥–µ—Ç–µ—Ä–æ–≥–µ–Ω–Ω—ã—Ö —Å—Ä–µ–¥–∞—Ö, –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –º–µ–∂–¥—É —Ö–æ—Å—Ç–∞–º–∏ —è–≤–ª—è–µ—Ç—Å—è –ø–æ—á—Ç–∏ –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã–º.

–í—Ä–µ–º—è —Ç—É–¥–∞ –∏ –æ–±—Ä–∞—Ç–Ω–æ (round trip time) - —ç—Ç–æ –ø–æ–ø—ã—Ç–∫–∞ —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏.

–í–º–µ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —á–∞—Å–æ–≤ –ø–∏—Ä `WebRTC` –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –ø–∞–∫–µ—Ç, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –≤—Ä–µ–º—è –≤ `sendertime1`. –í—Ç–æ—Ä–æ–π –ø–∏—Ä –ø–æ–ª—É—á–∞–µ—Ç –ø–∞–∫–µ—Ç, —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –≤—Ä–µ–º—è –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–∞–∫–µ—Ç –æ–±—Ä–∞—Ç–Ω–æ. –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –ø–∞–∫–µ—Ç–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ–º, –æ–Ω –≤—ã—á–∏—Ç–∞–µ—Ç –≤—Ä–µ–º—è, –∑–∞–ø–∏—Å–∞–Ω–Ω–æ–µ –≤ `sendertime1`, –∏–∑ —Ç–µ–∫—É—â–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ `sendertime2`. –≠—Ç–∞ —Ä–∞–∑–Ω–∏—Ü–∞ –≤–æ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤—Ä–µ–º–µ–Ω–µ–º –≤ –ø—É—Ç–∏ —Ç—É–¥–∞ –∏ –æ–±—Ä–∞—Ç–Ω–æ.

```ini
rtt = sendertime2 - sendertime1
```

–ü–æ–ª–æ–≤–∏–Ω–∞ –≤—Ä–µ–º–µ–Ω–∏ —Ç—É–¥–∞ –∏ –æ–±—Ä–∞—Ç–Ω–æ —Å—á–∏—Ç–∞–µ—Ç—Å—è —Ö–æ—Ä–æ—à–∏–º –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–µ–º –≤—Ä–µ–º–µ–Ω–∏ –ø–µ—Ä–µ–¥–∞—á–∏. –≠—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ –∏–º–µ–µ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏. –ü—Ä–∏ –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –º—ã –∏—Å—Ö–æ–¥–∏–º –∏–∑ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏—è, —á—Ç–æ –æ—Ç–ø—Ä–∞–≤–∫–∞ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–∞ –∑–∞–Ω–∏–º–∞—é—Ç —Ä–∞–≤–Ω–æ–µ –≤—Ä–µ–º—è. –û–¥–Ω–∞–∫–æ –≤ —Å–æ—Ç–æ–≤—ã—Ö —Å–µ—Ç—è—Ö –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø–æ –æ—Ç–ø—Ä–∞–≤–∫–µ –∏ –ø–æ–ª—É—á–µ–Ω–∏—é –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã–º–∏ –ø–æ –≤—Ä–µ–º–µ–Ω–∏. –í—ã –º–æ–≥–ª–∏ –∑–∞–º–µ—á–∞—Ç—å, —á—Ç–æ —Å–∫–æ—Ä–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ –ø–æ—á—Ç–∏ –≤—Å–µ–≥–¥–∞ –º–µ–Ω—å—à–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö.

```ini
transmission_time = rtt/2
```

–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ –∏–∑–º–µ—Ä–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ —Ç—É–¥–∞ –∏ –æ–±—Ä–∞—Ç–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ –æ–ø–∏—Å–∞–Ω—ã –≤ —Å–ª–µ–¥—É—é—â–µ–º —Ä–∞–∑–¥–µ–ª–µ.

__–î–∂–∏—Ç—Ç–µ—Ä__

–ü—Ä–∏—á–∏–Ω–æ–π [–¥–∂–∏—Ç—Ç–µ—Ä–∞](https://ru.wikipedia.org/wiki/%D0%94%D0%B6%D0%B8%D1%82%D1%82%D0%B5%D1%80) (jitter) —è–≤–ª—è–µ—Ç—Å—è —Ä–∞–∑–Ω–æ–µ –≤—Ä–µ–º—è –ø–µ—Ä–µ–¥–∞—á–∏ –ø–∞–∫–µ—Ç–æ–≤. –ü–∞–∫–µ—Ç—ã –º–æ–≥—É—Ç –∑–∞–ø–∞–∑–¥—ã–≤–∞—Ç—å –∏ –ø—Ä–∏–±—ã–≤–∞—Ç—å –≥—Ä—É–ø–ø–∞–º–∏.

__–ü–æ—Ç–µ—Ä—è –ø–∞–∫–µ—Ç–æ–≤__

–ü–æ—Ç–µ—Ä—è –ø–∞–∫–µ—Ç–æ–≤ (packets loss) - —ç—Ç–æ –∫–æ–≥–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —Ç–µ—Ä—è—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ, —Ç.–µ. –Ω–µ –¥–æ—Ö–æ–¥—è—Ç –¥–æ –∞–¥—Ä–µ—Å–∞—Ç–∞. –ü–æ—Ç–µ—Ä—è –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π –∏–ª–∏ —Å–ª—É—á–∞–π–Ω–æ–π. –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–≤—è–∑–∞–Ω–æ —Å —Ç–∏–ø–æ–º —Å–µ—Ç–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–ø—É—Ç–Ω–∏–∫–æ–≤–∞—è –∏–ª–∏ `Wi-Fi`. –≠—Ç–æ —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–≤—è–∑–∞–Ω–æ —Å –ü–û, –≤—Å—Ç—Ä–µ—Ç–∏–≤—à–∏–º—Å—è –Ω–∞ –ø—É—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏—è.

__–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –µ–¥–∏–Ω–∏—Ü–∞ –ø–µ—Ä–µ–¥–∞—á–∏__

–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –µ–¥–∏–Ω–∏—Ü–∞ –ø–µ—Ä–µ–¥–∞—á–∏ (maximum transmission unit) - —ç—Ç–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –µ–¥–∏–Ω–∏—á–Ω–æ–≥–æ –ø–∞–∫–µ—Ç–∞. –°–µ—Ç–∏ –Ω–µ –ø–æ–∑–≤–æ–ª—è—é—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –æ–¥–Ω–æ –≥–∏–≥–∞–Ω—Ç—Å–∫–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ. –ù–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —Ä–∞–∑–±–∏–≤–∞—é—Ç—Å—è (split) –Ω–∞ –±–æ–ª–µ–µ –º–µ–ª–∫–∏–µ –ø–∞–∫–µ—Ç—ã.

`MTU` —Ç–∞–∫–∂–µ —Ä–∞–∑–ª–∏—á–∞–µ—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞. –î–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è `MTU` –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Ç–æ–∫–æ–ª [–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è MTU –ø–æ –ø—É—Ç–∏](https://datatracker.ietf.org/doc/html/rfc1191).

#### –ü–µ—Ä–µ–≥—Ä—É–∑–∫–∞

–ü–µ—Ä–µ–≥—Ä—É–∑–∫–∞ (congestion) –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–æ–≤ —Å–µ—Ç–∏. –û–±—ã—á–Ω–æ, —ç—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ–º –ø—Ä–µ–¥–µ–ª—å–Ω–æ–π –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Ç–µ–∫—É—â–µ–≥–æ —Ä–æ—É—Ç–∞. –ò–ª–∏ —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–≤—è–∑–∞–Ω–æ —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏, –Ω–∞–∫–ª–∞–¥—ã–≤–∞–µ–º—ã–º–∏ –≤–∞—à–∏–º –ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º.

–ü–µ—Ä–µ–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—è–≤–ª—è–µ—Ç—Å—è –ø–æ-—Ä–∞–∑–Ω–æ–º—É. –ù–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è. –í –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ –ø—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏ –ª–∏—à–Ω–∏–µ –ø–∞–∫–µ—Ç—ã –Ω–∞—á–∏–Ω–∞—é—Ç –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è. –í –¥—Ä—É–≥–∏—Ö —Å–ª—É—á–∞—è—Ö –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç [–±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è](https://ru.wikipedia.org/wiki/%D0%91%D1%83%D1%84%D0%B5%D1%80%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F_(%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%82%D0%B8%D0%BA%D0%B0)). –≠—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —É–≤–µ–ª–∏—á–µ–Ω–∏—é –≤—Ä–µ–º–µ–Ω–∏ –ø–µ—Ä–µ–¥–∞—á–∏. –í –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Å–µ—Ç—è—Ö —Ç–∞–∫–∂–µ –º–æ–∂–Ω–æ –Ω–∞–±–ª—é–¥–∞—Ç—å —É—Å–∏–ª–µ–Ω–∏–µ –¥–∂–∏—Ç—Ç–µ—Ä–∞. –í—Å–µ, –æ —á–µ–º –º—ã —Ç—É—Ç –≥–æ–≤–æ—Ä–∏–º, ‚Äì –±—ã—Å—Ç—Ä–æ —Ä–∞–∑–≤–∏–≤–∞—é—â–∞—è—Å—è —Å—Ñ–µ—Ä–∞ –∏ –≤ –Ω–µ–π –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç –ø–æ—è–≤–ª—è—Ç—å—Å—è –Ω–æ–≤—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏.

#### –î–∏–Ω–∞–º–∏—á–Ω–æ—Å—Ç—å

–°–µ—Ç–∏ —è–≤–ª—è—é—Ç—Å—è –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ –¥–∏–Ω–∞–º–∏—á–Ω—ã–º–∏, –∏—Ö —É—Å–ª–æ–≤–∏—è –º–µ–Ω—è—é—Ç—Å—è –æ—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ. –í–æ –≤—Ä–µ–º—è –∑–≤–æ–Ω–∫–∞ –º—ã –º–æ–∂–µ–º –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∏ –ø–æ–ª—É—á–∞—Ç—å —Å–æ—Ç–Ω–∏ —Ç—ã—Å—è—á –ø–∞–∫–µ—Ç–æ–≤. –≠—Ç–∏ –ø–∞–∫–µ—Ç—ã –±—É–¥—É—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ (–ø–æ—Å—Ä–µ–¥–Ω–∏–∫–æ–≤, —Ä–µ—Ç—Ä–∞–Ω—Å–ª—è—Ç–æ—Ä–æ–≤) (hops). –≠—Ç–∏ –ø–µ—Ä–µ—Ö–æ–¥—ã –±—É–¥—É—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –º–µ–∂–¥—É –º–∏–ª–ª–∏–æ–Ω–∞–º–∏ –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –î–∞–∂–µ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏ –º—ã –º–æ–∂–µ–º –∑–∞–≥—Ä—É–∂–∞—Ç—å —Ñ–∏–ª—å–º –≤ —Ñ–æ—Ä–º–∞—Ç–µ `HD` –∏–ª–∏ –Ω–∞—à–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –º–æ–∂–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–æ –≤—Ä–µ–º—è –∑–≤–æ–Ω–∫–∞.

–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –∑–≤–æ–Ω–∫–∞ —è–≤–ª—è–µ—Ç—Å—è –Ω–µ —Ç–∞–∫–æ–π –ø—Ä–æ—Å—Ç–æ–π –∑–∞–¥–∞—á–µ–π, –∫–∞–∫ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Å–µ—Ç–∏ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≤–æ–¥–∏—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è. –¢–∞–∫–∂–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É—á–∏—Ç—ã–≤–∞—Ç—å –≤—Å–µ —Ñ–∞–∫—Ç–æ—Ä—ã, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –æ–∫–∞–∑—ã–≤–∞—é—Ç –≤–ª–∏—è–Ω–∏–µ —Å–µ—Ç–µ–≤–æ–µ "–∂–µ–ª–µ–∑–æ" –∏ –ü–û.

### –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö

–ü–æ—Ç–µ—Ä—è –ø–∞–∫–µ—Ç–æ–≤ - —ç—Ç–æ –ø–µ—Ä–≤–∞—è –∑–∞–¥–∞—á–∞, –∫–æ—Ç–æ—Ä—É—é –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–µ—à–∏—Ç—å –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ —Å–∏—Å—Ç–µ–º—ã –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏. –°—É—â–µ—Å—Ç–≤—É–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Å–ø–æ—Å–æ–±–æ–≤ —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å, –∫–∞–∂–¥—ã–π —Å–æ —Å–≤–æ–∏–º–∏ –ø–ª—é—Å–∞–º–∏ –∏ –º–∏–Ω—É—Å–∞–º–∏. –≠—Ç–æ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–æ–≥–æ, —á—Ç–æ –º—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –∏ –Ω–∞—Å–∫–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–Ω–æ–π —è–≤–ª—è–µ—Ç—Å—è –∑–∞–¥–µ—Ä–∂–∫–∞. –¢–∞–∫–∂–µ —Å–ª–µ–¥—É–µ—Ç –æ—Ç–º–µ—Ç–∏—Ç—å, —á—Ç–æ –Ω–µ –≤—Å—è–∫–∞—è –ø–æ—Ç–µ—Ä—è —è–≤–ª—è–µ—Ç—Å—è —Ñ–∞—Ç–∞–ª—å–Ω–æ–π. –ü–æ—Ç–µ—Ä—è –Ω–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –≤–∏–¥–µ–æ–¥–∞–Ω–Ω—ã—Ö –±—É–¥–µ—Ç –Ω–µ–∑–∞–º–µ—Ç–Ω–∞ –¥–ª—è —á–µ–ª–æ–≤–µ—á–µ—Å–∫–æ–≥–æ –≥–ª–∞–∑–∞. –û–¥–Ω–∞–∫–æ –ø–æ—Ç–µ—Ä—è —Ç–µ–∫—Å—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —è–≤–ª—è–µ—Ç—Å—è —Ñ–∞—Ç–∞–ª—å–Ω–æ–π.

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ –º—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ 10 –ø–∞–∫–µ—Ç–æ–≤ –∏ –ø–∞–∫–µ—Ç—ã 5 –∏ 6 –±—ã–ª–∏ –ø–æ—Ç–µ—Ä—è–Ω—ã. –î–∞–≤–∞–π—Ç–µ —Ä–∞–∑–±–µ—Ä–µ–º, –∫–∞–∫ –º–æ–∂–Ω–æ —Ä–µ—à–∏—Ç—å —ç—Ç—É –ø—Ä–æ–±–ª–µ–º—É.

#### Acknowledgments

Acknowledgments (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è) - —ç—Ç–æ —Å–ø–æ—Å–æ–±, –∫–æ—Ç–æ—Ä—ã–º –ø–æ–ª—É—á–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∞–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—é –æ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∫–∞–∂–¥–æ–≥–æ –ø–∞–∫–µ—Ç–∞. –û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å —É–∑–Ω–∞–µ—Ç –æ –ø–æ—Ç–µ—Ä–µ –ø–∞–∫–µ—Ç–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ –ø–∞–∫–µ—Ç–µ, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–º. –ö–æ–≥–¥–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç `ACK` –¥–ª—è –ø–∞–∫–µ—Ç–∞ 4 –¥–≤–∞–∂–¥—ã, –æ–Ω –ø–æ–Ω–∏–º–∞–µ—Ç, —á—Ç–æ –ø–∞–∫–µ—Ç 5 –±—ã–ª –ø–æ—Ç–µ—Ä—è–Ω.

#### Selective Acknowledgments

Selective Acknowledgments (–≤—ã–±–æ—Ä–æ—á–Ω—ã–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è) - —ç—Ç–æ —É–ª—É—á—à–µ–Ω–∏–µ –æ–±—ã—á–Ω—ã—Ö –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π. –ü–æ–ª—É—á–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å `SACK` —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è–º–∏ –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–∞–∫–µ—Ç–æ–≤ –∏ —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º —É–≤–µ–¥–æ–º–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –æ –ø–æ—Ç–µ—Ä–µ –ø–∞–∫–µ—Ç–æ–≤. –û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç `SACK` –¥–ª—è –ø–∞–∫–µ—Ç–æ–≤ 4 –∏ 7 –∏ –ø–æ–Ω–∏–º–∞–µ—Ç, —á—Ç–æ –ø–∞–∫–µ—Ç—ã 5 –∏ 6 –±—ã–ª–∏ –ø–æ—Ç–µ—Ä—è–Ω—ã. –í –æ—Ç–≤–µ—Ç –æ–Ω –ø–æ–≤—Ç–æ—Ä–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã–µ –ø–∞–∫–µ—Ç—ã.

#### Negative Acknowledgments

Negative Acknowledgments (–Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è) —Ä–µ—à–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—É –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã–º –æ–±—Ä–∞–∑–æ–º. –í–º–µ—Å—Ç–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –æ –ø–æ–ª—É—á–µ–Ω–Ω–æ–º, –ø–æ–ª—É—á–∞—Ç–µ–ª—å —É–≤–µ–¥–æ–º–ª—è–µ—Ç –µ–≥–æ –æ —Ç–æ–º, —á—Ç–æ –±—ã–ª–æ –ø–æ—Ç–µ—Ä—è–Ω–æ. –í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ `NACK` –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –¥–ª—è –ø–∞–∫–µ—Ç–æ–≤ 5 –∏ 6. –û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –∑–Ω–∞–µ—Ç —Ç–æ–ª—å–∫–æ –æ –ø–∞–∫–µ—Ç–∞—Ö, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ.

#### Forward Error Correction

Forward Error Correction (–ø—Ä–µ–≤–µ–Ω—Ç–∏–≤–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫) –ø—ã—Ç–∞–µ—Ç—Å—è —Ä–µ—à–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö –∑–∞–±–ª–∞–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–æ. –û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã—Ö, —á—Ç–æ–±—ã –ø–æ—Ç–µ—Ä—è –ø–∞–∫–µ—Ç–æ–≤ –Ω–µ –ø–æ–≤–ª–∏—è–ª–∞ –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –û–¥–Ω–∏–º –∏–∑ –ø—Ä–∏–º–µ—Ä–æ–≤ `FEC` —è–≤–ª—è–µ—Ç—Å—è [–∫–æ–¥ –†–∏–¥–∞-–°–æ–ª–æ–º–æ–Ω–∞](https://ru.wikipedia.org/wiki/%D0%9A%D0%BE%D0%B4_%D0%A0%D0%B8%D0%B4%D0%B0_%E2%80%94_%D0%A1%D0%BE%D0%BB%D0%BE%D0%BC%D0%BE%D0%BD%D0%B0).

–≠—Ç–æ —É–º–µ–Ω—å—à–∞–µ—Ç –∑–∞–¥–µ—Ä–∂–∫—É/—Å–ª–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–ø—Ä–∞–≤–∫–∏ –∏ –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π. `FEC` —è–≤–ª—è–µ—Ç—Å—è –ø—É—Å—Ç–æ–π —Ç—Ä–∞—Ç–æ–π –ø–æ–ª–æ—Å—ã –ø—Ä–æ–ø—É—Å–∫–∞–Ω–∏—è –≤ —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –ø–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö –≤ —Å–µ—Ç–∏ –±–ª–∏–∑–∫–∞ –∫ –Ω—É–ª—é.

### –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –¥–∂–∏—Ç—Ç–µ—Ä–∞

–î–∂–∏—Ç—Ç–µ—Ä –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–µ—Ç–µ–π. –î–∞–∂–µ –≤–Ω—É—Ç—Ä–∏ `LAN` —É –Ω–∞—Å –º–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤, –æ—Ç–ø—Ä–∞–≤–ª—è—é—â–∏—Ö –¥–∞–Ω–Ω—ã–µ —Å —Ä–∞–∑–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç—å—é. –í—ã –º–æ–∂–µ—Ç–µ –ª–µ–≥–∫–æ —É–≤–∏–¥–µ—Ç—å –¥–∂–∏—Ç—Ç–µ—Ä, "–ø—Ä–æ–ø–∏–Ω–≥–æ–≤–∞–≤" (pinging) –¥—Ä—É–≥–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã `ping`, –∏ –Ω–∞–±–ª—é–¥–∞—è –∑–∞ —Ñ–ª—É–∫—Ç—É–∞—Ü–∏—è–º–∏, –ø—Ä–æ–∏—Å—Ö–æ–¥—è—â–∏–º–∏ –≤–æ –≤—Ä–µ–º—è –ø—É—Ç–∏ —Ç—É–¥–∞ –∏ –æ–±—Ä–∞—Ç–Ω–æ (`rtt`).

–î–ª—è –ø—Ä–µ–æ–¥–æ–ª–µ–Ω–∏—è –¥–∂–∏—Ç—Ç–µ—Ä–∞ –∫–ª–∏–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `JitterBuffer`. –û–Ω –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω—É—é —Å–∫–æ—Ä–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏ –ø–∞–∫–µ—Ç–æ–≤. –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–æ–º —è–≤–ª—è–µ—Ç—Å—è –∑–∞–¥–µ—Ä–∂–∫–∞, –∫–æ—Ç–æ—Ä—É—é `JitterBuffer` –¥–æ–±–∞–≤–ª—è–µ—Ç –∫ –ø–∞–∫–µ—Ç–∞–º, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–±—ã–ª–∏ —Å–ª–∏—à–∫–æ–º —Ä–∞–Ω–æ. –ê –µ–≥–æ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ –≤ —Ç–æ–º,  —á—Ç–æ –æ–ø–æ–∑–¥–∞–≤—à–∏–µ –ø–∞–∫–µ—Ç—ã –Ω–µ –≤—ã–∑—ã–≤–∞—é—Ç –¥–∂–∏—Ç—Ç–µ—Ä. –ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ –≤ —Ç–µ—á–µ–Ω–∏–µ –∑–≤–æ–Ω–∫–∞ –≤—ã –≤–∏–¥–∏—Ç–µ —Ç–∞–∫–æ–µ –≤—Ä–µ–º—è –ø—Ä–∏–±—ã—Ç–∏—è –ø–∞–∫–µ—Ç–æ–≤:

```ini
* time=1.46 ms
* time=1.93 ms
* time=1.57 ms
* time=1.55 ms
* time=1.54 ms
* time=1.72 ms
* time=1.45 ms
* time=1.73 ms
* time=1.80 ms
```

–í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ —Ö–æ—Ä–æ—à–∏–º –≤—ã–±–æ—Ä–æ–º –±—É–¥–µ—Ç `1,8 –º—Å`. –ü–∞–∫–µ—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –ø—Ä–∏–±—ã–≤–∞—Ç—å –ø–æ–∑–¥–Ω–µ–µ, —Å–º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞—à–µ –æ–∫–Ω–æ –∑–∞–¥–µ—Ä–∂–∫–∏ –∏–ª–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –∑–∞–∑–æ—Ä (window of latency). –ü–∞–∫–µ—Ç—ã, –ø—Ä–∏–±—ã–≤–∞—é—â–∏–µ —Ä–∞–Ω–æ, –±—É–¥—É—Ç –Ω–µ–º–Ω–æ–≥–æ –∑–∞–¥–µ—Ä–∂–∞–Ω—ã –∏ –∑–∞—Ç–µ–º –ø–æ–º–µ—â–µ–Ω—ã –≤ –æ–∫–Ω–æ –≤–º–µ—Å—Ç–µ —Å –æ–ø–æ–∑–¥–∞–≤—à–∏–º–∏ –ø–∞–∫–µ—Ç–∞–º–∏. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –º—ã –∏–∑–±–∞–≤–ª—è–µ–º—Å—è –æ—Ç –¥—Ä–æ–∂–∞–Ω–∏—è –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ–º –ø–ª–∞–≤–Ω—É—é –¥–æ—Å—Ç–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π –∫–ª–∏–µ–Ω—Ç—É.

__–û–ø–µ—Ä–∞—Ü–∏—è JitterBuffer__

<img src="https://habrastorage.org/webt/w4/7x/4u/w47x4uy--zce307iuqsmfp1u97s.png" />
<br />

–ö–∞–∂–¥—ã–π –ø–∞–∫–µ—Ç –ø–æ–º–µ—â–∞–µ—Ç—Å—è –≤ –±—É—Ñ–µ—Ä –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏. –ö–æ–≥–¥–∞ –ø–∞–∫–µ—Ç–æ–≤ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è —Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ —Ñ—Ä–µ–π–º–∞ (–∫–∞–¥—Ä–∞), —Ñ—Ä–µ–π–º –≤—ã—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è (release) –∏–∑ –±—É—Ñ–µ—Ä–∞ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫—É (decoding). –î–µ–∫–æ–¥–µ—Ä, –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å, —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤—ã–≤–∞–µ—Ç –∏ –æ—Ç—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç –≤–∏–¥–µ–æ—Ñ—Ä–µ–π–º –Ω–∞ —ç–∫—Ä–∞–Ω–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ü–æ—Å–∫–æ–ª—å–∫—É –±—É—Ñ–µ—Ä –∏–º–µ–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—É—é –≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å, –ø–∞–∫–µ—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è —Ç–∞–º —Å–ª–∏—à–∫–æ–º –¥–æ–ª–≥–æ, –æ—Ç–∫–ª–æ–Ω—è—é—Ç—Å—è (discarded).

`jitterBufferDelay` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ö–æ—Ä–æ—à–∏–µ –¥–∞–Ω–Ω—ã–µ –æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–µ—Ç–∏ –∏ –µ–µ –≤–ª–∏—è–Ω–∏–∏ –Ω–∞ –ø–ª–∞–≤–Ω–æ—Å—Ç—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è. `jitterBufferDelay` —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é [`WebRTC statictics API`](https://www.w3.org/TR/webrtc-stats/#dom-rtcinboundrtpstreamstats-jitterbufferdelay), –æ—Ç–Ω–æ—Å—è—â–µ–π—Å—è –∫ –≤—Ö–æ–¥—è—â–µ–º—É –ø–æ—Ç–æ–∫—É –ø–æ–ª—É—á–∞—Ç–µ–ª—è. –ó–∞–¥–µ—Ä–∂–∫–∞ (delay) –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≤—Ä–µ–º—è, –∫–æ—Ç–æ—Ä–æ–µ –≤–∏–¥–µ–æ—Ñ—Ä–µ–π–º—ã –ø—Ä–æ–≤–æ–¥—è—Ç –≤ –±—É—Ñ–µ—Ä–µ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –¥–µ–∫–æ–¥–µ—Ä—É. –ë–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –Ω–∞—à–∞ —Å–µ—Ç—å —Å–∏–ª—å–Ω–æ –Ω–∞–≥—Ä—É–∂–µ–Ω–∞.

### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏

–ü–µ—Ä–µ–¥ —Ä–µ—à–µ–Ω–∏–µ–º –ø—Ä–æ–±–ª–µ–º—ã –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏ —Å–µ—Ç–∏, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —ç—Ç—É –ø–µ—Ä–µ–≥—Ä—É–∑–∫—É –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å. –î–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è congestion controller (–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏). –≠—Ç–æ —Å–ª–æ–∂–Ω–∞—è –≤–µ—â—å, –∫–æ—Ç–æ—Ä–∞—è –≤ –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è –∞–∫—Ç–∏–≤–Ω–æ —Ä–∞–∑–≤–∏–≤–∞–µ—Ç—Å—è. –í—Å–µ –≤—Ä–µ–º—è –ø—É–±–ª–∏–∫—É—é—Ç—Å—è –∏ —Ç–µ—Å—Ç–∏—Ä—É—é—Ç—Å—è –Ω–æ–≤—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã. –ù–∞ —Å–∞–º–æ–º –≤—ã—Å–æ–∫–æ–º —É—Ä–æ–≤–Ω–µ –≤—Å–µ –æ–Ω–∏ –¥–µ–ª–∞—é—Ç –æ–¥–Ω–æ –∏ —Ç–æ–∂–µ. –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –æ—Ü–µ–Ω–∫—É –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –Ω–∞–ø—Ä–∏–º–µ—Ä:

- –ø–æ—Ç–µ—Ä—è –ø–∞–∫–µ—Ç–æ–≤ - –ø–æ—Ç–µ—Ä—è –ø–∞–∫–µ—Ç–æ–≤ –≤ –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Å–µ—Ç—è—Ö —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è;
- –¥–∂–∏—Ç—Ç–µ—Ä - –ø–æ –º–µ—Ä–µ —É–≤–µ–ª–∏—á–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ –≤—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏ –ø–∞–∫–µ—Ç–æ–≤ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≤—Å–µ –±–æ–ª–µ–µ –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã–º;
- –≤—Ä–µ–º—è —Ç—É–¥–∞ –∏ –æ–±—Ä–∞—Ç–Ω–æ - –≤—Ä–µ–º—è —Ç—É–¥–∞ –∏ –æ–±—Ä–∞—Ç–Ω–æ –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è;
- —è–≤–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–µ (explicit congestion notification) - –Ω–æ–≤–µ–π—à–∏–µ —Å–µ—Ç–∏ –º–æ–≥—É—Ç –ø–æ–º–µ—á–∞—Ç—å –ø–∞–∫–µ—Ç—ã –∫–∞–∫ –Ω–∞—Ö–æ–¥—è—â–∏–µ—Å—è –ø–æ–¥ —É–≥—Ä–æ–∑–æ–π –ø–æ—Ç–µ—Ä–∏ –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏.

–í –ø—Ä–æ—Ü–µ—Å—Å–µ –∑–≤–æ–Ω–∫–∞ —ç—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –≤—Å–µ –≤—Ä–µ–º—è –∏–∑–º–µ—Ä—è—Ç—å—Å—è. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–µ—Ç–∏ –º–æ–∂–µ—Ç —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å—Å—è –∏ —É–º–µ–Ω—å—à–∞—Ç—å—Å—è, —Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, –±—É–¥–µ—Ç –º–µ–Ω—è—Ç—å—Å—è –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å.

### –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏

–ü–æ—Å–ª–µ –∏–∑–º–µ—Ä–µ–Ω–∏—è –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –Ω–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ç–æ, —á—Ç–æ –º—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–≤–∏—Å—è—Ç –æ—Ç —Ç–∏–ø–∞ –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

#### –°–Ω–∏–∂–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö

–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö - –ø–µ—Ä–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏. –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –Ω–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ä–∞—Å—á–µ—Ç—ã, –∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç—å.

–í –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏–º–µ–Ω–Ω–æ —ç—Ç–æ—Ç —Å–ø–æ—Å–æ–±. –í —Å–ª—É—á–∞–µ —Å `TCP` —ç—Ç–æ –±–µ—Ä–µ—Ç –Ω–∞ —Å–µ–±—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞, –ø—Ä–æ—Ü–µ—Å—Å —è–≤–ª—è–µ—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–º –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤.

#### –£–º–µ–Ω—å—à–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö

–í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–ª—É—á–∞—è—Ö –º—ã –º–æ–∂–µ–º –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –º–µ–Ω—å—à–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–ª—è —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–∏—è –ª–∏–º–∏—Ç–æ–≤. –í `WebRTC` –º—ã –Ω–µ –º–æ–∂–µ–º —Å–Ω–∏–∂–∞—Ç—å —Å–∫–æ—Ä–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö.

–ï—Å–ª–∏ –Ω–∞–º –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏, –º—ã –º–æ–∂–µ–º, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–Ω–∏–∑–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º–æ–≥–æ –≤–∏–¥–µ–æ. –î–ª—è —ç—Ç–æ–≥–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ç–µ—Å–Ω–∞—è —Å–≤—è–∑—å –º–µ–∂–¥—É –≤–∏–¥–µ–æ–∫–æ–¥–µ—Ä–æ–º –∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–º –ø–µ—Ä–µ–≥—Ä—É–∑–æ–∫.

## –û–±–º–µ–Ω –º–µ–¥–∏–∞–¥–∞–Ω–Ω—ã–º–∏

`WebRTC` –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∏ –ø–æ–ª—É—á–∞—Ç—å –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞—É–¥–∏–æ –∏ –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫–æ–≤. –ú—ã –º–æ–∂–µ–º –¥–æ–±–∞–≤–ª—è—Ç—å –∏ —É–¥–∞–ª—è—Ç—å —ç—Ç–∏ –ø–æ—Ç–æ–∫–∏ –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è –≤ —Ç–µ—á–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏. –ü–æ—Ç–æ–∫–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–º–∏ –∏–ª–∏ –æ–±—ä–µ–¥–∏–Ω—è—Ç—å—Å—è –≤ –æ–¥–∏–Ω. –ú—ã –º–æ–∂–µ–º –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –≤–∏–¥–µ–æ –∑–∞—Ö–≤–∞—Ç–∞ —ç–∫—Ä–∞–Ω–∞ –∏ –¥–æ–±–∞–≤–ª—è—Ç—å –∫ –Ω–µ–º—É –∞—É–¥–∏–æ –∏ –≤–∏–¥–µ–æ –∏–∑ –≤–µ–±–∫–∞–º–µ—Ä—ã.

–ü—Ä–æ—Ç–æ–∫–æ–ª `WebRTC` –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–¥–µ–∫–æ–≤. –õ–µ–∂–∞—â–∏–π –≤ –µ–≥–æ –æ—Å–Ω–æ–≤–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ, –¥–∞–∂–µ —Ç–æ, —á–µ–≥–æ –µ—â–µ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç. –û–¥–Ω–∞–∫–æ –∞–≥–µ–Ω—Ç, —Å –∫–æ—Ç–æ—Ä—ã–º –º—ã –æ–±—â–∞–µ–º—Å—è, –º–æ–∂–µ—Ç –Ω–µ –∏–º–µ—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è –∑–≤–æ–Ω–∫–∞.

`WebRTC` —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤ –¥–∏–Ω–∞–º–∏—á–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö —Å–µ—Ç–µ–π. –í–æ –≤—Ä–µ–º—è –∑–≤–æ–Ω–∫–∞ –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –º–æ–∂–µ—Ç —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å—Å—è –∏ —É–º–µ–Ω—å—à–∞—Ç—å—Å—è. –ú—ã –º–æ–∂–µ–º –≤–Ω–µ–∑–∞–ø–Ω–æ —Å—Ç–æ–ª–∫–Ω—É—Ç—å—Å—è —Å —Å–∏–ª—å–Ω–æ–π –ø–æ—Ç–µ—Ä–µ–π –ø–∞–∫–µ—Ç–æ–≤. –ü—Ä–æ—Ç–æ–∫–æ–ª –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è —Ä–µ—à–µ–Ω–∏—è —ç—Ç–æ–π –ø—Ä–æ–±–ª–µ–º—ã. `WebRTC` —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —É—Å–ª–æ–≤–∏–π —Å–µ—Ç–∏ –∏ —Å—Ç–∞—Ä–∞–µ—Ç—Å—è –æ–±–µ—Å–ø–µ—á–∏—Ç—å –Ω–∞–∏–ª—É—á—à–∏–π –æ–ø—ã—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å —É—á–µ—Ç–æ–º –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤.

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

`WebRTC` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 2 –ø—Ä–æ—Ç–æ–∫–æ–ª–∞, `RTP` –∏ `RTCP`, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –≤ [RFC 1889](https://tools.ietf.org/html/rfc1889).

`RTP` - —ç—Ç–æ –ø—Ä–æ—Ç–æ–∫–æ–ª –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –º–µ–¥–∏–∞–¥–∞–Ω–Ω—ã—Ö. –û–Ω –±—ã–ª —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –≤–∏–¥–µ–æ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏. –û–Ω –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –Ω–∏–∫–∞–∫–∏—Ö –ø—Ä–∞–≤–∏–ª –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –∑–∞–¥–µ—Ä–∂–∫–∏ –∏–ª–∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –¥–æ—Å—Ç–∞–≤–∫–∏ –ø–∞–∫–µ—Ç–æ–≤, –Ω–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –∏—Ö –Ω–∞—Å—Ç—Ä–æ–π–∫–∏. `RTP` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ—Ç–æ–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ –æ–¥–Ω–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ. –û–Ω —Ç–∞–∫–∂–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∏ –ø–æ—Ä—è–¥–∫–µ –ø–∞–∫–µ—Ç–æ–≤, –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –º–µ–¥–∏–∞–∫–æ–Ω–≤–µ–π–µ—Ä–∞ (media pipeline).

`RTCP` - —ç—Ç–æ –ø—Ä–æ—Ç–æ–∫–æ–ª, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –æ –∑–≤–æ–Ω–∫–µ. –§–æ—Ä–º–∞—Ç –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ —è–≤–ª—è–µ—Ç—Å—è –æ—á–µ–Ω—å –≥–∏–±–∫–∏–º –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –ª—é–±—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ. –≠—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–±–æ—Ä–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –æ –∑–≤–æ–Ω–∫–µ. –¢–∞–∫–∂–µ —ç—Ç–æ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ—Ç–µ—Ä–∏ –ø–∞–∫–µ—Ç–æ–≤ –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–æ–Ω—Ç—Ä–æ–ª—è –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏. –û–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—É—é –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—é, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–¥–∞–ø—Ç–∏—Ä—É—é—â—É—é—Å—è –∫ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –º–µ–Ω—è—é—â–∏–º—Å—è —Å–µ—Ç–µ–≤—ã–º —É—Å–ª–æ–≤–∏—è–º.

### –ó–∞–¥–µ—Ä–∂–∫–∞ –ø—Ä–æ—Ç–∏–≤ –∫–∞—á–µ—Å—Ç–≤–∞

–û–±–º–µ–Ω –º–µ–¥–∏–∞–¥–∞–Ω–Ω—ã–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –≤—Å–µ–≥–¥–∞ —Å–æ–ø—Ä—è–∂–µ–Ω —Å –≤—ã–±–æ—Ä–æ–º –º–µ–∂–¥—É –∑–∞–¥–µ—Ä–∂–∫–æ–π –∏ –∫–∞—á–µ—Å—Ç–≤–æ–º. –ß–µ–º –±–æ–ª—å—à—É—é –∑–∞–¥–µ—Ä–∂–∫—É –º—ã –º–æ–∂–µ–º —Å–µ–±–µ –ø–æ–∑–≤–æ–ª–∏—Ç—å, —Ç–µ–º –≤—ã—à–µ –±—É–¥–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ –º–µ–¥–∏–∞.

#### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –º–∏—Ä–∞

–≠—Ç–æ –æ–±—É—Å–ª–æ–≤–ª–µ–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –º–∏—Ä–∞ - —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏ —Å–µ—Ç–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É—á–∏—Ç—ã–≤–∞—Ç—å.

#### –í–∏–¥–µ–æ —è–≤–ª—è–µ—Ç—Å—è —Å–ª–æ–∂–Ω—ã–º

–ü–µ—Ä–µ–¥–∞—á–∞ –≤–∏–¥–µ–æ - —Å–ª–æ–∂–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å. –î–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è 30-–º–∏–Ω—É—Ç–Ω–æ–≥–æ –Ω–µ—Å–∂–∞—Ç–æ–≥–æ 720 8-–±–∏—Ç–Ω–æ–≥–æ –≤–∏–¥–µ–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è –æ–∫–æ–ª–æ 110 –ì–±. –í —Ç–∞–∫–∏—Ö —É—Å–ª–æ–≤–∏—è—Ö –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è —Å —á–µ—Ç—ã—Ä—å–º—è —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ —è–≤–ª—è–µ—Ç—Å—è –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ–π. –°–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, –Ω–∞–º –Ω—É–∂–µ–Ω –∫–∞–∫–æ–π-—Ç–æ —Å–ø–æ—Å–æ–± —É–º–µ–Ω—å—à–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –≤–∏–¥–µ–æ –∏ –æ—Ç–≤–µ—Ç–æ–º —è–≤–ª—è–µ—Ç—Å—è —Å–∂–∞—Ç–∏–µ (compression). –û–¥–Ω–∞–∫–æ, —ç—Ç–æ –∏–º–µ–µ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏.

### Video 101

–ú—ã –Ω–µ –±—É–¥–µ–º —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Å–∂–∞—Ç–∏–µ –≤–∏–¥–µ–æ –≤ –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç—è—Ö. –ú—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –µ–≥–æ –≤ —Å—Ç–µ–ø–µ–Ω–∏, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–π –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è —Ç–æ–≥–æ, –ø–æ—á–µ–º—É `RTP` —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω —Ç–∞–∫, –∫–∞–∫ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω. –°–∂–∞—Ç–∏–µ –≤–∏–¥–µ–æ - —ç—Ç–æ –µ–≥–æ –∫–æ–¥–∏—Ä–æ–≤–∫–∞, –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ –¥—Ä—É–≥–æ–π —Ñ–æ—Ä–º–∞—Ç, –∫–æ—Ç–æ—Ä—ã–π —Ç—Ä–µ–±—É–µ—Ç –º–µ–Ω—å—à–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –±–∏—Ç–æ–≤ –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ–≥–æ –≤–∏–¥–µ–æ.

#### –°–∂–∞—Ç–∏–µ —Å –ø–æ—Ç–µ—Ä–µ–π –∏ –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –∫–∞—á–µ—Å—Ç–≤–∞

–ú—ã –º–æ–∂–µ–º –∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å –≤–∏–¥–µ–æ –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ (lossless compression) –∏ —Å –ø–æ—Ç–µ—Ä–µ–π (lossy compresion) –∫–∞—á–µ—Å—Ç–≤–∞. –ü–æ—Å–∫–æ–ª—å–∫—É –∫–æ–¥–∏—Ä–æ–≤–∫–∞ –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ —Ç—Ä–µ–±—É–µ—Ç –±–æ–ª—å—à–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –ø–∏—Ä—É, —É–≤–µ–ª–∏—á–∏–≤–∞—è –∑–∞–¥–µ—Ä–∂–∫—É –∏ –ø–æ—Ç–µ—Ä—é –ø–∞–∫–µ—Ç–æ–≤, `RTP`, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, –ø—Ä–∏–º–µ–Ω—è–µ—Ç –∫–æ–¥–∏—Ä–æ–≤–∫—É —Å –ø–æ—Ç–µ—Ä–µ–π, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ç–æ, —á—Ç–æ —ç—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —Å–Ω–∏–∂–µ–Ω–∏—é –∫–∞—á–µ—Å—Ç–≤–∞ –≤–∏–¥–µ–æ.

#### –í–Ω—É—Ç—Ä–∏ –∏ –º–µ–∂–∫–∞–¥—Ä–æ–≤–æ–µ —Å–∂–∞—Ç–∏–µ

–°–∂–∞—Ç–∏–µ –≤–∏–¥–µ–æ –¥–µ–ª–∏—Ç—Å—è –Ω–∞ 2 –≤–∏–¥–∞. –ü–µ—Ä–≤—ã–π - —ç—Ç–æ —Å–∂–∞—Ç–∏–µ –≤–Ω—É—Ç—Ä–∏ –∫–∞–¥—Ä–∞ (–∏–ª–∏ –ø—Ä–æ—Å—Ç–æ —Å–∂–∞—Ç–∏–µ –∫–∞–¥—Ä–∞, intra-frame compression). –¢–∞–∫–æ–µ —Å–∂–∞—Ç–∏–µ —É–º–µ–Ω—å—à–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∏—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è –µ–¥–∏–Ω–∏—á–Ω–æ–≥–æ –≤–∏–¥–µ–æ—Ñ—Ä–µ–π–º–∞. –ê–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–∂–∞—Ç–∏—è –Ω–µ–ø–æ–¥–≤–∏–∂–Ω—ã—Ö (still) –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, –Ω–∞–ø—Ä–∏–º–µ—Ä, `JPEG`.

–í—Ç–æ—Ä–æ–π —Ç–∏–ø - —ç—Ç–æ –º–µ–∂–∫–∞–¥—Ä–æ–≤–æ–µ —Å–∂–∞—Ç–∏–µ (inter-frame compression). –ü–æ—Å–∫–æ–ª—å–∫—É –≤–∏–¥–µ–æ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–∫–∞–¥—Ä–æ–≤, —Ñ—Ä–µ–π–º–æ–≤), –º—ã –∏—â–µ–º —Å–ø–æ—Å–æ–±—ã –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–≤–∞–∂–¥—ã.

#### –¢–∏–ø—ã –º–µ–∂–∫–∞–¥—Ä–æ–≤–æ–≥–æ —Å–∂–∞—Ç–∏—è

–ú–µ–∂–∫–∞–¥—Ä–æ–≤–æ–µ —Å–∂–∞—Ç–∏–µ –¥–µ–ª–∏—Ç—Å—è –Ω–∞ 3 —Ç–∏–ø–∞:

- __I-Frame__ - –ø–æ–ª–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –º–æ–∂–µ—Ç –∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤–æ —á—Ç–æ —É–≥–æ–¥–Ω–æ;
- __P-Frame__ - —á–∞—Å—Ç–∏—á–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, —Å–æ–¥–µ—Ä–∂–∞—â–µ–µ —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è;
- __B-Frame__ - —á–∞—Å—Ç–∏—á–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ - —Å–æ–≤–º–µ—â–µ–Ω–∏–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –∏ –±—É–¥—É—â–µ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.

–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —ç—Ç–∏—Ö —Ç–∏–ø–æ–≤:

<img src="https://habrastorage.org/webt/_p/ap/ca/_papcarjstymqzuquzwolj2lmzi.png" />
<br />

#### –í–∏–¥–µ–æ —è–≤–ª—è–µ—Ç—Å—è –¥–µ–ª–∏–∫–∞—Ç–Ω—ã–º

–°–∂–∞—Ç–∏–µ –≤–∏–¥–µ–æ –æ—á–µ–Ω—å —Å–∏–ª—å–Ω–æ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è, —á—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–ª–æ–∂–Ω—ã–º –µ–≥–æ –ø–µ—Ä–µ–¥–∞—á—É –ø–æ —Å–µ—Ç–∏. –ß—Ç–æ —Å–ª—É—á–∏—Ç—Å—è, –µ—Å–ª–∏ –º—ã –ø–æ—Ç–µ—Ä—è–µ–º —á–∞—Å—Ç—å `I-Frame`? –û—Ç–∫—É–¥–∞ `P-Frame` –∑–Ω–∞–µ—Ç, —á—Ç–æ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å? –° —Ä–æ—Å—Ç–æ–º —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ —Å–∂–∞—Ç–∏—è, –≤–æ–ø—Ä–æ—Å–æ–≤ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≤—Å–µ –±–æ–ª—å—à–µ –∏ –±–æ–ª—å—à–µ. –ö —Å—á–∞—Å—Ç—å—é, `RTP` –∏ `RTCP` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç —Ä–µ—à–µ–Ω–∏–µ —ç—Ç–∏—Ö –ø—Ä–æ–±–ª–µ–º.

### RTP

#### –§–æ—Ä–º–∞—Ç –ø–∞–∫–µ—Ç–∞

–ö–∞–∂–¥—ã–π –ø–∞–∫–µ—Ç `RTP` –∏–º–µ–µ—Ç —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:

```
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|V=2|P|X|  CC   |M|     PT      |       Sequence Number         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                           Timestamp                           |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|           Synchronization Source (SSRC) identifier            |
+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+
|            Contributing Source (CSRC) identifiers             |
|                             ....                              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                            Payload                            |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
```

__Version (V)__

`Version` (–≤–µ—Ä—Å–∏—è) –≤—Å–µ–≥–¥–∞ –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ `2`.

__Padding (P)__

`Padding` (–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ) - –ª–æ–≥–∏—á–µ—Å–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–µ–µ, –∏–º–µ–µ—Ç –ª–∏ –ø–æ–ª–µ–∑–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ.

–ü–æ—Å–ª–µ–¥–Ω–∏–π –±–∞–π—Ç –ø–æ–ª–µ–∑–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–π—Ç–æ–≤ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è.

__Extension (X)__

–ï—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –∑–∞–≥–æ–ª–æ–≤–æ–∫ `RTP` –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è. –ú—ã –ø–æ–≥–æ–≤–æ—Ä–∏–º –æ–± —ç—Ç–æ–º –ø–æ–∑–∂–µ.

__CSRC count (CC)__

–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ `CSRC`, —Å–ª–µ–¥—É—é—â–∏—Ö –ø–æ—Å–ª–µ `SSRC`, –Ω–æ –ø–µ—Ä–µ–¥ –ø–æ–ª–µ–∑–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π.

__Marker (M)__

–ë–∏—Ç –º–∞—Ä–∫–µ—Ä–∞ –Ω–µ –∏–º–µ–µ—Ç –ø—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –∏ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∫–∞–∫ —É–≥–æ–¥–Ω–æ.

–í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–ª—É—á–∞—è—Ö –æ–Ω —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —á—Ç–æ-–Ω–∏–±—É–¥—å –≥–æ–≤–æ—Ä–∏—Ç. –¢–∞–∫–∂–µ –æ–Ω —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∏–Ω–¥–∏–∫–∞—Ü–∏–∏ –∫–ª—é—á–µ–≤–æ–≥–æ –∫–∞–¥—Ä–∞ (keyframe).

__Payload Type (PT)__

`Payload Type` (—Ç–∏–ø –ø–æ–ª–µ–∑–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏) - —ç—Ç–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–æ–¥–µ–∫–∞, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–∞–Ω–Ω—ã–º –ø–∞–∫–µ—Ç–æ–º.

`Payload Type` —è–≤–ª—è–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º. [`VP8`](https://ru.wikipedia.org/wiki/VP8) –≤ –æ–¥–Ω–æ–º –∑–≤–æ–Ω–∫–µ –º–æ–∂–µ—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –æ—Ç `VP8` –≤ –¥—Ä—É–≥–æ–º –∑–≤–æ–Ω–∫–µ. –ò–Ω–∏—Ü–∏–∞—Ç–æ—Ä –∑–≤–æ–Ω–∫–∞ (offerer) –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–≤—è–∑—å –º–µ–∂–¥—É `Payload Types` –∏ –∫–æ–¥–µ–∫–∞–º–∏ –≤ `Session Description` (–æ–ø–∏—Å–∞–Ω–∏–∏ —Å–µ—Å—Å–∏–∏).

__Sequence Number__

`Sequence Number` (–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–Ω–∏—è –ø–∞–∫–µ—Ç–æ–≤ –≤ –ø–æ—Ç–æ–∫–µ. –ü—Ä–∏ –∫–∞–∂–¥–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ –ø–∞–∫–µ—Ç–∞ `Sequence Number` —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –µ–¥–∏–Ω–∏—Ü—É.

`RTP` —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —á—Ç–æ –ø–æ–ª—É—á–∞—Ç–µ–ª—å –∏–º–µ–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–≤–æ–µ–≤—Ä–µ–º–µ–Ω–Ω–æ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—Ç—å –ø–æ—Ç–µ—Ä—é –ø–∞–∫–µ—Ç–æ–≤.

__Timestamp__

–ú–æ–º–µ–Ω—Ç –≤—ã–±–æ—Ä–∫–∏ (sampling instant) –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –ø–∞–∫–µ—Ç–∞. –≠—Ç–æ –Ω–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —á–∞—Å—ã, –∞ –≤—Ä–µ–º—è, –ø—Ä–æ—à–µ–¥—à–µ–µ —Å –Ω–∞—á–∞–ª–∞ –ø–µ—Ä–µ–¥–∞—á–∏ –ø–æ—Ç–æ–∫–∞. –ù–µ—Å–∫–æ–ª—å–∫–æ –ø–∞–∫–µ—Ç–æ–≤ `RTP` –º–æ–≥—É—Ç –∏–º–µ—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π `Timestamp`, –µ—Å–ª–∏ –æ–Ω–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, —è–≤–ª—è—é—Ç—Å—è —á–∞—Å—Ç—å—é –æ–¥–Ω–æ–≥–æ —Ñ—Ä–µ–π–º–∞.

__Synchronization Source (SSRC)__

`SSRC` (–∏—Å—Ç–æ—á–Ω–∏–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏) - —ç—Ç–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ—Ç–æ–∫–∞. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ–¥–∏–∞–ø–æ—Ç–æ–∫–æ–≤ —á–µ—Ä–µ–∑ –æ–¥–Ω–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ `RTP`.

__Contributing Source (CSRC)__

`CSRC` (–≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫) –æ–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ —Ä–µ—á–∏. –°–∫–∞–∂–µ–º, –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –º—ã –æ–±—ä–µ–¥–∏–Ω–∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∞—É–¥–∏–æ–ø–æ—Ç–æ–∫–æ–≤ –≤ –æ–¥–∏–Ω `RTP-–ø–æ—Ç–æ–∫`. –î–∞–ª–µ–µ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º —ç—Ç–æ –ø–æ–ª–µ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–æ–≥–æ, —á—Ç–æ "–≤—Ö–æ–¥—è—â–∏–µ –ø–æ—Ç–æ–∫–∏ A –∏ C –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç —Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞—é—Ç –º–µ–∂–¥—É —Å–æ–±–æ–π".

__Payload__

`Payload` - —ç—Ç–æ –ø–æ–ª–µ–∑–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞, —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ.

### RTCP

#### –§–æ—Ä–º–∞—Ç –ø–∞–∫–µ—Ç–∞

–ö–∞–∂–¥—ã–π –ø–∞–∫–µ—Ç `RTCP` –∏–º–µ–µ—Ç —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:

```
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|V=2|P|    RC   |       PT      |             length            |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                            Payload                            |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
```

__Version (V)__

`Version` –≤—Å–µ–≥–¥–∞ –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ `2`.

__Padding (P)__

–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ `RTP`.

__Reception Report Count (RC)__

–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç—á–µ—Ç–æ–≤ (reports) –≤ –¥–∞–Ω–Ω–æ–º –ø–∞–∫–µ—Ç–µ. –û–¥–∏–Ω –ø–∞–∫–µ—Ç `RTCP` –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–æ–±—ã—Ç–∏–π (events).

__Packet Type (PT)__

–£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ç–∏–ø–∞ –ø–∞–∫–µ—Ç–∞ `RTCP`. –ê–≥–µ–Ω—Ç `WebRTC` –Ω–µ –æ–±—è–∑–∞–Ω –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –≤—Å–µ —Ç–∏–ø—ã, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –∞–≥–µ–Ω—Ç–∞–º–∏ –º–æ–∂–µ—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è. –ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ –º–æ–∂–Ω–æ –≤—Å—Ç—Ä–µ—Ç–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ —Ç–∏–ø—ã:

- `192` - –ø–æ–ª–Ω—ã–π –∑–∞–ø—Ä–æ—Å INTRA-frame (`FIR`);
- `193` - –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è (`NACK`);
- `200` - –æ—Ç—á–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è (sender report);
- `201` - –æ—Ç—á–µ—Ç –ø–æ–ª—É—á–∞—Ç–µ–ª—è (receiver report);
- `205` - –æ–±—â–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å (feedback) `RTP`;
- `206` - –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –ø–æ–ª–µ–∑–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏.

–ó–Ω–∞—á–∏–º–æ—Å—Ç—å –∫–∞–∂–¥–æ–≥–æ –∏–∑ —ç—Ç–∏—Ö —Ç–∏–ø–æ–≤ –ø–∞–∫–µ—Ç–æ–≤ –±—É–¥–µ—Ç –æ–ø–∏—Å–∞–Ω–∞ –Ω–∏–∂–µ.

#### –ü–æ–ª–Ω—ã–π –∑–∞–ø—Ä–æ—Å INTRA-frame (FIR) –∏ Picture Loss Indication (PLI)

–°–æ–æ–±—â–µ–Ω–∏—è `FIR` –∏ `PLI` (–æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø–æ—Ç–µ—Ä–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è) —Å–ª—É–∂–∞—Ç –æ–¥–Ω–æ–π —Ü–µ–ª–∏. –≠—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –∑–∞–ø—Ä–∞—à–∏–≤–∞—é—Ç —É –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –ø–æ–ª–Ω—ã–π –∫–ª—é—á–µ–≤–æ–π –∫–∞–¥—Ä. `PLI` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –¥–µ–∫–æ–¥–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç —á–∞—Å—Ç–∏—á–Ω—ã–µ —Ñ—Ä–µ–π–º—ã –∏ –Ω–µ –º–æ–∂–µ—Ç –∏—Ö –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å. –≠—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–æ–∏–∑–æ–π—Ç–∏ –∏–∑-–∑–∞ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –æ—à–∏–±–∫–∏ –¥–µ–∫–æ–¥–µ—Ä–∞.

–°–æ–≥–ª–∞—Å–Ω–æ [RFC 5104](https://datatracker.ietf.org/doc/html/rfc5104#section-4.3.1.2) `FIR` –Ω–µ –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ –ø–∞–∫–µ—Ç–æ–≤ –∏–ª–∏ —Ñ—Ä–µ–π–º–æ–≤. –≠—Ç–æ –∑–∞–¥–∞—á–∞ `PLI`. `FIR` –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –∫–ª—é—á–µ–≤–æ–π –∫–∞–¥—Ä, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ —Å–µ—Å—Å–∏–∏ –Ω–æ–≤–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞. –î–ª—è –Ω–∞—á–∞–ª–∞ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –≤–∏–¥–µ–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∫–ª—é—á–µ–≤–æ–π –∫–∞–¥—Ä, –¥–µ–∫–æ–¥–µ—Ä –±—É–¥–µ—Ç –æ—Ç–∫–ª–æ–Ω—è—Ç—å –∫–∞–¥—Ä—ã –¥–æ –µ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏—è.

–ü–æ–ª—É—á–∞—Ç–µ–ª—å –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø–æ–ª–Ω—ã–π –∫–ª—é—á–µ–≤–æ–π –∫–∞–¥—Ä —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è, —ç—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É –º–µ–∂–¥—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –∏ –ø–æ—è–≤–ª–µ–Ω–∏–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞ —ç–∫—Ä–∞–Ω–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

–ü–∞–∫–µ—Ç—ã `PLI` —è–≤–ª—è—é—Ç—Å—è —á–∞—Å—Ç—å—é —Å–æ–æ–±—â–µ–Ω–∏–π —Å –æ—Ç–≤–µ—Ç–Ω–æ–π —Ä–µ–∞–∫—Ü–∏–µ–π –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—É—é –ø–æ–ª–µ–∑–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É.

–ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ –ü–û, –∫–æ—Ç–æ—Ä–æ–µ —É–º–µ–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø–∞–∫–µ—Ç–∞–º–∏ `PLI` –∏ `FIR`, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –æ–±–æ–∏—Ö —Å–ª—É—á–∞—è—Ö. –û–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–∏–≥–Ω–∞–ª –∫–æ–¥–µ—Ä—É –æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –ø–æ–ª–Ω–æ–≥–æ –∫–ª—é—á–µ–≤–æ–≥–æ –∫–∞–¥—Ä–∞.

#### –ù–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

`NACK` "–ø—Ä–æ—Å–∏—Ç" –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É –ø–∞–∫–µ—Ç–∞ `RTP`. –û–±—ã—á–Ω–æ, —ç—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å –ø–æ—Ç–µ—Ä–µ–π –ø–∞–∫–µ—Ç–∞, –Ω–æ —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–≤—è–∑–∞–Ω–æ —Å –µ–≥–æ –∑–∞–¥–µ—Ä–∂–∫–æ–π.

`NACK` —è–≤–ª—è–µ—Ç—Å—è –≥–æ—Ä–∞–∑–¥–æ –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–º —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Ä–µ—à–µ–Ω–∏–µ–º, —á–µ–º –∑–∞–ø—Ä–æ—Å –≤—Å–µ–≥–æ —Ñ—Ä–µ–π–º–∞. –ü–æ—Å–∫–æ–ª—å–∫—É `RTP` —Ä–∞–∑–±–∏–≤–∞–µ—Ç –ø–∞–∫–µ—Ç—ã –Ω–∞ —á–∞—Å—Ç–∏ (chunks), –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è –ª–∏—à—å –º–∞–ª–µ–Ω—å–∫–∏–π –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–π –∫—É—Å–æ—á–µ–∫. –ü–æ–ª—É—á–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Å `SSRC` –∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–º –Ω–æ–º–µ—Ä–æ–º. –ï—Å–ª–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –Ω–µ –º–æ–∂–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—à–µ–Ω–Ω—ã–π –ø–∞–∫–µ—Ç, –æ–Ω –ø—Ä–æ—Å—Ç–æ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ.

#### –û—Ç—á–µ—Ç—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –∏ –ø–æ–ª—É—á–∞—Ç–µ–ª—è

–≠—Ç–∏ –æ—Ç—á–µ—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –æ–±–º–µ–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π –º–µ–∂–¥—É –∞–≥–µ–Ω—Ç–∞–º–∏. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ –∏ –¥–∂–∏—Ç—Ç–µ—Ä–µ.

–û—Ç—á–µ—Ç—ã –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∏ –∫–æ–Ω—Ç—Ä–æ–ª—è –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏.

### –ö–∞–∫ RTP/RTCP —Ä–µ—à–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—ã –≤–º–µ—Å—Ç–µ?

`RTP` –∏ `RTCP` —Ä–∞–±–æ—Ç–∞—é—Ç –≤–º–µ—Å—Ç–µ –Ω–∞–¥ —Ä–µ—à–µ–Ω–∏–µ–º —É–ø–æ–º—è–Ω—É—Ç—ã—Ö –≤—ã—à–µ –ø—Ä–æ–±–ª–µ–º, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –¥–∏–Ω–∞–º–∏—á–Ω—ã–º–∏ —É—Å–ª–æ–≤–∏—è–º–∏ —Å–µ—Ç–µ–π. –≠—Ç–∏ —Ç–µ—Ö–Ω–∏–∫–∏ –≤—Å–µ –µ—â–µ –∞–∫—Ç–∏–≤–Ω–æ —Ä–∞–∑–≤–∏–≤–∞—é—Ç—Å—è.

#### Forward Error Correction

–¢–∞–∫–∂–µ –∏–∑–≤–µ—Å—Ç–Ω–æ–µ –∫–∞–∫ `FEC` (–ø—Ä–µ–≤–µ–Ω—Ç–∏–≤–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫) - –¥—Ä—É–≥–æ–π —Å–ø–æ—Å–æ–± —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã –ø–æ—Ç–µ—Ä–∏ –ø–∞–∫–µ—Ç–æ–≤. `FEC` - —ç—Ç–æ –∫–æ–≥–¥–∞ –º—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑, –±–µ–∑ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ –∏—Ö –ø–æ–≤—Ç–æ—Ä–Ω—É—é –æ—Ç–ø—Ä–∞–≤–∫—É. –≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ —É—Ä–æ–≤–Ω–µ `RTP` –∏–ª–∏ –¥–∞–∂–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–æ–¥–µ–∫–∞.

–ï—Å–ª–∏ –ø–æ—Ç–µ—Ä—è –ø–∞–∫–µ—Ç–æ–≤ —è–≤–ª—è–µ—Ç—Å—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π, `FEC` —è–≤–ª—è–µ—Ç—Å—è –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–º —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –∑–∞–¥–µ—Ä–∂–∫–∏, —á–µ–º `NACK`. –í—Ä–µ–º—è —Ç—É–¥–∞ –∏ –æ–±—Ä–∞—Ç–Ω–æ (round-trip time, rtt) –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ –ø–æ–≤—Ç–æ—Ä–Ω—É—é –æ—Ç–ø—Ä–∞–≤–∫—É –Ω–µ–¥–æ—Å—Ç–∞—é—â–µ–≥–æ –ø–∞–∫–µ—Ç–∞ –∏ –æ—Ç–ø—Ä–∞–≤–∫—É —ç—Ç–æ–≥–æ –ø–∞–∫–µ—Ç–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–º –≤ —Å–ª—É—á–∞–µ —Å `NACK`.

#### –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –±–∏—Ç—Ä–µ–π—Ç–∞ –∏ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

–ö–∞–∫ –≥–æ–≤–æ—Ä–∏–ª–æ—Å—å –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–º —Ä–∞–∑–¥–µ–ª–µ, —Å–µ—Ç–∏ —è–≤–ª—è—é—Ç—Å—è –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º–∏ –∏ –Ω–µ–Ω–∞–¥–µ–∂–Ω—ã–º–∏. –ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –Ω–∞ –ø—Ä–æ—Ç—è–∂–µ–Ω–∏–∏ –æ–¥–Ω–æ–π —Å–µ—Å—Å–∏–∏. –ù–µ—Ä–µ–¥–∫–∏ —Å–ª—É—á–∞–∏ —Ä–µ–∑–∫–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω–æ–π –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ (–Ω–∞ –ø–æ—Ä—è–¥–∫–∏ –≤–µ–ª–∏—á–∏–Ω—ã) –≤ —Ç–µ—á–µ–Ω–∏–µ –æ–¥–Ω–æ–π —Å–µ–∫—É–Ω–¥—ã.

–û—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ–±—ã –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –±–∏—Ç—Ä–µ–π—Ç –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ–º–æ–π, —Ç–µ–∫—É—â–µ–π –∏ –±—É–¥—É—â–µ–π –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å–µ—Ç–∏. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±–µ—Å–ø–µ—á–∏—Ç—å –Ω–∞–∏–ª—É—á—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º–æ–≥–æ –∞—É–¥–∏–æ –∏–ª–∏ –≤–∏–¥–µ–æ –∏ –∏–∑–±–µ–∂–∞—Ç—å —Ä–∞–∑—Ä—ã–≤–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –ø–æ –ø—Ä–∏—á–∏–Ω–µ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏. –≠–≤—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Ö–Ω–∏–∫–∏, –º–æ–¥–µ–ª–∏—Ä—É—é—â–∏–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å–µ—Ç–∏ –∏ –ø—ã—Ç–∞—é—â–∏–µ—Å—è –µ–≥–æ –ø—Ä–µ–¥—Å–∫–∞–∑–∞—Ç—å, –∏–∑–≤–µ—Å—Ç–Ω—ã –∫–∞–∫ –æ—Ü–µ–Ω–∫–∞ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ (bandwidth estimation).

–ó–¥–µ—Å—å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –º–Ω–æ–≥–æ –Ω—é–∞–Ω—Å–æ–≤, –æ—Å—Ç–∞–Ω–æ–≤–∏–º—Å—è –Ω–∞ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –∏–∑ –Ω–∏—Ö –ø–æ–¥—Ä–æ–±–Ω–µ–µ.

### –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –ø–µ—Ä–µ–¥–∞—á–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ç–∏

`RTP/RTCP` –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ —Ä–∞–∑–Ω—ã—Ö —Å–µ—Ç—è—Ö, –∫–∞–∫ —Å–ª–µ–¥—Å—Ç–≤–∏–µ, –∏–Ω–æ–≥–¥–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –æ–±—Ä—ã–≤—ã —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è. –ë—É–¥—É—á–∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º–∏ –ø–æ–≤–µ—Ä—Ö `UDP`, —ç—Ç–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ –º–µ—Ö–∞–Ω–∏–∑–º–∞ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø–µ—Ä–µ–¥–∞—á–∏ –ø–∞–∫–µ—Ç–æ–≤, –Ω–µ –≥–æ–≤–æ—Ä—è —É–∂–µ –æ –∫–æ–Ω—Ç—Ä–æ–ª–µ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏.

–î–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –Ω–∞–∏–ª—É—á—à–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –æ–ø—ã—Ç–∞ `WebRTC` –¥–æ–ª–∂–µ–Ω –≤—ã—á–∏—Å–ª—è—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ —Å–µ—Ç–µ–≤–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞ –∏ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –∫ –µ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º. –ö–ª—é—á–µ–≤—ã–º–∏ —Ñ–∞–∫—Ç–æ—Ä–∞–º–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —è–≤–ª—è–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–µ–µ: –¥–æ—Å—Ç—É–ø–Ω–∞—è –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å (–≤ –∫–∞–∂–¥–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏, –º–æ–∂–µ—Ç –±—ã—Ç—å –∞—Å—Å–∏–º–µ—Ç—Ä–∏—á–Ω–æ–π), –≤—Ä–µ–º—è —Ç—É–¥–∞ –∏ –æ–±—Ä–∞—Ç–Ω–æ –∏ –¥–∂–∏—Ç—Ç–µ—Ä (—Ñ–ª—É–∫—Ç—É–∞—Ü–∏–∏, –≤–æ–∑–Ω–∏–∫–∞—é—â–∏–µ –≤ –ø—É—Ç–∏ —Ç—É–¥–∞ –∏ –æ–±—Ä–∞—Ç–Ω–æ). –≠—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –ø–æ—Ç–µ—Ä–∏ –ø–∞–∫–µ—Ç–æ–≤ –∏ –æ–±–º–µ–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —ç—Ç–∏—Ö —Å–≤–æ–π—Å—Ç–≤ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —ç–≤–æ–ª—é—Ü–∏–∏ —Å–µ—Ç–µ–≤—ã—Ö —É—Å–ª–æ–≤–∏–π.

–†–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ–º—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã –ø—Ä–µ—Å–ª–µ–¥—É—é—Ç –¥–≤–µ –≥–ª–∞–≤–Ω—ã–µ —Ü–µ–ª–∏:

1. –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ–π –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ (–≤ –∫–∞–∂–¥–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏), –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ–π —Å–µ—Ç—å—é.
2. –û–±–º–µ–Ω –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞—Ö —Å–µ—Ç–∏ –º–µ–∂–¥—É –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ–º –∏ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–º.

`RTP/RTCP` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç—Ä–∏ –ø–æ–¥—Ö–æ–¥–∞ –∫ —Ä–µ—à–µ–Ω–∏—é —ç—Ç–∏—Ö –∑–∞–¥–∞—á. –ö–∞–∂–¥—ã–π –ø–æ–¥—Ö–æ–¥ –∏–º–µ–µ—Ç —Å–≤–æ–∏ –ø–ª—é—Å—ã –∏ –º–∏–Ω—É—Å—ã. –ü—Ä–∏–º–µ–Ω—è–µ–º—ã–π –ø–æ–¥—Ö–æ–¥ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å—Ç–µ–∫–∞ –ü–û, –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞–º, –∞ —Ç–∞–∫–∂–µ –æ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.

#### –û—Ç—á–µ—Ç—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è/–ø–æ–ª—É—á–∞—Ç–µ–ª—è

–≠—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏—è `RTCP` –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –≤ [RFC 3550](https://datatracker.ietf.org/doc/html/rfc3550#section-6.4) –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –æ–±–º–µ–Ω–∞ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏ —Å–µ—Ç–∏ –º–µ–∂–¥—É –∫–æ–Ω–µ—á–Ω—ã–º–∏ —Ç–æ—á–∫–∞–º–∏. –û—Ç—á–µ—Ç—ã –ø–æ–ª—É—á–∞—Ç–µ–ª—è (receiver reports) –ø–æ—Å–≤—è—â–µ–Ω—ã –∫–∞—á–µ—Å—Ç–≤—É —Å–µ—Ç–∏ (–≤–∫–ª—é—á–∞—è –ø–æ—Ç–µ—Ä—é –ø–∞–∫–µ—Ç–æ–≤, –≤—Ä–µ–º—è —Ç—É–¥–∞ –∏ –æ–±—Ä–∞—Ç–Ω–æ –∏ –¥–∂–∏—Ç—Ç–µ—Ä) –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ –∞–ª–≥–æ—Ä–∏—Ç–º–∞—Ö, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –¥–æ—Å—Ç—É–ø–Ω–æ–π –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏.

–û—Ç—á–µ—Ç—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –∏ –ø–æ–ª—É—á–∞—Ç–µ–ª—è (sender reports/receiver reports, SR/RR) –≤–º–µ—Å—Ç–µ —Ñ–æ—Ä–º–∏—Ä—É—é—Ç –∫–∞—Ä—Ç–∏–Ω—É –∫–∞—á–µ—Å—Ç–≤–∞ —Å–µ—Ç–∏. –û–Ω–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ `SSRC` –∏ —è–≤–ª—è—é—Ç—Å—è –≤—Ö–æ–¥–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏. –≠—Ç–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥—è—Ç—Å—è –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ–º –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö `RR`, —Å–æ–¥–µ—Ä–∂–∞—â–∏—Ö —Å–ª–µ–¥—É—é—â–∏–µ –ø–æ–ª—è:

- `Fraction Lost` (–¥–æ–ª—è –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤) - –∫–∞–∫–æ–π –ø—Ä–æ—Ü–µ–Ω—Ç –ø–∞–∫–µ—Ç–æ–≤ –±—ã–ª –ø–æ—Ç–µ—Ä—è–Ω –ø–æ—Å–ª–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ `RR`;
- `Cumulative Number of Packets Lost` (—Å–æ–≤–æ–∫—É–ø–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤) - —Å–∫–æ–ª—å–∫–æ –ø–∞–∫–µ—Ç–æ–≤ –±—ã–ª–æ –ø–æ—Ç–µ—Ä—è–Ω–æ –≤ —Ç–µ—á–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏;
- `Extended Highest Sequence Number Received` (–ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä) - –∫–∞–∫–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä –±—ã–ª –ø–æ–ª—É—á–µ–Ω –ø–æ—Å–ª–µ–¥–Ω–∏–º, –∏ —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –æ–Ω –±—ã–ª –ø–æ–ª—É—á–µ–Ω;
- `Interarrival Jitter` (–æ–±—â–∏–π –¥–∂–∏—Ç—Ç–µ—Ä) - –¥–∂–∏—Ç—Ç–µ—Ä –≤—Å–µ–≥–æ –∑–≤–æ–Ω–∫–∞;
- `Last Sender Report Timestamp` (–≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ—Ç—á–µ—Ç–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è) - –ø–æ—Å–ª–µ–¥–Ω–µ–µ –∏–∑–≤–µ—Å—Ç–Ω–æ–µ –≤—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏ —Ç—É–¥–∞ –∏ –æ–±—Ä–∞—Ç–Ω–æ.

`SR` –∏ `RR` –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ —Ç—É–¥–∞ –∏ –æ–±—Ä–∞—Ç–Ω–æ.

–û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –≤–∫–ª—é—á–∞–µ—Ç –≤ `SR` —Å–≤–æ–µ –ª–æ–∫–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è `sendertime1`. –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –ø–∞–∫–µ—Ç–∞ `SR` –ø–æ–ª—É—á–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ –æ—Ç–≤–µ—Ç `RR`. –ö—Ä–æ–º–µ –ø—Ä–æ—á–µ–≥–æ, `RR` –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è `sendertime1`, –ø–æ–ª—É—á–µ–Ω–Ω–æ–µ –æ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è. –ú–µ–∂–¥—É –ø–æ–ª—É—á–µ–Ω–∏–µ–º `SR` –∏ –æ—Ç–ø—Ä–∞–≤–∫–æ–π `RR` –æ–±—Ä–∞–∑—É–µ—Ç—Å—è –∑–∞–¥–µ—Ä–∂–∫–∞. –ü–æ —ç—Ç–æ–π –ø—Ä–∏—á–∏–Ω–µ `RR` —Ç–∞–∫–∂–µ –≤–∫–ª—é—á–∞–µ—Ç "–∑–∞–¥–µ—Ä–∂–∫—É –ø–æ—Å–ª–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ—Ç—á–µ—Ç–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è" (delay after last sender report, DLSR). `DLSR` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ —Ç—É–¥–∞ –∏ –æ–±—Ä–∞—Ç–Ω–æ. –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ–º `RR` –æ–Ω –≤—ã—á–∏—Ç–∞–µ—Ç `sendertime1` –∏ `DLSR` –∏–∑ —Ç–µ–∫—É—â–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ `sendertime2`. –≠—Ç–∞ —Ä–∞–∑–Ω–∏—Ü–∞ –≤–æ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤—Ä–µ–º–µ–Ω–µ–º –≤ –ø—É—Ç–∏ —Ç—É–¥–∞ –∏ –æ–±—Ä–∞—Ç–Ω–æ (round-trip time, rtt).

```ini
rtt = sendertime2 - sendertime1 - DLSR
```

`RTT` –ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏:

- —è –æ—Ç–ø—Ä–∞–≤–ª—è—é —Ç–µ–±–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –º–æ–∏ —á–∞—Å—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç 16 —á–∞—Å–æ–≤ 20 –º–∏–Ω—É—Ç 42 —Å–µ–∫—É–Ω–¥—ã –∏ 420 –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥;
- —Ç—ã –ø—Ä–∏—Å—ã–ª–∞–µ—à—å –º–Ω–µ —Ç–∞–∫–æ–µ –∂–µ –≤—Ä–µ–º—è –≤ –æ—Ç–≤–µ—Ç;
- —Ç—ã —Ç–∞–∫–∂–µ –ø—Ä–∏—Å—ã–ª–∞–µ—à—å –≤—Ä–µ–º—è, –ø—Ä–æ—à–µ–¥—à–µ–µ –º–µ–∂–¥—É –ø–æ–ª—É—á–µ–Ω–∏–µ–º –º–æ–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –æ—Ç–ø—Ä–∞–≤–∫–æ–π —Ç–≤–æ–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è, —Å–∫–∞–∂–µ–º, 5 –º—Å;
- –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–≤–æ–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è, —è —Å–Ω–æ–≤–∞ —Å–º–æ—Ç—Ä—é –Ω–∞ —á–∞—Å—ã;
- —Ç–µ–ø–µ—Ä—å –æ–Ω–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç 16 —á 20 –º–∏–Ω 42 —Å–µ–∫ 690 –º—Å;
- —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø–µ—Ä–µ–¥–∞—á–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —Ç—É–¥–∞ –∏ –æ–±—Ä–∞—Ç–Ω–æ –∑–∞–Ω—è–ª–∞ 265 –º—Å (690 - 420 - 5);
- —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –≤—Ä–µ–º—è —Ç—É–¥–∞ –∏ –æ–±—Ä–∞—Ç–Ω–æ —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç 265 –º—Å.

<img src="https://habrastorage.org/webt/os/dv/tw/osdvtwdu2mdakskpaicfdkrbwhc.png" />
<br />

### TMMBR, TMMBN, REMB –∏ TWCC –≤ —Å–æ—á–µ—Ç–∞–Ω–∏–∏ —Å GCC

##### Google Congestion Control (GCC)

–ê–ª–≥–æ—Ä–∏—Ç–º Google Congestion Control (GCC), –æ–ø–∏—Å–∞–Ω–Ω—ã–π –≤ –æ–±—â–∏—Ö —á–µ—Ä—Ç–∞—Ö –≤ [draft-ietf-rmcat-gcc-02](https://datatracker.ietf.org/doc/html/draft-ietf-rmcat-gcc-02), –ø—ã—Ç–∞–µ—Ç—Å—è —Ä–µ—à–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É —Ä–∞—Å—á–µ—Ç–∞ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏. –û–Ω —Å–æ—á–µ—Ç–∞–µ—Ç—Å—è —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –¥—Ä—É–≥–∏—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è. –û–Ω —Ö–æ—Ä–æ—à–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –∫–∞–∫ –¥–ª—è –ø—Ä–∏–Ω–∏–º–∞—é—â–µ–π —Å—Ç–æ—Ä–æ–Ω—ã (–ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å [`TMMBR`](https://chromium.googlesource.com/external/webrtc/+/3c1e558449309be965815e1bf/webrtc/modules/rtp_rtcp/source/rtcp_packet/tmmbr.cc)/[`TMMBN`](https://chromium.googlesource.com/external/webrtc/+/HEAD/modules/rtp_rtcp/source/rtcp_packet/tmmbn.cc) –∏–ª–∏ [`REMB`](https://webrtcglossary.com/remb/)), —Ç–∞–∫ –∏ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—â–µ–π —Å—Ç–æ—Ä–æ–Ω—ã (–ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å [`TWCC`](https://webrtcglossary.com/transport-cc/)).

`GCC` —Ñ–æ–∫—É—Å–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –ø–æ—Ç–µ—Ä—è—Ö –ø–∞–∫–µ—Ç–æ–≤ –∏ –∫–æ–ª–µ–±–∞–Ω–∏—è—Ö –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–∏–±—ã—Ç–∏—è –∫–∞–¥—Ä–æ–≤ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –¥–≤—É—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏. –û–Ω –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç —ç—Ç–∏ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ —á–µ—Ä–µ–∑ –¥–≤–∞ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞: –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –ø–æ—Ç–µ—Ä—å (loss-based) –∏ –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –∑–∞–¥–µ—Ä–∂–∫–∏ (delay-based).

–ü–µ—Ä–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `GCC` - –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –ø–æ—Ç–µ—Ä—å, —è–≤–ª—è–µ—Ç—Å—è –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç—ã–º:

- –µ—Å–ª–∏ –ø–æ—Ç–µ—Ä–∏ –ø–∞–∫–µ—Ç–∞ –ø—Ä–µ–≤—ã—à–∞—é—Ç `10%`, –æ—Ü–µ–Ω–∫–∞ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å–Ω–∏–∂–∞–µ—Ç—Å—è;
- –µ—Å–ª–∏ –ø–æ—Ç–µ—Ä–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ `2-10%`, –æ—Ü–µ–Ω–∫–∞ –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–µ–∏–∑–º–µ–Ω–Ω–æ–π;
- –µ—Å–ª–∏ –ø–æ—Ç–µ—Ä–∏ –Ω–∏–∂–µ `2%`, –æ—Ü–µ–Ω–∫–∞ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è.

–í—ã—á–∏—Å–ª–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥—è—Ç—Å—è –Ω–µ —Ä–µ–∂–µ –æ–¥–Ω–æ–≥–æ —Ä–∞–∑–∞ –≤ —Å–µ–∫—É–Ω–¥—É. –í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø–∞—Ä–Ω–æ–≥–æ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞, –æ –ø–æ—Ç–µ—Ä–µ –ø–∞–∫–µ—Ç–æ–≤ –º–æ–∂–µ—Ç –ª–∏–±–æ —Å–æ–æ–±—â–∞—Ç—å—Å—è –≤ —è–≤–Ω–æ–º –≤–∏–¥–µ (`TWCC`), –ª–∏–±–æ –ø–æ—Ç–µ—Ä—è –º–æ–∂–µ—Ç –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞—Ç—å—Å—è (`TMMBR/TMMBN` –∏ `REMB`).

–í—Ç–æ—Ä–∞—è —Ñ—É–Ω–∫—Ü–∏—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–º –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –ø–æ—Ç–µ—Ä—å –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–∏–±—ã—Ç–∏—è –ø–∞–∫–µ—Ç–æ–≤. –î–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–æ–≥–¥–∞ —Å–µ—Ç–µ–≤—ã–µ –∫–∞–Ω–∞–ª—ã —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω–Ω—ã–º–∏, –∏ —Å–Ω–∏–∂–∞–µ—Ç –æ—Ü–µ–Ω–∫—É –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏. –ò–¥–µ—è —Å–æ—Å—Ç–æ–∏—Ç –≤ —Ç–æ–º, —á—Ç–æ –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –±—É–¥–µ—Ç –ø–æ–º–µ—â–∞—Ç—å –ø–∞–∫–µ—Ç—ã –≤ –æ—á–µ—Ä–µ–¥—å –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –Ω–µ –±—É–¥–µ—Ç –∏—Å—á–µ—Ä–ø–∞–Ω–∞ –µ–º–∫–æ—Å—Ç—å –µ–≥–æ –±—É—Ñ–µ—Ä–∞. –ï—Å–ª–∏ —Ç–∞–∫–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å –±–æ–ª—å—à–µ —Ç—Ä–∞—Ñ–∏–∫–∞, —á–µ–º –æ–Ω –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å, –æ–Ω –±—É–¥–µ—Ç –≤—ã–Ω—É–∂–¥–µ–Ω –æ—Ç–±—Ä–∞—Å—ã–≤–∞—Ç—å (drop) –ø–∞–∫–µ—Ç—ã, –Ω–µ –ø–æ–º–µ—â–∞—é—â–∏–µ—Å—è –≤ –µ–≥–æ –±—É—Ñ–µ—Ä–Ω–æ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ. –¢–∞–∫–æ–π —Ç–∏–ø –ø–æ—Ç–µ—Ä–∏ –ø–∞–∫–µ—Ç–æ–≤ –æ—Å–æ–±–µ–Ω–Ω–æ –æ–ø–∞—Å–µ–Ω –¥–ª—è —Å–µ—Ç–µ–π —Å –º–∞–ª–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π –∏–ª–∏ —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, –æ–Ω —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç –Ω–µ–≥–∞—Ç–∏–≤–Ω–æ –≤–ª–∏—è—Ç—å –Ω–∞ –≤—Å–µ —Ç–∏–ø—ã –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–π –≤ —Å–µ—Ç–∏, –ø–æ—ç—Ç–æ–º—É –µ–≥–æ —Å–ª–µ–¥—É–µ—Ç, –ø–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏, –∏–∑–±–µ–≥–∞—Ç—å. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, `GCC` –ø—ã—Ç–∞–µ—Ç—Å—è –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, —Ä–∞—Å—Ç–µ—Ç –ª–∏ –≥–ª—É–±–∏–Ω–∞ –æ—á–µ—Ä–µ–¥–∏ —Å–µ—Ç–∏ –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–π –ø–æ—Ç–µ—Ä–∏ –ø–∞–∫–µ—Ç–æ–≤. –û–Ω —É–º–µ–Ω—å—à–∞–µ—Ç –ø—Ä–æ–ø—É—Å–∫–Ω—É—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å, –µ—Å–ª–∏ –Ω–∞–±–ª—é–¥–∞–µ—Ç—Å—è —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –∑–∞–¥–µ—Ä–∂–µ–∫ –≤ –æ—á–µ—Ä–µ–¥–∏.

–î–ª—è —Ä–µ—à–µ–Ω–∏—è —ç—Ç–æ–π –∑–∞–¥–∞—á–∏ `GCC` –ø—ã—Ç–∞–µ—Ç—Å—è –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –≥–ª—É–±–∏–Ω—ã –æ—á–µ—Ä–µ–¥–∏ (queue depth), –∏–∑–º–µ—Ä—è—è –Ω–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–∏–µ–º–∞-–ø–µ—Ä–µ–¥–∞—á–∏. –û–Ω –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç "–≤—Ä–µ–º—è –º–µ–∂–¥—É –ø—Ä–∏–±—ã—Ç–∏—è–º–∏" (inter-arrival time) –∫–∞–¥—Ä–æ–≤ `t(i) - t(i-1)` - —Ä–∞–∑–Ω–∏—Ü—É –≤–æ –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–∏–±—ã—Ç–∏—è –¥–≤—É—Ö –≥—Ä—É–ø–ø –ø–∞–∫–µ—Ç–æ–≤ (–∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –≤–∏–¥–µ–æ–∫–∞–¥—Ä–æ–≤). –≠—Ç–∏ –≥—Ä—É–ø–ø—ã —á–∞—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ —Ä–∞–≤–Ω—ã–µ –ø—Ä–æ–º–µ–∂—É—Ç–∫–∏ –≤—Ä–µ–º–µ–Ω–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–∞–∂–¥—ã–µ `1/24` —Å–µ–∫—É–Ω–¥—ã –¥–ª—è –≤–∏–¥–µ–æ —Å —á–∞—Å—Ç–æ—Ç–æ–π `24 –∫–∞–¥—Ä–∞ –≤ —Å–µ–∫—É–Ω–¥—É`). –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –∏–∑–º–µ—Ä–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –º–µ–∂–¥—É –ø—Ä–∏–±—ã—Ç–∏—è–º–∏ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ç–∞–∫–∏–º –∂–µ –ø—Ä–æ—Å—Ç—ã–º, –∫–∞–∫ –∏–∑–º–µ—Ä–µ–Ω–∏–µ —Ä–∞–∑–Ω–∏—Ü—ã –≤–æ –≤—Ä–µ–º–µ–Ω–∏ –º–µ–∂–¥—É –Ω–∞—á–∞–ª–æ–º –ø–µ—Ä–≤–æ–π –≥—Ä—É–ø–ø—ã –ø–∞–∫–µ—Ç–æ–≤ (—Ç.–µ. –∫–∞–¥—Ä–∞) –∏ –ø–µ—Ä–≤—ã–º –∫–∞–¥—Ä–æ–º —Å–ª–µ–¥—É—é—â–µ–π –≥—Ä—É–ø–ø—ã.

–ù–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–π –Ω–∏–∂–µ –¥–∏–∞–≥—Ä–∞–º–º–µ —Å—Ä–µ–¥–Ω–µ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –º–µ–∂–¥—É –ø–∞–∫–µ—Ç–∞–º–∏ —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç `+20–º—Å`, —á—Ç–æ —è–≤–ª—è–µ—Ç—Å—è —è–≤–Ω—ã–º –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–º –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏ —Å–µ—Ç–∏.

<img src="https://habrastorage.org/webt/ai/fv/mq/aifvmqgoamebfwqc-ctd2zfpzom.png" />
<br />

–£–≤–µ–ª–∏—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –º–µ–∂–¥—É –ø—Ä–∏–±—ã—Ç–∏—è–º–∏ –≥—Ä—É–ø–ø –ø–∞–∫–µ—Ç–æ–≤ —è–≤–ª—è–µ—Ç—Å—è —Å–≤–∏–¥–µ—Ç–µ–ª—å—Å—Ç–≤–æ–º —É–≤–µ–ª–∏—á–µ–Ω–∏—è –≥–ª—É–±–∏–Ω—ã –æ—á–µ—Ä–µ–¥–∏ –≤ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö —Å–µ—Ç–µ–≤—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö –∏, –∫–∞–∫ —Å–ª–µ–¥—Å—Ç–≤–∏–µ, –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏ —Å–µ—Ç–∏. _–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ_: `GCC` –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —É–º–µ–Ω, —á—Ç–æ–±—ã —É—á–∏—Ç—ã–≤–∞—Ç—å –∫–æ–ª–µ–±–∞–Ω–∏—è —Ä–∞–∑–º–µ—Ä–æ–≤ –±–∞–π—Ç–æ–≤ –∫–∞–¥—Ä–∞. `GCC` —É—Ç–æ—á–Ω—è–µ—Ç –ø—Ä–æ–≤–µ–¥–µ–Ω–Ω—ã–µ –∏–∑–º–µ—Ä–µ–Ω–∏—è –∑–∞–¥–µ—Ä–∂–∫–∏ —Å –ø–æ–º–æ—â—å—é [—Ñ–∏–ª—å—Ç—Ä–∞ –ö–∞–ª–º–∞–Ω–∞](https://ru.wikipedia.org/wiki/%D0%A4%D0%B8%D0%BB%D1%8C%D1%82%D1%80_%D0%9A%D0%B0%D0%BB%D0%BC%D0%B0%D0%BD%D0%B0) –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –∏–∑–º–µ—Ä–µ–Ω–∏–π –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–∏–µ–º–∞-–ø–µ—Ä–µ–¥–∞—á–∏ (–∏ –µ–≥–æ –≤–∞—Ä–∏–∞—Ü–∏–π), –ø—Ä–µ–∂–¥–µ —á–µ–º –¥–µ–ª–∞—Ç—å –≤—ã–≤–æ–¥ –æ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–µ —Å–µ—Ç–∏. –§–∏–ª—å—Ç—Ä –ö–∞–ª–º–∞–Ω–∞ –≤ `GCC` –º–æ–∂–Ω–æ —Å—á–∏—Ç–∞—Ç—å –∑–∞–º–µ–Ω–æ–π [–ª–∏–Ω–µ–π–Ω–æ–π —Ä–µ–≥—Ä–µ—Å—Å–∏–∏](https://ru.wikipedia.org/wiki/%D0%9B%D0%B8%D0%BD%D0%B5%D0%B9%D0%BD%D0%B0%D1%8F_%D1%80%D0%B5%D0%B3%D1%80%D0%B5%D1%81%D1%81%D0%B8%D1%8F): –æ–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–µ–ª–∞—Ç—å —Ç–æ—á–Ω—ã–µ –ø—Ä–æ–≥–Ω–æ–∑—ã —Å —É—á–µ—Ç–æ–º –¥–∂–∏—Ç—Ç–µ—Ä–∞, –¥–æ–±–∞–≤–ª—è—é—â–µ–≥–æ —à—É–º (noise) –≤ –∏–∑–º–µ—Ä–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏. –ü—Ä–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏ `GCC` —É–º–µ–Ω—å—à–∞–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–π –±–∏—Ç—Ä–µ–π—Ç. –í —É—Å–ª–æ–≤–∏—è—Ö —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Å–µ—Ç–∏ –æ–Ω –º–æ–∂–µ—Ç –º–µ–¥–ª–µ–Ω–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å –æ—Ü–µ–Ω–∫—É –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π –Ω–∞–≥—Ä—É–∑–∫–∏.

#### TMMBR, TMMBN –∏ REMB

–î–ª—è `TMMBR`, `TMMBN` –∏ `REMB` –ø–æ–ª—É—á–∞—Ç–µ–ª—å —Å–Ω–∞—á–∞–ª–∞ –≤—ã—á–∏—Å–ª—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—É—é –≤—Ö–æ–¥—è—â—É—é –ø—Ä–æ–ø—É—Å–∫–Ω—É—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å (—Å –ø–æ–º–æ—â—å—é `GCC`, –Ω–∞–ø—Ä–∏–º–µ—Ä), –∑–∞—Ç–µ–º –ø–µ—Ä–µ–¥–∞–µ—Ç —ç—Ç—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—é. –°—Ç–æ—Ä–æ–Ω–∞–º –Ω–µ –Ω—É–∂–Ω–æ –æ–±–º–µ–Ω–∏–≤–∞—Ç—å—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø–æ—Ç–µ—Ä–µ –ø–∞–∫–µ—Ç–æ–≤ –∏–ª–∏ –¥—Ä—É–≥–∏—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞—Ö —Å–µ—Ç–∏, –ø–æ—Å–∫–æ–ª—å–∫—É –æ–ø–µ—Ä–∞—Ü–∏–∏, –≤—ã–ø–æ–ª–Ω—è–µ–º—ã–µ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –ø–æ–ª—É—á–∞—Ç–µ–ª—è, –ø–æ–∑–≤–æ–ª—è—é—Ç –∏–∑–º–µ—Ä–∏—Ç—å –≤—Ä–µ–º—è –º–µ–∂–¥—É –ø—Ä–∏–±—ã—Ç–∏—è–º–∏ –∏ –ø–æ—Ç–µ—Ä—é –ø–∞–∫–µ—Ç–æ–≤ –Ω–∞–ø—Ä—è–º—É—é. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ `TMMBR`, `TMMBN` –∏ `REMB` –æ–±–º–µ–Ω–∏–≤–∞—é—Ç—Å—è –æ—Ü–µ–Ω–∫–∞–º–∏ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:

- `Temporary Maximum Media Stream Bit Rate Request` (–∑–∞–ø—Ä–æ—Å –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –±–∏—Ç—Ä–µ–π—Ç–∞ –º–µ–¥–∏–∞–ø–æ—Ç–æ–∫–∞) - [–º–∞–Ω—Ç–∏—Å—Å–∞/—ç–∫—Å–ø–æ–Ω–µ–Ω—Ç–∞](https://ru.wikipedia.org/wiki/%D0%AD%D0%BA%D1%81%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%86%D0%B8%D0%B0%D0%BB%D1%8C%D0%BD%D0%B0%D1%8F_%D0%B7%D0%B0%D0%BF%D0%B8%D1%81%D1%8C) –∑–∞–ø—Ä–æ—à–µ–Ω–Ω–æ–≥–æ –±–∏—Ç—Ä–µ–π—Ç–∞ –¥–ª—è –æ–¥–Ω–æ–≥–æ `SSRC`;
- `Temporary Maximum Media Stream Bit Rate Notification` (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –≤—Ä–µ–º–µ–Ω–Ω–æ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–º –±–∏—Ç—Ä–µ–π—Ç–µ –º–µ–¥–∏–∞–ø–æ—Ç–æ–∫–∞) - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø–æ–ª—É—á–µ–Ω–∏–∏ `TMMBR`;
- `Receiver Estimated Maximum Bitrate` (—Ä–∞—Å—á–µ—Ç–Ω—ã–π –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –±–∏—Ç—Ä–µ–π—Ç –ø–æ–ª—É—á–∞—Ç–µ–ª—è) - –º–∞–Ω—Ç–∏—Å—Å–∞/—ç–∫—Å–ø–æ–Ω–µ–Ω—Ç–∞ –∑–∞–ø—Ä–æ—à–µ–Ω–Ω–æ–≥–æ –±–∏—Ç—Ä–µ–π—Ç–∞ –¥–ª—è –≤—Å–µ–≥–æ —Å–µ–∞–Ω—Å–∞.

`TMMBR` –∏ `TMMBN` –ø–æ—è–≤–∏–ª–∏—Å—å –ø–µ—Ä–≤—ã–º–∏ –∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤ [RFC 5104](https://datatracker.ietf.org/doc/html/rfc5104). `REMB` –ø–æ—è–≤–∏–ª—Å—è –ø–æ–∑–∂–µ, –±—ã–ª —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω —á–µ—Ä–Ω–æ–≤–∏–∫ [ draft-alvestrand-rmcat-remb](https://datatracker.ietf.org/doc/html/draft-alvestrand-rmcat-remb-03), –∫–æ—Ç–æ—Ä—ã–π —Ç–∞–∫ –∏ –Ω–µ –±—ã–ª —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω.

–ò–ª–ª—é—Å—Ç—Ä–∞—Ü–∏—è —Å–µ—Å—Å–∏–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `REMB`:

<img src="https://habrastorage.org/webt/14/z2/g0/14z2g0pg1ar14htve1-vfgb8qee.png" />
<br />

–î–∞–Ω–Ω—ã–π –º–µ—Ç–æ–¥ —Ö–æ—Ä–æ—à–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –±—É–º–∞–≥–µ. –û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –æ—Ü–µ–Ω–∫—É –æ—Ç –ø–æ–ª—É—á–∞—Ç–µ–ª—è, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –±–∏—Ç—Ä–µ–π—Ç –∫–æ–¥–∏—Ä–æ–≤—â–∏–∫–∞ –≤ –ø–æ–ª—É—á–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ. –í—É–∞–ª—è! –ú—ã –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–ª–∏—Å—å –∫ —Å–µ—Ç–µ–≤—ã–º —É—Å–ª–æ–≤–∏—è–º.

–û–¥–Ω–∞–∫–æ –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ `REMB` –∏–º–µ–µ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏.

–ü–µ—Ä–≤—ã–º –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–æ–º —è–≤–ª—è–µ—Ç—Å—è –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∫–æ–¥–∏—Ä–æ–≤—â–∏–∫–∞. –ö–æ–≥–¥–∞ –º—ã —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–ª—è –Ω–µ–≥–æ –±–∏—Ç—Ä–µ–π—Ç, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∫–æ–¥–∏—Ä–æ–≤–∫–∏ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –±—É–¥–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –∑–Ω–∞—á–µ–Ω–∏—é. –ú—ã –º–æ–∂–µ–º –ø–æ–ª—É—á–∏—Ç—å –±–æ–ª—å—à–µ –∏–ª–∏ –º–µ–Ω—å—à–µ –±–∏—Ç–æ–≤ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∫–æ–¥–∏—Ä–æ–≤—â–∏–∫–∞ –∏ –∫–æ–¥–∏—Ä—É–µ–º–æ–≥–æ –∫–∞–¥—Ä–∞.

–ù–∞–ø—Ä–∏–º–µ—Ä, —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã –∫–æ–¥–∏—Ä–æ–≤—â–∏–∫–∞ `x264` —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π `tune=zerolatency` –º–æ–∂–µ—Ç —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –æ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ —Ü–µ–ª–µ–≤–æ–≥–æ –±–∏—Ç—Ä–µ–π—Ç–∞. –û–¥–∏–Ω –∏–∑ –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤:

- –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ –Ω–∞—à –Ω–∞—á–∞–ª—å–Ω—ã–π –±–∏—Ç—Ä–µ–π—Ç —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç `1000 –∫–±–∏—Ç/—Å`;
- –∫–æ–¥–∏—Ä–æ–≤—â–∏–∫ –≤—ã–¥–∞–µ—Ç —Ç–æ–ª—å–∫–æ `700 –∫–±–∏—Ç/—Å`, –ø–æ—Å–∫–æ–ª—å–∫—É –µ–º—É –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –≤—ã—Å–æ–∫–æ—á–∞—Å—Ç–æ—Ç–Ω—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ (high frequency features) –¥–ª—è –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è;
- –¥–æ–ø—É—Å—Ç–∏–º, —á—Ç–æ –ø–æ–ª—É—á–∞—Ç–µ–ª—é –ø—Ä–∏—Ö–æ–¥–∏—Ç –≤–∏–¥–µ–æ `700 –∫–±–∏—Ç/—Å` —Å –Ω—É–ª–µ–≤–æ–π –ø–æ—Ç–µ—Ä–µ–π –ø–∞–∫–µ—Ç–æ–≤. –ó–∞—Ç–µ–º –æ–Ω –ø—Ä–∏–º–µ–Ω—è–µ—Ç –ø—Ä–∞–≤–∏–ª–æ `REMB 1` –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è –≤—Ö–æ–¥—è—â–µ–≥–æ –±–∏—Ç—Ä–µ–π—Ç–∞ –Ω–∞ `8%`;
- –ø–æ–ª—É—á–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–∞–∫–µ—Ç `REMB` —Å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ–º –æ–± —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ –±–∏—Ç—Ä–µ–π—Ç–∞ –¥–æ `756 –∫–±–∏—Ç/—Å` (`700 –∫–±–∏—Ç/—Å * 1.08`) –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—é;
- –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –±–∏—Ç—Ä–µ–π—Ç –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –∑–Ω–∞—á–µ–Ω–∏–µ `756 –∫–±–∏—Ç/—Å`;
- –∫–æ–¥–∏—Ä–æ–≤—â–∏–∫ –≤—ã–¥–∞–µ—Ç –µ—â–µ –±–æ–ª–µ–µ –Ω–∏–∑–∫–∏–π –±–∏—Ç—Ä–µ–π—Ç;
- –¥–∞–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è —Å–Ω–æ–≤–∞ –∏ —Å–Ω–æ–≤–∞, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —Å–Ω–∏–∂–µ–Ω–∏—é –±–∏—Ç—Ä–µ–π—Ç–∞ –¥–æ –∞–±—Å–æ–ª—é—Ç–Ω–æ–≥–æ –º–∏–Ω–∏–º—É–º–∞.

–í –∫–æ–Ω–µ—á–Ω–æ–º —Å—á–µ—Ç–µ, —ç—Ç–æ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ–º—É –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤–∏–¥–µ–æ –¥–∞–∂–µ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è.

#### Transport Wide Congestion Control

`TWCC` (–∫–æ–Ω—Ç—Ä–æ–ª—å –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏ –Ω–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–º —É—Ä–æ–≤–Ω–µ) - –æ–¥–Ω–æ –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –≤ –æ–±–ª–∞—Å—Ç–∏ –æ—Ü–µ–Ω–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ç–µ–≤–æ–π –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏. –û–Ω –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –≤ —á–µ—Ä–Ω–æ–≤–∏–∫–µ [draft-holmer-rmcat-transport-wide-cc-extensions-01](https://datatracker.ietf.org/doc/html/draft-holmer-rmcat-transport-wide-cc-extensions-01).

–í `TWCC` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–Ω—Ü–∏–ø:

<img src="https://habrastorage.org/webt/_h/ae/rv/_haerviqtpcalte7gmjmgd7atqo.png" />
<br />

–í —Å–ª—É—á–∞–µ —Å `REMB` –ø–æ–ª—É—á–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∞–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—é –æ –¥–æ—Å—Ç—É–ø–Ω–æ–º –±–∏—Ç—Ä–µ–π—Ç–µ –∑–∞–≥—Ä—É–∑–∫–∏. –û–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ—á–Ω—ã–µ –∏–∑–º–µ—Ä–µ–Ω–∏—è –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º–æ–π –ø–æ—Ç–µ—Ä–∏ –ø–∞–∫–µ—Ç–æ–≤ –∏ –¥–∞–Ω–Ω—ã–µ –æ –≤—Ä–µ–º–µ–Ω–∏ –º–µ–∂–¥—É –ø—Ä–∏–±—ã—Ç–∏—è–º–∏ –ø–∞–∫–µ—Ç–æ–≤.

`TWCC` - —Å–≤–æ–µ–≥–æ —Ä–æ–¥–∞ —Å–∏–º–±–∏–æ–∑ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ `SR/RR` –∏ `REMB`. –û—Ü–µ–Ω–∫–∞ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –≤–æ–∑–ª–∞–≥–∞–µ—Ç—Å—è –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è (–∫–∞–∫ –≤ `SR/RR`), –Ω–æ —Ç–µ—Ö–Ω–∏–∫–∞ –æ—Ü–µ–Ω–∫–∏ –±–æ–ª—å—à–µ –ø–æ—Ö–æ–∂–∞ –Ω–∞ `REMB`.

–í `TWCC` –ø–æ–ª—É—á–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∞–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—é –≤—Ä–µ–º—è –ø—Ä–∏–±—ã—Ç–∏—è –∫–∞–∂–¥–æ–≥–æ –ø–∞–∫–µ—Ç–∞. –≠—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —è–≤–ª—è–µ—Ç—Å—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–π –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –º–æ–≥ –∏–∑–º–µ—Ä–∏—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –∑–∞–¥–µ—Ä–∂–µ–∫ –º–µ–∂–¥—É –ø—Ä–∏–±—ã—Ç–∏—è–º–∏ –ø–∞–∫–µ—Ç–æ–≤, –∞ —Ç–∞–∫–∂–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã–µ –∏ –æ–ø–æ–∑–¥–∞–≤—à–∏–µ –ø–∞–∫–µ—Ç—ã. –ü—Ä–∏ —á–∞—Å—Ç–æ–º –æ–±–º–µ–Ω–µ —Ç–∞–∫–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –∏–º–µ–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –±—ã—Å—Ç—Ä–æ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º —É—Å–ª–æ–≤–∏–π —Å–µ—Ç–∏ –∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–ø—É—Å–∫–Ω—É—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —Å –ø–æ–º–æ—â—å—é —Ç–∞–∫–∏—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤, –∫–∞–∫ `GCC`.

–û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å —Å–ª–µ–¥–∏—Ç –∑–∞ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –ø–∞–∫–µ—Ç–æ–≤, –∏—Ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–º–∏ –Ω–æ–º–µ—Ä–∞–º–∏, —Ä–∞–∑–º–µ—Ä–æ–º –∏ –≤—Ä–µ–º–µ–Ω–µ–º –æ—Ç–ø—Ä–∞–≤–∫–∏. –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏—è `RTCP` –æ—Ç –ø–æ–ª—É—á–∞—Ç–µ–ª—è –æ–Ω —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—É—é –∑–∞–¥–µ—Ä–∂–∫—É –º–µ–∂–¥—É –ø—Ä–∏–±—ã—Ç–∏—è–º–∏ –ø–∞–∫–µ—Ç–æ–≤ —Å –ø–æ–ª—É—á–µ–Ω–Ω–æ–π. –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø–æ–ª—É—á–∞–µ–º–æ–π –∑–∞–¥–µ—Ä–∂–∫–∏ —Å–≤–∏–¥–µ—Ç–µ–ª—å—Å—Ç–≤—É–µ—Ç –æ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–µ —Å–µ—Ç–∏, –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –º–µ—Ä—ã –ø–æ –µ–µ —Å–Ω–∏–∂–µ–Ω–∏—é.

–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—è –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—é –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, `TWCC` –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –æ–±—ä–µ–∫—Ç–∏–≤–Ω—É—é –æ—Ü–µ–Ω–∫—É —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π —Å–µ—Ç–∏:

- –ø–æ—á—Ç–∏ –º–≥–Ω–æ–≤–µ–Ω–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ—Ç–µ—Ä–µ –ø–∞–∫–µ—Ç–æ–≤, –≤–ø–ª–æ—Ç—å –¥–æ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤;
- —Ç–æ—á–Ω—ã–π –±–∏—Ç—Ä–µ–π—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏;
- —Ç–æ—á–Ω—ã–π –±–∏—Ç—Ä–µ–π—Ç –ø–æ–ª—É—á–µ–Ω–∏—è;
- –∏–∑–º–µ—Ä–µ–Ω–∏–µ –¥–∂–∏—Ç—Ç–µ—Ä–∞;
- —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∏ –ø–æ–ª—É—á–µ–Ω–∏—è;
- –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≥–æ, –∫–∞–∫ —Å–µ—Ç—å —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å –≤–æ–ª–Ω–æ–æ–±—Ä–∞–∑–Ω–æ–π –∏–ª–∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ–π –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å—é.

–û–¥–Ω–∏–º –∏–∑ –Ω–∞–∏–±–æ–ª–µ–µ —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤ `TWCC` —è–≤–ª—è–µ—Ç—Å—è –≥–∏–±–∫–æ—Å—Ç—å, –∫–æ—Ç–æ—Ä—É—é –æ–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º `WebRTC`. –ü–æ—Å–∫–æ–ª—å–∫—É –∞–ª–≥–æ—Ä–∏—Ç–º—ã –∫–æ–Ω—Ç—Ä–æ–ª—è –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è, –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–æ–¥ –º–æ–∂–µ—Ç –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –ø—Ä–æ—Å—Ç—ã–º –∏ –ª–µ–≥–∫–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã–º. –°–ª–æ–∂–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã –∫–æ–Ω—Ç—Ä–æ–ª—è –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏ –º–æ–≥—É—Ç —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å—Å—è –±—ã—Å—Ç—Ä–µ–µ –Ω–∞ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–∏, –∫–æ—Ç–æ—Ä—ã–º –æ–Ω–∏ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ —É–ø—Ä–∞–≤–ª—è—é—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, Selective Forwarding Unit - –µ–¥–∏–Ω–∏—Ü–∞ –≤—ã–±–æ—Ä–æ—á–Ω–æ–π –ø–µ—Ä–µ—Å—ã–ª–∫–∏, –æ–±—Å—É–∂–¥–∞–µ–º–∞—è –≤ —Å–ª–µ–¥—É—é—â–µ–º —Ä–∞–∑–¥–µ–ª–µ). –î–ª—è –±—Ä–∞—É–∑–µ—Ä–æ–≤ –∏ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –∫–ª–∏–µ–Ω—Ç—ã –º–æ–≥—É—Ç –∏–∑–≤–ª–µ–∫–∞—Ç—å –≤—ã–≥–æ–¥—É –∏–∑ —É–ª—É—á—à–µ–Ω–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º–∞, –Ω–µ –¥–æ–∂–∏–¥–∞—è—Å—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏–∏ –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±—Ä–∞—É–∑–µ—Ä–∞ (—á—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω–∏–º–∞—Ç—å –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è).

### –î—Ä—É–≥–∏–µ —Å–ø–æ—Å–æ–±—ã –æ—Ü–µ–Ω–∫–∏ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

–ù–∞–∏–±–æ–ª–µ–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π —è–≤–ª—è–µ—Ç—Å—è "A Google Congestion Control Algorithm for Real-Time Communication" (–∞–ª–≥–æ—Ä–∏—Ç–º –∫–æ–Ω—Ç—Ä–æ–ª—è –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏ –¥–ª—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏), –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –≤ [draft-alvestrand-rmcat-congestion](https://tools.ietf.org/html/draft-alvestrand-rmcat-congestion-02).

–°—É—â–µ—Å—Ç–≤—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤ `GCC`, –Ω–∞–ø—Ä–∏–º–µ—Ä, [NADA: A Unified Congestion Control Scheme for Real-Time Media](https://datatracker.ietf.org/doc/html/draft-zhu-rmcat-nada-04) –∏ [SCReAM - Self-Clocked Rate Adaptation for Multimedia](https://datatracker.ietf.org/doc/html/draft-johansson-rmcat-scream-cc-05).

## –û–±–º–µ–Ω –¥—Ä—É–≥–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏

`WebRTC` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–∞–Ω–∞–ª—ã (data channels) –¥–ª—è –æ–±–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏ (data communication). –ú–µ–∂–¥—É –¥–≤—É–º—è –ø–∏—Ä–∞–º–∏ –º–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å –¥–æ `65 534` –∫–∞–Ω–∞–ª–æ–≤. –ö–∞–Ω–∞–ª –¥–∞–Ω–Ω—ã—Ö –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ [–¥–∞—Ç–∞–≥—Ä–∞–º–º–∞—Ö](https://ru.wikipedia.org/wiki/%D0%94%D0%B0%D1%82%D0%B0%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B0) (datagram) –∏ –∏–º–µ–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—É—é –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (durability). –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∫–∞–Ω–∞–ª –¥–∞–Ω–Ω—ã—Ö –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ—Ä—è–¥–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π.

–ù–∞ –ø–µ—Ä–≤—ã–π –≤–∑–≥–ª—è–¥ –∫–∞–Ω–∞–ª—ã –¥–∞–Ω–Ω—ã—Ö –º–æ–≥—É—Ç –∫–∞–∑–∞—Ç—å—Å—è –ª–∏—à–Ω–∏–º–∏. –ó–∞—á–µ–º –Ω–∞–º —ç—Ç–∞ –ø–æ–¥—Å–∏—Å—Ç–µ–º–∞, –∫–æ–≥–¥–∞ –º—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `HTTP` –∏–ª–∏ –≤–µ–±-—Å–æ–∫–µ—Ç—ã –¥–ª—è –æ–±–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏?

–û–¥–Ω–∞ –∏–∑ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π –∫–∞–Ω–∞–ª–æ–≤ –¥–∞–Ω–Ω—ã—Ö —Å–æ—Å—Ç–æ–∏—Ç –≤ —Ç–æ–º, —á—Ç–æ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–Ω–∏ –º–æ–≥—É—Ç —Å—Ç–∞—Ç—å –Ω–µ–∫–∏–º –ø–æ–¥–æ–±–∏–µ–º `UDP` —Å –Ω–µ—É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω–æ–π/–Ω–µ–Ω–∞–¥–µ–∂–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–æ–π —Å–æ–æ–±—â–µ–Ω–∏–π. –≠—Ç–æ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –≤ —Å–∏—Ç—É–∞—Ü–∏—è—Ö, –∫–æ–≥–¥–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–º–∏ —è–≤–ª—è—é—Ç—Å—è –Ω–∏–∑–∫–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –∏ –≤—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å. –ú—ã –º–æ–∂–µ–º –ø—Ä–æ–≤–µ—Å—Ç–∏ –∏–∑–º–µ—Ä–µ–Ω–∏—è –∏ –æ–±–µ—Å–ø–µ—á–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É —Ç–æ–ª—å–∫–æ —Ç–∞–∫–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–æ–æ–±—â–µ–Ω–∏–π, —Å –∫–æ—Ç–æ—Ä—ã–º –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ —Å–ø—Ä–∞–≤–∏—Ç—Å—è –Ω–∞—à–∞ —Å–µ—Ç—å.

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

–î–ª—è –æ–±–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏ `WebRTC` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `SCTP`, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –≤ [RFC 4960](https://tools.ietf.org/html/rfc4960). `SCTP` - —ç—Ç–æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª, —è–≤–ª—è—é—â–∏–π—Å—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–æ–π `TCP` –∏ `UDP`. –í `WebRTC` –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –ø—Ä–æ—Ç–æ–∫–æ–ª —É—Ä–æ–≤–Ω—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø–æ–≤–µ—Ä—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è `DTLS`.

`SCTP` —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –ø–æ—Ç–æ–∫–æ–≤, –∫–∞–∂–¥—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –º–æ–∂–µ—Ç –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –¥—Ä—É–≥–∏—Ö. –ö–∞–Ω–∞–ª—ã –¥–∞–Ω–Ω—ã—Ö - —ç—Ç–æ –≤—Å–µ–≥–æ –ª–∏—à—å –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è –ø–æ—Ç–æ–∫–æ–≤. –ù–∞—Å—Ç—Ä–æ–π–∫–∏, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –∫–∞–Ω–∞–ª–∞ –∏ –ø–æ—Ä—è–¥–∫–æ–º –¥–æ—Å—Ç–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π, –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∞–≥–µ–Ω—Ç—É `SCTP`.

–ö–∞–Ω–∞–ª—ã –¥–∞–Ω–Ω—ã—Ö –∏–º–µ—é—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏, –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –≤ `SCTP`, –Ω–∞–ø—Ä–∏–º–µ—Ä, –º–µ—Ç–∫–∏ –∫–∞–Ω–∞–ª–æ–≤ (channel labels). –î–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ü—Ä–æ—Ç–æ–∫–æ–ª —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∫–∞–Ω–∞–ª–∞ –¥–∞–Ω–Ω—ã—Ö (Data Channel Establishment Protocol, DCEP), –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –≤ [RFC 8832](https://tools.ietf.org/html/rfc8832). `DCEP` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –º–µ—Ç–∫–æ–π –∫–∞–Ω–∞–ª–∞ –∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º.

### DCEP

`DCEP` —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–≤–∞ —Å–æ–æ–±—â–µ–Ω–∏—è: `DATA_CHANNEL_OPEN` –∏ `DATA_CHANNEL_ACK`. –û—Ç–∫—Ä—ã—Ç—ã–π –∫–∞–Ω–∞–ª –¥–æ–ª–∂–µ–Ω –ø–æ–ª—É—á–∏—Ç—å `ACK` –æ—Ç —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ –ø–∏—Ä–∞.

#### DATA_CHANNEL_OPEN

–î–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∞–≥–µ–Ω—Ç–æ–º, –∂–µ–ª–∞—é—â–∏–º –æ—Ç–∫—Ä—ã—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ.

__–§–æ—Ä–º–∞—Ç –ø–∞–∫–µ—Ç–∞__

```
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  Message Type |  Channel Type |            Priority           |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                    Reliability Parameter                      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|         Label Length          |       Protocol Length         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\                                                               \
/                             Label                             /
\                                                               \
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\                                                               \
/                            Protocol                           /
\                                                               \
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
```

__Message Type__

`Message Type` (—Ç–∏–ø —Å–æ–æ–±—â–µ–Ω–∏—è) –∏–º–µ–µ—Ç —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ `0x03`.

__Channel Type__

`Channel Type` (—Ç–∏–ø –∫–∞–Ω–∞–ª–∞) –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∞–∫–∏–µ –∞—Ç—Ä–∏–±—É—Ç—ã –∫–∞–Ω–∞–ª–∞, –∫–∞–∫ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –ø–æ—Ä—è–¥–æ–∫. –ú–æ–∂–µ—Ç –∏–º–µ—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è:

- `DATA_CHANNEL_RELIABLE` (`0x00`) - —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–µ –±—ã–ª–∏ –ø–æ—Ç–µ—Ä—è–Ω—ã –∏ –±—É–¥—É—Ç –ø—Ä–∏–±—ã–≤–∞—Ç—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ;
- `DATA_CHANNEL_RELIABLE_UNORDERED` (`0x80`) - —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–µ –±—ã–ª–∏ –ø–æ—Ç–µ—Ä—è–Ω—ã, –Ω–æ –º–æ–≥—É—Ç –ø—Ä–∏–±—ã–≤–∞—Ç—å –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ;
- `DATA_CHANNEL_PARTIAL_RELIABLE_REXMIT` (`0x01`) - —Å–æ–æ–±—â–µ–Ω–∏—è –º–æ–≥—É—Ç –±—ã—Ç—å –ø–æ—Ç–µ—Ä—è–Ω—ã (–ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –ø–æ–ø—ã—Ç–æ–∫), –Ω–æ –±—É–¥—É—Ç –ø—Ä–∏–±—ã–≤–∞—Ç—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ;
- `DATA_CHANNEL_PARTIAL_RELIABLE_REXMIT_UNORDERED` (`0x81`) - —Å–æ–æ–±—â–µ–Ω–∏—è –º–æ–≥—É—Ç –±—ã—Ç—å –ø–æ—Ç–µ—Ä—è–Ω—ã (–ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –ø–æ–ø—ã—Ç–æ–∫) –∏ –º–æ–≥—É—Ç –ø—Ä–∏–±—ã–≤–∞—Ç—å –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ;
- `DATA_CHANNEL_PARTIAL_RELIABLE_TIMED` (`0x02`) - —Å–æ–æ–±—â–µ–Ω–∏—è –º–æ–≥—É—Ç –±—ã—Ç—å –ø–æ—Ç–µ—Ä—è–Ω—ã (–µ—Å–ª–∏ –æ–Ω–∏ –Ω–µ –ø—Ä–∏–±—ã–≤–∞—é—Ç –≤ –∑–∞–ø—Ä–æ—à–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è), –Ω–æ –±—É–¥—É—Ç –ø—Ä–∏–±—ã–≤–∞—Ç—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ;
- `DATA_CHANNEL_PARTIAL_RELIABLE_TIMED_UNORDERED` (`0x82`) -  —Å–æ–æ–±—â–µ–Ω–∏—è –º–æ–≥—É—Ç –±—ã—Ç—å –ø–æ—Ç–µ—Ä—è–Ω—ã (–µ—Å–ª–∏ –æ–Ω–∏ –Ω–µ –ø—Ä–∏–±—ã–≤–∞—é—Ç –≤ –∑–∞–ø—Ä–æ—à–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è) –∏ –º–æ–≥—É—Ç –ø—Ä–∏–±—ã–≤–∞—Ç—å –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ.

__Priority (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)__

–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∫–∞–Ω–∞–ª–∞. –ö–∞–Ω–∞–ª—ã —Å –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º —Å–æ–∑–¥–∞—é—Ç—Å—è —Ä–∞–Ω—å—à–µ. –ë–æ–ª—å—à–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –Ω–∏–∑–∫–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º –Ω–µ –∑–∞–¥–µ—Ä–∂–∏–≤–∞—é—Ç –æ—Ç–ø—Ä–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π —Å –≤—ã—Å–æ–∫–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º.

__Reliability Parameter (–ø–∞—Ä–∞–º–µ—Ç—Ä –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏)__

–ï—Å–ª–∏ —Ç–∏–ø–æ–º –∫–∞–Ω–∞–ª–∞ —è–≤–ª—è–µ—Ç—Å—è `DATA_CHANNEL_PARTIAL_RELIABLE`, —Å—É—Ñ—Ñ–∏–∫—Å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–ª–µ–¥—É—é—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:

- `REXMIT` - –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è;
- `TIMED` - –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫ –¥–æ–ª–≥–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –±—É–¥–µ—Ç –ø—ã—Ç–∞—Ç—å—Å—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ (–≤ –º—Å).

__Label (–º–µ—Ç–∫–∞, –ø–æ–¥–ø–∏—Å—å)__

–°—Ç—Ä–æ–∫–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `UTF-8`, —Å–æ–¥–µ—Ä–∂–∞—â–∞—è –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞ –¥–∞–Ω–Ω—ã—Ö. –î–∞–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç–æ–π.

__Protocol (–ø—Ä–æ—Ç–æ–∫–æ–ª)__

–ï—Å–ª–∏ –¥–∞–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ —è–≤–ª—è–µ—Ç—Å—è –ø—É—Å—Ç–æ–π, –ø—Ä–æ—Ç–æ–∫–æ–ª —Å—á–∏—Ç–∞–µ—Ç—Å—è –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º. –ï—Å–ª–∏ —Å—Ç—Ä–æ–∫–∞ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ø—É—Å—Ç–æ–π, –≤ –Ω–µ–π –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ "–†–µ–µ—Å—Ç—Ä–∞ –∏–º–µ–Ω –ø–æ–¥–ø—Ä–æ—Ç–æ–∫–æ–ª–∞ WebSocket" (WebSocket Subprotocol Name Registry), –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –≤ [RFC 6455](https://tools.ietf.org/html/rfc6455#page-61).

#### DATA_CHANNEL_ACK

–î–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —è–≤–ª—è–µ—Ç—Å—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º –æ—Ç–∫—Ä—ã—Ç–∏—è –∫–∞–Ω–∞–ª–∞ –¥–∞–Ω–Ω—ã—Ö, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º–æ–≥–æ –æ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –ø–æ–ª—É—á–∞—Ç–µ–ª—é.

__–§–æ—Ä–º–∞—Ç –ø–∞–∫–µ—Ç–∞__

```
0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  Message Type |
+-+-+-+-+-+-+-+-+
```

### SCTP

`SCTP` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

- –º—É–ª—å—Ç–∏–ø–ª–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ;
- –Ω–∞–¥–µ–∂–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π (–¥–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–µ—Ö–∞–Ω–∏–∑–º –ø–µ—Ä–µ–¥–∞—á–∏, –ø–æ–¥–æ–±–Ω—ã–π `TCP`);
- –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —á–∞—Å—Ç–∏—á–Ω–æ–π –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ (partial-reliability options);
- –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏;
- –∫–æ–Ω—Ç—Ä–æ–ª—å –ø–æ—Ç–æ–∫–∞.

–ú—ã —Ä–∞–∑–¥–µ–ª–∏–º —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–µ `SCTP` –Ω–∞ —Ç—Ä–∏ —á–∞—Å—Ç–∏.

### –ö–æ–Ω—Ü–µ–ø—Ü–∏—è

`SCTP` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π. –ú—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º —Ç–æ–ª—å–∫–æ —Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ `WebRTC`. –ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è `WebRTC`, –æ—Ç–Ω–æ—Å—è—Ç—Å—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –∞–¥—Ä–µ—Å–∞—Ü–∏—è (multi-homing) –∏ –≤—ã–±–æ—Ä –ø—É—Ç–∏.

`SCTP` —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –±–æ–ª–µ–µ 20 –ª–µ—Ç, —Ç–∞–∫ —á—Ç–æ –µ–≥–æ –Ω–µ–ø—Ä–æ—Å—Ç–æ –ø–æ–Ω—è—Ç—å.

#### –ê—Å—Å–æ—Ü–∏–∞—Ü–∏—è

–ê—Å—Å–æ—Ü–∏–∞—Ü–∏—è (assosiation) - —Ç–µ—Ä–º–∏–Ω, –æ—Ç–Ω–æ—Å—è—â–∏–π—Å—è –∫ —Å–µ—Å—Å–∏–∏ `SCTP`. –≠—Ç–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ–º–æ–µ –º–µ–∂–¥—É –¥–≤—É–º—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—â–∏–º–∏ –∞–≥–µ–Ω—Ç–∞–º–∏.

#### –ü–æ—Ç–æ–∫–∏

–ü–æ—Ç–æ–∫ (stream) - —ç—Ç–æ –¥–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö. –ö–∞–Ω–∞–ª –¥–∞–Ω–Ω—ã—Ö - —ç—Ç–æ –ø–æ—Ç–æ–∫. –ö–∞–∂–¥–∞—è –∞—Å—Å–æ—Ü–∏–∞—Ü–∏—è `SCTP` —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ø–∏—Å–æ–∫ –ø–æ—Ç–æ–∫–æ–≤. –ö–∞–∂–¥—ã–π –ø–æ—Ç–æ–∫ –º–æ–∂–µ—Ç –æ–±–ª–∞–¥–∞—Ç—å —Ä–∞–∑–Ω—ã–º —Ç–∏–ø–æ–º –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏.

`WebRTC` –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –ø–æ—Ç–æ–∫ —Ç–æ–ª—å–∫–æ –≤ –º–æ–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω–∏—è, –Ω–æ `SCTP` –ø–æ–∑–≤–æ–ª—è–µ—Ç –º–µ–Ω—è—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è.

#### –î–∞—Ç–∞–≥—Ä–∞–º–º—ã

–ö–∞–¥—Ä—ã (—Ñ—Ä–µ–π–º—ã, frames) `SCTP` - —ç—Ç–æ –Ω–∞–±–æ—Ä –¥–∞—Ç–∞–≥—Ä–∞–º–º, –∞ –Ω–µ –±–∞–π—Ç–æ–≤—ã–π –ø–æ—Ç–æ–∫. –û—Ç–ø—Ä–∞–≤–∫–∞ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ—Ö–æ–∂–∞ –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `UDP` –≤–º–µ—Å—Ç–æ `TCP`. –î–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π —á–µ—Ä–µ–∑ –æ–¥–∏–Ω –ø–æ—Ç–æ–∫ –Ω–µ –Ω—É–∂–µ–Ω –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–¥.

–°–æ–æ–±—â–µ–Ω–∏—è `SCTP` –Ω–µ –∏–º–µ—é—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –ø–æ —Ä–∞–∑–º–µ—Ä—É, –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π `UDP`. –û–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ `SCTP` –º–æ–∂–µ—Ç –∏–º–µ—Ç—å —Ä–∞–∑–º–µ—Ä –≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ –≥–∏–≥–∞–±–∞–π—Ç.

#### –ß–∞—Å—Ç–∏

–ü—Ä–æ—Ç–æ–∫–æ–ª `SCTP` —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —á–∞—Å—Ç–µ–π (chunks). –°—É—â–µ—Å—Ç–≤—É—é—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã —á–∞—Å—Ç–µ–π. –≠—Ç–∏ —á–∞—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –≤—Å–µ–π –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ, —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è, –∫–æ–Ω—Ç—Ä–æ–ª—å –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏ –∏ —Ç.–¥. - –≤—Å–µ —ç—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é —á–∞—Å—Ç–µ–π.

–ö–∞–∂–¥—ã–π –ø–∞–∫–µ—Ç `SCTP` —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Å–ø–∏—Å–∫–∞ —á–∞—Å—Ç–µ–π. –ü–æ—ç—Ç–æ–º—É –≤ –æ–¥–Ω–æ–º –ø–∞–∫–µ—Ç–µ `UDP` –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–∞—Å—Ç–µ–π —Å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –∏–∑ —Ä–∞–∑–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤.

#### –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä –ø–µ—Ä–µ–¥–∞—á–∏

–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä –ø–µ—Ä–µ–¥–∞—á–∏ (Transmission Sequence Number, TSN) - —ç—Ç–æ –≥–ª–æ–±–∞–ª—å–Ω—ã–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —á–∞—Å—Ç–µ–π `DATA`. –ß–∞—Å—Ç—å `DATA` —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –∂–µ–ª–∞–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å. `TSN` –ø–æ–º–æ–≥–∞–µ—Ç –ø–æ–ª—É—á–∞—Ç–µ–ª—é –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –ø–æ—Ç–µ—Ä—é –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –ø–∞–∫–µ—Ç–æ–≤.

–ï—Å–ª–∏ –ø–æ–ª—É—á–∞—Ç–µ–ª—å –∑–∞–º–µ—á–∞–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–π `TSN`, –æ–Ω –Ω–µ –ø–µ—Ä–µ–¥–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –¥–æ —Ä–µ—à–µ–Ω–∏—è —ç—Ç–æ–π –ø—Ä–æ–±–ª–µ–º—ã.

#### –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ—Ç–æ–∫–∞

–ö–∞–∂–¥—ã–π –ø–æ—Ç–æ–∫ –∏–º–µ–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä. –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–∞–Ω–∞–ª–∞ –¥–∞–Ω–Ω—ã—Ö —Å —è–≤–Ω—ã–º `ID`, —ç—Ç–æ—Ç `ID` –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è `SCTP` –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ –ø–æ—Ç–æ–∫–∞. –ï—Å–ª–∏ —Ç–∞–∫–æ–π `ID` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –æ–Ω –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

#### –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –ø–æ–ª–µ–∑–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏

–ö–∞–∂–¥–∞—è —á–∞—Å—Ç—å `DATA` —Ç–∞–∫–∂–µ –∏–º–µ–µ—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –ø–æ–ª–µ–∑–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ (Payload Protocol Identifier, PPID). –û–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ç–∏–ø–∞ –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö. `SCTP` –∏–º–µ–µ—Ç –º–Ω–æ–≥–æ `PPID`, –Ω–æ –≤ `WebRTC` –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ –ø—è—Ç—å:

- `WebRTC DCEP` (`50`) - —Å–æ–æ–±—â–µ–Ω–∏—è `DCEP`;
- `WebRTC String` (`51`) - —Å—Ç—Ä–æ–∫–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è `DataChannel`;
- `WebRTC Binary` (`53`) - –±–∏–Ω–∞—Ä–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è `DataChannel`;
- `WebRTC String Empty` (`56`) - —Å—Ç—Ä–æ–∫–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏—è `DataChannel` —Å –Ω—É–ª–µ–≤–æ–π –¥–ª–∏–Ω–æ–π (–ø—É—Å—Ç–æ–µ —Å—Ç—Ä–æ–∫–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ);
- `WebRTC Binary Empty` (`57`) - –±–∏–Ω–∞—Ä–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏—è `DataChannel` —Å –Ω—É–ª–µ–≤–æ–π –¥–ª–∏–Ω–æ–π (–ø—É—Å—Ç–æ–µ –±–∏–Ω–∞—Ä–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ).

### –ü—Ä–æ—Ç–æ–∫–æ–ª

–ù–∏–∂–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ "—á–∞–Ω–∫–∏", –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ `WebRTC`.

–ö–∞–∂–¥—ã–π —á–∞–Ω–∫ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –ø–æ–ª—è `type`. –ü–µ—Ä–µ–¥ —Å–ø–∏—Å–∫–æ–º —á–∞–Ω–∫–æ–≤ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∑–∞–≥–æ–ª–æ–≤–æ–∫ (header).

#### DATA

```
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Type = 0    | Reserved|U|B|E|    Length                     |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                              TSN                              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|      Stream Identifier        |   Stream Sequence Number      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                  Payload Protocol Identifier                  |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\                                                               \
/                            User Data                          /
\                                                               \
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
```

–ß–∞–Ω–∫ `DATA` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö. –ö–æ–≥–¥–∞ –º—ã —á—Ç–æ-—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —á–µ—Ä–µ–∑ –∫–∞–Ω–∞–ª –¥–∞–Ω–Ω—ã—Ö, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —ç—Ç–æ—Ç —á–∞–Ω–∫.

–ë–∏—Ç `U` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è, –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–π –ø–∞–∫–µ—Ç —è–≤–ª—è–µ—Ç—Å—è –Ω–µ—É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω—ã–º (unordered). –ú—ã –º–æ–∂–µ–º –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä –ø–æ—Ç–æ–∫–∞.

`B` –∏ `E` - —ç—Ç–æ –Ω–∞—á–∞–ª—å–Ω—ã–π –∏ –∫–æ–Ω–µ—á–Ω—ã–π –±–∏—Ç—ã. –ï—Å–ª–∏ –º—ã —Ö–æ—Ç–∏–º –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —è–≤–ª—è–µ—Ç—Å—è —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏–º –¥–ª—è –æ–¥–Ω–æ–≥–æ —á–∞–Ω–∫–∞ `DATA`, –æ–Ω–æ –±—É–¥–µ—Ç —Ä–∞–∑–¥–µ–ª–µ–Ω–æ (fragmented) –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–∞–Ω–∫–æ–≤ `DATA`, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã—Ö –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–∞–∫–µ—Ç–∞—Ö. –î–ª—è —ç—Ç–æ–≥–æ `SCTP` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±–∏—Ç—ã `B` –∏ `E`, –∞ —Ç–∞–∫–∂–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –Ω–æ–º–µ—Ä–∞.

- `B=1`, `E=0` - –ø–µ—Ä–≤–∞—è —á–∞—Å—Ç—å —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è;
- `B=0`, `E=0` - —Å—Ä–µ–¥–Ω—è—è —á–∞—Å—Ç—å —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è;
- `B=0`, `E=1` - –ø–æ—Å–ª–µ–¥–Ω—è—è —á–∞—Å—Ç—å —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è;
- `B=1`, `E=1` - —Ü–µ–ª–æ–µ (–Ω–µ—Ñ—Ä–∞–≥–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ) —Å–æ–æ–±—â–µ–Ω–∏–µ.

`TSN` - –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä –ø–µ—Ä–µ–¥–∞—á–∏, —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –¥–∞–Ω–Ω–æ–≥–æ —á–∞–Ω–∫–∞ `DATA`. –ü–æ—Å–ª–µ `4 294 967 295` —á–∞–Ω–∫–∞ `TSN` –æ–±–Ω—É–ª—è–µ—Ç—Å—è. `TSN` —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –µ–¥–∏–Ω–∏—Ü—É –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —á–∞–Ω–∫–∞ –≤–æ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∞—Ç–µ–ª—é –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –ø–æ—Ä—è–¥–æ–∫ —á–∞–Ω–∫–æ–≤ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è.

`Stream Identifier` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ—Ç–æ–∫–∞, –∫–æ—Ç–æ—Ä–æ–º—É –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç –¥–∞–Ω–Ω—ã–µ.

`Stream Sequence Number` - —ç—Ç–æ 16-–±–∏—Ç–Ω—ã–π –Ω–æ–º–µ—Ä, —É–≤–µ–ª–∏—á–∏–≤–∞—é—â–∏–π—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏ –∏ –≤–∫–ª—é—á–∞–µ–º—ã–π –≤ –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏—è —á–∞–Ω–∫–∞ `DATA`. –ü–æ—Å–ª–µ `65 535` —Å–æ–æ–±—â–µ–Ω–∏—è `SSN` –æ–±–Ω—É–ª—è–µ—Ç—Å—è. –≠—Ç–æ —á–∏—Å–ª–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ—Ä—è–¥–∫–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–ª—É—á–∞—Ç–µ–ª—é, –∫–æ–≥–¥–∞ `U` –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ `0`. `SSN` –ø–æ—Ö–æ–∂ –Ω–∞ `TSN`, –Ω–æ –æ–Ω —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è, –∞ –Ω–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —á–∞–Ω–∫–∞.

`Payload Protocol Identifier` - —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã—Ö —á–µ—Ä–µ–∑ –ø–æ—Ç–æ–∫. –í —Å–ª—É—á–∞–µ —Å `WebRTC` –æ–Ω –±—É–¥–µ—Ç `DCEP`, —Å—Ç—Ä–æ–∫–æ–π –∏–ª–∏ –¥–≤–æ–∏—á–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏.

`User Data` - —ç—Ç–æ —Ç–æ, —á—Ç–æ –º—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º. –í—Å–µ –¥–∞–Ω–Ω—ã–µ, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–µ —á–µ—Ä–µ–∑ `WebRTC`, –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ —á–∞–Ω–∫ `DATA`.

#### INIT

```
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Type = 1    |  Chunk Flags  |      Chunk Length             |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                         Initiate Tag                          |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|           Advertised Receiver Window Credit (a_rwnd)          |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  Number of Outbound Streams   |  Number of Inbound Streams    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                          Initial TSN                          |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\                                                               \
/              Optional/Variable-Length Parameters              /
\                                                               \
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
```

–ß–∞–Ω–∫ `INIT` –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –∞—Å—Å–æ—Ü–∏–∞—Ü–∏–∏.

`Initiate Tag` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ [–∫—É–∫–∏ (cookie)](https://ru.wikipedia.org/wiki/Cookie). –ö—É–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∞—Ç–∞–∫ ["–ß–µ–ª–æ–≤–µ–∫ –ø–æ—Å–µ—Ä–µ–¥–∏–Ω–µ"](https://ru.wikipedia.org/wiki/%D0%90%D1%82%D0%B0%D0%BA%D0%B0_%D0%BF%D0%BE%D1%81%D1%80%D0%B5%D0%B4%D0%BD%D0%B8%D0%BA%D0%B0) –∏ ["–û—Ç–∫–∞–∑ –≤ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–∏"](https://ru.wikipedia.org/wiki/DoS-%D0%B0%D1%82%D0%B0%D0%BA%D0%B0).

`Advertised Receiver Window Credit` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏ `SCTP`. –≠—Ç–æ –ø–æ–ª–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–∞–∑–º–µ—Ä –±—É—Ñ–µ—Ä–∞, –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–º –¥–ª—è –¥–∞–Ω–Ω–æ–π –∞—Å—Å–æ—Ü–∏–∞—Ü–∏–∏.

`Number of Outbound/Inbound Streams` —É–≤–µ–¥–æ–º–ª—è–µ—Ç —É–¥–∞–ª–µ–Ω–Ω—ã–π –ø–∏—Ä –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –ø–æ—Ç–æ–∫–æ–≤, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã–º –∞–≥–µ–Ω—Ç–æ–º.

`Initial TSN` - –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–µ —á–∏—Å–ª–æ (`uint32`), —Å –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω—ã–π `TSN`.

–ü–æ–ª–µ `Optional Parameters` –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–æ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –ø—Ä–æ—Ç–æ–∫–æ–ª –Ω–æ–≤—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π.

#### SACK

```
0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Type = 3    |Chunk  Flags   |      Chunk Length             |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                      Cumulative TSN Ack                       |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|          Advertised Receiver Window Credit (a_rwnd)           |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Number of Gap Ack Blocks = N  |  Number of Duplicate TSNs = X |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  Gap Ack Block #1 Start       |   Gap Ack Block #1 End        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
/                                                               /
\                              ...                              \
/                                                               /
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Gap Ack Block #N Start      |  Gap Ack Block #N End         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                       Duplicate TSN 1                         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
/                                                               /
\                              ...                              \
/                                                               /
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                       Duplicate TSN X                         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
```

–ß–∞–Ω–∫ `SACK` - —ç—Ç–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–∏—è –ø–∞–∫–µ—Ç–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–º. –î–æ –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ–º `SACK` –¥–ª—è `TSN` –æ–Ω –±—É–¥–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —á–∞–Ω–∫ `DATA` –ø–æ –∑–∞–ø—Ä–æ—Å—É. –ù–æ `SACK` –Ω–µ —Ç–æ–ª—å–∫–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç `TSN`.

`Cumulative TSN ACK` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø–æ–ª—É—á–µ–Ω–Ω—ã–π `TSN`.

`Advertised Receiver Window Credit` - —Ä–∞–∑–º–µ—Ä –±—É—Ñ–µ—Ä–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª—è. –≠—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å—Å—è –≤ —Ç–µ—á–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏, –µ—Å–ª–∏ —É –ø–æ–ª—É—á–∞—Ç–µ–ª—è –ø–æ—è–≤–∏—Ç—Å—è –±–æ–ª—å—à–µ —Å–≤–æ–±–æ–¥–Ω–æ–π –ø–∞–º—è—Ç–∏.

`Ack Blocks` - —ç—Ç–æ `TSN`, –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –ø–æ—Å–ª–µ `Cumulative TSN ACK`. –≠—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –±—Ä–µ—à–∏ –≤ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–∞—Ö. –î–æ–ø—É—Å—Ç–∏–º, –±—ã–ª–∏ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω—ã —á–∞–Ω–∫–∏ `DATA` —Å `TSN`, –∏–º–µ—é—â–∏–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è `100`, `102`, `103` –∏ `104`. `Cumulative TSN ACK` –±—É–¥–µ—Ç –∏–º–µ—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ `100`, –Ω–æ `Ack Blocks` –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –æ–± –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ —á–∞–Ω–∫–æ–≤ `102`, `103` –∏ `104`.

`Duplicate TSN` –∏–Ω—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è, —á—Ç–æ –æ–Ω –ø–æ–ª—É—á–∏–ª —É–∫–∞–∑–∞–Ω–Ω—ã–µ —á–∞–Ω–∫–∏ `DATA` –±–æ–ª–µ–µ –æ–¥–Ω–æ–≥–æ —Ä–∞–∑–∞.

#### HEARTBEAT

```
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Type = 4    | Chunk  Flags  |      Heartbeat Length         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\                                                               \
/            Heartbeat Information TLV (Variable-Length)        /
\                                                               \
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
```

–ß–∞–Ω–∫ `HEARTBEAT` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ –ø–∏—Ä–∞. –ú–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –æ—Ç–∫—Ä—ã—Ç–æ—Å—Ç–∏ `NAT` –±–µ–∑ –æ—Ç–ø—Ä–∞–≤–∫–∏ —á–∞–Ω–∫–æ–≤ `DATA`.

#### ABORT

```
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Type = 6    |Reserved     |T|           Length              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
/                                                               /
\               Zero or more Error Causes                       \
/                                                               /
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
```

–ß–∞–Ω–∫ `ABORT` —Ä–µ–∑–∫–æ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –∞—Å—Å–æ—Ü–∏–∞—Ü–∏—é. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –æ–¥–Ω–∞ –∏–∑ —Å—Ç–æ—Ä–æ–Ω –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ—à–∏–±–∫–∏ (error state). –î–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —á–∞–Ω–∫ `SHUTDOWN`.

#### SHUTDOWN

```
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Type = 7    | Chunk  Flags  |      Length = 8               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                      Cumulative TSN Ack                       |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
```

–ß–∞–Ω–∫ `SHUTDOWN` –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –ø–ª–∞–≤–Ω–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è –∞—Å—Å–æ—Ü–∏–∞—Ü–∏–∏ `SCTP`. –ö–∞–∂–¥—ã–π –∞–≥–µ–Ω—Ç –∏–Ω—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –¥—Ä—É–≥—É—é —Å—Ç–æ—Ä–æ–Ω—É –æ –ø–æ—Å–ª–µ–¥–Ω–µ–º –ø–æ–ª—É—á–µ–Ω–Ω–æ–º `TSN`. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–±–µ–¥–∏—Ç—å—Å—è –≤ —Ç–æ–º, —á—Ç–æ –Ω–∏–∫–∞–∫–∏–µ –ø–∞–∫–µ—Ç—ã –Ω–µ –±—ã–ª–∏ –ø–æ—Ç–µ—Ä—è–Ω—ã. `WebRTC` –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –∞—Å—Å–æ—Ü–∏–∞—Ü–∏—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –ü–æ—ç—Ç–æ–º—É –∫–∞–∂–¥—ã–π –∫–∞–Ω–∞–ª –¥–∞–Ω–Ω—ã—Ö –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–∫—Ä—ã—Ç –≤—Ä—É—á–Ω—É—é.

`Cumulative TSN ACK` - –ø–æ—Å–ª–µ–¥–Ω–∏–π –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π `TSN`. –ö–∞–∂–¥–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —á–∞–Ω–∫–∞ `DATA` —Å —ç—Ç–∏–º `TSN`.

#### ERROR

```
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Type = 9    | Chunk  Flags  |           Length              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\                                                               \
/                 –û–¥–Ω–∞ –∏–ª–∏ –±–æ–ª–µ–µ –ø—Ä–∏—á–∏–Ω–∞ –æ—à–∏–±–∫–∏                 /
\                                                               \
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
```

–ß–∞–Ω–∫ `ERROR` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥—Ä—É–≥–æ–π —Å—Ç–æ—Ä–æ–Ω—ã –æ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ–π –¥–ª—è –∞—Å—Å–æ—Ü–∏–∞—Ü–∏–∏ –æ—à–∏–±–∫–∏.

#### TSN FORWARD

```
0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Type = 192  |  Flags = 0x00 |        Length = Variable      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                      New Cumulative TSN                       |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|         Stream-1              |       Stream Sequence-1       |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\                                                               /
/                                                               \
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|         Stream-N              |       Stream Sequence-N       |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
```

–ß–∞–Ω–∫ `TSN FORWARD` —Å–¥–≤–∏–≥–∞–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã–π `TSN` –≤–ø–µ—Ä–µ–¥. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø–∞–∫–µ—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–º –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω—ã. –ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ –º—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ –ø–∞–∫–µ—Ç—ã `10 11 12 13 14 15`, –∫–æ—Ç–æ—Ä—ã–µ —è–≤–ª—è—é—Ç—Å—è –≤–∞–ª–∏–¥–Ω—ã–º–∏ —Ç–æ–ª—å–∫–æ –≤ —Å–ª—É—á–∞–µ –¥–æ—Å—Ç–∞–≤–∫–∏ –≤—Å–µ—Ö –ø–∞–∫–µ—Ç–æ–≤ –∏ —Ç–æ–ª—å–∫–æ –≤ —Å–ª—É—á–∞–µ —Å–≤–æ–µ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏.

–ï—Å–ª–∏ –º—ã –ø–æ—Ç–µ—Ä—è–ª–∏ –ø–∞–∫–µ—Ç—ã `12` –∏ `13`, –≤ –æ—Ç–ø—Ä–∞–≤–∫–µ –ø–∞–∫–µ—Ç–æ–≤ `14` –∏ `15` –Ω–µ—Ç —Å–º—ã—Å–ª–∞. `SCTP` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —á–∞–Ω–∫ `TSN FORWARD` –¥–ª—è —Ä–µ—à–µ–Ω–∏—è —ç—Ç–æ–π –∑–∞–¥–∞—á–∏. –û–Ω —Å–æ–æ–±—â–∞–µ—Ç –ø–æ–ª—É—á–∞—Ç–µ–ª—é, —á—Ç–æ –ø–∞–∫–µ—Ç—ã `14` –∏ `15` –Ω–µ –±—É–¥—É—Ç –¥–æ—Å—Ç–∞–≤–ª–µ–Ω—ã.

`New Cumulative TSN` - –Ω–æ–≤—ã–π `TSN` –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è. –õ—é–±—ã–µ –ø–∞–∫–µ—Ç—ã, –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥ –Ω–∏–º, –±—É–¥—É—Ç –æ—Ç–±—Ä–æ—à–µ–Ω—ã.

`Stream` –∏ `Stream Sequence` –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —Å–¥–≤–∏–≥–∞ –≤–ø–µ—Ä–µ–¥ `Stream Sequence Number`.

### –ö–æ–Ω–≤–µ–π–µ—Ä SCTP

–ï—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö –≤–µ—â–µ–π, –∫–∞—Å–∞—é—â–∏—Ö—Å—è –º–∞—à–∏–Ω—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è (state machine) `SCTP`. `WebRTC` –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —ç—Ç–æ–π –º–∞—à–∏–Ω—ã - —Ç–∞–∫–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –º—ã —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –Ω–µ –±—É–¥–µ–º. –ú—ã —Ç–∞–∫–∂–µ —É–ø—Ä–æ—Å—Ç–∏–º –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è –∏—Ö –ª—É—á—à–µ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è.

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

–ß–∞–Ω–∫–∏ `INIT` –∏ `INIT ACK` –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –æ–±–º–µ–Ω–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –∫–∞–∂–¥–æ–≥–æ –ø–∏—Ä–∞. `SCTP` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫—É–∫–∏ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–∏—Ä–∞, —Å –∫–æ—Ç–æ—Ä—ã–º –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è. –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–µ—Ä–µ—Ö–≤–∞—Ç —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è –∏ [`DoS-–∞—Ç–∞–∫–∏`](https://ru.wikipedia.org/wiki/DoS-%D0%B0%D1%82%D0%B0%D0%BA%D0%B0).

–ß–∞–Ω–∫ `INIT ACK` —Å–æ–¥–µ—Ä–∂–∏—Ç –∫—É–∫–∏. –ö—É–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è —Å–æ–∑–¥–∞—Ç–µ–ª—é —Å –ø–æ–º–æ—â—å—é `COOKIE ECHO`. –ï—Å–ª–∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –∫—É–∫–∏ –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è `COOKIE ACK` –∏ –º–æ–∂–Ω–æ –æ–±–º–µ–Ω–∏–≤–∞—Ç—å—Å—è —á–∞–Ω–∫–∞–º–∏ `DATA`.

<img src="https://habrastorage.org/webt/sw/rr/cw/swrrcwnl9zkwf3nijdfao5sufcg.png" />
<br />

#### –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏

–î–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —á–∞–Ω–∫ `SHUTDOWN`. –ö–æ–≥–¥–∞ –∞–≥–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç —á–∞–Ω–∫ `SHUTDOWN`, –æ–Ω –∂–¥–µ—Ç –ø–æ–ª—É—á–µ–Ω–∏—è –∑–∞–ø—Ä–æ—à–µ–Ω–Ω–æ–≥–æ `Cumulative TSN ACK`. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–±–µ–¥–∏—Ç—å—Å—è –≤ –¥–æ—Å—Ç–∞–≤–∫–µ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö, –¥–∞–∂–µ –µ—Å–ª–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —è–≤–ª—è–µ—Ç—Å—è –Ω–µ–Ω–∞–¥–µ–∂–Ω—ã–º.

#### –ú–µ—Ö–∞–Ω–∏–∑–º –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

–î–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –≤ –∞–∫—Ç–∏–≤–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —á–∞–Ω–∫–∏ `HEARTBEAT REQUEST` –∏ `HEARTBEAT ACK`. –û–Ω–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –ø–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å—é. `SCTP` —Ç–∞–∫–∂–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç [—ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—É—é –≤—ã–¥–µ—Ä–∂–∫—É](https://ru.wikipedia.org/wiki/%D0%AD%D0%BA%D1%81%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%86%D0%B8%D0%B0%D0%BB%D1%8C%D0%BD%D0%B0%D1%8F_%D0%B2%D1%8B%D0%B4%D0%B5%D1%80%D0%B6%D0%BA%D0%B0) (exponential backoff), –∫–æ–≥–¥–∞ –ø–∞–∫–µ—Ç—ã –Ω–µ –¥–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è.

–ß–∞–Ω–∫ `HEARTBEAT` —Ç–∞–∫–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Ä–µ–º—è, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–≤—É–º –∞—Å—Å–æ—Ü–∏–∞—Ü–∏—è–º —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å –≤—Ä–µ–º—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –¥–≤—É–º—è –∞–≥–µ–Ω—Ç–∞–º–∏.

## –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ

–î–∞–Ω–Ω—ã–π —Ä–∞–∑–¥–µ–ª –ø–æ—Å–≤—è—â–µ–Ω —Ç–æ–º—É, —á—Ç–æ –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Å –ø–æ–º–æ—â—å—é `WebRTC`, –∞ —Ç–∞–∫–∂–µ —Ç–æ–º—É, –∫–∞–∫ —ç—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è. –í—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ `WebRTC` –∏–º–µ—é—Ç —Å–≤–æ—é —Ü–µ–Ω—É –∏ —Ü–µ–Ω–Ω–æ—Å—Ç—å. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π `WebRTC` - –∑–∞–¥–∞—á–∞ –Ω–µ –∏–∑ –ø—Ä–æ—Å—Ç—ã—Ö.

### –°–ª—É—á–∞–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

–ú–Ω–æ–≥–∏–µ —Å—á–∏—Ç–∞—é—Ç, —á—Ç–æ `WebRTC` - —ç—Ç–æ –ø—Ä–æ –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ. –û–¥–Ω–∞–∫–æ, —ç—Ç–æ –Ω–∞–º–Ω–æ–≥–æ –±–æ–ª—å—à–µ. `WebRTC` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —à–∏—Ä–æ–∫–æ–º —Å–ø–µ–∫—Ç—Ä–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π. –í—Å–µ –≤—Ä–µ–º—è –ø–æ—è–≤–ª—è–µ—Ç—Å—è —á—Ç–æ-—Ç–æ –Ω–æ–≤–æ–µ.

#### –ö–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü-—Å–≤—è–∑—å

–ö–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü-—Å–≤—è–∑—å (conferencing) - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Å–ª—É—á–∞–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `WebRTC`. –ü—Ä–æ—Ç–æ–∫–æ–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–∏ –æ–¥–∏–Ω –¥—Ä—É–≥–æ–π –ø—Ä–æ—Ç–æ–∫–æ–ª. –°–∏—Å—Ç–µ–º—É –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü-—Å–≤—è–∑–∏ –º–æ–∂–Ω–æ –ø–æ—Å—Ç—Ä–æ–∏—Ç—å —Å –ø–æ–º–æ—â—å—é `WebSocket` –∏ –æ–Ω–∞ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å. –ù–æ –≤ —É—Å–ª–æ–≤–∏—è—Ö —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–π `WebRTC` - –ª—É—á—à–∏–π –≤—ã–±–æ—Ä.

`WebRTC` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª—å –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–¥–∞–ø—Ç–∏—Ä—É–µ–º—ã–π –±–∏—Ç—Ä–µ–π—Ç –¥–ª—è –º–µ–¥–∏–∞. –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–µ—Ç–µ–≤—ã—Ö —É—Å–ª–æ–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤—Å–µ–≥–¥–∞ –±—É–¥—É—Ç –∏–º–µ—Ç—å –Ω–∞–∏–ª—É—á—à–∏–π –æ–ø—ã—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –Ω–µ –Ω—É–∂–Ω–æ –ø–∏—Å–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–¥ –¥–ª—è –∏–∑–º–µ—Ä–µ–Ω–∏—è —ç—Ç–∏—Ö —É—Å–ª–æ–≤–∏–π.

–£—á–∞—Å—Ç–Ω–∏–∫–∏ –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏ –º–æ–≥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∏ –ø–æ–ª—É—á–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Ç–æ–∫–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ. –û–Ω–∏ —Ç–∞–∫–∂–µ –º–æ–≥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –∏ —É–¥–∞–ª—è—Ç—å –ø–æ—Ç–æ–∫–∏ –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è –≤ —Ç–µ—á–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏. –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–¥–µ–∫–∏ —Ç–∞–∫–∂–µ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ —Å–æ–≥–ª–∞—Å–æ–≤—ã–≤–∞—é—Ç—Å—è. –í–µ—Å—å —ç—Ç–æ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –±—Ä–∞—É–∑–µ—Ä–æ–º.

–¢–∞–∫–∞—è –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è —Ç–∞–∫–∂–µ –≤—ã–∏–≥—Ä—ã–≤–∞–µ—Ç –æ—Ç –Ω–∞–ª–∏—á–∏—è –∫–∞–Ω–∞–ª–æ–≤ –¥–∞–Ω–Ω—ã—Ö. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –æ–±–º–µ–Ω–∏–≤–∞—Ç—å—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (metadata) –∏–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏. –ú—ã –º–æ–∂–µ–º —Å–æ–∑–¥–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Ç–æ–∫–æ–≤ –∏ —Å–¥–µ–ª–∞—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∏–∑ –Ω–∏—Ö –±–æ–ª–µ–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–º–∏ –≤ —É—â–µ—Ä–± –Ω–∞–¥–µ–∂–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏–π.

#### –í–µ—â–∞–Ω–∏–µ

–í—Å–µ –±–æ–ª—å—à–µ –Ω–æ–≤—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `WebRTC`, —Å–≤—è–∑–∞–Ω—ã —Å –≤–µ—â–∞–Ω–∏–µ–º (broadcasting) –≤ —Ç–æ–π –∏–ª–∏ –∏–Ω–æ–π —Å—Ç–µ–ø–µ–Ω–∏. –ü—Ä–æ—Ç–æ–∫–æ–ª –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –∫–∞–∫ –¥–ª—è –∏–∑–¥–∞—Ç–µ–ª—è (publisher), —Ç–∞–∫ –∏ –¥–ª—è –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è (consumer) –º–µ–¥–∏–∞.

`WebRTC` —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ –æ–±–ª–µ–≥—á–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤–∏–¥–µ–æ. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –Ω–µ –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ –ü–û. –õ—é–±–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ —Å –±—Ä–∞—É–∑–µ—Ä–æ–º –º–æ–∂–µ—Ç –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –≤–∏–¥–µ–æ. –ò–∑–¥–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç—Ä–µ–∫–æ–≤ –∏ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∏–ª–∏ —É–¥–∞–ª—è—Ç—å –∏—Ö –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è. –≠—Ç–æ —è–≤–ª—è–µ—Ç—Å—è —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–º –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ–º –ø–µ—Ä–µ–¥ —Å—Ç–∞—Ä—ã–º–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∑–≤–æ–ª—è–ª–∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –∞—É–¥–∏–æ –∏–ª–∏ –≤–∏–¥–µ–æ—Ç—Ä–µ–∫ —á–µ—Ä–µ–∑ –æ–¥–Ω–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ.

`WebRTC` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º —Å–µ—Ä—å–µ–∑–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –∑–∞–¥–µ—Ä–∂–∫–æ–π –∏ –∫–∞—á–µ—Å—Ç–≤–æ–º. –í–∞–∂–Ω–æ, —á—Ç–æ –∑–∞–¥–µ—Ä–∂–∫–∞ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø—Ä–µ–≤—ã—à–∞–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ä–æ–≥ (threshold), –∏ –º—ã –º–æ–∂–µ–º –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è. –ú—ã –º–æ–∂–µ–º –∑–∞–ø—É—Å–∫–∞—Ç—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –≤–∏–¥–µ–æ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –µ–≥–æ –¥–æ—Å—Ç–∞–≤–∫–∏. –° –¥—Ä—É–≥–∏–º–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º–∏, —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É—é—â–∏–º–∏ –ø–æ–≤–µ—Ä—Ö `TCP`, —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å –Ω–µ —Ç–∞–∫ –ø—Ä–æ—Å—Ç–æ. –í –±—Ä–∞—É–∑–µ—Ä–µ –º—ã –ø—Ä–æ—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏ —Å—Ä–∞–∑—É –∏—Ö –ø–æ–ª—É—á–∞–µ–º.

#### –£–¥–∞–ª–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø

–£–¥–∞–ª–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø (remote access) - —ç—Ç–æ –∫–æ–≥–¥–∞ –º—ã –ø–æ–ª—É—á–∞–µ–º –¥–æ—Å—Ç—É–ø –∫ –¥—Ä—É–≥–æ–º—É –∫–æ–º–ø—å—é—Ç–µ—Ä—É —á–µ—Ä–µ–∑ `WebRTC`. –ú—ã –º–æ–∂–µ–º –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å —É–¥–∞–ª–µ–Ω–Ω—ã–π —Ö–æ—Å—Ç —Ü–µ–ª–∏–∫–æ–º –∏–ª–∏ —Ç–æ–ª—å–∫–æ –æ—Ç–¥–µ–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, —Ä–∞–±–æ—Ç–∞—é—â–µ–µ –Ω–∞ –Ω–µ–º. –≠—Ç–æ –æ—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–ª–æ–∂–Ω—ã—Ö –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á, –∫–æ–≥–¥–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π –º–æ—â–Ω–æ—Å—Ç–∏ –æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ. `WebRTC` ‚Äì —ç—Ç–æ —Ä–µ–≤–æ–ª—é—Ü–∏—è —Å—Ä–∞–∑—É –≤ —Ç—Ä–µ—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è—Ö.

`WebRTC` –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —É–¥–∞–ª–µ–Ω–Ω–æ–º—É —Ö–æ—Å—Ç—É, —Å–∫—Ä—ã—Ç–æ–º—É –æ—Ç –æ—Å—Ç–∞–ª—å–Ω–æ–≥–æ –º–∏—Ä–∞. –° –ø–æ–º–æ—â—å—é –æ–±—Ö–æ–¥–∞ `NAT` –º—ã –º–æ–∂–µ–º –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∫–æ–º–ø—å—é—Ç–µ—Ä—É, –¥–æ—Å—Ç—É–ø–Ω–æ–º—É —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ `STUN`. –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –Ω–µ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤–∏–¥–µ–æ —á–µ—Ä–µ–∑ –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–∞ –∏–ª–∏ "–ø–µ—Ä–µ—Ö–æ–¥–Ω–∏–∫" (—Ä–µ—Ç—Ä–∞–Ω—Å–ª—è—Ç–æ—Ä). –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ `NAT` —Ç–∞–∫–∂–µ –æ–±–ª–µ–≥—á–∞–µ—Ç [–¥–µ–ø–ª–æ–π](https://ru.wiktionary.org/wiki/%D0%B4%D0%B5%D0%BF%D0%BB%D0%BE%D0%B9) –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ù–∞–º –Ω–µ –Ω–∞–¥–æ –±–µ—Å–ø–æ–∫–æ–∏—Ç—å—Å—è –æ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –ø–æ—Ä—Ç–æ–≤ –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ `IP`.

–ö–∞–Ω–∞–ª—ã –¥–∞–Ω–Ω—ã—Ö —Ç–∞–∫–∂–µ –∞–∫—Ç–∏–≤–Ω–æ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –≤ —ç—Ç–æ–º —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è. –û–Ω–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —á—Ç–æ –±—É–¥—É—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –¥–∞–Ω–Ω—ã–µ. –í —Å–ª—É—á–∞–µ —Å `TCP` –º—ã —Ä–∏—Å–∫—É–µ–º —Å—Ç–æ–ª–∫–Ω—É—Ç—å—Å—è —Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π –Ω–∞—á–∞–ª–∞ —Å—Ç—Ä–æ–∫–∏ (Head-of-line blocking). –ö–ª–∏–∫ –º—ã—à–∏ –∏–ª–∏ –Ω–∞–∂–∞—Ç–∏–µ –∫–ª–∞–≤–∏—à–∏ –º–æ–≥—É—Ç –∑–∞–¥–µ—Ä–∂–∞—Ç—å—Å—è –≤ –ø—É—Ç–∏ –∏ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ª–µ–¥—É—é—â–∏—Ö –∑–∞ –Ω–∏–º–∏ —Å–æ–±—ã—Ç–∏–π. –ö–∞–Ω–∞–ª—ã –¥–∞–Ω–Ω—ã—Ö —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω—ã —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–∞–∫–∏—Ö —Å–ª—É—á–∞–µ–≤ –∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –æ—Ç–∫–ª—é—á–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω—É—é –æ—Ç–ø—Ä–∞–≤–∫—É –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤. –ú—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ–º –∏–∑–º–µ—Ä—è—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É –∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å, —á—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ä–æ–≤–Ω–æ —Å—Ç–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã—Ö, —Å–∫–æ–ª—å–∫–æ —Å–ø–æ—Å–æ–±–Ω–∞ –≤—ã–¥–µ—Ä–∂–∞—Ç—å –Ω–∞—à–∞ —Å–µ—Ç—å.

–ù–∞–ª–∏—á–∏–µ `WebRTC` –≤ –±—Ä–∞—É–∑–µ—Ä–µ —Å–∏–ª—å–Ω–æ —É–ø—Ä–æ—â–∞–µ—Ç –∂–∏–∑–Ω—å. –ù–∞–º –Ω–µ –Ω—É–∂–Ω–æ —Å–∫–∞—á–∏–≤–∞—Ç—å –ø—Ä–æ–ø—Ä–∏–µ—Ç–∞—Ä–Ω–æ–≥–æ (–ø–ª–∞—Ç–Ω–æ–≥–æ) –∫–ª–∏–µ–Ω—Ç–∞ –¥–ª—è –Ω–∞—á–∞–ª–∞ —Å–µ—Å—Å–∏–∏. –í—Å–µ –±–æ–ª—å—à–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏–º–µ—é—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É `WebRTC`, –Ω–∞–ø—Ä–∏–º–µ—Ä, —É–º–Ω—ã–µ —Ç–µ–ª–µ–≤–∏–∑–æ—Ä—ã (Smart TV).

#### –ü–µ—Ä–µ–¥–∞—á–∞ —Ñ–∞–π–ª–æ–≤ –∏ –æ–±—Ö–æ–¥ —Ü–µ–Ω–∑—É—Ä—ã

–ü–µ—Ä–µ–¥–∞—á–∞ —Ñ–∞–π–ª–æ–≤ (File Sharing) –∏ –æ–±—Ö–æ–¥ —Ü–µ–Ω–∑—É—Ä—ã (Censorship Circumvention) - —ç—Ç–æ –¥–≤–µ —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ —Ä–∞–∑–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã. –û–¥–Ω–∞–∫–æ, `WebRTC` —É—Å–ø–µ—à–Ω–æ —Ä–µ—à–∞–µ—Ç –æ–±–µ. –û–Ω –¥–µ–ª–∞–µ—Ç –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—é –ª–µ–≥–∫–æ–¥–æ—Å—Ç—É–ø–Ω–æ–π –∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–µ –ø–æ–¥–¥–∞—é—â–µ–π—Å—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ.

–ü–µ—Ä–≤–∞—è –∑–∞–¥–∞—á–∞, –∫–æ—Ç–æ—Ä—É—é —Ä–µ—à–∞–µ—Ç `WebRTC` - —ç—Ç–æ –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞. –ï—Å–ª–∏ –º—ã —Ö–æ—Ç–∏–º –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ —Ñ–∞–π–ª–æ–æ–±–º–µ–Ω–Ω–æ–π —Å–µ—Ç–∏, –Ω–∞–º –Ω—É–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞. –î–∞–∂–µ –µ—Å–ª–∏ —Å–µ—Ç—å —è–≤–ª—è–µ—Ç—Å—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π, –≤—Å–µ —Ä–∞–≤–Ω–æ –Ω—É–∂–µ–Ω –∫–ª–∏–µ–Ω—Ç. –í –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–π —Å–µ—Ç–∏ –∑–∞–≥—Ä—É–∑–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω–æ–π. –î–∞–∂–µ –µ—Å–ª–∏ –ø–æ–ª—É—á–∏—Ç—Å—è —Å–∫–∞—á–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–∞, —Å–º–æ–∂–µ—Ç –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –µ–≥–æ? `WebRTC` –¥–æ—Å—Ç—É–ø–µ–Ω –≤ –∫–∞–∂–¥–æ–º –±—Ä–∞—É–∑–µ—Ä–µ: —ç—Ç–æ –≥–æ—Ç–æ–≤—ã–π –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –∫–ª–∏–µ–Ω—Ç.

–í—Ç–æ—Ä–∞—è –ø—Ä–æ–±–ª–µ–º–∞ - –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ç—Ä–∞—Ñ–∏–∫–∞. –ï—Å–ª–∏ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–æ—Ç–æ–∫–æ–ª, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ —Ñ–∞–π–ª–æ–≤ –∏–ª–∏ –æ–±—Ö–æ–¥–∞ —Ü–µ–Ω–∑—É—Ä—ã, –µ–≥–æ –ª–µ–≥–∫–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å. –ü–æ—Å–∫–æ–ª—å–∫—É `WebRTC` - —ç—Ç–æ –ø—Ä–æ—Ç–æ–∫–æ–ª –æ–±—â–µ–≥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è, –µ–≥–æ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∑–∞—Ç—Ä–æ–Ω–µ—Ç –∫–∞–∂–¥–æ–≥–æ. –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ `WebRTC` –º–æ–∂–µ—Ç –ø–æ–º–µ—à–∞—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—é –Ω–æ–≤—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∫ –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏.

#### –ò–Ω—Ç–µ—Ä–Ω–µ—Ç –≤–µ—â–µ–π

–ò–Ω—Ç–µ—Ä–Ω–µ—Ç –≤–µ—â–µ–π (Internet of Things, IoT) –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–µ—â–µ–π. –î–ª—è –º–Ω–æ–≥–∏—Ö —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –∫–∞–º–µ—Ä—ã –≤–∏–¥–µ–æ–Ω–∞–±–ª—é–¥–µ–Ω–∏—è. –° –ø–æ–º–æ—â—å—é `WebRTC` –º—ã –º–æ–∂–µ–º –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤–∏–¥–µ–æ –¥—Ä—É–≥–æ–º—É –ø–∏—Ä—É, —Ç–∞–∫–æ–º—É –∫–∞–∫ —Ç–µ–ª–µ—Ñ–æ–Ω –∏–ª–∏ –±—Ä–∞—É–∑–µ—Ä. –î—Ä—É–≥–∏–º —Å–ª—É—á–∞–µ–º —è–≤–ª—è–µ—Ç—Å—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –∏ –æ–±–º–µ–Ω —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (sensor data). –£ –Ω–∞—Å –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–≤–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É—é—â–∏—Ö –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏, –∫–æ—Ç–æ—Ä—ã–µ –æ–±–º–µ–Ω–∏–≤–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–º–∏ –æ –∫–ª–∏–º–∞—Ç–µ, —à—É–º–µ –∏–ª–∏ –æ—Å–≤–µ—â–µ–Ω–Ω–æ—Å—Ç–∏.

`WebRTC` –∏–º–µ–µ—Ç —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–µ—Ä–µ–¥ —Å—Ç–∞—Ä—ã–º–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º–∏ –¥–ª—è –æ–±–º–µ–Ω–∞ –ø–æ—Ç–æ–∫–∞–º–∏. –ü–æ—Å–∫–æ–ª—å–∫—É `WebRTC` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `P2P-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è`, –º—ã –º–æ–∂–µ–º –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤–∏–¥–µ–æ —Å –∫–∞–º–µ—Ä—ã –Ω–∞–ø—Ä—è–º—É—é –≤ –±—Ä–∞—É–∑–µ—Ä. –ù–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–æ—Ä–æ–Ω–Ω–∏–π —Å–µ—Ä–≤–µ—Ä. –î–∞–∂–µ –µ—Å–ª–∏ –≤–∏–¥–µ–æ –±—É–¥–µ—Ç –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–º, –∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫ –º–æ–∂–µ—Ç –∏–∑–≤–ª–µ—á—å –Ω–µ–∫–æ—Ç–æ—Ä—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–∑ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∑–≤–æ–Ω–∫–∞.

–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å - –µ—â–µ –æ–¥–Ω–æ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º–æ–µ `WebRTC`. `WebRTC` –¥–æ—Å—Ç—É–ø–µ–Ω –≤–æ –º–Ω–æ–≥–∏—Ö —è–∑—ã–∫–∞—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è: C#, C++, C, Go, Java, Python, Rust, JavaScript –∏ TypeScript. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –º—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —è–∑—ã–∫, –∫–æ—Ç–æ—Ä—ã–π —Ö–æ—Ç–∏–º. –ù–∞–º –Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è –ø—Ä–æ–ø—Ä–∏–µ—Ç–∞—Ä–Ω—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã –∏–ª–∏ —Ñ–æ—Ä–º–∞—Ç—ã –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤.

#### –û–±–º–µ–Ω –º–µ–¥–∏–∞–¥–∞–Ω–Ω—ã–º–∏

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ —É –Ω–∞—Å –µ—Å—Ç—å "–∂–µ–ª–µ–∑–æ" –∏ –ü–û, –≥–µ–Ω–µ—Ä–∏—Ä—É—é—â–µ–µ –≤–∏–¥–µ–æ, –Ω–æ –º—ã –ø–æ–∫–∞ –Ω–µ –º–æ–∂–µ–º –∏—Ö –æ–±–Ω–æ–≤–∏—Ç—å. –î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤–∏–¥–µ–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–æ–ø—Ä–∏–µ—Ç–∞—Ä–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞. –≠—Ç–æ —è–≤–ª—è–µ—Ç—Å—è —Ñ—Ä—É—Å—Ç—Ä–∏—Ä—É—é—â–∏–º. –û—Ç–≤–µ—Ç - –∑–∞–ø—É—Å–∫ –º–æ—Å—Ç–∞ (bridge) `WebRTC`. –ú–æ—Å—Ç —Ç—Ä–∞–Ω—Å–ª–∏—Ä—É–µ—Ç—Å—è –º–µ–∂–¥—É –¥–≤—É–º—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º–∏, –ø–æ—ç—Ç–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±—Ä–∞—É–∑–µ—Ä —Å–æ —Å—Ç–∞—Ä—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏.

–í–æ –º–Ω–æ–≥–∏—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏, –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è —Ç–µ –∂–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã, —á—Ç–æ –∏ –≤ `WebRTC`. [–ü—Ä–æ—Ç–æ–∫–æ–ª —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–µ–∞–Ω—Å–∞](https://ru.wikipedia.org/wiki/%D0%9F%D1%80%D0%BE%D1%82%D0%BE%D0%BA%D0%BE%D0%BB_%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F_%D1%81%D0%B5%D0%B0%D0%BD%D1%81%D0%B0) (Session Initiation Protocol, SIP), –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, —Ç—Ä–∞–Ω—Å–ª–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `WebRTC` –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Å–æ–≤–µ—Ä—à–∞—Ç—å —Ç–µ–ª–µ—Ñ–æ–Ω–Ω—ã–µ –∑–≤–æ–Ω–∫–∏ —Å –ø–æ–º–æ—â—å—é –±—Ä–∞—É–∑–µ—Ä–∞. [–ü–æ—Ç–æ–∫–æ–≤—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏](https://ru.wikipedia.org/wiki/RTSP) (Real Time Streaming Protocol, RTSP) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Å—Ç–∞—Ä—ã—Ö –∫–∞–º–µ—Ä–∞—Ö –≤–∏–¥–µ–æ–Ω–∞–±–ª—é–¥–µ–Ω–∏—è. –û–Ω–∏ –æ–±–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã (`RTP` –∏ `SDP`). –ú–æ—Å—Ç —Ç—Ä–µ–±—É–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∏–ª–∏ —É–¥–∞–ª–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ —Ç–µ—Ö –≤–µ—â–µ–π, –∫–æ—Ç–æ—Ä—ã–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã –¥–ª—è `WebRTC`.

#### –û–±–º–µ–Ω –¥—Ä—É–≥–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏

–î–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –Ω–∞–±–æ—Ä –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤: `HTTP`, `WebSockets`, `WebRTC` –∏ [QUIC](https://ru.wikipedia.org/wiki/QUIC). –ï—Å–ª–∏ –º—ã —Ö–æ—Ç–∏–º –∫ —á–µ–º—É-—Ç–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è, —Ç–æ –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Ç–æ–∫–æ–ª—å–Ω—ã–π –º–æ—Å—Ç (protocol bridge). –ü—Ä–æ—Ç–æ–∫–æ–ª—å–Ω—ã–π –º–æ—Å—Ç - —ç—Ç–æ —Å–µ—Ä–≤–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –≤—Ö–æ–¥—è—â–∏–π —Ç—Ä–∞—Ñ–∏–∫ –≤ –Ω–µ—á—Ç–æ, –¥–æ—Å—Ç—É–ø–Ω–æ–µ –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞. –•–æ—Ä–æ—à–∏–º –ø—Ä–∏–º–µ—Ä–æ–º —è–≤–ª—è–µ—Ç—Å—è [SSH](https://ru.wikipedia.org/wiki/SSH), –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–µ—Ä–≤–µ—Ä—É. –ö–∞–Ω–∞–ª—ã –¥–∞–Ω–Ω—ã—Ö `WebRTC` –≤ —ç—Ç–æ–º –æ—Ç–Ω–æ—à–µ–Ω–∏–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤.

–ö–∞–Ω–∞–ª—ã –¥–∞–Ω–Ω—ã—Ö –¥–æ–ø—É—Å–∫–∞—é—Ç –Ω–µ–Ω–∞–¥–µ–∂–Ω—É—é –∏ –Ω–µ—É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω—É—é –¥–æ—Å—Ç–∞–≤–∫—É. –≠—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤ —Å–ª—É—á–∞—è—Ö, –∫–æ–≥–¥–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ–π —è–≤–ª—è–µ—Ç—Å—è –Ω–∏–∑–∫–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ –ø–∞–∫–µ—Ç–æ–≤. –ú—ã –Ω–µ —Ö–æ—Ç–∏–º, —á—Ç–æ–±—ã –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–∏—Å—å —Å—Ç–∞—Ä—ã–º–∏ (–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –Ω–∞—á–∞–ª–∞ —Å—Ç—Ä–æ–∫–∏). –ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ –∏–≥—Ä–∞–µ—Ç–µ –≤ –º–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π "—à—É—Ç–µ—Ä" –æ—Ç –ø–µ—Ä–≤–æ–≥–æ –ª–∏—Ü–∞. –í–∞–º –≤–∞–∂–Ω–æ, –≥–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±—ã–ª –¥–≤–µ —Å–µ–∫—É–Ω–¥—ã –Ω–∞–∑–∞–¥? –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –Ω–µ –ø—Ä–∏–±—ã–≤–∞—é—Ç –≤–æ–≤—Ä–µ–º—è, –∫–∞–∫–æ–π —Å–º—ã—Å–ª –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –ø–æ–ø—ã—Ç–∫–∏ –∏—Ö –æ—Ç–ø—Ä–∞–≤–∫–∏. –ù–µ–Ω–∞–¥–µ–∂–Ω–∞—è –∏ –Ω–µ—É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —Å—Ä–∞–∑—É –ø–æ –∏—Ö –ø—Ä–∏–±—ã—Ç–∏–∏.

–ö–∞–Ω–∞–ª—ã –¥–∞–Ω–Ω—ã—Ö —Ç–∞–∫–∂–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –æ –Ω–∞–≥—Ä—É–∑–∫–µ (feedback pressure). –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–≤–æ–µ–≤—Ä–µ–º–µ–Ω–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å, —á—Ç–æ –º—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –±–æ–ª—å—à–µ –¥–∞–Ω–Ω—ã—Ö, —á–µ–º –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–∞—à–∞ —Å–µ—Ç—å. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ —É –Ω–∞—Å –µ—Å—Ç—å –¥–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞: –∫–∞–Ω–∞–ª –¥–∞–Ω–Ω—ã—Ö –º–æ–∂–µ—Ç –ø–æ–º–µ—â–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –±—É—Ñ–µ—Ä –∏ –¥–æ—Å—Ç–∞–≤–ª—è—Ç—å –∏—Ö —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π –∏–ª–∏ –∂–µ –º—ã –º–æ–∂–µ–º –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å "–æ–ø–æ–∑–¥–∞–≤—à–∏–µ" —Å–æ–æ–±—â–µ–Ω–∏—è.

#### –¢–µ–ª–µ–æ–ø–µ—Ä–∞—Ü–∏—è

–¢–µ–ª–µ–æ–ø–µ—Ä–∞—Ü–∏—è (teleoperation) - —ç—Ç–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–Ω—ã–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–º —á–µ—Ä–µ–∑ –∫–∞–Ω–∞–ª—ã –¥–∞–Ω–Ω—ã—Ö `WebRTC` –∏ –æ–±—Ä–∞—Ç–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤–∏–¥–µ–æ —á–µ—Ä–µ–∑ `RTP`. –°–µ–≥–æ–¥–Ω—è `WebRTC` –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º —É–¥–∞–ª–µ–Ω–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –∞–≤—Ç–æ–º–æ–±–∏–ª—è–º–∏! –≠—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–æ–±–æ—Ç–∞–º–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–∞–π—Ç–æ–≤ –∏ –¥–æ—Å—Ç–∞–≤–∫–∏ –ø–æ—Å—ã–ª–æ–∫.

`WebRTC` –ø–æ–≤—Å—é–¥—É. –í—Å–µ, —á—Ç–æ –Ω—É–∂–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, —ç—Ç–æ –±—Ä–∞—É–∑–µ—Ä –∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ. –ë—Ä–∞—É–∑–µ—Ä—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –¥–∂–æ–π—Å—Ç–∏–∫–∏ –∏ –≥–µ–π–º–ø–∞–¥—ã. `WebRTC` –∏–∑–±–∞–≤–ª—è–µ—Ç –æ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

#### –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ CDN

–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ `CDN` (Content Delivery Network - —Å–µ—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞) - —ç—Ç–æ —Ä–∞–∑–Ω–æ–≤–∏–¥–Ω–æ—Å—Ç—å —Ñ–∞–π–ª–æ–æ–±–º–µ–Ω–Ω–æ–π —Å–µ—Ç–∏. –†–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ–º—ã–µ —Ñ–∞–π–ª—ã –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–º `CDN`. –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ `CDN`, –æ–Ω –º–æ–∂–µ—Ç —Å–∫–∞—á–∏–≤–∞—Ç—å –∏ –¥–µ–ª–∏—Ç—å—Å—è —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–º–∏ (allowed) —Ñ–∞–π–ª–∞–º–∏.

`CDN` —Ö–æ—Ä–æ—à–æ —Ä–∞–±–æ—Ç–∞—é—Ç –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —Ö–æ—Ä–æ—à–µ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –ø–æ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏ –∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤ —Ö–æ—Ä–æ—à–µ–º –≤–Ω–µ—à–Ω–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏. –£ –Ω–∞—Å –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, —Å–∫–∞—á–∞–≤—à–∏–π –≤–∏–¥–µ–æ, –∏ –ø–æ–¥–µ–ª–∏–≤—à–∏–π—Å—è –∏–º —Å –æ—Å—Ç–∞–ª—å–Ω—ã–º–∏. –ü–æ—Å–∫–æ–ª—å–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –ø—ã—Ç–∞—é—Ç—Å—è —Å–∫–∞—á–∞—Ç—å –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ —Ñ–∞–π–ª –∏–∑ –≤–Ω–µ—à–Ω–µ–π —Å–µ—Ç–∏, –ø–µ—Ä–µ–¥–∞—á–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –±—ã—Å—Ç—Ä–æ.

### –¢–æ–ø–æ–ª–æ–≥–∏–∏ WebRTC

`WebRTC` - —ç—Ç–æ –ø—Ä–æ—Ç–æ–∫–æ–ª, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –¥–ª—è –ø—Ä—è–º–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –¥–≤—É—Ö –∞–≥–µ–Ω—Ç–æ–≤, –Ω–æ –∫–∞–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É –ø–æ–¥–∫–ª—é—á–∏—Ç—å —Ç—ã—Å—è—á—É –ª—é–¥–µ–π? –°—É—â–µ—Å—Ç–≤—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ø–æ—Å–æ–±–æ–≤, –∫–∞–∂–¥—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –∏–º–µ–µ—Ç —Å–≤–æ–∏ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏. –≠—Ç–∏ —Ä–µ—à–µ–Ω–∏—è —É—Å–ª–æ–≤–Ω–æ –º–æ–∂–Ω–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ –¥–≤–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: —Ä–∞–≤–Ω—ã–π-–∫-—Ä–∞–≤–Ω–æ–º—É (Peer-to-Peer) –∏–ª–∏ –∫–ª–∏–µ–Ω—Ç/—Å–µ—Ä–≤–µ—Ä (Client/Server). –ì–∏–±–∫–æ—Å—Ç—å `WebRTC` –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª–µ–≥–∫–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª—é–±–æ–π –∏–∑ —ç—Ç–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤.

#### –û–¥–∏–Ω-–∫-–æ–¥–Ω–æ–º—É

–û–¥–∏–Ω-–∫-–æ–¥–Ω–æ–º—É (One-to-One) - –ø–µ—Ä–≤—ã–π —Ç–∏–ø –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –≤ `WebRTC`. –ú—ã —Å–æ–µ–¥–∏–Ω—è–µ–º –¥–≤—É—Ö –∞–≥–µ–Ω—Ç–æ–≤ –Ω–∞–ø—Ä—è–º—É—é –∏ –æ–Ω–∏ –º–æ–≥—É—Ç –æ–±–º–µ–Ω–∏–≤–∞—Ç—å—Å—è –º–µ–¥–∏–∞ –∏ –¥—Ä—É–≥–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:

<img src="https://habrastorage.org/webt/lo/aa/g_/loaag_qbwiyctjh1amqebgb07de.png" />
<br />

#### –ü–æ–ª–Ω–∞—è —Å–µ—Ç–∫–∞

–ü–æ–ª–Ω–∞—è —Å–µ—Ç–∫–∞ (Full Mesh) - —ç—Ç–æ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏ –∏–ª–∏ –º–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –∏–≥—Ä—ã. –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –∫–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –¥—Ä—É–≥–∏–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –Ω–∞–ø—Ä—è–º—É—é. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –Ω–æ –∏–º–µ–µ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏.

–í –ø–æ–ª–Ω–æ–π —Å–µ—Ç–∫–µ –∫–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –Ω–∞–º –Ω—É–∂–Ω–æ —à–∏—Ñ—Ä–æ–≤–∞—Ç—å –∏ –∑–∞–≥—Ä—É–∂–∞—Ç—å –≤–∏–¥–µ–æ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞ —Å–µ—Å—Å–∏–∏. –£—Å–ª–æ–≤–∏—è —Å–µ—Ç–∏ –º–µ–∂–¥—É –∫–∞–∂–¥—ã–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ–º –±—É–¥—É—Ç —Ä–∞–∑–Ω—ã–º–∏, –ø–æ—ç—Ç–æ–º—É –º—ã –Ω–µ –º–æ–∂–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–Ω–æ –∏ —Ç–æ–∂–µ –≤–∏–¥–µ–æ. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ - –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ —Ç–∞–∫–∂–µ –∑–∞–¥–∞—á–∞ –Ω–µ –∏–∑ –ø—Ä–æ—Å—Ç—ã—Ö. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å —Å—Ç–µ–ø–µ–Ω—å –ø–æ—Ç–µ—Ä–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è: —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –æ–Ω–æ –ø–æ–ª–Ω—ã–º –∏–ª–∏ –∫–∞—Å–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ –ø–∏—Ä–∞.

–ü–æ —ç—Ç–∏–º –∏ –¥—Ä—É–≥–∏–º –ø—Ä–∏—á–∏–Ω–∞–º –ø–æ–ª–Ω–∞—è —Å–µ—Ç–∫–∞ —Ö–æ—Ä–æ—à–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö –≥—Ä—É–ø–ø. –î–ª—è –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Å–µ—Å—Å–∏–∏ –ª—É—á—à–µ –ø–æ–¥—Ö–æ–¥–∏—Ç —Ç–æ–ø–æ–ª–æ–≥–∏—è –∫–ª–∏–µ–Ω—Ç/—Å–µ—Ä–≤–µ—Ä.

<img src="https://habrastorage.org/webt/60/zo/df/60zodfwi8kcmtlphxendcdcoubc.png" />
<br />

#### –ì–∏–±—Ä–∏–¥–Ω–∞—è —Å–µ—Ç–∫–∞

–ì–∏–±—Ä–∏–¥–Ω–∞—è —Å–µ—Ç–∫–∞ (Hybrid Mesh) - —ç—Ç–æ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ –ø–æ–ª–Ω–æ–π —Å–µ—Ç–∫–∏, –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç —Ä–µ—à–∏—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –Ω–µ–π. –í –≥–∏–±—Ä–∏–¥–Ω–æ–π —Å–µ—Ç–∫–µ –≤–º–µ—Å—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –º–µ–∂–¥—É –∫–∞–∂–¥—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –º–µ–¥–∏–∞ —Ä–µ—Ç—Ä–∞–Ω—Å–ª–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ø–∏—Ä—ã –≤ —Å–µ—Ç–∏. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Å–æ–∑–¥–∞—Ç–µ–ª—é –º–µ–¥–∏–∞ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –±–æ–ª—å—à–∞—è –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö.

–≠—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ —Ç–∞–∫–∂–µ –∏–º–µ–µ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏. –°–æ–∑–¥–∞—Ç–µ–ª—å –º–µ–¥–∏–∞ –Ω–µ –∑–Ω–∞–µ—Ç –æ —Ç–æ–º, –∫–æ–º—É –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –∏ —É—Å–ø–µ—à–Ω–æ –ª–∏ –æ–Ω–∏ –¥–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è. –ö–∞–∂–¥—ã–π –ø–µ—Ä–µ—Ö–æ–¥ —Ç–∞–∫–∂–µ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –≤—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏ –ø–∞–∫–µ—Ç–æ–≤.

<img src="https://habrastorage.org/webt/ff/4m/7y/ff4m7y77d15seik7lux7aziqm3a.png" />
<br />

#### –ï–¥–∏–Ω–∏—Ü–∞ –≤—ã–±–æ—Ä–æ—á–Ω–æ–π –ø–µ—Ä–µ—Å—ã–ª–∫–∏

–ï–¥–∏–Ω–∏—Ü–∞ –≤—ã–±–æ—Ä–æ—á–Ω–æ–π –ø–µ—Ä–µ—Å—ã–ª–∫–∏ (Selective Forwarding Unit, SFU) —Ç–∞–∫–∂–µ —É—Å—Ç—Ä–∞–Ω—è–µ—Ç –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ –ø–æ–ª–Ω–æ–π —Å–µ—Ç–∫–∏, –Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥—Ä—É–≥–∏–º —Å–ø–æ—Å–æ–±–æ–º. `SFU` —Ä–µ–∞–ª–∏–∑—É–µ—Ç —Ç–æ–ø–æ–ª–æ–≥–∏—é –∫–ª–∏–µ–Ω—Ç/—Å–µ—Ä–≤–µ—Ä –≤–º–µ—Å—Ç–æ `P2P`. –ö–∞–∂–¥—ã–π –ø–∏—Ä –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ `SFU` –∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤ –Ω–µ–≥–æ —Å–≤–æ–µ –º–µ–¥–∏–∞. –ó–∞—Ç–µ–º `SFU` –ø–µ—Ä–µ—Å—ã–ª–∞–µ—Ç –º–µ–¥–∏–∞ –∫–∞–∂–¥–æ–º—É –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω–æ–º—É –∫–ª–∏–µ–Ω—Ç—É.

–í `SFU` –∫–∞–∂–¥—ã–π –∞–≥–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –∑–∞—à–∏—Ñ—Ä–æ–≤–∞—Ç—å –∏ –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤–∏–¥–µ–æ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑. –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∑–∞ –ø–µ—Ä–µ–¥–∞—á—É –≤–∏–¥–µ–æ –≤—Å–µ–º —É—á–∞—Å—Ç–Ω–∏–∫–∞–º –ª–æ–∂–∏—Ç—Å—è –Ω–∞ `SFU`. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ `SFU-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è`, –∫ —Ç–æ–º—É –∂–µ, –ø—Ä–æ—â–µ, —á–µ–º —É—Å—Ç–∞–Ω–æ–≤–∫–∞ `P2P-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è`. `SFU` –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω –Ω–∞ –æ—Ç–∫—Ä—ã—Ç–æ–º –º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä—É–µ–º–æ–º –∞–¥—Ä–µ—Å–µ, —á—Ç–æ –æ–±–ª–µ–≥—á–∞–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –Ω–µ–º—É –∫–ª–∏–µ–Ω—Ç–æ–≤. –ü–æ—ç—Ç–æ–º—É –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ `NAT`. –û–¥–Ω–∞–∫–æ –Ω–∞–º –≤—Å–µ –µ—â–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å `SFU` —á–µ—Ä–µ–∑ `TCP` (—á–µ—Ä–µ–∑ `ICE-TCP` –∏–ª–∏ `TURN`).

–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ—Å—Ç–æ–≥–æ `SFU` –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –≤ —Ç–µ—á–µ–Ω–∏–µ –Ω–µ–¥–µ–ª–∏. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Ö–æ—Ä–æ—à–µ–≥–æ `SFU`, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—â–µ–≥–æ –≤—Å–µ —Ç–∏–ø—ã –∫–ª–∏–µ–Ω—Ç–æ–≤ - –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å, –≤ –∫–æ—Ç–æ—Ä—ã–π –≤—Ö–æ–¥–∏—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª—è –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏, –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –∏ –ø–æ–≤—ã—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

<img src="https://habrastorage.org/webt/nq/6p/lf/nq6plfpuepd4hexwi1l7j_vhypm.png" />
<br />

#### –ú–Ω–æ–≥–æ—Ç–æ—á–µ—á–Ω–∞—è –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü-—Å–∏—Å—Ç–µ–º–∞

–ú–Ω–æ–≥–æ—Ç–æ—á–µ—á–Ω–∞—è –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü-—Å–∏—Å—Ç–µ–º–∞ (Multi-point Conferencing Unit, MCU) - —ç—Ç–æ —Ç–æ–ø–æ–ª–æ–≥–∏—è –∫–ª–∏–µ–Ω—Ç/—Å–µ—Ä–≤–µ—Ä, –ø–æ—Ö–æ–∂–∞—è –Ω–∞ `SFU`, –Ω–æ –æ–±—ä–µ–¥–∏–Ω—è—é—â–∞—è –≤—ã—Ö–æ–¥–Ω—ã–µ –ø–æ—Ç–æ–∫–∏. –í–º–µ—Å—Ç–æ —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –º–µ–¥–∏–∞–¥–∞–Ω–Ω—ã–µ –≤ –Ω–µ–∏–∑–º–µ–Ω–Ω–æ–º –≤–∏–¥–µ, –æ–Ω–∏ –¥–µ–∫–æ–¥–∏—Ä—É—é—Ç—Å—è –≤ –æ–¥–∏–Ω –ø–æ—Ç–æ–∫.

<img src="https://habrastorage.org/webt/au/gq/3s/augq3sgbj2tvh0wtu5piwrvjh24.png" />
<br />

## –û—Ç–ª–∞–¥–∫–∞

–û—Ç–ª–∞–¥–∫–∞ `WebRTC` - —Å–ª–æ–∂–Ω–∞—è –∑–∞–¥–∞—á–∞, –ø–æ—Å–∫–æ–ª—å–∫—É –≤ –Ω–µ–º –∏–º–µ–µ—Ç—Å—è –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–≤–∏–∂–Ω—ã—Ö —á–∞—Å—Ç–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –ª–æ–º–∞—Ç—å—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞. –ï—Å–ª–∏ –Ω–µ –ø—Ä–æ—è–≤–ª—è—Ç—å –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç–∏, –º–æ–∂–Ω–æ –ø–æ—Ç—Ä–∞—Ç–∏—Ç—å –Ω–µ–¥–µ–ª–∏ –Ω–∞ —Ä–µ—à–µ–Ω–∏–µ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø—Ä–æ–±–ª–µ–º. –ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ —Å–ª–æ–º–∞–≤—à–µ–π—Å—è —á–∞—Å—Ç–∏, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ—Ç—Ä–∞—Ç–∏—Ç—å –µ—â–µ –Ω–µ–º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ —Ç–æ, —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å, –ø–æ—á–µ–º—É –ø—Ä–æ–∏–∑–æ—à–ª–∞ –ø–æ–ª–æ–º–∫–∞.

#### –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–±–ª–µ–º—ã

–ü—Ä–∏ –æ—Ç–ª–∞–¥–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è `WebRTC` —Å–Ω–∞—á–∞–ª–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–æ–±–ª–µ–º—ã.

__–ü–æ—Ç–µ—Ä—è —Å–∏–≥–Ω–∞–ª–∞__

__–ü–æ—Ç–µ—Ä—è —Å–µ—Ç–∏__

–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ—Ä–≤–µ—Ä `STUN` —Å –ø–æ–º–æ—â—å—é `netcat`:

1. –§–æ—Ä–º–∏—Ä—É–µ–º 20-–±–∞–π—Ç–Ω—ã–π –ø–∞–∫–µ—Ç –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ –ø—Ä–∏–≤—è–∑–∫—É (binding request packet):

```
echo -ne "\x00\x01\x00\x00\x21\x12\xA4\x42TESTTESTTEST" | hexdump -C
00000000  00 01 00 00 21 12 a4 42  54 45 53 54 54 45 53 54  |....!..BTESTTEST|
00000010  54 45 53 54                                       |TEST|
00000014
```

–ó–¥–µ—Å—å:

- `00 01` - —Ç–∏–ø —Å–æ–æ–±—â–µ–Ω–∏—è;
- `00 00` - —Ä–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö (–¥–ª–∏–Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ —Ä–∞–∑–¥–µ–ª–∞);
- `21 12 a4 42` - –º–∞–≥–∏—á–µ—Å–∫–æ–µ –∫—É–∫–∏;
- `54 45 53 54 54 45 53 54 54 45 53 54` (–¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤ `ASCII`: `TESTTESTTEST`) - 12-–±–∞–π—Ç–æ–≤—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.

2. –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –∏ –∂–¥–µ–º –ø–æ–ª—É—á–µ–Ω–∏—è 32-–±–∞–π—Ç–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞:

```
stunserver=stun1.l.google.com;stunport=19302;listenport=20000;echo -ne "\x00\x01\x00\x00\x21\x12\xA4\x42TESTTESTTEST" | nc -u -p $listenport $stunserver $stunport -w 1 | hexdump -C
00000000  01 01 00 0c 21 12 a4 42  54 45 53 54 54 45 53 54  |....!..BTESTTEST|
00000010  54 45 53 54 00 20 00 08  00 01 6f 32 7f 36 de 89  |TEST. ....o2.6..|
00000020
```

–ó–¥–µ—Å—å:

- `01 01` - —Ç–∏–ø —Å–æ–æ–±—â–µ–Ω–∏—è;
- `00 0c` - —Ä–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –¥–µ–∫–æ–¥–∏—Ä—É—é—Ç—Å—è –¥–æ `12` –≤ –¥–µ—Å—è—Ç–∏—á–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ;
- `21 12 a4 42` - –º–∞–≥–∏—á–µ—Å–∫–æ–µ –∫—É–∫–∏;
- `54 45 53 54 54 45 53 54 54 45 53 54` (–¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤ `ASCII`: `TESTTESTTEST`) - 12-–±–∞–π—Ç–æ–≤—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏;
- `00 20 00 08 00 01 6f 32 7f 36 de 89` - 12-–±–∞–π—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ:
  - `00 20` - —ç—Ç–æ —Ç–∏–ø: `XOR-MAPPED-ADDRESS`;
  - `00 08` - —Ä–∞–∑–º–µ—Ä –∑–Ω–∞—á–µ–Ω–∏—è, –¥–µ–∫–æ–¥–∏—Ä—É–µ–º–æ–≥–æ –¥–æ `8` –≤ –¥–µ—Å—è—Ç–∏—á–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ;
  - `00 01 6f 32 7f 36 de 89` - –∑–Ω–∞—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:
    - `00 01` - —Ç–∏–ø –∞–¥—Ä–µ—Å–∞ (`IPv4`);
    - `6f 32` - XOR-—Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π (XOR-mapped) –ø–æ—Ä—Ç;
    - `7f 36 de 89` - XOR-—Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π IP-–∞–¥—Ä–µ—Å.

–î–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ XOR-—Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞ —è–≤–ª—è–µ—Ç—Å—è —Å–ª–æ–∂–Ω—ã–º, –Ω–æ –º—ã –º–æ–∂–µ–º –æ–±–º–∞–Ω—É—Ç—å —Å–µ—Ä–≤–µ—Ä `STUN` –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ–∏–∫—Ç–∏–≤–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è `XOR` —Å –ø–æ–º–æ—â—å—é —Ñ–∏–∫—Ç–∏–≤–Ω–æ–≥–æ –º–∞–≥–∏—á–µ—Å–∫–æ–≥–æ –∫—É–∫–∏ —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º `00 00 00 00`:

```
stunserver=stun1.l.google.com;stunport=19302;listenport=20000;echo -ne "\x00\x01\x00\x00\x00\x00\x00\x00TESTTESTTEST" | nc -u -p $listenport $stunserver $stunport -w 1 | hexdump -C
00000000  01 01 00 0c 00 00 00 00  54 45 53 54 54 45 53 54  |........TESTTEST|
00000010  54 45 53 54 00 01 00 08  00 01 4e 20 5e 24 7a cb  |TEST......N ^$z.|
00000020
```

XOR-–æ–ø–µ—Ä–∞—Ü–∏—è –ø—Ä–æ—Ç–∏–≤ —Ñ–∏–∫—Ç–∏–≤–Ω–æ–≥–æ –º–∞–≥–∏—á–µ—Å–∫–æ–≥–æ –∫—É–∫–∏ –±—É–¥–µ—Ç –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ–π, –ø–æ—ç—Ç–æ–º—É –ø–æ—Ä—Ç –∏ –∞–¥—Ä–µ—Å –≤ –æ—Ç–≤–µ—Ç–µ –±—É–¥—É—Ç –¥–æ—Å—Ç–æ–≤–µ—Ä–Ω—ã–º–∏. –≠—Ç–æ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ –≤–æ –≤—Å–µ—Ö —Å–ª—É—á–∞—è—Ö, –ø–æ—Å–∫–æ–ª—å–∫—É –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä—ã –º–∞–Ω–∏–ø—É–ª–∏—Ä—É—é—Ç –ø—Ä–æ—Ö–æ–¥—è—â–∏–º–∏ —á–µ—Ä–µ–∑ –Ω–∏—Ö –ø–∞–∫–µ—Ç–∞–º–∏, –æ–±–º–∞–Ω—ã–≤–∞—è (cheating) `IP-–∞–¥—Ä–µ—Å`. –ü–æ—Å–ª–µ–¥–Ω–∏–µ 8 –±–∞–π—Ç–æ–≤ –æ—Ç–≤–µ—Ç–∞ –±—É–¥—É—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

- `00 01 4e 20 5e 24 7a cb` - –∑–Ω–∞—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:
  - `00 01` - —Ç–∏–ø –∞–¥—Ä–µ—Å–∞ (`IPv4`);
  - `4e 20` - —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π –ø–æ—Ä—Ç, –∫–æ—Ç–æ—Ä—ã–µ –¥–µ–∫–æ–¥–∏—Ä—É–µ—Ç—Å—è –¥–æ `20000` –≤ –¥–µ—Å—è—Ç–∏—á–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ;
  - `5e 24 7a cb` - `IP-–∞–¥—Ä–µ—Å`, –∫–æ—Ç–æ—Ä—ã–π –¥–µ–∫–æ–¥–∏—Ä—É–µ—Ç—Å—è –≤ `94.36.122.203`.

__–û—à–∏–±–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏__

__–û—à–∏–±–∫–∞ –º–µ–¥–∏–∞__

__–û—à–∏–±–∫–∞ –¥–∞–Ω–Ω—ã—Ö__

#### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

__netcat (nc)__

[netcat](https://ru.wikipedia.org/wiki/Netcat) - —Å–µ—Ç–µ–≤–∞—è —É—Ç–∏–ª–∏—Ç–∞ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –¥–ª—è —á—Ç–µ–Ω–∏—è –∏–∑/–∑–∞–ø–∏—Å–∏ –≤ —Å–µ—Ç–µ–≤—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –ø–æ–º–æ—â—å—é `TCP` –∏–ª–∏ `UDP`. –î–∞–Ω–Ω–∞—è —É—Ç–∏–ª–∏—Ç–∞, –æ–±—ã—á–Ω–æ, –¥–æ—Å—Ç—É–ø–Ω–∞ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É `nc`.

__tcpdump__

[tcpdump](https://ru.wikipedia.org/wiki/Tcpdump) - —ç—Ç–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Å–µ—Ç–µ–≤—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ —Å –¥–∞–Ω–Ω—ã–º–∏.

–ù–∞–∏–±–æ–ª–µ–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:

- –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ–º –ø–∞–∫–µ—Ç—ã `UDP` –≤/–∏–∑ –ø–æ—Ä—Ç–∞ `19302`, –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º —à–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç–µ—Ä–∏—á–Ω—ã–π –¥–∞–º–ø (hexdump) —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –ø–∞–∫–µ—Ç–∞

```
sudo tcpdump 'udp port 19302' -xx
```

- —Ç–æ–∂–µ —Å–∞–º–æ–µ, –Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –ø–∞–∫–µ—Ç—ã –≤ —Ñ–∞–π–ª–µ `PCAP` (–∑–∞—Ö–≤–∞—Ç –ø–∞–∫–µ—Ç–∞ - packet capture) –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –∏–∑—É—á–µ–Ω–∏—è

```
sudo tcpdump 'udp port 19302' -w stun.pcap
```

–§–∞–π–ª `PCAP` –º–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã `wireshark stun.pcap`.

__Wireshark__

[Wireshark](https://www.wireshark.org/) - —ç—Ç–æ —à–∏—Ä–æ–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä —Å–µ—Ç–µ–≤—ã—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤.

__webrtc-internals__

`Chrome` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ `WebRTC`: `chrome://webrtc-internals`.

### –ó–∞–¥–µ—Ä–∂–∫–∞

–ö–∞–∫ –ø–æ–Ω—è—Ç—å, —á—Ç–æ –∏–º–µ–µ—Ç –º–µ—Å—Ç–æ –≤—ã—Å–æ–∫–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π? –ú—ã –º–æ–∂–µ–º –∑–∞–º–µ—Ç–∏—Ç—å, —á—Ç–æ –Ω–∞—à–µ –≤–∏–¥–µ–æ [–ª–∞–≥–∞–µ—Ç](https://ru.wikipedia.org/wiki/%D0%9B%D0%B0%D0%B3_(%D0%BA%D0%BE%D0%BC%D0%BF%D1%8C%D1%8E%D1%82%D0%B5%D1%80%D0%BD%D1%8B%D0%B9_%D1%81%D0%BB%D0%B5%D0%BD%D0%B3)) (lagging), –Ω–æ –∫–∞–∫ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–æ—á–Ω—É—é –≤–µ–ª–∏—á–∏–Ω—É –∑–∞–¥–µ—Ä–∂–∫–∏? –î–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è –∑–∞–¥–µ—Ä–∂–∫–∏, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–Ω–∞—á–∞–ª–∞ –µ–µ –∏–∑–º–µ—Ä–∏—Ç—å.

–ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è, —á—Ç–æ –∏—Å—Ç–∏–Ω–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–æ–ª–∂–Ω–∞ –∏–∑–º–µ—Ä—è—Ç—å—Å—è –æ—Ç –Ω–∞—á–∞–ª–∞ –¥–æ –∫–æ–Ω—Ü–∞ (end-to-end). –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç —É—á–µ—Ç –Ω–µ —Ç–æ–ª—å–∫–æ –∑–∞–¥–µ—Ä–∂–∫–∏ —Å–µ—Ç–µ–≤–æ–≥–æ –ø—É—Ç–∏ –º–µ–∂–¥—É –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ–º –∏ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–º, –Ω–æ –æ–±—â—É—é –∑–∞–¥–µ—Ä–∂–∫—É –∑–∞—Ö–≤–∞—Ç–∞ –∫–∞–º–µ—Ä—ã, —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –∫–∞–¥—Ä–æ–≤, –ø–µ—Ä–µ–¥–∞—á–∏, –ø–æ–ª—É—á–µ–Ω–∏—è, —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è, –∞ —Ç–∞–∫–∂–µ –≤–æ–∑–º–æ–∂–Ω—É—é –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—é (–ø–æ—Å—Ç–∞–Ω–æ–≤–∫—É –∑–∞–¥–∞—á –≤ –æ—á–µ—Ä–µ–¥—å - queueing) –Ω–∞ –ª—é–±–æ–º –∏–∑ —ç—Ç–∞–ø–æ–≤.

–ó–∞–¥–µ—Ä–∂–∫–∞ –æ—Ç –Ω–∞—á–∞–ª–∞ –¥–æ –∫–æ–Ω—Ü–∞ - —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ —Å—É–º–º–∞ –∑–∞–¥–µ—Ä–∂–µ–∫ –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.

–ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ç–æ, —á—Ç–æ —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏ –º—ã –º–æ–∂–µ–º –∏–∑–º–µ—Ä–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –ø–æ—Ç–æ–∫–æ–≤–æ–π –ø–µ—Ä–µ–¥–∞—á–∏ –≤–∏–¥–µ–æ –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ —Å—É–º–º–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã, –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –±—É–¥—É—Ç –ª–∏–±–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –¥–ª—è –∏–∑–º–µ—Ä–µ–Ω–∏—è, –ª–∏–±–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è —ç—Ç–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –≤–Ω–µ –∫–æ–Ω–≤–µ–π–µ—Ä–∞ (pipeline) –±—É–¥—É—Ç —Å–∏–ª—å–Ω–æ –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏—Ö –∏–∑–º–µ—Ä–µ–Ω–∏—è –≤ —Å–≤—è–∑–∫–µ —Å –¥—Ä—É–≥–∏–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏. –†–∞–∑–Ω–∞—è –≥–ª—É–±–∏–Ω–∞ –æ—á–µ—Ä–µ–¥–∏ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —ç—Ç–∞–ø–∞—Ö, —Ç–æ–ø–æ–ª–æ–≥–∏—è —Å–µ—Ç–∏ –∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è —ç–∫—Å–ø–æ–∑–∏—Ü–∏–∏ –∫–∞–º–µ—Ä—ã - –≤–æ—Ç –ª–∏—à—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–∏–º–µ—Ä–æ–≤ –≤–ª–∏—è–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –Ω–∞ –∫–æ–Ω–µ—á–Ω—É—é –∑–∞–¥–µ—Ä–∂–∫—É.

–ó–∞–¥–µ—Ä–∂–∫–∞ –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –≤ —Å–∏—Å—Ç–µ–º–µ –ø–æ—Ç–æ–∫–æ–≤–æ–π –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å—Å—è –∏ –≤–ª–∏—è—Ç—å –Ω–∞ –Ω–∏–∂–µ–ª–µ–∂–∞—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã. –î–∞–∂–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∑–∞—Ö–≤–∞—á–µ–Ω–Ω–æ–≥–æ –≤–∏–¥–µ–æ –≤–ª–∏—è–µ—Ç –Ω–∞ –∑–∞–¥–µ—Ä–∂–∫—É. –ù–∞–ø—Ä–∏–º–µ—Ä, —Ç—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞–º–Ω–æ–≥–æ –±–æ–ª—å—à–µ –±–∏—Ç–æ–≤ –¥–ª—è –≤—ã—Å–æ–∫–æ—á–∞—Å—Ç–æ—Ç–Ω—ã—Ö (high frequency) –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤—Ä–æ–¥–µ –≤–µ—Ç–≤–µ–π –¥–µ—Ä–µ–≤–∞ –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å –Ω–∏–∑–∫–æ—á–∞—Å—Ç–æ—Ç–Ω—ã–º–∏ –∫–∞–¥—Ä–∞–º–∏ –≤—Ä–æ–¥–µ —á–∏—Å—Ç–æ–≥–æ –≥–æ–ª—É–±–æ–≥–æ –Ω–µ–±–∞. –ö–∞–º–µ—Ä–∞ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —ç–∫—Å–ø–æ–∑–∏—Ü–∏–µ–π –º–æ–∂–µ—Ç –∑–∞—Ö–≤–∞—Ç—ã–≤–∞—Ç—å –∫–∞–¥—Ä –≥–æ—Ä–∞–∑–¥–æ –¥–æ–ª—å—à–µ –æ–∂–∏–¥–∞–µ–º—ã—Ö `33 –º—Å`, –¥–∞–∂–µ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ —á–∞—Å—Ç–æ—Ç—ã –∑–∞—Ö–≤–∞—Ç–∞ (capture rate) –≤ –∑–Ω–∞—á–µ–Ω–∏–µ `30 –∫–∞–¥—Ä–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É` (frames per second). –ü–µ—Ä–µ–¥–∞—á–∞ –ø–æ —Å–µ—Ç–∏, –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ —Å–æ—Ç–æ–≤–æ–π, —Ç–∞–∫–∂–µ –æ—á–µ–Ω—å –¥–∏–Ω–∞–º–∏—á–Ω–∞ –∏–∑-–∑–∞ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –º–µ–Ω—è—é—â–µ–≥–æ—Å—è —Å–ø—Ä–æ—Å–∞ (–Ω–∞ —Ä–µ—Å—É—Ä—Å—ã —Å–µ—Ç–∏). –ß–µ–º –±–æ–ª—å—à–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —Ç–µ–º –±–æ–ª—å—à–µ "—à—É–º–∞" –≤ —ç—Ñ–∏—Ä–µ. –ù–∞—à–∞ —Ñ–∏–∑–∏—á–µ—Å–∫–∞—è –ª–æ–∫–∞—Ü–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –∑–æ–Ω–µ —Å –ø–ª–æ—Ö–∏–º —Å–∏–≥–Ω–∞–ª–æ–º) –∏ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –¥—Ä—É–≥–∏—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤ —É–≤–µ–ª–∏—á–∏–≤–∞—é—Ç –ø–æ—Ç–µ—Ä—é –ø–∞–∫–µ—Ç–æ–≤ –∏ –∑–∞–¥–µ—Ä–∂–∫—É. –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –ø–∞–∫–µ—Ç–∞ –ø–æ —Å–µ—Ç–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ –∞–¥–∞–ø—Ç–µ—Ä `WiFi` –∏–ª–∏ `LTE-–º–æ–¥–µ–º`? –ï—Å–ª–∏ –ø–∞–∫–µ—Ç –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ—Å—Ç–∞–≤–ª–µ–Ω –Ω–µ–∑–∞–º–µ–¥–ª–∏—Ç–µ–ª—å–Ω–æ, –æ–Ω –ø–æ–º–µ—â–∞–µ—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥—å, —á–µ–º –±–æ–ª—å—à–µ –æ—á–µ—Ä–µ–¥—å, —Ç–µ–º –≤—ã—à–µ –∑–∞–¥–µ—Ä–∂–∫–∞.

#### –†—É—á–Ω–æ–µ –∏–∑–º–µ—Ä–µ–Ω–∏–µ –∫–æ–Ω–µ—á–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–∏

–ö–æ–≥–¥–∞ –º—ã –≥–æ–≤–æ—Ä–∏–º –æ –∫–æ–Ω–µ—á–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–µ, –º—ã –∏–º–µ–µ–º –≤ –≤–∏–¥—É –≤—Ä–µ–º—è –º–µ–∂–¥—É –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–µ–º —Å–æ–±—ã—Ç–∏—è –∏ –µ–≥–æ –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ–º, –Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –≤–∏–¥–µ–æ–∫–∞–¥—Ä–∞ –Ω–∞ —ç–∫—Ä–∞–Ω–µ.

```
EndToEndLatency = T(observe) - T(happen)
```

–ù–∞–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏—è –∏ –µ–≥–æ –≤—ã—á–∏—Ç–∞–Ω–∏–µ –∏–∑ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏—è. –û–¥–Ω–∞–∫–æ –ø—Ä–∏ —Ç–æ—á–Ω–æ—Å—Ç–∏ –≤ `–º—Å` –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ–π —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∑–∞–¥–∞—á–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤—Ä–µ–º–µ–Ω–∏. –ü–æ–ø—ã—Ç–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ –≤ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö —è–≤–ª—è—é—Ç—Å—è –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –±–µ—Å–ø–æ–ª–µ–∑–Ω—ã–º–∏, –ø–æ—Å–∫–æ–ª—å–∫—É –¥–∞–∂–µ –Ω–µ–±–æ–ª—å—à–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –Ω–µ–¥–æ—Å—Ç–æ–≤–µ—Ä–Ω–æ–º—É –∏–∑–º–µ—Ä–µ–Ω–∏—é –∑–∞–¥–µ—Ä–∂–∫–∏.

–ü—Ä–æ—Å—Ç–µ–π—à–∏–º —Ä–µ—à–µ–Ω–∏–µ–º –ø—Ä–æ–±–ª–µ–º—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —á–∞—Å–æ–≤ —è–≤–ª—è–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–¥–Ω–∏—Ö —á–∞—Å–æ–≤. –î–ª—è —ç—Ç–æ–≥–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –∏ –ø–æ–ª—É—á–∞—Ç–µ–ª—å –¥–æ–ª–∂–Ω—ã –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –æ–¥–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ –æ—Ç—Å—á–µ—Ç–∞.

–ü—Ä–µ–¥—Å—Ç–∞–≤–∏–º, —á—Ç–æ —É –Ω–∞—Å –µ—Å—Ç—å —Ç–∞–π–º–µ—Ä, –æ—Ç—Å—á–∏—Ç—ã–≤–∞—é—â–∏–π –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã. –ú—ã —Ö–æ—Ç–∏–º –∏–∑–º–µ—Ä–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É –≤ —Å–∏—Å—Ç–µ–º–µ, –≤ –∫–æ—Ç–æ—Ä–æ–π –Ω–∞—à —Ç–∞–π–º–µ—Ä —Ç—Ä–∞–Ω—Å–ª–∏—Ä—É–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω—ã–π —ç–∫—Ä–∞–Ω. –ù–∞–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± –∏–∑–º–µ—Ä–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –º–µ–∂–¥—É –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–µ–º —Å–æ–±—ã—Ç–∏—è –∏ –ø–æ—è–≤–ª–µ–Ω–∏–µ–º –Ω–∞ —ç–∫—Ä–∞–Ω–µ –≤–∏–¥–µ–æ –∫–∞–¥—Ä–∞ —Å–æ—Å—Ç–æ–∏—Ç –≤ —Å–ª–µ–¥—É—é—â–µ–º:

- —Ñ–∏–∫—Å–∏—Ä—É–µ–º –≤—Ä–µ–º—è –Ω–∞ —á–∞—Å–∞—Ö;
- –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤–∏–¥–µ–æ –ø–æ–ª—É—á–∞—Ç–µ–ª—é, –Ω–∞—Ö–æ–¥—è—â–µ–º—É—Å—è –≤ —Ç–æ–π –∂–µ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–π –ª–æ–∫–∞—Ü–∏–∏;
- —Ñ–∏–∫—Å–∏—Ä—É–µ–º –≤—Ä–µ–º—è –ø–æ—è–≤–ª–µ–Ω–∏—è –≤–∏–¥–µ–æ –Ω–∞ —ç–∫—Ä–∞–Ω–µ –ø–æ–ª—É—á–∞—Ç–µ–ª—è;
- –≤—ã—á–∏—Ç–∞–µ–º –æ–¥–Ω–æ –≤—Ä–µ–º—è –∏–∑ –¥—Ä—É–≥–æ–≥–æ.

–≠—Ç–æ —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± –∏–∑–º–µ—Ä–µ–Ω–∏—è –∫–æ–Ω–µ—á–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–∏. –û–Ω —É—á–∏—Ç—ã–≤–∞–µ—Ç –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –≤–ª–∏—è—é—â–∏–µ –Ω–∞ –∑–∞–¥–µ—Ä–∂–∫—É (–∫–∞–º–µ—Ä–∞, –∫–æ–¥–∏—Ä–æ–≤—â–∏–∫, —Å–µ—Ç—å, –¥–µ–∫–æ–¥–µ—Ä) –∏ –Ω–µ –ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é —á–∞—Å–æ–≤.

<img src="https://habrastorage.org/webt/pm/gp/53/pmgp53n6vkxzs0avbxnrzgrudms.png" />
<br />

<img src="https://habrastorage.org/webt/sp/z8/dm/spz8dm-ss7f2lfwaky2krrn-79i.png" />
<br />

–ù–∞ –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω–æ–º –≤—ã—à–µ —Ñ–æ—Ç–æ –∫–æ–Ω–µ—á–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç 101 –º—Å. –í—Ä–µ–º—è –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏—è —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç `10:16:02.761`, –∞ –≤—Ä–µ–º—è –µ–≥–æ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è - `10:16:02.862`.

#### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–º–µ—Ä–µ–Ω–∏–µ –∑–∞–¥–µ—Ä–∂–∫–∏

–í –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è (–º–∞–π 2021 –≥–æ–¥–∞) —Å—Ç–∞–Ω–¥–∞—Ä—Ç `WebRTC`, –ø–æ—Å–≤—è—â–µ–Ω–Ω—ã–π –∫–æ–Ω–µ—á–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–µ, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å—Ç–∞–¥–∏–∏ [–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –æ–±—Å—É–∂–¥–µ–Ω–∏—è](https://github.com/w3c/webrtc-stats/issues/537). `Firefox` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª –Ω–∞–±–æ—Ä `API` –ø–æ–≤–µ—Ä—Ö —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö `API` `WebRTC` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–∑–º–µ—Ä–µ–Ω–∏—è –∑–∞–¥–µ—Ä–∂–∫–∏. –û–¥–Ω–∞–∫–æ –¥–∞–ª–µ–µ –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –±–æ–ª–µ–µ –æ–±—â–∏–π —Å–ø–æ—Å–æ–±.

<img src="https://habrastorage.org/webt/my/nx/pl/mynxpl_zzvxkgzxiughg4ncbffa.png" />
<br />

–°—É—Ç—å –≤—Ä–µ–º–µ–Ω–∏ –ø—É—Ç–∏ (round-trip time, rtt): —è –æ—Ç–ø—Ä–∞–≤–ª—è—é —Ç–µ–±–µ –º–æ–µ –≤—Ä–µ–º—è `tR1`, –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –æ—Ç —Ç–µ–±—è `tR1` –æ–±—Ä–∞—Ç–Ω–æ —è —Ñ–∏–∫—Å–∏—Ä—É—é –≤—Ä–µ–º—è `tR2`, —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –≤—Ä–µ–º—è –ø—É—Ç–∏ —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç `tR1 - tR2`.

–ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –∫–∞–Ω–∞–ª–∞ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ –º–µ–∂–¥—É –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ–º –∏ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, `DataChannel`), –ø–æ–ª—É—á–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Å–º–æ–¥–µ–ª–∏—Ä–æ–≤–∞—Ç—å –º–æ–Ω–æ—Ç–æ–Ω–Ω—ã–µ —á–∞—Å—ã (monotonic clock) –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

1. –ü–æ–ª—É—á–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–æ —Å–≤–æ–∏–º –≤—Ä–µ–º–µ–Ω–µ–º `tR1`.
2. –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –ø–æ–ª—É—á–∞—Ç–µ–ª—è, –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç —Å–≤–æ–µ –≤—Ä–µ–º—è `tS1` –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–ø–∏—é `tR1` –∏ `tS1`, –∞ —Ç–∞–∫–∂–µ –≤—Ä–µ–º—è –≤–∏–¥–µ–æ—Ç—Ä–µ–∫–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è `tSV1`.
3. –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è, –ø–æ–ª—É—á–∞—Ç–µ–ª—å —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç —Å–≤–æ–µ –≤—Ä–µ–º—è `tR2` –∏ –≤—ã—á–∏—Å–ª—è–µ—Ç –≤—Ä–µ–º—è –ø—É—Ç–∏: `RTT = tR2 - tR1`.
4. –í—Ä–µ–º–µ–Ω–∏ –ø—É—Ç–∏ `RTT` –∏ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è `tS1` –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –º–æ–Ω–æ—Ç–æ–Ω–Ω—ã—Ö —á–∞—Å–æ–≤ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è. –¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –¥–ª—è `tR2` –±—É–¥–µ—Ç —Ä–∞–≤–Ω—è—Ç—å—Å—è `tS1` + –ø–æ–ª–æ–≤–∏–Ω–∞ –≤—Ä–µ–º–µ–Ω–∏ –ø—É—Ç–∏.
5. –í—Ä–µ–º–µ–Ω–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è `tS1` –≤–º–µ—Å—Ç–µ —Å –≤—Ä–µ–º–µ–Ω–µ–º –≤–∏–¥–µ–æ—Ç—Ä–µ–∫–∞ `tSV1` –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ –≤–∏–¥–µ–æ—Ç—Ä–µ–∫–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª—è —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º –≤–∏–¥–µ–æ—Ç—Ä–µ–∫–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è.

–ü–æ—Å–∫–æ–ª—å–∫—É –Ω–∞–º –∏–∑–≤–µ—Å—Ç–Ω–æ –≤—Ä–µ–º—è `tSV1`, –º—ã –º–æ–∂–µ–º –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ –≤—ã—á–∏—Å–ª–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º –≤—ã—á–∏—Ç–∞–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤–∏–¥–µ–æ–∫–∞–¥—Ä–∞ (`actual_video_time`) –∏–∑ –æ–∂–∏–¥–∞–µ–º–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏:

```
expected_video_time = tSV1 + time_since(tSV1)
latency = expected_video_time - actual_video_time
```

–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–æ–º —ç—Ç–æ–≥–æ –º–µ—Ç–æ–¥–∞ —è–≤–ª—è–µ—Ç—Å—è —Ç–æ, —á—Ç–æ –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∑–∞–¥–µ—Ä–∂–∫–∞ –∫–∞–º–µ—Ä—ã. –í –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ –≤–∏–¥–µ–æ—Å–∏—Å—Ç–µ–º –≤—Ä–µ–º—è –∑–∞—Ö–≤–∞—Ç–∞ –∫–∞–¥—Ä–∞ —Å—á–∏—Ç–∞–µ—Ç—Å—è –≤—Ä–µ–º–µ–Ω–µ–º –¥–æ—Å—Ç–∞–≤–∫–∏ –∫–∞–¥—Ä–∞ –∏–∑ –∫–∞–º–µ—Ä—ã –≤ –ø–∞–º—è—Ç—å, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è –ø–æ—Å–ª–µ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏—è –∑–∞–ø–∏—Å–∏.

__–ü—Ä–∏–º–µ—Ä –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –∑–∞–¥–µ—Ä–∂–∫–∏__

–í —Å–ª–µ–¥—É—é—â–µ–º –ø—Ä–∏–º–µ—Ä–µ –º—ã –æ—Ç–∫—Ä—ã–≤–∞–µ–º –∫–∞–Ω–∞–ª –¥–∞–Ω–Ω—ã—Ö `latency` –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –ø–æ–ª—É—á–∞—Ç–µ–ª—è –∏ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤—Ä–µ–º—è –º–æ–Ω–æ—Ç–æ–Ω–Ω–æ–≥–æ —Ç–∞–π–º–µ—Ä–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—é. –û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –æ—Ç–≤–µ—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ–º –≤ —Ñ–æ—Ä–º–∞—Ç–µ `JSON`, –∏ –ø–æ–ª—É—á–∞—Ç–µ–ª—å –≤—ã—á–∏—Å–ª—è–µ—Ç –∑–∞–¥–µ—Ä–∂–∫—É –Ω–∞ –æ—Å–Ω–æ–≤–∞–Ω–∏–∏ —ç—Ç–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è.

```json
{
    "received_time": 64714,       // –í—Ä–µ–º—è, –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–º, –∫–æ—Ç–æ—Ä–æ–µ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ–º
    "delay_since_received": 46,   // –í—Ä–µ–º—è, –ø—Ä–æ—à–µ–¥—à–µ–µ —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ `received_time`, –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ–º
    "local_clock": 1597366470336, // –¢–µ–∫—É—â–µ–µ –º–æ–Ω–æ—Ç–æ–Ω–Ω–æ–µ –≤—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è
    "track_times_msec": {
        "myvideo_track1": [
            13100,        // –í—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞ –≤–∏–¥–µ–æ–∫–∞–¥—Ä–∞ RTP (–≤ –º—Å)
            1597366470289 // –í—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞ –º–æ–Ω–æ—Ç–æ–Ω–Ω—ã—Ö —á–∞—Å–æ–≤ –≤–∏–¥–µ–æ–∫–∞–¥—Ä–∞
        ]
    }
}
```

–û—Ç–∫—Ä—ã–≤–∞–µ–º –∫–∞–Ω–∞–ª –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –ø–æ–ª—É—á–∞—Ç–µ–ª—è:

```javascript
dataChannel = peerConnection.createDataChannel('latency')
```

–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤—Ä–µ–º—è –ø–æ–ª—É—á–∞—Ç–µ–ª—è `tR1`. –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç `2 —Å–µ–∫—É–Ω–¥—ã`:

```javascript
setInterval(() => {
  const tR1 = Math.trunc(performance.now())
  dataChannel.send(String(tR1))
}, 2000)
```

–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—É—á–∞—Ç–µ–ª—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è:

```javascript
// –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ `event.data` - —ç—Ç–æ —Å—Ç—Ä–æ–∫–∞ —Ç–∏–ø–∞ '1234567'
const tR1 = event.data
const now = Math.trunc(performance.now())
const tSV1 = 42000 // –í—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Ñ—Ä–µ–π–º–∞ RTP, –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–Ω–∞—è –≤ –º—Å
const tS1 = 1597366470289 // –í—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞ –º–æ–Ω–æ—Ç–æ–Ω–Ω—ã—Ö —á–∞—Å–æ–≤ —Ç–µ–∫—É—â–µ–≥–æ —Ñ—Ä–µ–π–º–∞
const msg = {
  "received_time": tR1,
  "delay_since_received": 0,
  "local_clock": now,
  "track_times_msec": {
    "myvideo_track1": [tSV1, tS1]
  }
}
dataChannel.send(JSON.stringify(msg))
```

–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –ø–æ–ª—É—á–∞—Ç–µ–ª—è, –≤—ã—á–∏—Å–ª—è–µ–º –∑–∞–¥–µ—Ä–∂–∫—É –∏ –≤—ã–≤–æ–¥–∏–º –µ–µ –≤ –∫–æ–Ω—Å–æ–ª—å:

```javascript
const tR2 = Math.trunc(performance.now())
const fromSender = JSON.parse(event.data)
const tR1 = fromSender['']
const delay = fromSender[''] // –°–∫–æ–ª—å–∫–æ –ø—Ä–æ—à–ª–æ –≤—Ä–µ–º–µ–Ω–∏ –º–µ–∂–¥—É –ø–æ–ª—É—á–µ–Ω–∏–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ–º –∏ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –æ—Ç–≤–µ—Ç–∞
const senderTimeFromResponse = fromSender['']
const rtt = tR2 - delay - tR1
const networkLatency = rtt / 2
const senderTime = (senderTimeFromResponse + delay + networkLatency)
const video$ = document.querySelector('video')
video$.requestVideoFrameCallback((now, framemeta) => {
  // –í—ã—á–∏—Å–ª—è–µ–º —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è
  const delaySinceVideoCallbackRequested = now - tR2
  senderTime += delaySinceVideoCallbackRequested
  const [tSV1, tS1] = Object.entries(fromSender[''])[0][1]
  const timeSinceLastKnownFrame = senderTime - tS1
  const expectedVideoTimeMsec = tSV1 + timeSinceLastKnownFrame
  const actualVideoTimeMsec = Math.trunc(framemeta.rtpTimestamp / 90) // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤—Ä–µ–º—è RTP (90000) –≤ –º—Å
  const latency = expectedVideoTimeMsec - actualVideoTimeMsec
  console.log('latency', latency, 'ms')
})
```

__–†–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –≤–∏–¥–µ–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ__

`HTMLVideoElement.requestVideoFrameCallback()` –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –ø–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–∏ —Ñ—Ä–µ–π–º–∞ –¥–ª—è –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏.

–î–æ –Ω–µ–¥–∞–≤–Ω–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ (–º–∞–π 2020 –≥–æ–¥–∞) –±—ã–ª–æ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç–æ–≤–µ—Ä–Ω–æ–µ –≤—Ä–µ–º—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤–∏–¥–µ–æ–∫–∞–¥—Ä–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ. –î–∞–Ω–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–∞–ª–∞—Å—å —á–µ—Ä–µ–∑ `HTMLVideoElement.currentTime`, –Ω–æ –Ω–µ –¥–∞–≤–∞–ª–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏. –í –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç `W3C` [HTMLVideoElement.requestVideoFrameCallback()](https://wicg.github.io/video-rvfc/), –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –ø–æ–ª—É—á–∞—Ç—å —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –≤–∏–¥–µ–æ–∫–∞–¥—Ä–∞, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è `Chrome` –∏ `Firefox`. –ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ç–æ, —á—Ç–æ —ç—Ç–æ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–∞–∂–µ—Ç—Å—è —Ç—Ä–∏–≤–∏–∞–ª—å–Ω—ã–º, –æ–Ω–æ —Å–¥–µ–ª–∞–ª–æ –≤–æ–∑–º–æ–∂–Ω—ã–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö, —Ç—Ä–µ–±—É—é—â–∏—Ö —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∞—É–¥–∏–æ –∏ –≤–∏–¥–µ–æ. –§—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ –≤–∫–ª—é—á–∞–µ—Ç –ø–æ–ª–µ `rtpTimestamp` - –≤—Ä–µ–º–µ–Ω–Ω—É—é –º–µ—Ç–∫—É `RTP`, —Å–≤—è–∑–∞–Ω–Ω—É—é —Å —Ç–µ–∫—É—â–∏–º –≤–∏–¥–µ–æ–∫–∞–¥—Ä–æ–º.

#### –û—Ç–ª–∞–¥–∫–∞ –∑–∞–¥–µ—Ä–∂–∫–∏

–ü–æ—Å–∫–æ–ª—å–∫—É –æ—Ç–ª–∞–¥–∫–∞ –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –æ–∑–Ω–∞—á–∞–µ—Ç –∏–∑–º–µ—Ä–µ–Ω–∏–µ –∑–∞–¥–µ—Ä–∂–∫–∏, –æ–±—â–µ–µ –ø—Ä–∞–≤–∏–ª–æ —Ç–∞–∫–æ–≤–æ: —É–ø—Ä–æ—â–∞–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫—É –¥–æ –º–∏–Ω–∏–º—É–º–∞ –ø—Ä–∏ —É—Å–ª–æ–≤–∏–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è (–≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç–∏) –ø—Ä–æ–±–ª–µ–º—ã. –ß–µ–º –±–æ–ª—å—à–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –º—ã —É–¥–∞–ª–∏–º, —Ç–µ–º –ø—Ä–æ—â–µ –±—É–¥–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫–∞–∫–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤—ã–∑—ã–≤–∞–µ—Ç –∑–∞–¥–µ—Ä–∂–∫—É.

__–ó–∞–¥–µ—Ä–∂–∫–∞ –∫–∞–º–µ—Ä—ã__

–í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∫–∞–º–µ—Ä—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–∞—è –µ–π –∑–∞–¥–µ—Ä–∂–∫–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞–∑–Ω–æ–π. –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–≤—Ç–æ—ç–∫—Å–ø–æ–∑–∏—Ü–∏–∏, –∞–≤—Ç–æ—Ñ–æ–∫—É—Å–∞ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞ –±–µ–ª–æ–≥–æ. –í—Å–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∑–∞—Ö–≤–∞—á–µ–Ω–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –µ–≥–æ –ø–µ—Ä–µ–¥–∞—á–µ–π –≤ —Å—Ç–µ–∫ `WebRTC`.

–ï—Å–ª–∏ —É –≤–∞—Å `Linux`, –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –∫–∞–º–µ—Ä—ã –º–æ–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∫–æ–º–∞–Ω–¥–æ–π `v4l2-ctl`:

```bash
## –û—Ç–∫–ª—é—á–∞–µ–º –∞–≤—Ç–æ—Ñ–æ–∫—É—Å
v4l2-ctl -d /dev/video0 -c focus_auto=0
## –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–æ–∫—É—Å –≤ –∑–Ω–∞—á–µ–Ω–∏–µ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç–∏
v4l2-ctl -d /dev/video0 -c focus_absolute=0
```

–¢–∞–∫–∂–µ –º–æ–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º `guvcview` –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∫–∞–º–µ—Ä—ã.

__–ó–∞–¥–µ—Ä–∂–∫–∞ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è__

–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∫–æ–¥–∏—Ä–æ–≤—â–∏–∫–æ–≤ –±—É—Ñ–µ—Ä–∏–∑—É—é—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–∞–¥—Ä—ã –ø–µ—Ä–µ–¥ –∏—Ö —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º. –ò—Ö –≥–ª–∞–≤–Ω—ã–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç - –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –∫–∞—á–µ—Å—Ç–≤–æ–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ –±–∏—Ç—Ä–µ–π—Ç–æ–º. –ú–Ω–æ–≥–æ–ø—Ä–æ—Ö–æ–¥–Ω–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ (multipass encoding) - —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä –ø—Ä–µ–Ω–µ–±—Ä–µ–∂–µ–Ω–∏—è –∫–æ–¥–∏—Ä–æ–≤—â–∏–∫–æ–º –∫–æ–Ω–µ—á–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π. –ù–∞ –ø–µ—Ä–≤–æ–º –ø—Ä–æ—Ö–æ–¥–µ –∫–æ–¥–∏—Ä–æ–≤—â–∏–∫ "–ø—Ä–æ–≥–ª–∞—Ç—ã–≤–∞–µ—Ç" –≤–∏–¥–µ–æ —Ü–µ–ª–∏–∫–æ–º –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ –∫–∞–¥—Ä–æ–≤.

–û–¥–Ω–∞–∫–æ –ø—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –º–æ–∂–Ω–æ –¥–æ–±–∏—Ç—å—Å—è —É–º–µ–Ω—å—à–µ–Ω–∏—è –ø–æ–¥–∫–∞–¥—Ä–æ–≤–æ–π (sub-frame) –∑–∞–¥–µ—Ä–∂–∫–∏. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à –∫–æ–¥–∏—Ä–æ–≤—â–∏–∫ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —á—Ä–µ–∑–º–µ—Ä–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç—Ç–∞–ª–æ–Ω–Ω—ã—Ö –∫–∞–¥—Ä–æ–≤ (reference frames) –∏ –Ω–µ –ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –Ω–∞ B-–∫–∞–¥—Ä—ã (B-frames). –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫–æ–¥–µ–∫–æ–≤ –±—É–¥–µ—Ç —Ä–∞–∑–Ω—ã–º–∏, –Ω–æ –¥–ª—è `x264` —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `tune=zerolatency` –∏ `profile=baseline` –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –∑–∞–¥–µ—Ä–∂–∫–∏.

__–°–µ—Ç–µ–≤–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞__

–°–µ—Ç–µ–≤–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ - —ç—Ç–æ —Ç–æ, —Å —á–µ–º –ø–æ—á—Ç–∏ –Ω–∏—á–µ–≥–æ –Ω–µ–ª—å–∑—è —Å–¥–µ–ª–∞—Ç—å, –∫—Ä–æ–º–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–µ—Ç–∏. –°–µ—Ç–µ–≤–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ - —ç—Ç–æ –∫–∞–∫ –ø–æ–≥–æ–¥–∞: –º—ã –Ω–µ –º–æ–∂–µ–º –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–æ–∂–¥—å, –Ω–æ –º–æ–∂–µ–º –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–æ–≥–Ω–æ–∑ –∏ –≤–∑—è—Ç—å —Å —Å–æ–±–æ–π –∑–æ–Ω—Ç. `WebRTC` –∏–∑–º–µ—Ä—è–µ—Ç —Å–µ—Ç–µ–≤—ã–µ —É—Å–ª–æ–≤–∏—è —Å —Ç–æ—á–Ω–æ—Å—Ç—å—é –¥–æ –º—Å. –ò –ø—Ä–∏ —ç—Ç–æ–º —Å–∞–º—ã–µ –≤–∞–∂–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏:

- –≤—Ä–µ–º—è –ø—É—Ç–∏;
- –ø–æ—Ç–µ—Ä—è –∏ —Ä–µ—Ç—Ä–∞–Ω—Å–ª—è—Ü–∏—è –ø–∞–∫–µ—Ç–æ–≤.

__–í—Ä–µ–º—è –ø—É—Ç–∏__

–°—Ç–µ–∫ `WebRTC` –∏–º–µ–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π [–º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è –∏–∑–º–µ—Ä–µ–Ω–∏—è —Å–µ—Ç–µ–≤–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –ø—É—Ç–∏ (RTT)](https://www.w3.org/TR/webrtc-stats/#dom-rtcremoteinboundrtpstreamstats-roundtriptime). –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ö–æ—Ä–æ—à–µ–µ –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ –∑–∞–¥–µ—Ä–∂–∫–∏ - —ç—Ç–æ –ø–æ–ª–æ–≤–∏–Ω–∞ `RTT`. –ú–µ—Ö–∞–Ω–∏–∑–º –∏—Å—Ö–æ–¥–∏—Ç –∏–∑ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏—è, —á—Ç–æ –æ—Ç–ø—Ä–∞–≤–∫–∞ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤ –∑–∞–Ω–∏–º–∞–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ –≤—Ä–µ–º—è, —á—Ç–æ –Ω–µ –≤—Å–µ–≥–¥–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. `RTT` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –Ω–∏–∂–Ω—é—é –≥—Ä–∞–Ω–∏—Ü—É –∫–æ–Ω–µ—á–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–∏. –ù–∞—à–∏ –≤–∏–¥–µ–æ–∫–∞–¥—Ä—ã –Ω–µ –º–æ–≥—É—Ç –¥–æ—Å—Ç–∏—á—å –ø–æ–ª—É—á–∞—Ç–µ–ª—è –±—ã—Å—Ç—Ä–µ–µ, —á–µ–º –∑–∞ `RTT / 2`, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ç–æ–≥–æ, –Ω–∞—Å–∫–æ–ª—å–∫–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –Ω–∞—à–∞ –∫–∞–º–µ—Ä–∞ –∏ –∫–æ–Ω–≤–µ–π–µ—Ä –∫–æ–¥–∏—Ä–æ–≤—â–∏–∫–∞.

–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º `RTT` –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –ø–∞–∫–µ—Ç–∞—Ö `RTCP`, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è –æ—Ç—á–µ—Ç–∞–º–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è/–ø–æ–ª—É—á–∞—Ç–µ–ª—è (sender/receiver reports). –û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –ø–µ—Ä–µ–¥–∞–µ—Ç —Å–≤–æ–µ –≤—Ä–µ–º—è –ø–æ–ª—É—á–∞—Ç–µ–ª—é, –ø–æ–ª—É—á–∞—Ç–µ–ª—å –æ—Ç–≤–µ—á–∞–µ—Ç —Ç–µ–º –∂–µ –≤—Ä–µ–º–µ–Ω–µ–º. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—é –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—Ä–µ–º–µ–Ω–∏, –∫–æ—Ç–æ—Ä–æ–µ –∑–∞–Ω–∏–º–∞–µ—Ç –ø—É—Ç—å –ø–∞–∫–µ—Ç–∞ —Ç—É–¥–∞ –∏ –æ–±—Ä–∞—Ç–Ω–æ.

__–ü–æ—Ç–µ—Ä—è –∏ —Ä–µ—Ç—Ä–∞–Ω—Å–ª—è—Ü–∏—è –ø–∞–∫–µ—Ç–æ–≤__

–ü—Ä–æ—Ç–æ–∫–æ–ª—ã `RTP` –∏ `RTCP` –æ—Å–Ω–æ–≤–∞–Ω—ã –Ω–∞ `UDP`, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≥–∞—Ä–∞–Ω—Ç–∏–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ—Ä—è–¥–∫–∞, –Ω–∞–¥–µ–∂–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏ –ø–∞–∫–µ—Ç–æ–≤ –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –¥—É–±–ª–∏–∫–∞—Ç–æ–≤. –í—Å–µ —ç—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –∏ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö `WebRTC-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö`. –ü—Ä–æ—Å—Ç—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–µ–∫–æ–¥–µ—Ä–æ–≤ –æ–∂–∏–¥–∞—é—Ç –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö –∫–∞–¥—Ä–æ–≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è –µ–≥–æ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è. –í —Å–ª—É—á–∞–µ –ø–æ—Ç–µ—Ä–∏ –ø–∞–∫–µ—Ç–æ–≤ P-–∫–∞–¥—Ä–∞ (P-frame) –º–æ–≥—É—Ç –ø–æ—è–≤–∏—Ç—å—Å—è —Ä–∞–∑–ª–∏—á–Ω—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è. –ï—Å–ª–∏ –ø–æ—Ç–µ—Ä—è–Ω—ã –ø–∞–∫–µ—Ç—ã I-–∫–∞–¥—Ä–∞ (I-frame), –≤—Å–µ –∑–∞–≤–∏—Å–∏–º—ã–µ –∫–∞–¥—Ä—ã –ø–æ–ª—É—á–∞—Ç —Ç—è–∂–µ–ª—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –∏–ª–∏ —Å–æ–≤—Å–µ–º –Ω–µ –±—É–¥—É—Ç –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω—ã. –≠—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ "–∑–∞–≤–∏—Å–∞–Ω–∏—é" –≤–∏–¥–µ–æ –Ω–∞ –∫–∞–∫–æ–µ-—Ç–æ –≤—Ä–µ–º—è.

–î–ª—è –ø—Ä–µ–æ–¥–æ–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∞–Ω–∏—è –≤–∏–¥–µ–æ –∏–ª–∏ –ø–æ—è–≤–ª–µ–Ω–∏—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è `WebRTC` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è —Å –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–º–∏ –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—è–º–∏ (Negative Acknowledgement, NACK). –ö–æ–≥–¥–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª—å –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç –æ–∂–∏–¥–∞–µ–º—ã–π –ø–∞–∫–µ—Ç `RTP`, –æ–Ω –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—é —Å–æ–æ–±—â–µ–Ω–∏–µ `NACK` –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–µ–¥–æ—Å—Ç–∞—é—â–µ–≥–æ –ø–∞–∫–µ—Ç–∞. –ü–æ–ª—É—á–∞—Ç–µ–ª—å –∂–¥–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–∞–∫–µ—Ç–∞. –¢–∞–∫–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –∑–∞–¥–µ—Ä–∂–∫—É. –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –∏ –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ `NACK` –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–ª—è [nackCount](https://www.w3.org/TR/webrtc-stats/#dom-rtcoutboundrtpstreamstats-nackcount) –∏—Å—Ö–æ–¥—è—â–µ–≥–æ –ø–æ—Ç–æ–∫–∞ –∏ [nackCount](https://www.w3.org/TR/webrtc-stats/#dom-rtcinboundrtpstreamstats-nackcount) –≤—Ö–æ–¥—è—â–µ–≥–æ –ø–æ—Ç–æ–∫–∞.

–ì—Ä–∞—Ñ—ã –≤—Ö–æ–¥—è—â–∏—Ö –∏ –∏—Å—Ö–æ–¥—è—â–∏—Ö `nackCount` –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `webrtc-internals`. –ï—Å–ª–∏ –º—ã –≤–∏–¥–∏–º, —á—Ç–æ `nackCount` —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è, –∑–Ω–∞—á–∏—Ç, –∏–º–µ–µ—Ç –º–µ—Å—Ç–æ –≤—ã—Å–æ–∫–∞—è –ø–æ—Ç–µ—Ä—è –ø–∞–∫–µ—Ç–æ–≤, –∏ —Å—Ç–µ–∫ `WebRTC` –¥–µ–ª–∞–µ—Ç –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ–µ –¥–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –≤–∏–¥–µ–æ –∏–ª–∏ –∞—É–¥–∏–æ.

–ü—Ä–∏ –≤—ã—Å–æ–∫–æ–π –ø–æ—Ç–µ—Ä–µ –ø–∞–∫–µ—Ç–æ–≤, –∫–æ–≥–¥–∞ –¥–µ–∫–æ–¥–µ—Ä –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–ª–∏ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–≤–∏—Å–∏–º—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –ø–æ–ª–Ω–æ–π –ø–æ—Ç–µ—Ä–µ I-–∫–∞–¥—Ä–∞, –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ P-–∫–∞–¥—Ä—ã –Ω–µ –¥–µ–∫–æ–¥–∏—Ä—É—é—Ç—Å—è. –ü–æ–ª—É—á–∞—Ç–µ–ª—å –ø—ã—Ç–∞–µ—Ç—Å—è —Å–º—è–≥—á–∏—Ç—å —ç—Ç–æ –ø—É—Ç–µ–º –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è-–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –ø–æ—Ç–µ—Ä–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (Picture Loss Indicator, PLI). –ö–æ–≥–¥–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç `PLI`, –æ–Ω –ø–æ–≤—Ç–æ—Ä–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–π I-–∫–∞–¥—Ä. I-–∫–∞–¥—Ä—ã, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, –±–æ–ª—å—à–µ P-–∫–∞–¥—Ä–æ–≤ –ø–æ —Ä–∞–∑–º–µ—Ä—É. –≠—Ç–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞–∫–µ—Ç–æ–≤ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏. –ö–∞–∫ –∏ –≤ —Å–ª—É—á–∞–µ —Å `NACK`, –ø–æ–ª—É—á–∞—Ç–µ–ª—å –∂–¥–µ—Ç –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ I-–∫–∞–¥—Ä–∞, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —É–≤–µ–ª–∏—á–µ–Ω–∏—é –∑–∞–¥–µ—Ä–∂–∫–∏.

–°–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è `pliCount` –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `webrtc-internals`. –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—è —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –º–µ–Ω—å—à–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏–º—ã—Ö –¥–µ–∫–æ–¥–µ—Ä–æ–º –∫–∞–¥—Ä–æ–≤ –∏–ª–∏ –≤–∫–ª—é—á–∏—Ç–µ –±–æ–ª–µ–µ –ª–æ—è–ª—å–Ω—ã–π –∫ –æ—à–∏–±–∫–∞–º —Ä–µ–∂–∏–º.

__–ó–∞–¥–µ—Ä–∂–∫–∞ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –ø–æ–ª—É—á–∞—Ç–µ–ª—è__

–ó–∞–¥–µ—Ä–∂–∫–∞ —Ç–∞–∫–∂–µ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –ø—Ä–∏–±—ã—Ç–∏–∏ –ø–∞–∫–µ—Ç–æ–≤ –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ. –ï—Å–ª–∏ –Ω–∏–∂–Ω—è—è —á–∞—Å—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–∏–±—ã–≤–∞–µ—Ç —Ä–∞–Ω—å—à–µ –≤–µ—Ä—Ö–Ω–µ–π, –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –±—É–¥–µ—Ç –∑–∞–Ω–∏–º–∞—Ç—å—Å—è —á—É—Ç—å –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏, —á–µ–º –∫–æ–≥–¥–∞ —á–∞—Å—Ç–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–∏–±—ã–≤–∞—é—Ç –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ. –ú—ã –≥–æ–≤–æ—Ä–∏–ª–∏ –æ–± —ç—Ç–æ–º –≤ —Ä–∞–∑–¥–µ–ª–µ, –ø–æ—Å–≤—è—â–µ–Ω–Ω–æ–º –¥–∂–∏—Ç—Ç–µ—Ä—É.

–í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –º–µ—Ç—Ä–∏–∫–∞ [jitterBufferDelay](https://www.w3.org/TR/webrtc-stats/#dom-rtcinboundrtpstreamstats-jitterbufferdelay) –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ –¥–æ–ª–≥–æ –∫–∞–¥—Ä –Ω–∞—Ö–æ–¥–∏–ª—Å—è –≤ –±—É—Ñ–µ—Ä–µ –ø–æ–ª—É—á–∞—Ç–µ–ª—è, –æ–∂–∏–¥–∞—è –ø—Ä–∏–±—ã—Ç–∏—è –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö –ø–∞–∫–µ—Ç–æ–≤, –ø–µ—Ä–µ–¥ –µ–≥–æ –ø–µ—Ä–µ–¥–∞—á–µ–π –¥–µ–∫–æ–¥–µ—Ä—É –¥–ª—è —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏.
